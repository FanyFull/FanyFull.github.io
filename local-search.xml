<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>一次关于博客物理搬迁的记录</title>
    <link href="/2023/11/11/%E4%B8%80%E6%AC%A1%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2%E7%89%A9%E7%90%86%E6%90%AC%E8%BF%81%E7%9A%84%E8%AE%B0%E5%BD%95/"/>
    <url>/2023/11/11/%E4%B8%80%E6%AC%A1%E5%85%B3%E4%BA%8E%E5%8D%9A%E5%AE%A2%E7%89%A9%E7%90%86%E6%90%AC%E8%BF%81%E7%9A%84%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>这一个博客似乎是因为我重装了 manjaro的系统之后，因为种种原因，没有去重新配置写博客的这样一个设置，好吧，其实是我的🏓打得太多了，时间不够用，也是因为潜意识里面的怕麻烦的心理在作祟。实际呢，其实是一点都不麻烦的，甚至不要半个小时就可以解决。</p><p>然后，最近因为已经工作的缘故，所以，时时刻刻、所有的时间都可以说是扑在了计算机上面，因此，麻烦什么的，就不可以再说了。妈的，有人在另一种场景和我说，你怎么能嫌麻烦呢？我才不嫌麻烦好吧。这又涉及到了一些夏虫的论题。不谈也罢。</p><p>好吧，说正事儿。这里我是直接把以前的备份的 <code>_config.yml</code>和 <code>_config_fluid.yml</code> 以及 source 目录，以及 scaffolds目录直接搬运过来了，所以，其实到这里就差不多了。安装好相关的包裹之后，就可以<code>hexo g</code> 然后 <code>hexo s</code> 看看效果了。</p><p>好吧，以后在这台 pc 上遇到的问题就在本机上记录就好了。</p><p>剩下的事情，就是<strong>写写写</strong>了。就像村上的舞舞舞一样。</p><h2 id="遇到的问题">遇到的问题</h2><p>一开始，需要安装 hexo-cli，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">sudo npm install -g hexo-cli<br></code></pre></td></tr></table></figure><p>然后，我因为是使用 hexo-cli 主题，并且，是使用 mathjax渲染数学公式，所以，需要安装如下包，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">yay -S pandoc<br></code></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm uninstall hexo-renderer-marked --save<br>npm install hexo-renderer-pandoc --save<br></code></pre></td></tr></table></figure><p>这个，可以见文档<ahref="https://hexo.fluid-dev.com/docs/guide/#latex-%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F">这里</a>的描述。</p><p><code>hexo d</code> 不生效的问题，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ERROR Deployer not found: git<br></code></pre></td></tr></table></figure><p>这个其实是没有安装 <code>hexo-deployer-git</code>的缘故，上一次配置博客的时间太古老了，我都忘记了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>记录</tag>
      
      <tag>日常</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode 配置 C++ 单文件运行的方式</title>
    <link href="/2022/09/22/VSCode-%E9%85%8D%E7%BD%AE-C-%E5%8D%95%E6%96%87%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%9A%84%E6%96%B9%E5%BC%8F/"/>
    <url>/2022/09/22/VSCode-%E9%85%8D%E7%BD%AE-C-%E5%8D%95%E6%96%87%E4%BB%B6%E8%BF%90%E8%A1%8C%E7%9A%84%E6%96%B9%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>好久没有在这个博客据点写博客了。</p><p>深夜，不方便打扰室友休息，所以就来到阳台，把移门关上，独自坐在椅子上泡脚，敲电脑。顺便感受一下窗外的凉意。</p><p>因为是在六楼，之前是到那个楼梯顶部的小区域，不过，那个地方的灯光不太方便。宿舍阳台的话，从卫生间可以开出一条小缝，正好光亮可以照过来，这也算是当时为了性价比而舍弃了这台ThinkPad 的键盘背光的一个痛点吧。</p><p>好吧，说回这篇记录的重点啦。</p><p>说起来，感觉最适合这个单文件运行 C++ 的编辑器，还得是 VSCode 呀。</p><p>配合 multi-command 插件，直接修改 <code>Ctrl+F5</code>的默认行为，一气呵成。</p><p>编写 <code>run.ps1</code> 脚本，powershell脚本，没什么好说的，查一查文档，把一堆命令捆在一起运行罢了，</p><figure class="highlight ps1"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs ps1"><span class="hljs-variable">$filename</span>=<span class="hljs-variable">$args</span>[<span class="hljs-number">0</span>]<br><span class="hljs-variable">$start</span>=<span class="hljs-variable">$filename</span>.LastIndexOf(<span class="hljs-string">&quot;\&quot;</span>) + <span class="hljs-number">1</span><br><span class="hljs-variable">$strLength</span>=<span class="hljs-variable">$filename</span>.Length - <span class="hljs-variable">$start</span> - <span class="hljs-number">4</span><br><span class="hljs-variable">$outputName</span>=<span class="hljs-variable">$filename</span>.Substring(<span class="hljs-variable">$start</span>, <span class="hljs-variable">$strLength</span>)<br><span class="hljs-variable">$exeName</span>=<span class="hljs-variable">$outputName</span>+<span class="hljs-string">&quot;.exe&quot;</span><br><span class="hljs-comment"># echo $filename</span><br><span class="hljs-comment"># echo $exeName</span><br>g++ <span class="hljs-variable">$filename</span> <span class="hljs-literal">-o</span> .\bin\<span class="hljs-variable">$outputName</span><br><span class="hljs-comment"># echo &#x27;compile completed and start execute:&#x27;</span><br>&amp; .\bin\<span class="hljs-variable">$exeName</span><br></code></pre></td></tr></table></figure><p>这个要在项目目录下建立一个 <code>bin</code> 目录来存放可执行文件。C++的源文件随便放，命令行的运行目录就在默认的项目的根目录就可以了。</p><p>然后，定制 <code>Ctrl + F5</code> 快捷键，</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;key&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ctrl+f5&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;extension.multiCommand.execute&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;when&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;editorTextFocus &amp;&amp; editorLangId == &#x27;cpp&#x27;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;sequence&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;workbench.action.files.saveAll&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;workbench.action.terminal.sendSequence&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;clear \u000D&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;workbench.action.terminal.focus&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-punctuation">&#123;</span><br>                <span class="hljs-attr">&quot;command&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;workbench.action.terminal.sendSequence&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>                    <span class="hljs-attr">&quot;text&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./run.ps1 $&#123;file&#125; \u000D&quot;</span><br>                <span class="hljs-punctuation">&#125;</span><br>            <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;workbench.action.focusActiveEditorGroup&quot;</span><br>        <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>最后，别忘了安装 multi-command 这个插件就可以了。</p><p>测试走一个，</p><p><img src="https://i.imgur.com/e0KIFop.png" /></p><p>这个用起来感觉还是要方便简洁一点的，其实吧，这个单文件运行用来熟悉C++ 语法和写 leetcode 的题目是很方便的哦。</p>]]></content>
    
    
    
    <tags>
      
      <tag>VSCode</tag>
      
      <tag>Cpp</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>leetcode 20</title>
    <link href="/2022/07/31/leetcode-20/"/>
    <url>/2022/07/31/leetcode-20/</url>
    
    <content type="html"><![CDATA[<p>This problem is old sport. Hehe.</p><p>The draft paper:</p><p><img src="https://i.imgur.com/qHOmGa2.jpg" /></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Stack;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(String s)</span> &#123;<br>        Stack&lt;Character&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; s.length(); i++) &#123;<br>            <span class="hljs-keyword">if</span> (s.charAt(i) == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;)&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.charAt(i) == <span class="hljs-string">&#x27;[&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;]&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (s.charAt(i) == <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;&#125;&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!s.isEmpty() &amp;&amp; s.charAt(i) == stack.peek()) &#123;<br>                stack.pop();<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stack.isEmpty();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">solu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Solution</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;([&#123;&#125;])[]()&quot;</span>;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> solu.isValid(s);<br>        System.out.println(res);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>leetcode 225</title>
    <link href="/2022/07/31/leetcode-225/"/>
    <url>/2022/07/31/leetcode-225/</url>
    
    <content type="html"><![CDATA[<p>The reverse of leetcode 232. This time is using two stacks tosimulate the operations of Queue.</p><p>We can also use just one stack to get the work done, however, Ithink, simple is the best, isn't it?</p><p>The draft paper:</p><p><img src="https://i.imgur.com/7JeW9Uf.jpg" /></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Stack;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyQueue</span> &#123;<br>    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stackIn;<br>    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stackOut;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyQueue</span><span class="hljs-params">()</span> &#123;<br>        stackIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        stackOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        stackIn.push(x);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (stackOut.empty()) &#123;<br>            dumpStackInToOut();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stackOut.pop();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (stackOut.empty()) &#123;<br>            dumpStackInToOut();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stackOut.peek();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">empty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> stackIn.empty() &amp;&amp; stackOut.empty();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dumpStackInToOut</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (!stackIn.isEmpty()) &#123;<br>            stackOut.push(stackIn.pop());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyQueue</span>();<br>        queue.push(<span class="hljs-number">1</span>);<br>        queue.push(<span class="hljs-number">2</span>);<br>        System.out.println(queue.pop());<br>        queue.push(<span class="hljs-number">3</span>);<br>        queue.push(<span class="hljs-number">4</span>);<br>        System.out.println(queue.pop());<br>        System.out.println(queue.pop());<br>        System.out.println(queue.pop());<br>        System.out.println(queue.empty());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>leetcode 232</title>
    <link href="/2022/07/31/leetcode-232/"/>
    <url>/2022/07/31/leetcode-232/</url>
    
    <content type="html"><![CDATA[<p>Use Stack to simulate Queue. Have a bit of interest.</p><p>In detail, I use two queues to simulate the operations of Stack.</p><p>More details are following draft paper:</p><p><img src="https://i.imgur.com/d55Jvea.jpg" /></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.Stack;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MyQueue</span> &#123;<br>    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stackIn;<br>    <span class="hljs-keyword">private</span> Stack&lt;Integer&gt; stackOut;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MyQueue</span><span class="hljs-params">()</span> &#123;<br>        stackIn = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>        stackOut = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">push</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        stackIn.push(x);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">pop</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (stackOut.empty()) &#123;<br>            dumpStackInToOut();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stackOut.pop();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">peek</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (stackOut.empty()) &#123;<br>            dumpStackInToOut();<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stackOut.peek();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">empty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> stackIn.empty() &amp;&amp; stackOut.empty();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">dumpStackInToOut</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">while</span> (!stackIn.isEmpty()) &#123;<br>            stackOut.push(stackIn.pop());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">queue</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">MyQueue</span>();<br>        queue.push(<span class="hljs-number">1</span>);<br>        queue.push(<span class="hljs-number">2</span>);<br>        System.out.println(queue.pop());<br>        queue.push(<span class="hljs-number">3</span>);<br>        queue.push(<span class="hljs-number">4</span>);<br>        System.out.println(queue.pop());<br>        System.out.println(queue.pop());<br>        System.out.println(queue.pop());<br>        System.out.println(queue.empty());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>nvim 设置光标样式</title>
    <link href="/2022/07/31/nvim-%E8%AE%BE%E7%BD%AE%E5%85%89%E6%A0%87%E6%A0%B7%E5%BC%8F/"/>
    <url>/2022/07/31/nvim-%E8%AE%BE%E7%BD%AE%E5%85%89%E6%A0%87%E6%A0%B7%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>我想要的样式是在 insert 模式下是 line，然后在其他模式下是block，因此，设置语句如下</p><p><img src="https://i.imgur.com/b6qr7OU.png" /></p><p>:setguicursor=n-v-c-sm:block,i-ci-ve:ver25,r-cr-o:hor20,a:blinkon100</p>]]></content>
    
    
    
    <tags>
      
      <tag>neovim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Neovim 光标不闪烁，连带会导致 Windows Terminal 的光标也停止闪烁</title>
    <link href="/2022/07/31/Neovim-%E5%85%89%E6%A0%87%E4%B8%8D%E9%97%AA%E7%83%81%EF%BC%8C%E8%BF%9E%E5%B8%A6%E4%BC%9A%E5%AF%BC%E8%87%B4-Windows-Terminal-%E7%9A%84%E5%85%89%E6%A0%87%E4%B9%9F%E5%81%9C%E6%AD%A2%E9%97%AA%E7%83%81/"/>
    <url>/2022/07/31/Neovim-%E5%85%89%E6%A0%87%E4%B8%8D%E9%97%AA%E7%83%81%EF%BC%8C%E8%BF%9E%E5%B8%A6%E4%BC%9A%E5%AF%BC%E8%87%B4-Windows-Terminal-%E7%9A%84%E5%85%89%E6%A0%87%E4%B9%9F%E5%81%9C%E6%AD%A2%E9%97%AA%E7%83%81/</url>
    
    <content type="html"><![CDATA[<h2 id="问题描述">问题描述</h2><p>在使用 neovim 时，发现进入 neovim编辑之后，光标会处于静止状态，然后退出 nvim，windows terminal的原来闪烁的光标也会变成静止光标。</p><h2 id="解决方法">解决方法</h2><p>修改 nvim 的设置，使之变成闪烁的光标。</p><p>具体为，在配置文件中添加如下内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">:set guicursor=a:blinkon100<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/b6qr7OU.png" /></p><hr /><p>参考：</p><p><ahref="https://www.reddit.com/r/neovim/comments/a4ypwm/can_i_make_the_cursor_blinking_in_neovim/"class="uri">https://www.reddit.com/r/neovim/comments/a4ypwm/can_i_make_the_cursor_blinking_in_neovim/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>neovim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>KMP 算法的理解与应用</title>
    <link href="/2022/07/31/KMP-%E7%AE%97%E6%B3%95%E7%9A%84%E7%90%86%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/"/>
    <url>/2022/07/31/KMP-%E7%AE%97%E6%B3%95%E7%9A%84%E7%90%86%E8%A7%A3%E4%B8%8E%E5%BA%94%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>The reason why I encount KMP algotithm once again is leetcode 28,implement strStr.</p><p>The best practice for this problem is KMP. Needless to speak morewords, KMP is very important, and when I was reading <em>Introduction toAlogorithm</em>, I saw it, then I went to read Algorithm 4th edition, Icannot understand it either, for some reasons, some are theirs's, someare mine.</p><p>Now, when I try to solve this leetcode problem, I think this time Igrasp it well.</p><p>The following are my processing draft papers:</p><p><img src="https://i.imgur.com/9RElQUp.jpg" /></p><p><img src="https://i.imgur.com/A1t5qBj.jpg" /></p><p><img src="https://i.imgur.com/LXf3oXA.jpg" /></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">strStr</span><span class="hljs-params">(String haystack, String needle)</span> &#123;<br>        <span class="hljs-type">int</span>[] next = generateNext(needle);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">while</span> (i &lt; haystack.length()) &#123;<br>            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; needle.charAt(j) != haystack.charAt(i)) &#123;<br>                j = next[j - <span class="hljs-number">1</span>];<br>            &#125;<br>            <span class="hljs-keyword">if</span> (needle.charAt(j) == haystack.charAt(i)) &#123;<br>                j++;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (j == needle.length()) &#123;<br>                <span class="hljs-keyword">return</span> (i - j + <span class="hljs-number">1</span>);<br>            &#125;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span>[] generateNext(String s) &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-type">int</span>[] next = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[s.length()];<br>        next[<span class="hljs-number">0</span>] = j;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (i &lt; s.length()) &#123;<br>            <span class="hljs-keyword">while</span> (j &gt; <span class="hljs-number">0</span> &amp;&amp; s.charAt(j) != s.charAt(i)) &#123;<br>                j = next[j - <span class="hljs-number">1</span>];<br>            &#125;<br>            <span class="hljs-keyword">if</span> (s.charAt(j) == s.charAt(i)) &#123;<br>                j++;<br>            &#125;<br>            next[i] = j;<br>            i++;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> next;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">var</span> <span class="hljs-variable">solu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Solution</span>();<br>        <span class="hljs-type">String</span> <span class="hljs-variable">haystack</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;aabaabaafa&quot;</span>;<br>        <span class="hljs-type">String</span> <span class="hljs-variable">needle</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;aabaaf&quot;</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> solu.strStr(haystack, needle);<br>        System.out.println(res);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    
    <tags>
      
      <tag>alogrithm</tag>
      
      <tag>leetcode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>leetcode 459 的正确性证明的理解</title>
    <link href="/2022/07/30/leetcode-459-%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7%E8%AF%81%E6%98%8E%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2022/07/30/leetcode-459-%E7%9A%84%E6%AD%A3%E7%A1%AE%E6%80%A7%E8%AF%81%E6%98%8E%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<p>When working on solving problems, it is not suitable to listen tomusic, but when writing blogs, there is no concern about this. Maybe Ican also eat someting while writing.</p><p><img src="https://i.imgur.com/czq1QlN.png" /></p><p>About this leetcode problem, I think for a long time to try tounderstand it. For the purpose to understand it, I even try to seek forhelp from my roommate at colledge. Does not solve it.</p><p>Then, I try to put more effort upon it. Eventually, I understand ittonight. After that, I went out for a rest. Anyway, it is a pleasantthing to go out for a rest and celebration.</p><p>My draft papers to work on are as follows:</p><p><img src="https://i.imgur.com/fDR40i8.jpg" /></p><p><img src="https://i.imgur.com/LcxIOOy.jpg" /></p><p><img src="https://i.imgur.com/dHeSEJg.jpg" /></p><p><img src="https://i.imgur.com/Vaje2AP.jpg" /></p><p>To conclude, there are two things to mention, one is the thinkingstyle of discrete mathematics, the other is Euclidean algorithm.</p><p>We must think about Euclidean algorithm first, then we may think ofthe solution of proving this algorithm.</p>]]></content>
    
    
    
    <tags>
      
      <tag>leetcode</tag>
      
      <tag>algorithm</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>记录一个 windows 修改 host 不生效的问题</title>
    <link href="/2022/07/02/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%AA-windows-%E4%BF%AE%E6%94%B9-host-%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/07/02/%E8%AE%B0%E5%BD%95%E4%B8%80%E4%B8%AA-windows-%E4%BF%AE%E6%94%B9-host-%E4%B8%8D%E7%94%9F%E6%95%88%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>问题是这样，我想添加一个自己的域名映射规则，然后手动修改<code>C:\Windows\System32\drivers\etc</code>目录下的文件。但是修改之后，在浏览器端测试怎么都不生效。试了网上的改编辑器，改空格等等，都不行。</p><p>最后，发现问题处在了系统代理上。嗯。没错，把系统代理关掉即可。</p><p><img src="https://i.imgur.com/6GCcaXe.png" /></p>]]></content>
    
    
    
    <tags>
      
      <tag>bugs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络实验报告完整版</title>
    <link href="/2022/06/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E5%AE%8C%E6%95%B4%E7%89%88/"/>
    <url>/2022/06/29/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A%E5%AE%8C%E6%95%B4%E7%89%88/</url>
    
    <content type="html"><![CDATA[<h1 id="计算机网络实验报告"><a href="#计算机网络实验报告" class="headerlink" title="计算机网络实验报告"></a>计算机网络实验报告</h1><h2 id="实验一-wireshark-抓包工具使用"><a href="#实验一-wireshark-抓包工具使用" class="headerlink" title="实验一 wireshark 抓包工具使用"></a>实验一 wireshark 抓包工具使用</h2><h3 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h3><ul><li>学习wireshark抓包工具的使用。</li><li>了解wireshark抓包工具的功能，明确抓包软件的功能。</li><li>通过学习，进一步理解协议及网络体系结构思想。</li></ul><h3 id="二、实验原理"><a href="#二、实验原理" class="headerlink" title="二、实验原理"></a>二、实验原理</h3><p><code>Wireshark</code> 是网络包分析工具。网络包分析工具的主要作用是尝试捕获网络包，并尝试显示包的尽可能详细的情况。</p><p>主要应用：</p><ul><li>网络管理员用来解决网络问题</li><li>网络安全工程师用来检测安全隐患</li><li>开发人员用来测试协议执行情况</li><li>用来学习网络协议</li></ul><h3 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h3><p>下载 WIRESHARK，学习工具的使用和功能。</p><h3 id="四、实验过程"><a href="#四、实验过程" class="headerlink" title="四、实验过程"></a>四、实验过程</h3><h4 id="1、wireshark-的下载、安装与配置"><a href="#1、wireshark-的下载、安装与配置" class="headerlink" title="1、wireshark 的下载、安装与配置"></a>1、wireshark 的下载、安装与配置</h4><p>访问 wireshark 官网：<a href="https://www.wireshark.org/">https://www.wireshark.org/</a></p><p><img src="https://i.imgur.com/ve6TkUX.png"></p><p>下载并安装 Windows Installer (64-bit) 版本。</p><h4 id="2、初识-wireshark"><a href="#2、初识-wireshark" class="headerlink" title="2、初识 wireshark"></a>2、初识 wireshark</h4><p>Wireshark 的工作原理是捕获某一网卡的数据包，当配置多块网卡时，需要选择一块网卡进行抓包，此处选择 WLAN，然后双击即可。</p><p><img src="https://i.imgur.com/LvgXfbw.png"></p><p><img src="https://i.imgur.com/u2k1vbm.png"></p><h4 id="3、查看网络环境"><a href="#3、查看网络环境" class="headerlink" title="3、查看网络环境"></a>3、查看网络环境</h4><p>控制面板-网络和Internet-网络和共享中心-更改适配器设置-WLAN-状态-详细信息，得到了以下关键信息：</p><table><thead><tr><th align="center">名称</th><th align="center">地址</th></tr></thead><tbody><tr><td align="center">IPv4 地址</td><td align="center">10.19.128.57</td></tr><tr><td align="center">子网掩码</td><td align="center">255.255.248.0</td></tr><tr><td align="center">默认网关</td><td align="center">10.19.135.254</td></tr></tbody></table><p><img src="https://i.imgur.com/A412zBu.png"></p><h4 id="4、启动抓包"><a href="#4、启动抓包" class="headerlink" title="4、启动抓包"></a>4、启动抓包</h4><p>截图显示的是 wireshark 抓到的部分数据包，有 TCP、UDP、ARP、MDNS、ICMPv6 等多种协议的数据包。</p><p><img src="https://i.imgur.com/u2k1vbm.png"></p><table><thead><tr><th align="center">名称</th><th align="center">对应层次</th></tr></thead><tbody><tr><td align="center">Frame</td><td align="center">物理层</td></tr><tr><td align="center">Ethernet Ⅱ</td><td align="center">数据链路层</td></tr><tr><td align="center">Internet Protocol Version 4</td><td align="center">网络层</td></tr><tr><td align="center">Transmission Control Protocol</td><td align="center">传输层</td></tr><tr><td align="center">Hypertext Transfer Protocol</td><td align="center">应用层</td></tr></tbody></table><h4 id="5、追踪打开一个网页时，TCP-的三次握手"><a href="#5、追踪打开一个网页时，TCP-的三次握手" class="headerlink" title="5、追踪打开一个网页时，TCP 的三次握手"></a>5、追踪打开一个网页时，TCP 的三次握手</h4><p>以访问百度为例，首先，打开浏览器的一个无痕窗口，并确保电脑上的代理处于关闭状态，然后过滤出 DNS 我们可以发现解析百度的包，找到解析后的真实 ip，</p><p><img src="https://i.imgur.com/5AnWH28.png"></p><p>然后设置过滤规则：</p><p>ip.src &#x3D;&#x3D; 182.61.200.7 or ip.dst &#x3D;&#x3D; 182.61.200.7</p><p>将过滤出来的包按时间排序，开头的三个包是TCP 的三次握手，</p><p><img src="https://i.imgur.com/kzNoE38.png"></p><ul><li>第一次握手：客户机(10.19.128.57)主动打开一条TCP连接，从客户机(10.19.128.57)发送报文段至服务器(182.61.200.7)：SYN&#x3D;1，Seq&#x3D;0，不携带数据，等待服务器确认。</li><li>第二次握手：服务器(182.61.200.7)返回确认报文至客户机(10.0.0.108)：SYN&#x3D;1，ACK&#x3D;1，Seq&#x3D;0，不携带数据。</li><li>第三次握手：从客户机(10.19.128.57)发送报文段至服务器(182.61.200.7)：ACK&#x3D;1，Seq&#x3D;1，不携带数据，TCP连接正式建立。</li></ul><p>下图为第二次握手的报文段的详细分析：</p><p><img src="https://i.imgur.com/B7JxqjE.png"></p><h2 id="实验二-winpcap-编程"><a href="#实验二-winpcap-编程" class="headerlink" title="实验二 winpcap 编程"></a>实验二 winpcap 编程</h2><h3 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h3><ul><li>了解 winpcap 的架构</li><li>学习 winpcap 编程</li></ul><h3 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h3><p>WinPcap是一个基于Win32平台的，用于捕获网络数据包并进行分析的开源库。</p><p>大多数网络应用程序通过被广泛使用的操作系统元件来访问网络，比如sockets。这是一种简单的实现方式，因为操作系统已经妥善处理了底层具体实现细节（比如协议处理，封装数据包等等），并且提供了一个与读写文件类似的，令人熟悉的接口。</p><p>然而，有些时候，这种“简单的方式”并不能满足任务的需求，因为有些应用程序需要直接访问网络中的数据包。也就是说，那些应用程序需要访问原始数据包，即没有被操作系统利用网络协议处理过的数据包。</p><p>WinPcap产生的目的，就是为Win32应用程序提供这种访问方式；WinPcap提供了以下功能：</p><ol><li>捕获原始数据包，无论它是发往某台机器的，还是在其他设备（共享媒介）上进行交换的  </li><li>在数据包发送给某应用程序前，根据用户指定的规则过滤数据包  </li><li>将原始数据包通过网络发送出去  </li><li>收集并统计网络流量信息</li></ol><p>以上这些功能需要借助安装在Win32内核中的网络设备驱动程序才能实现，再加上几个动态链接库DLL。</p><p>所有这些功能都能通过一个强大的编程接口来表现出来,易于开发，并能在不同的操作系统上使用。</p><p>WinPcap可以被用来制作网络分析、监控工具。一些基于WinPcap的典型应用有：</p><ol><li>网络与协议分析器 (network and protocol analyzers)  </li><li>网络监视器 (network monitors)  </li><li>网络流量记录器 (traffic loggers)  </li><li>网络流量发生器 (traffic generators)  </li><li>用户级网桥及路由 (user-level bridges and routers)  </li><li>网络入侵检测系统 (network intrusion detection systems (NIDS))  </li><li>网络扫描器 (network scanners)  </li><li>安全工具 (security tools)</li></ol><h3 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h3><p>通过学习WINPCAP架构，编写一个网络抓包程序。</p><h3 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h3><p>首先要说明一点，winpcap 官网建议使用 npcap，因为根据官网说明，winpcap 已经不适用于 windows10 和 windows11，有些函数可能会出现意想不到的效果。根据我的实践，发现winpcap无法获取适配器的具体名称，比如我的 wifi6 适配器，使用 winpcap 就只能获取模糊的 “Microsoft” 这个名称，而使用 npcap 就可以获取其完整的名称，而且 winpcap 或识别不了一些适配器，而这一点在 npcap 上得到了很好的改善。</p><p><img src="https://i.imgur.com/hSbEMym.png"></p><h4 id="1、npcap-的下载安装与配置"><a href="#1、npcap-的下载安装与配置" class="headerlink" title="1、npcap 的下载安装与配置"></a>1、npcap 的下载安装与配置</h4><ul><li>访问npcap官网：<a href="https://www.winpcap.org/">https://www.winpcap.org/</a></li><li>选择npcap的最新版，下载Installer for Windows并安装</li><li>在VS中导入相应头文件和lib文件</li></ul><p>安装配置的详细过程见我的<a href="https://fanyfull.github.io/2022/05/28/Visual-Studio-2022-%E9%85%8D%E7%BD%AE-winpcap-%E7%8E%AF%E5%A2%83/">这一篇博客</a>，这里不再赘述。</p><h4 id="2、获取设备列表"><a href="#2、获取设备列表" class="headerlink" title="2、获取设备列表"></a>2、获取设备列表</h4><p>通常情况下，一个基于Npcap的应用程序所做的第一件事就是获得一个连接的网络适配器的列表。libpcap和Npcap都为这个目的提供了<code>cap_findalldevs_ex()</code>函数：这个函数返回一个<code>cap_if</code>结构的链接列表，每个结构都包含一个连接的适配器的全面信息。特别是，字段<code>name</code>和<code>description</code>分别包含了相应设备的名称和可读的描述。</p><p>下面的代码检索适配器列表并显示在屏幕上，如果没有找到适配器，则打印一个错误。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;pcap.h&quot;</span></span><br><br>main()<br>&#123;<br>    <span class="hljs-type">pcap_if_t</span>* alldevs;<br>    <span class="hljs-type">pcap_if_t</span>* d;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><br>    <span class="hljs-comment">/* Retrieve the device list from the local machine */</span><br>    <span class="hljs-keyword">if</span> (pcap_findalldevs_ex(PCAP_SRC_IF_STRING,<br>        <span class="hljs-literal">NULL</span> <span class="hljs-comment">/* auth is not needed */</span>,<br>        &amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>            <span class="hljs-string">&quot;Error in pcap_findalldevs_ex: %s\n&quot;</span>,<br>            errbuf);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Print the list */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs; d != <span class="hljs-literal">NULL</span>; d = d-&gt;next)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br>        <span class="hljs-keyword">if</span> (d-&gt;description)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* We don&#x27;t need any more the device list. Free it */</span><br>    pcap_freealldevs(alldevs);<br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/SvJrQHy.png"></p><p>下面利用控制面板查看到的网络适配器：</p><p><img src="https://i.imgur.com/q8Z1qFN.png"></p><p><img src="https://i.imgur.com/juJFZnP.png"></p><p><strong>注</strong>：可以发现，通过程序打印出来的适配器列表和通过 windows 的设备管理器查看到的适配器列表有一些区别，主要是数量上的区别。已经打印出来的部分都可以和设备管理器中的对应得上。</p><p>关于这个代码的一些注释如下。</p><p>首先，<code>pcap_findalldevs_ex()</code>和其他libpcap函数一样，有一个<code>errbuf</code>参数。这个参数指向一个由libpcap填充的字符串，其中包括出错时的错误描述。</p><p>其次，请记住，并不是所有的操作系统都由libpcap支持，提供网络接口的描述，因此，如果我们想写一个可移植的应用程序，我们必须考虑描述为空的情况：在这种情况下，我们打印字符串”No description available”。</p><p>最后注意，当我们用完这个列表后，我们用<code>pcap_freealldevs()</code>释放它。</p><p>假设我们已经编译了该程序，让我们试着运行它。在我的 Windows10 系统上，我们得到的结果是</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">3</span>CEB626A-F27B-<span class="hljs-number">4267</span>-B79D-<span class="hljs-number">2</span>C6280763C13&#125; (Network adapter &#x27;WAN Miniport (Network Monitor)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">2</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">4</span>BC226A2-E243-<span class="hljs-number">421</span>C-<span class="hljs-number">9438</span>-E30A96261403&#125; (Network adapter &#x27;WAN Miniport (IPv6)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">3</span>. rpcap://\Device\NPF_&#123;D3594FDB-<span class="hljs-number">28</span>EF-<span class="hljs-number">4133</span>-<span class="hljs-number">931</span>A-<span class="hljs-number">1</span>CDF0C2F56E1&#125; (Network adapter &#x27;WAN Miniport (IP)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">4</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">9464</span>D53B-<span class="hljs-number">3103</span>-<span class="hljs-number">4</span>A4A-<span class="hljs-number">9</span>B91-<span class="hljs-number">75</span>A5DA984497&#125; (Network adapter &#x27;Microsoft Wi-Fi Direct Virtual Adapter&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">5</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">0</span>D437C70-<span class="hljs-number">8383</span>-<span class="hljs-number">45</span>EE-A70B-D00C04950AEF&#125; (Network adapter &#x27;Intel(R) Wi-Fi <span class="hljs-number">6</span> AX200 <span class="hljs-number">160</span>MHz&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">6</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">6</span>A1116E4-<span class="hljs-number">93</span>E7-<span class="hljs-number">4</span>A84-<span class="hljs-number">99</span>D1-<span class="hljs-number">7</span>E4CB0428CCE&#125; (Network adapter &#x27;Microsoft Wi-Fi Direct Virtual Adapter #<span class="hljs-number">2</span>&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">7</span>. rpcap://\Device\NPF_Loopback (Network adapter &#x27;Adapter for loopback traffic capture&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">8</span>. rpcap://\Device\NPF_&#123;B5950B27-<span class="hljs-number">9860</span>-<span class="hljs-number">4</span>CEE-ADF9-<span class="hljs-number">3</span>AFF86481291&#125; (Network adapter &#x27;Realtek PCIe GbE Family Controller&#x27; <span class="hljs-literal">on</span> local host)<br></code></pre></td></tr></table></figure><h4 id="3、获取已安装设备的高级信息"><a href="#3、获取已安装设备的高级信息" class="headerlink" title="3、获取已安装设备的高级信息"></a>3、获取已安装设备的高级信息</h4><p>上一部分（名为 “获取设备列表 “的部分）演示了如何获取关于可用适配器的基本信息（即设备名称和描述）。实际上，Npcap还提供了其他高级信息。特别是，由<code>pcap_findalldevs_ex()</code>返回的每个<code>cap_if</code>结构都包含一个<code>cap_addr</code>结构的列表，其中包括：</p><ul><li>该接口的地址列表。</li><li>一个网络掩码的列表（每个掩码对应于地址列表中的一个条目）。</li><li>广播地址的列表（每个地址对应于地址列表中的一个条目）。</li><li>目标地址的列表（每个地址对应于地址列表中的一个条目）。</li></ul><p>此外，<code>cap_findalldevs_ex()</code>还可以返回远程适配器和位于指定本地文件夹中的pcap文件列表。</p><p>下面的代码提供了一个 <code>ifprint()</code> 函数，它可以打印 <code>pcap_if</code> 结构的全部内容。程序对 <code>pcap_findalldevs_ex()</code> 返回的每个条目都会调用该函数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* Print all the available information on the given interface */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span> *d)</span><br>&#123;<br>  <span class="hljs-type">pcap_addr_t</span> *a;<br>  <span class="hljs-type">char</span> ip6str[<span class="hljs-number">128</span>];<br><br>  <span class="hljs-comment">/* Name */</span><br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,d-&gt;name);<br><br>  <span class="hljs-comment">/* Description */</span><br>  <span class="hljs-keyword">if</span> (d-&gt;description)<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDescription: %s\n&quot;</span>,d-&gt;description);<br><br>  <span class="hljs-comment">/* Loopback Address*/</span><br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tLoopback: %s\n&quot;</span>,(d-&gt;flags &amp; PCAP_IF_LOOPBACK)?<span class="hljs-string">&quot;yes&quot;</span>:<span class="hljs-string">&quot;no&quot;</span>);<br><br>  <span class="hljs-comment">/* IP addresses */</span><br>  <span class="hljs-keyword">for</span>(a=d-&gt;addresses;a;a=a-&gt;next) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family: #%d\n&quot;</span>,a-&gt;addr-&gt;sa_family);<br>  <br>    <span class="hljs-keyword">switch</span>(a-&gt;addr-&gt;sa_family)<br>    &#123;<br>      <span class="hljs-keyword">case</span> AF_INET:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET\n&quot;</span>);<br>        <span class="hljs-keyword">if</span> (a-&gt;addr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;addr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;netmask)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tNetmask: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;netmask)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;broadaddr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tBroadcast Address: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;broadaddr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;dstaddr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDestination Address: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;dstaddr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">break</span>;<br><br>      <span class="hljs-keyword">case</span> AF_INET6:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET6\n&quot;</span>);<br>        <span class="hljs-keyword">if</span> (a-&gt;addr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, ip6tos(a-&gt;addr, ip6str, <span class="hljs-keyword">sizeof</span>(ip6str)));<br>       <span class="hljs-keyword">break</span>;<br><br>      <span class="hljs-keyword">default</span>:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: Unknown\n&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;netinet/in.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;winsock.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><br><span class="hljs-comment">// Function prototypes</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span>;<br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span>;<br><span class="hljs-type">char</span>* <span class="hljs-title function_">ip6tos</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> sockaddr* sockaddr, <span class="hljs-type">char</span>* address, <span class="hljs-type">int</span> addrlen)</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE + <span class="hljs-number">1</span>];<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* Scan the list printing every entry */</span><br><span class="hljs-keyword">for</span> (d = alldevs;d;d = d-&gt;next)<br>&#123;<br>ifprint(d);<br>&#125;<br><br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><br><span class="hljs-comment">/* Print all the available information on the given interface */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span><br>&#123;<br><span class="hljs-type">pcap_addr_t</span>* a;<br><span class="hljs-type">char</span> ip6str[<span class="hljs-number">128</span>];<br><br><span class="hljs-comment">/* Name */</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, d-&gt;name);<br><br><span class="hljs-comment">/* Description */</span><br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDescription: %s\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* Loopback Address*/</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tLoopback: %s\n&quot;</span>, (d-&gt;flags &amp; PCAP_IF_LOOPBACK) ? <span class="hljs-string">&quot;yes&quot;</span> : <span class="hljs-string">&quot;no&quot;</span>);<br><br><span class="hljs-comment">/* IP addresses */</span><br><span class="hljs-keyword">for</span> (a = d-&gt;addresses;a;a = a-&gt;next) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family: #%d\n&quot;</span>, a-&gt;addr-&gt;sa_family);<br><br><span class="hljs-keyword">switch</span> (a-&gt;addr-&gt;sa_family)<br>&#123;<br><span class="hljs-keyword">case</span> AF_INET:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET\n&quot;</span>);<br><span class="hljs-keyword">if</span> (a-&gt;addr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;addr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;netmask)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tNetmask: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;netmask)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;broadaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tBroadcast Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;broadaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;dstaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDestination Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;dstaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">case</span> AF_INET6:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET6\n&quot;</span>);<br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __MINGW32__ <span class="hljs-comment">/* Cygnus doesn&#x27;t have IPv6 */</span></span><br><span class="hljs-keyword">if</span> (a-&gt;addr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, ip6tos(a-&gt;addr, ip6str, <span class="hljs-keyword">sizeof</span>(ip6str)));<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">default</span>:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: Unknown\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">/* From tcptraceroute, convert a numeric IP address to a string */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> IPTOSBUFFERS12</span><br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span><br>&#123;<br><span class="hljs-type">static</span> <span class="hljs-type">char</span> output[IPTOSBUFFERS][<span class="hljs-number">3</span> * <span class="hljs-number">4</span> + <span class="hljs-number">3</span> + <span class="hljs-number">1</span>];<br><span class="hljs-type">static</span> <span class="hljs-type">short</span> which;<br>u_char* p;<br><br>p = (u_char*)&amp;in;<br>which = (which + <span class="hljs-number">1</span> == IPTOSBUFFERS ? <span class="hljs-number">0</span> : which + <span class="hljs-number">1</span>);<br><span class="hljs-built_in">sprintf</span>(output[which], <span class="hljs-string">&quot;%d.%d.%d.%d&quot;</span>, p[<span class="hljs-number">0</span>], p[<span class="hljs-number">1</span>], p[<span class="hljs-number">2</span>], p[<span class="hljs-number">3</span>]);<br><span class="hljs-keyword">return</span> output[which];<br>&#125;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __MINGW32__ <span class="hljs-comment">/* Cygnus doesn&#x27;t have IPv6 */</span></span><br><span class="hljs-type">char</span>* <span class="hljs-title function_">ip6tos</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> sockaddr* sockaddr, <span class="hljs-type">char</span>* address, <span class="hljs-type">int</span> addrlen)</span><br>&#123;<br><span class="hljs-type">socklen_t</span> sockaddrlen;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>sockaddrlen = <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> sockaddr_in6);<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>sockaddrlen = <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> sockaddr_storage);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><br><span class="hljs-keyword">if</span> (getnameinfo(sockaddr,<br>sockaddrlen,<br>address,<br>addrlen,<br><span class="hljs-literal">NULL</span>,<br><span class="hljs-number">0</span>,<br>NI_NUMERICHOST) != <span class="hljs-number">0</span>) address = <span class="hljs-literal">NULL</span>;<br><br><span class="hljs-keyword">return</span> address;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* __MINGW32__ */</span></span><br><br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/y361wAw.png"></p><p>然后我们看一下这个 WIFI6 适配器，发现它的地址和通过 powershell 查看到的 ipv4 地址是一样的：</p><p><img src="https://i.imgur.com/2Ju5VZS.png"></p><p><img src="https://i.imgur.com/RbtI2tx.png"></p><p>结果分析：</p><p>npcap 获取了 6 块逻辑网卡的高级信息：包含设备描述、IP地址、子网掩码、广播地址等。</p><h4 id="4、打开适配器并捕获数据包"><a href="#4、打开适配器并捕获数据包" class="headerlink" title="4、打开适配器并捕获数据包"></a>4、打开适配器并捕获数据包</h4><p>现在我们已经看到了如何获得一个适配器来玩(对，play，所谓的 toy programs)，让我们开始真正的工作，打开一个适配器并捕获一些流量。在这一课中，我们将编写一个程序，打印出流经适配器的每个数据包的一些信息。</p><p>打开一个捕获设备的函数是 <code>pcap_open()</code>。参数 <code>snaplen</code>，<code>flags</code> 和 <code>to_ms</code> 值得解释一下。</p><p><code>snaplen</code>：指定了要捕获的数据包的部分。在一些操作系统上（如xBSD和Win32），数据包驱动可以被配置为只捕获任何数据包的初始部分：这减少了要复制到应用程序的数据量，因此提高了捕获的效率。在这种情况下，我们使用65536这个值，这比我们可能遇到的最大MTU要高。通过这种方式，我们确保应用程序将始终收到整个数据包。</p><p><code>flags</code>：最重要的标志是指示适配器是否将进入混杂模式的标志。在正常操作中，适配器仅捕获来自网络的发往它的数据包；因此，其他主机交换的数据包将被忽略。相反，当适配器处于混杂模式时，它会捕获所有数据包，无论它们是否发往它。这意味着在共享媒体（如非交换以太网）上，Npcap 将能够捕获其他主机的数据包。混杂模式是大多数捕获应用程序的默认模式，因此我们在以下代码中启用它。</p><p><code>to_ms</code>：指定读取超时，以毫秒为单位。适配器上的读取（例如，使用 <code>pcap_dispatch()</code> 或 <code>pcap_next_ex()</code>）将始终在 <code>to_ms</code> 毫秒后返回，即使网络上没有可用的数据包。如果适配器处于统计模式，<code>to_ms</code> 还定义统计报告之间的间隔（有关统计模式的信息，请参阅官网教程 “\ref wpcap_tut9”）。将 <code>to_ms</code> 设置为 0 意味着没有超时，如果没有数据包到达，适配器上的读取永远不会返回。另一端的 -1 超时会导致适配器上的读取始终立即返回。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* prototype of the packet handler */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">int</span> inum;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">pcap_t</span>* adhandle;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* Print the list */</span><br><span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br><span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Jump to the selected adapter */</span><br><span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br><span class="hljs-comment">/* Open the device */</span><br><span class="hljs-comment">/* Open the adapter */</span><br><span class="hljs-keyword">if</span> ((adhandle = pcap_open_live(d-&gt;name,<span class="hljs-comment">// name of the device</span><br><span class="hljs-number">65536</span>,<span class="hljs-comment">// portion of the packet to capture. </span><br>   <span class="hljs-comment">// 65536 grants that the whole packet will be captured on all the MACs.</span><br><span class="hljs-number">1</span>,<span class="hljs-comment">// promiscuous mode (nonzero means promiscuous)</span><br><span class="hljs-number">1000</span>,<span class="hljs-comment">// read timeout</span><br>errbuf<span class="hljs-comment">// error buffer</span><br>)) == <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>, d-&gt;name);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-comment">/* start the capture */</span><br>pcap_loop(adhandle, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">NULL</span>);<br><br>pcap_close(adhandle);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span><br>&#123;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span>* <span class="hljs-title">ltime</span>;</span><br><span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br><span class="hljs-type">time_t</span> local_tv_sec;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * unused parameters</span><br><span class="hljs-comment"> */</span><br>(VOID)(param);<br>(VOID)(pkt_data);<br><br><span class="hljs-comment">/* convert the timestamp to readable format */</span><br>local_tv_sec = header-&gt;ts.tv_sec;<br>ltime = localtime(&amp;local_tv_sec);<br>strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, ltime);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s,%.6d len:%d\n&quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/dxtXbjC.png"></p><p>打开适配器后，可以使用 <code>pcap_dispatch()</code> 或 <code>pcap_loop()</code> 开始捕获。这两个函数非常相似，不同之处在于 <code>pcap_dispatch()</code> 在超时到期时返回（尽管不能保证），而 <code>pcap_loop()</code> 在捕获到 <code>cnt</code> 个数据包之前不会返回，因此它可以在下一个任意时间段内阻塞-利用网络。 <code>pcap_loop()</code> 足以满足我们的目的，而 <code>pcap_dispatch()</code> 通常用于更复杂的程序中。</p><p>这两个函数都有一个回调参数，<code>packet_handler</code>，指向一个将接收数据包的函数。这个函数由 libpcap 为来自网络的每个新数据包调用，并接收一个通用状态（对应于 <code>pcap_loop()</code> 和 <code>pcap_dispatch()</code> 的 <code>user</code> 参数），一个包含关于数据包的一些信息的标头，例如时间戳和长度以及数据包的实际数据，包括所有协议头。请注意，帧 CRC 通常不存在，因为它在帧验证后被网络适配器删除。另请注意，大多数适配器会丢弃具有错误 CRC 的数据包，因此 Npcap 通常无法捕获它们。</p><p>上面的代码从 <code>pcap_pkthdr</code> 标头中提取每个数据包的时间戳和长度，并将它们打印在屏幕上。</p><p>不过要注意，使用 <code>pcap_loop()</code> 可能有一个缺点，主要与抓包驱动程序调用处理程序有关；因此，用户应用程序无法直接控制它。另一种方法（并且具有更易读的程序）是使用 <code>pcap_next_ex()</code> 函数。这里就不再赘述。详情可以参考<a href="https://npcap.com/guide/npcap-tutorial.html">官方教程</a>。</p><h4 id="5、在没有回调的情况下捕获数据包"><a href="#5、在没有回调的情况下捕获数据包" class="headerlink" title="5、在没有回调的情况下捕获数据包"></a>5、在没有回调的情况下捕获数据包</h4><p>本节的代码的行为与前面的程序（名为”打开适配器并捕获数据包”的部分）完全一样，但它使用了 <code>pcap_next_ex()</code> 而不是 <code>pcap_loop()</code>。</p><p><code>pcap_loop()</code>的基于回调的捕获机制很优雅，在某些情况下它可能是一个很好的选择。然而，处理回调有时并不实用——它常常使程序更加复杂，特别是在多线程应用程序或C++类的情况下。</p><p>在这些情况下，<code>pcap_next_ex()</code>通过直接调用来获取数据包——使用<code>pcap_next_ex()</code>，数据包只有在程序员想要的时候才会被接收。</p><p>这个函数的参数与捕获回调相同。它接收一个适配器描述符和几个指针，这些指针将被初始化并返回给用户（一个指向<code>pcap_pkthdr</code>结构，另一个指向包含数据包的缓冲区）。</p><p>在下面的程序中，我们回收了上一节代码中的回调代码，并将其移到<code>main()</code>中，紧接着调用<code>pcap_next_ex()</code>。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">int</span> inum;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">pcap_t</span>* adhandle;<br><span class="hljs-type">int</span> res;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span>* <span class="hljs-title">ltime</span>;</span><br><span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">pcap_pkthdr</span>* <span class="hljs-title">header</span>;</span><br><span class="hljs-type">const</span> u_char* pkt_data;<br><span class="hljs-type">time_t</span> local_tv_sec;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Print the list */</span><br><span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br><span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Jump to the selected adapter */</span><br><span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br><span class="hljs-comment">/* Open the adapter */</span><br><span class="hljs-keyword">if</span> ((adhandle = pcap_open_live(d-&gt;name,<span class="hljs-comment">// name of the device</span><br><span class="hljs-number">65536</span>,<span class="hljs-comment">// portion of the packet to capture. </span><br>   <span class="hljs-comment">// 65536 grants that the whole packet will be captured on all the MACs.</span><br><span class="hljs-number">1</span>,<span class="hljs-comment">// promiscuous mode (nonzero means promiscuous)</span><br><span class="hljs-number">1000</span>,<span class="hljs-comment">// read timeout</span><br>errbuf<span class="hljs-comment">// error buffer</span><br>)) == <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>, d-&gt;name);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-comment">/* Retrieve the packets */</span><br><span class="hljs-keyword">while</span> ((res = pcap_next_ex(adhandle, &amp;header, &amp;pkt_data)) &gt;= <span class="hljs-number">0</span>) &#123;<br><br><span class="hljs-keyword">if</span> (res == <span class="hljs-number">0</span>)<br><span class="hljs-comment">/* Timeout elapsed */</span><br><span class="hljs-keyword">continue</span>;<br><br><span class="hljs-comment">/* convert the timestamp to readable format */</span><br>local_tv_sec = header-&gt;ts.tv_sec;<br>ltime = localtime(&amp;local_tv_sec);<br>strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, ltime);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s,%.6d len:%d\n&quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br>&#125;<br><br><span class="hljs-keyword">if</span> (res == <span class="hljs-number">-1</span>) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Error reading the packets: %s\n&quot;</span>, pcap_geterr(adhandle));<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>pcap_close(adhandle);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>为什么我们使用 <code>pcap_next_ex()</code> 而不是以前的 <code>pcap_next()</code>？因为 <code>pcap_next()</code> 有一些缺点。首先，它的效率很低，因为它隐藏了回调方法，但仍然依赖于 <code>pcap_dispatch()</code>。其次，它不能检测<code>EOF</code>，所以当从文件中收集数据包时，它不是很有用。</p><p>还请注意，<code>pcap_next_ex()</code>对成功、超时、错误和<code>EOF</code>条件返回不同的值。</p><h4 id="6、过滤流量"><a href="#6、过滤流量" class="headerlink" title="6、过滤流量"></a>6、过滤流量</h4><p>Npcap（以及 libpcap）提供的最强大的功能之一是过滤引擎。它提供了一种非常有效的方式来接收网络流量的子集，并且（通常）与 Npcap 提供的捕获机制集成。用于过滤数据包的函数是 <code>pcap_compile()</code> 和 <code>pcap_setfilter()</code>。</p><p><code>pcap_compile()</code> 接受一个包含高级布尔（过滤器）表达式的字符串，并生成一个低级别的字节码，该字节码可由数据包驱动程序中的文件过滤器引擎解释。布尔表达式的语法可以在本文档的过滤表达式语法部分中找到。</p><p><code>pcap_setfilter()</code>在内核驱动中把一个过滤器与一个捕获会话联系起来。一旦调用 <code>pcap_setfilter()</code>，相关的过滤器将被应用于所有来自网络的数据包，所有符合要求的数据包（即布尔表达式评估为真的数据包）将被实际拷贝到应用程序中。</p><p>下面的代码展示了如何编译和设置一个过滤器。注意，我们必须从描述适配器的 <code>pcap_if</code> 结构中获取网络掩码，因为由 <code>pcap_compile()</code> 创建的一些过滤器需要它。</p><p>在这个代码片段中传递给 <code>pcap_compile()</code> 的过滤器是“ip and tcp”，这意味着“只保留 IPv4 和 TCP 的数据包并将它们传递给应用程序”。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (d-&gt;addresses != <span class="hljs-literal">NULL</span>)<br>  <span class="hljs-comment">/* Retrieve the mask of the first address of the interface */</span><br>  netmask=((<span class="hljs-keyword">struct</span> sockaddr_in *)(d-&gt;addresses-&gt;netmask))-&gt;sin_addr.S_un.S_addr;<br><span class="hljs-keyword">else</span><br>  <span class="hljs-comment">/* If the interface is without an address</span><br><span class="hljs-comment">   * we suppose to be in a C class network */</span><br>  netmask=<span class="hljs-number">0xffffff</span>; <br><br><br><span class="hljs-comment">//compile the filter</span><br><span class="hljs-keyword">if</span> (pcap_compile(adhandle, &amp;fcode, <span class="hljs-string">&quot;ip and tcp&quot;</span>, <span class="hljs-number">1</span>, netmask) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>  <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>    <span class="hljs-string">&quot;\nUnable to compile the packet filter. Check the syntax.\n&quot;</span>);<br>  <span class="hljs-comment">/* Free the device list */</span><br>  pcap_freealldevs(alldevs);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//set the filter</span><br><span class="hljs-keyword">if</span> (pcap_setfilter(adhandle, &amp;fcode) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>  <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<span class="hljs-string">&quot;\nError setting the filter.\n&quot;</span>);<br>  <span class="hljs-comment">/* Free the device list */</span><br>  pcap_freealldevs(alldevs);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>上面的代码将会在下面的“解读数据包”这一节种使用到。</p><h4 id="7、解读数据包"><a href="#7、解读数据包" class="headerlink" title="7、解读数据包"></a>7、解读数据包</h4><p>现在我们能够捕获和过滤网络流量，我们希望将我们的知识用于一个简单的“现实世界”应用程序。</p><p>在本节中，我们将从之前的小节中获取代码，并使用这些部分来构建一个更有用的程序。当前程序的主要目的是展示如何解析和解释捕获的数据包的协议头。由此生成的应用程序，称为 UDPdump，打印我们网络上 UDP 流量的摘要。</p><p>我们选择了解析和显示UDP协议，因为它比其他协议（如TCP）更容易获得，因此是一个很好的初始例子。让我们看一下代码。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Winsock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>    _TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>    UINT len;<br>    len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br>    <span class="hljs-keyword">if</span> (!len) &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br>        <span class="hljs-keyword">return</span> FALSE;<br>    &#125;<br>    _tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br>    <span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br>        <span class="hljs-keyword">return</span> FALSE;<br>    &#125;<br>    <span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><br><br><span class="hljs-comment">/* 4 bytes IP address */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ip_address</span> &#123;</span><br>    u_char byte1;<br>    u_char byte2;<br>    u_char byte3;<br>    u_char byte4;<br>&#125;ip_address;<br><br><span class="hljs-comment">/* IPv4 header */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ip_header</span> &#123;</span><br>    u_char  ver_ihl; <span class="hljs-comment">// Version (4 bits) + IP header length (4 bits)</span><br>    u_char  tos;     <span class="hljs-comment">// Type of service </span><br>    u_short tlen;    <span class="hljs-comment">// Total length </span><br>    u_short identification; <span class="hljs-comment">// Identification</span><br>    u_short flags_fo; <span class="hljs-comment">// Flags (3 bits) + Fragment offset (13 bits)</span><br>    u_char  ttl;      <span class="hljs-comment">// Time to live</span><br>    u_char  proto;    <span class="hljs-comment">// Protocol</span><br>    u_short crc;      <span class="hljs-comment">// Header checksum</span><br>    ip_address  saddr; <span class="hljs-comment">// Source address</span><br>    ip_address  daddr; <span class="hljs-comment">// Destination address</span><br>    u_int  op_pad;     <span class="hljs-comment">// Option + Padding</span><br>&#125;ip_header;<br><br><span class="hljs-comment">/* UDP header*/</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">udp_header</span> &#123;</span><br>    u_short sport; <span class="hljs-comment">// Source port</span><br>    u_short dport; <span class="hljs-comment">// Destination port</span><br>    u_short len;   <span class="hljs-comment">// Datagram length</span><br>    u_short crc;   <span class="hljs-comment">// Checksum</span><br>&#125;udp_header;<br><br><span class="hljs-comment">/* prototype of the packet handler */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> u_char* pkt_data)</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">pcap_if_t</span>* alldevs;<br>    <span class="hljs-type">pcap_if_t</span>* d;<br>    <span class="hljs-type">int</span> inum;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">pcap_t</span>* adhandle;<br>    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br>    u_int netmask;<br>    <span class="hljs-type">char</span> packet_filter[] = <span class="hljs-string">&quot;ip and udp&quot;</span>;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bpf_program</span> <span class="hljs-title">fcode</span>;</span><br><br>    <span class="hljs-comment">/* Load Npcap and its functions. */</span><br>    <span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Retrieve the device list */</span><br>    <span class="hljs-keyword">if</span> (pcap_findalldevs_ex(PCAP_SRC_IF_STRING,<br>        <span class="hljs-literal">NULL</span>, &amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Print the list */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br>        <span class="hljs-keyword">if</span> (d-&gt;description)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br>    scanf_s(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br>    <span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* Jump to the selected adapter */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br>    <span class="hljs-comment">/* Open the adapter */</span><br>    <span class="hljs-keyword">if</span> ((adhandle = pcap_open(d-&gt;name, <span class="hljs-comment">// name of the device</span><br>        <span class="hljs-number">65536</span>, <span class="hljs-comment">// portion of the packet to capture. </span><br>               <span class="hljs-comment">// 65536 grants that the whole packet</span><br>               <span class="hljs-comment">// will be captured on all the MACs.</span><br>        PCAP_OPENFLAG_PROMISCUOUS, <span class="hljs-comment">// promiscuous mode</span><br>        <span class="hljs-number">1000</span>, <span class="hljs-comment">// read timeout</span><br>        <span class="hljs-literal">NULL</span>, <span class="hljs-comment">// remote authentication</span><br>        errbuf <span class="hljs-comment">// error buffer</span><br>    )) == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>            <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>,<br>            d-&gt;name);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* Check the link layer. We support only Ethernet for simplicity. */</span><br>    <span class="hljs-keyword">if</span> (pcap_datalink(adhandle) != DLT_EN10MB)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nThis program works only on Ethernet networks.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (d-&gt;addresses != <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-comment">/* Retrieve the mask of the first address of the interface */</span><br>        netmask = ((<span class="hljs-keyword">struct</span> sockaddr_in*)(d-&gt;addresses-&gt;netmask))-&gt;sin_addr.S_un.S_addr;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-comment">/* If the interface is without addresses</span><br><span class="hljs-comment">         * we suppose to be in a C class network */</span><br>        netmask = <span class="hljs-number">0xffffff</span>;<br><br><br>    <span class="hljs-comment">//compile the filter</span><br>    <span class="hljs-keyword">if</span> (pcap_compile(adhandle, &amp;fcode, packet_filter, <span class="hljs-number">1</span>, netmask) &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to compile the packet filter. Check the syntax.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//set the filter</span><br>    <span class="hljs-keyword">if</span> (pcap_setfilter(adhandle, &amp;fcode) &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nError setting the filter.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br>    <span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>    pcap_freealldevs(alldevs);<br><br>    <span class="hljs-comment">/* start the capture */</span><br>    pcap_loop(adhandle, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">NULL</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> u_char* pkt_data)</span><br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> <span class="hljs-title">ltime</span>;</span><br>    <span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br>    ip_header* ih;<br>    udp_header* uh;<br>    u_int ip_len;<br>    u_short sport, dport;<br>    <span class="hljs-type">time_t</span> local_tv_sec;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     * Unused variable</span><br><span class="hljs-comment">     */</span><br>    (VOID)(param);<br><br>    <span class="hljs-comment">/* convert the timestamp to readable format */</span><br>    local_tv_sec = header-&gt;ts.tv_sec;<br>    localtime_s(&amp;ltime, &amp;local_tv_sec);<br>    strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, &amp;ltime);<br><br>    <span class="hljs-comment">/* print timestamp and length of the packet */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s.%.6d len:%d &quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>    <span class="hljs-comment">/* retireve the position of the ip header */</span><br>    ih = (ip_header*)(pkt_data +<br>        <span class="hljs-number">14</span>); <span class="hljs-comment">//length of ethernet header</span><br><br>      <span class="hljs-comment">/* retireve the position of the udp header */</span><br>    ip_len = (ih-&gt;ver_ihl &amp; <span class="hljs-number">0xf</span>) * <span class="hljs-number">4</span>;<br>    uh = (udp_header*)((u_char*)ih + ip_len);<br><br>    <span class="hljs-comment">/* convert from network byte order to host byte order */</span><br>    sport = ntohs(uh-&gt;sport);<br>    dport = ntohs(uh-&gt;dport);<br><br>    <span class="hljs-comment">/* print ip addresses and udp ports */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d.%d.%d.%d.%d -&gt; %d.%d.%d.%d.%d\n&quot;</span>,<br>        ih-&gt;saddr.byte1,<br>        ih-&gt;saddr.byte2,<br>        ih-&gt;saddr.byte3,<br>        ih-&gt;saddr.byte4,<br>        sport,<br>        ih-&gt;daddr.byte1,<br>        ih-&gt;daddr.byte2,<br>        ih-&gt;daddr.byte3,<br>        ih-&gt;daddr.byte4,<br>        dport);<br>&#125;<br></code></pre></td></tr></table></figure><p>运行如下：</p><p><img src="https://i.imgur.com/oO5Otcu.png"></p><p>首先，我们将过滤器设置为“ip and udp”。通过这种方式，我们可以确定 <code>packet_handler()</code> 将只接收 IPv4 上的 UDP 数据包：这简化了解析并提高了程序的效率。</p><p>我们还创建了几个描述 IP 和 UDP 标头的结构。<code>packet_handler()</code> 使用这些结构来正确定位各种标头字段。</p><p><code>packet_handler()</code> 虽然仅限于单个协议解析器（UDP over IPv4），但它显示了 tcpdump&#x2F;WinDump 等复杂的“嗅探器”如何解码网络流量。由于我们对 MAC 标头不感兴趣，因此我们跳过它。为简单起见，在开始捕获之前，我们使用 <code>pcap_datalink()</code> 检查 MAC 层，以确保我们正在处理以太网网络。这样我们就可以确定 MAC 报头正好是 14 个字节。</p><p>IP 标头位于 MAC 标头之后。我们将从 IP 标头中提取 IP 源地址和目标地址。</p><p>到达 UDP 报头有点复杂，因为 IP 报头没有固定的长度。因此，我们使用 IP 头的长度字段来知道它的大小。一旦我们知道 UDP 标头的位置，我们就提取源端口和目标端口。</p><h3 id="习题与思考题"><a href="#习题与思考题" class="headerlink" title="习题与思考题"></a>习题与思考题</h3><p>1、WINPCAP(Npcap)是否能实现服务质量的控制？</p><p>答：不能。WinPcap可以独立地通过主机协议发送和接受数据，如同TCP-IP。这就意味着WinPcap不能阻止、过滤或操纵同一机器上的其他应用程序的通讯：它仅仅能简单地”监视”在网络上传输的数据包。所以，它不能提供类似网络流量控制、服务质量调度和个人防火墙之类的支持，因而不能实现服务质量的控制。</p><hr><p>参考：<br>1、<a href="https://npcap.com/guide/npcap-tutorial.html">https://npcap.com/guide/npcap-tutorial.html</a></p><h2 id="实验三-协议分析程序的编写"><a href="#实验三-协议分析程序的编写" class="headerlink" title="实验三 协议分析程序的编写"></a>实验三 协议分析程序的编写</h2><h3 id="实验目的-1"><a href="#实验目的-1" class="headerlink" title="实验目的"></a>实验目的</h3><ol><li><p>目的：分析IP协议，统计流量。大家可以把流量计做成流量地图，显示不同地点间数据实时发送的量，比如武汉到北京的数据包发送的数据量。 可以用echart画地图，用whois获取IP地址的所属地。</p></li><li><p>任务：根据IP协议，解析每个数据包的PCI，并对不同IP进行流量统计。</p></li><li><p>任务的说明：</p><ul><li>实现的软件能显示每个包的PCI。</li><li>能显示每个IP地址的流量，即显示接收包的数量。</li></ul></li></ol><h3 id="实验原理-1"><a href="#实验原理-1" class="headerlink" title="实验原理"></a>实验原理</h3><p>首先解释一下 PCI 的具体含义：</p><p>使用分层网络方法，每一层都会“封装”从其上一层向下传递的数据，同时添加自己的信息。然后，该层会将新的 PDU 向下传递到下一层（或者一旦您到达第 1 层，就将其通过物理介质发送）。一旦到达另一端，则采取相反的路径；每一层查看与其相关的标头&#x2F;尾标，处理它们，并将有效负载向上传递到下一层。<br>每个封装级别的具体信息取决于协议。例如，TCP 将添加源端口和目标端口、校验和、序列&#x2F;确认号以及其他一些东西。 IP 添加源&#x2F;目标地址、数据包长度和其他一些内容。以太网将添加源&#x2F;目标 MAC、EtherType、FCS 等。</p><p>然后就是利用实验二中使用的 npcap 进行抓包。这里主要是抓取 TCP 的数据包，然后将抓取到的每一个数据包解析之后，将它们的源 ip 和目标 ip 都存放到 MySQL 数据库中。然后使用 Python 调用解析 ip 归属地的接口，将每一个 ip 的归属地解析好，然后更新数据库中的相关字段。</p><p>之后使用 Spring Boot 搭建一个简单的后台接口，主要是给前端网页提供 json 数据。</p><p>前端主要使用 echarts 来绘图，绘图所需要的数据就来自上面 Spring Boot 提供的 json 数据接口。这样就可以实时地绘制我们所需的流量地图了。</p><h3 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h3><p>系统：Windows 10 家庭中文版 21H2</p><p>Visual Studio 版本：Visual Studio 2022</p><p>Npcap 版本：1.60</p><p>Npcap SDK 版本：1.12</p><p><img src="https://i.imgur.com/Rc4xA1K.png"></p><p>MySQL 版本：8.0.28</p><p>jdk 版本：openjdk version “17.0.2”</p><p>Python 版本：3.10.4</p><p>echart 版本：</p><h3 id="实验内容-1"><a href="#实验内容-1" class="headerlink" title="实验内容"></a>实验内容</h3><p>分析IP协议，统计流量。把流量计做成流量地图，显示不同地点间数据实时发送的量，比如武汉到北京的数据包发送的数据量。用echart画地图，用whois获取IP地址的所属地。</p><h3 id="实验过程-1"><a href="#实验过程-1" class="headerlink" title="实验过程"></a>实验过程</h3><p>首先，编写 C++ 程序进行抓包，这个在实验二中已经实现，这里就不再赘述。</p><p>这里主要介绍一下将捕获到的源 ip 地址和目标 ip 地址存放到数据库中的过程。</p><p>首先，配置环境，步骤如下：</p><p><img src="https://i.imgur.com/D06EaWZ.png"></p><p><img src="https://i.imgur.com/aPwSR82.png"></p><p><img src="https://i.imgur.com/Dxi3Bfu.png"></p><p><img src="https://i.imgur.com/iaOXL9h.png"></p><p>之后，还要将 libmysql.lib 文件添加到项目的根目录下：</p><p><img src="https://i.imgur.com/1ait2E8.png"></p><p><img src="https://i.imgur.com/i2HVfUF.png"></p><p>然后我们写一个 C++ 的类，从而实现对数据库中数据进行增删改查：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#include &quot;stdafx.h&quot;</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;DBMySQL.h&quot;</span></span><br><br>VspdCToMySQL::<span class="hljs-built_in">VspdCToMySQL</span>()<br>&#123;<br>&#125;<br><br>VspdCToMySQL::~<span class="hljs-built_in">VspdCToMySQL</span>()<br>&#123;<br>&#125;<br><br><span class="hljs-comment">//初始化数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::ConnMySQL</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* host, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* port, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Db, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* user, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* passwd, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-type">const</span> charset, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_init</span>(&amp;mysql) == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;inital mysql handle error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_real_connect</span>(&amp;mysql, host, user, passwd, Db, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>) == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Failed to connect to database: Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_set_character_set</span>(&amp;mysql, charset) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;mysql_set_character_set Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//查询数据</span><br><span class="hljs-function">string <span class="hljs-title">VspdCToMySQL::SelectData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">int</span> Cnum, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br>MYSQL_ROW m_row;<br>MYSQL_RES* m_res;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-type">int</span> rnum = <span class="hljs-number">0</span>;<br><span class="hljs-type">char</span> rg = <span class="hljs-string">&#x27;\n&#x27;</span>;<span class="hljs-comment">//行隔开</span><br><span class="hljs-comment">// char rg=&#x27;\r&#x27;;</span><br><span class="hljs-type">char</span> cg = <span class="hljs-string">&#x27;\t&#x27;</span>;<span class="hljs-comment">//字段隔开</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;select ps_info Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br>m_res = <span class="hljs-built_in">mysql_store_result</span>(&amp;mysql);<br><br><span class="hljs-keyword">if</span> (m_res == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;select username Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br><span class="hljs-function">string <span class="hljs-title">str</span><span class="hljs-params">(<span class="hljs-string">&quot;&quot;</span>)</span></span>;<br><span class="hljs-keyword">while</span> (m_row = <span class="hljs-built_in">mysql_fetch_row</span>(m_res))<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; Cnum; i++)<br>&#123;<br>str += m_row[i];<br>str += cg;<br>&#125;<br>str += rg;<br>rnum++;<br>&#125;<br><br><span class="hljs-built_in">mysql_free_result</span>(m_res);<br><br><span class="hljs-keyword">return</span> str;<br>&#125;<br><br><span class="hljs-comment">//插入数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::InsertData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Insert Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//更换数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::ReplaceData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Replace Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//更新数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::UpdateData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Update Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//删除数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::DeleteData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Delete Data error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//调用数据库存储过程</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::CallProcedure</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Call Procedure error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//关闭数据库连接</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">VspdCToMySQL::CloseMySQLConn</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">mysql_close</span>(&amp;mysql);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;disconnect database\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>然后在抓包程序的回调函数中增加对数据库的操作即可：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">packet_handler</span><span class="hljs-params">(u_char* param,</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-type">const</span> u_char* pkt_data)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">tm</span> ltime;<br>    <span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br>    ip_header* ih;<br>    udp_header* uh;<br>    u_int ip_len;<br>    u_short sport, dport;<br>    <span class="hljs-type">time_t</span> local_tv_sec;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     * Unused variable</span><br><span class="hljs-comment">     */</span><br>    (VOID)(param);<br><br>    <span class="hljs-comment">/* convert the timestamp to readable format */</span><br>    local_tv_sec = header-&gt;ts.tv_sec;<br>    <span class="hljs-built_in">localtime_s</span>(&amp;ltime, &amp;local_tv_sec);<br>    <span class="hljs-built_in">strftime</span>(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, &amp;ltime);<br><br>    <span class="hljs-comment">/* print timestamp and length of the packet */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s.%.6d len:%d &quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>    <span class="hljs-comment">/* retireve the position of the ip header */</span><br>    ih = (ip_header*)(pkt_data +<br>        <span class="hljs-number">14</span>); <span class="hljs-comment">//length of ethernet header</span><br><br>      <span class="hljs-comment">/* retireve the position of the udp header */</span><br>    ip_len = (ih-&gt;ver_ihl &amp; <span class="hljs-number">0xf</span>) * <span class="hljs-number">4</span>;<br>    uh = (udp_header*)((u_char*)ih + ip_len);<br><br>    <span class="hljs-comment">/* convert from network byte order to host byte order */</span><br>    sport = <span class="hljs-built_in">ntohs</span>(uh-&gt;sport);<br>    dport = <span class="hljs-built_in">ntohs</span>(uh-&gt;dport);<br><br>    <span class="hljs-comment">/* print ip addresses and udp ports */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d.%d.%d.%d.%d -&gt; %d.%d.%d.%d.%d\n&quot;</span>,<br>        ih-&gt;saddr.byte1,<br>        ih-&gt;saddr.byte2,<br>        ih-&gt;saddr.byte3,<br>        ih-&gt;saddr.byte4,<br>        sport,<br>        ih-&gt;daddr.byte1,<br>        ih-&gt;daddr.byte2,<br>        ih-&gt;daddr.byte3,<br>        ih-&gt;daddr.byte4,<br>        dport);<br><br>    <span class="hljs-comment">// 将源 ip 地址和目的 ip 地址转换成字符串</span><br>    string srcIp = <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte1) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte2) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte3) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte4);<br>    string dstIp = <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte1) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte2) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte3) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte4);<br>    cout &lt;&lt; <span class="hljs-string">&quot;src ip  &quot;</span> &lt;&lt; srcIp &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;dst ip  &quot;</span> &lt;&lt; dstIp &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;=========&quot;</span> &lt;&lt; endl;<br>    string SQLString = <span class="hljs-string">&quot;insert into test_tb(id, src_ip, dst_ip) values(&quot;</span> + <span class="hljs-built_in">to_string</span>(++id) + <span class="hljs-string">&quot;, &#x27;&quot;</span> + srcIp + <span class="hljs-string">&quot;&#x27;, &quot;</span><br>        + <span class="hljs-string">&quot;&#x27;&quot;</span> + dstIp + <span class="hljs-string">&quot;&#x27;)&quot;</span>;<br>    cout &lt;&lt; SQLString &lt;&lt; endl;<br>    <span class="hljs-comment">// 插入数据</span><br>    <span class="hljs-comment">/*const char* SQL = &quot;insert into test_tb(id, src_ip, dst_ip) values(4, &#x27;qingxiaofeng&#x27;, &#x27;fsdajfjsad&#x27;)&quot;;</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL = SQLString.<span class="hljs-built_in">c_str</span>();<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span> (vspdctomysql-&gt;<span class="hljs-built_in">InsertData</span>(SQL, Msg) == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;insert success\n&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里的逻辑是每一次启动这个抓包程序时，会自动清空上一次在数据库中存储的数据，然后再将本次抓取到的数据存放到数据库中。</p><p>之后就是 Pyhton 实现对 ip 地址的解析，并将解析好的结果更新到数据库中：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> mysql.connector <span class="hljs-keyword">import</span> MySQLConnection, Error<br><span class="hljs-keyword">from</span> python_mysql_dbconfig <span class="hljs-keyword">import</span> read_db_config<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getJson</span>(<span class="hljs-params">ip</span>):<br>    myUrl = <span class="hljs-string">&#x27;https://ip.useragentinfo.com/json?ip=&#x27;</span> + ip<br>    <span class="hljs-comment"># myUrl = &#x27;http://whois.pconline.com.cn/ipJson.jsp?ip=&#x27; + ip + &#x27;&amp;json=true&#x27;</span><br>    <span class="hljs-comment"># ip = &#x27;40.79.150.121&#x27;</span><br>    r = requests.get(myUrl)<br>    <span class="hljs-keyword">return</span> r.json()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_with_fetchall</span>():<br>    <span class="hljs-keyword">try</span>:<br>        dbconfig = read_db_config()<br>        conn = MySQLConnection(**dbconfig)<br>        cursor = conn.cursor()<br>        cursor.execute(<span class="hljs-string">&quot;SELECT * FROM test_tb&quot;</span>)<br>        rows = cursor.fetchall()<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Total Row(s):&#x27;</span>, cursor.rowcount)<br>        res = []<br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> rows:<br>            <span class="hljs-keyword">if</span> row[<span class="hljs-number">3</span>] == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> row[<span class="hljs-number">4</span>] == <span class="hljs-literal">None</span>:<br>                res.append(row)<br>        <span class="hljs-comment"># print(res)</span><br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">except</span> Error <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(e)<br><br>    <span class="hljs-keyword">finally</span>:<br>        cursor.close()<br>        conn.close()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_testTb</span>():<br>    cityData = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;天津&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;重庆&quot;</span>, <span class="hljs-string">&quot;石家庄&quot;</span>, <span class="hljs-string">&quot;唐山&quot;</span>, <span class="hljs-string">&quot;秦皇岛&quot;</span>, <span class="hljs-string">&quot;邯 郸&quot;</span>,<br>                <span class="hljs-string">&quot;邢台&quot;</span>, <span class="hljs-string">&quot;保定&quot;</span>, <span class="hljs-string">&quot;张家口&quot;</span>, <span class="hljs-string">&quot;承德&quot;</span>, <span class="hljs-string">&quot;沧州&quot;</span>, <span class="hljs-string">&quot;廊坊&quot;</span>, <span class="hljs-string">&quot;衡水&quot;</span>, <span class="hljs-string">&quot;太原&quot;</span>, <span class="hljs-string">&quot;大同&quot;</span>,<br>                <span class="hljs-string">&quot;阳泉&quot;</span>, <span class="hljs-string">&quot;长治&quot;</span>, <span class="hljs-string">&quot;晋城&quot;</span>, <span class="hljs-string">&quot;朔州&quot;</span>, <span class="hljs-string">&quot;晋中&quot;</span>, <span class="hljs-string">&quot;运城&quot;</span>, <span class="hljs-string">&quot;忻州&quot;</span>, <span class="hljs-string">&quot;临汾&quot;</span>, <span class="hljs-string">&quot;吕梁&quot;</span>,<br>                <span class="hljs-string">&quot;呼和浩特&quot;</span>, <span class="hljs-string">&quot;包头&quot;</span>, <span class="hljs-string">&quot;乌海&quot;</span>, <span class="hljs-string">&quot;赤峰&quot;</span>, <span class="hljs-string">&quot;通辽&quot;</span>, <span class="hljs-string">&quot;鄂尔多斯&quot;</span>, <span class="hljs-string">&quot;呼伦贝尔&quot;</span>, <span class="hljs-string">&quot;巴彦淖尔&quot;</span>,<br>                <span class="hljs-string">&quot;乌兰察布&quot;</span>, <span class="hljs-string">&quot;兴安&quot;</span>, <span class="hljs-string">&quot;锡林郭勒&quot;</span>, <span class="hljs-string">&quot;阿拉善&quot;</span>, <span class="hljs-string">&quot;沈阳&quot;</span>, <span class="hljs-string">&quot;大连&quot;</span>, <span class="hljs-string">&quot;鞍山&quot;</span>, <span class="hljs-string">&quot;抚顺&quot;</span>,<br>                <span class="hljs-string">&quot;本溪&quot;</span>, <span class="hljs-string">&quot;丹东&quot;</span>, <span class="hljs-string">&quot;锦州&quot;</span>, <span class="hljs-string">&quot;营口&quot;</span>, <span class="hljs-string">&quot;阜新&quot;</span>, <span class="hljs-string">&quot;辽阳&quot;</span>, <span class="hljs-string">&quot;盘锦&quot;</span>, <span class="hljs-string">&quot;铁岭&quot;</span>, <span class="hljs-string">&quot;朝阳&quot;</span>,<br>                <span class="hljs-string">&quot;葫芦岛&quot;</span>, <span class="hljs-string">&quot;长春&quot;</span>, <span class="hljs-string">&quot;吉林&quot;</span>, <span class="hljs-string">&quot;四平&quot;</span>, <span class="hljs-string">&quot;辽源&quot;</span>, <span class="hljs-string">&quot;通化&quot;</span>, <span class="hljs-string">&quot;白山&quot;</span>, <span class="hljs-string">&quot;松原&quot;</span>, <span class="hljs-string">&quot;白城&quot;</span>,<br>                <span class="hljs-string">&quot;延边朝鲜族自治&quot;</span>, <span class="hljs-string">&quot;哈尔滨&quot;</span>, <span class="hljs-string">&quot;齐齐哈尔&quot;</span>, <span class="hljs-string">&quot;鸡西&quot;</span>, <span class="hljs-string">&quot;鹤岗&quot;</span>, <span class="hljs-string">&quot;双鸭山&quot;</span>, <span class="hljs-string">&quot;大庆&quot;</span>,<br>                <span class="hljs-string">&quot;伊春&quot;</span>, <span class="hljs-string">&quot;佳木斯&quot;</span>, <span class="hljs-string">&quot;七台河&quot;</span>, <span class="hljs-string">&quot;牡丹江&quot;</span>, <span class="hljs-string">&quot;黑河&quot;</span>, <span class="hljs-string">&quot;绥化&quot;</span>, <span class="hljs-string">&quot;大兴安岭地&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>,<br>                <span class="hljs-string">&quot;无锡&quot;</span>, <span class="hljs-string">&quot;徐州&quot;</span>, <span class="hljs-string">&quot;常州&quot;</span>, <span class="hljs-string">&quot;苏州&quot;</span>, <span class="hljs-string">&quot;南通&quot;</span>, <span class="hljs-string">&quot;连云港&quot;</span>, <span class="hljs-string">&quot;淮安&quot;</span>, <span class="hljs-string">&quot;盐城&quot;</span>, <span class="hljs-string">&quot;扬州&quot;</span>,<br>                <span class="hljs-string">&quot;镇江&quot;</span>, <span class="hljs-string">&quot;泰州&quot;</span>, <span class="hljs-string">&quot;宿迁&quot;</span>, <span class="hljs-string">&quot;杭州&quot;</span>, <span class="hljs-string">&quot;宁波&quot;</span>, <span class="hljs-string">&quot;温州&quot;</span>, <span class="hljs-string">&quot;嘉兴&quot;</span>, <span class="hljs-string">&quot;湖州&quot;</span>, <span class="hljs-string">&quot;绍兴&quot;</span>,<br>                <span class="hljs-string">&quot;金华&quot;</span>, <span class="hljs-string">&quot;衢州&quot;</span>, <span class="hljs-string">&quot;舟山&quot;</span>, <span class="hljs-string">&quot;台州&quot;</span>, <span class="hljs-string">&quot;丽水&quot;</span>, <span class="hljs-string">&quot;合肥&quot;</span>, <span class="hljs-string">&quot;芜湖&quot;</span>, <span class="hljs-string">&quot;蚌埠&quot;</span>, <span class="hljs-string">&quot;淮南&quot;</span>,<br>                <span class="hljs-string">&quot;马鞍山&quot;</span>, <span class="hljs-string">&quot;淮北&quot;</span>, <span class="hljs-string">&quot;铜陵&quot;</span>, <span class="hljs-string">&quot;安庆&quot;</span>, <span class="hljs-string">&quot;黄山&quot;</span>, <span class="hljs-string">&quot;滁州&quot;</span>, <span class="hljs-string">&quot;阜阳&quot;</span>, <span class="hljs-string">&quot;宿州&quot;</span>, <span class="hljs-string">&quot;巢湖&quot;</span>,<br>                <span class="hljs-string">&quot;六安&quot;</span>, <span class="hljs-string">&quot;亳州&quot;</span>, <span class="hljs-string">&quot;池州&quot;</span>, <span class="hljs-string">&quot;宣城&quot;</span>, <span class="hljs-string">&quot;福州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;莆田&quot;</span>, <span class="hljs-string">&quot;三明&quot;</span>, <span class="hljs-string">&quot;泉州&quot;</span>,<br>                <span class="hljs-string">&quot;漳州&quot;</span>, <span class="hljs-string">&quot;南平&quot;</span>, <span class="hljs-string">&quot;龙岩&quot;</span>, <span class="hljs-string">&quot;宁德&quot;</span>, <span class="hljs-string">&quot;南昌&quot;</span>, <span class="hljs-string">&quot;景德镇&quot;</span>, <span class="hljs-string">&quot;萍乡&quot;</span>, <span class="hljs-string">&quot;九江&quot;</span>, <span class="hljs-string">&quot;新余&quot;</span>,<br>                <span class="hljs-string">&quot;鹰潭&quot;</span>, <span class="hljs-string">&quot;赣州&quot;</span>, <span class="hljs-string">&quot;吉安&quot;</span>, <span class="hljs-string">&quot;宜春&quot;</span>, <span class="hljs-string">&quot;抚州&quot;</span>, <span class="hljs-string">&quot;上饶&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>, <span class="hljs-string">&quot;青岛&quot;</span>, <span class="hljs-string">&quot;淄博&quot;</span>,<br>                <span class="hljs-string">&quot;枣庄&quot;</span>, <span class="hljs-string">&quot;东营&quot;</span>, <span class="hljs-string">&quot;烟台&quot;</span>, <span class="hljs-string">&quot;潍坊&quot;</span>, <span class="hljs-string">&quot;济宁&quot;</span>, <span class="hljs-string">&quot;泰安&quot;</span>, <span class="hljs-string">&quot;威海&quot;</span>, <span class="hljs-string">&quot;日照&quot;</span>, <span class="hljs-string">&quot;莱芜&quot;</span>,<br>                <span class="hljs-string">&quot;临沂&quot;</span>, <span class="hljs-string">&quot;德州&quot;</span>, <span class="hljs-string">&quot;聊城&quot;</span>, <span class="hljs-string">&quot;滨州&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;开封&quot;</span>, <span class="hljs-string">&quot;洛阳&quot;</span>, <span class="hljs-string">&quot;平顶山&quot;</span>, <span class="hljs-string">&quot;安阳&quot;</span>,<br>                <span class="hljs-string">&quot;鹤壁&quot;</span>, <span class="hljs-string">&quot;新乡&quot;</span>, <span class="hljs-string">&quot;焦作&quot;</span>, <span class="hljs-string">&quot;濮阳&quot;</span>, <span class="hljs-string">&quot;许昌&quot;</span>, <span class="hljs-string">&quot;漯河&quot;</span>, <span class="hljs-string">&quot;三门峡&quot;</span>, <span class="hljs-string">&quot;南阳&quot;</span>, <span class="hljs-string">&quot;商丘&quot;</span>,<br>                <span class="hljs-string">&quot;信阳&quot;</span>, <span class="hljs-string">&quot;周口&quot;</span>, <span class="hljs-string">&quot;驻马店&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;黄石&quot;</span>, <span class="hljs-string">&quot;十堰&quot;</span>, <span class="hljs-string">&quot;宜昌&quot;</span>, <span class="hljs-string">&quot;襄樊&quot;</span>, <span class="hljs-string">&quot;鄂州&quot;</span>,<br>                <span class="hljs-string">&quot;荆门&quot;</span>, <span class="hljs-string">&quot;孝感&quot;</span>, <span class="hljs-string">&quot;荆州&quot;</span>, <span class="hljs-string">&quot;黄冈&quot;</span>, <span class="hljs-string">&quot;咸宁&quot;</span>, <span class="hljs-string">&quot;随州&quot;</span>, <span class="hljs-string">&quot;恩施土家族苗族自治&quot;</span>, <span class="hljs-string">&quot;长沙&quot;</span>,<br>                <span class="hljs-string">&quot;株洲&quot;</span>, <span class="hljs-string">&quot;湘潭&quot;</span>, <span class="hljs-string">&quot;衡阳&quot;</span>, <span class="hljs-string">&quot;邵阳&quot;</span>, <span class="hljs-string">&quot;岳阳&quot;</span>, <span class="hljs-string">&quot;常德&quot;</span>, <span class="hljs-string">&quot;张家界&quot;</span>, <span class="hljs-string">&quot;益阳&quot;</span>, <span class="hljs-string">&quot;郴州&quot;</span>,<br>                <span class="hljs-string">&quot;永州&quot;</span>, <span class="hljs-string">&quot;怀化&quot;</span>, <span class="hljs-string">&quot;娄底&quot;</span>, <span class="hljs-string">&quot;湘西土家族苗族自治&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;韶关&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;珠海&quot;</span>,<br>                <span class="hljs-string">&quot;汕头&quot;</span>, <span class="hljs-string">&quot;佛山&quot;</span>, <span class="hljs-string">&quot;江门&quot;</span>, <span class="hljs-string">&quot;湛江&quot;</span>, <span class="hljs-string">&quot;茂名&quot;</span>, <span class="hljs-string">&quot;肇庆&quot;</span>, <span class="hljs-string">&quot;惠州&quot;</span>, <span class="hljs-string">&quot;梅州&quot;</span>, <span class="hljs-string">&quot;汕尾&quot;</span>, <span class="hljs-string">&quot;河源&quot;</span>,<br>                <span class="hljs-string">&quot;阳江&quot;</span>, <span class="hljs-string">&quot;清远&quot;</span>, <span class="hljs-string">&quot;东莞&quot;</span>, <span class="hljs-string">&quot;中山&quot;</span>, <span class="hljs-string">&quot;潮州&quot;</span>, <span class="hljs-string">&quot;揭阳&quot;</span>, <span class="hljs-string">&quot;云浮&quot;</span>, <span class="hljs-string">&quot;南宁&quot;</span>, <span class="hljs-string">&quot;柳州&quot;</span>,<br>                <span class="hljs-string">&quot;桂林&quot;</span>, <span class="hljs-string">&quot;梧州&quot;</span>, <span class="hljs-string">&quot;北海&quot;</span>, <span class="hljs-string">&quot;防城港&quot;</span>, <span class="hljs-string">&quot;钦州&quot;</span>, <span class="hljs-string">&quot;贵港&quot;</span>, <span class="hljs-string">&quot;玉林&quot;</span>, <span class="hljs-string">&quot;百色&quot;</span>, <span class="hljs-string">&quot;贺州&quot;</span>,<br>                <span class="hljs-string">&quot;河池&quot;</span>, <span class="hljs-string">&quot;来宾&quot;</span>, <span class="hljs-string">&quot;崇左&quot;</span>, <span class="hljs-string">&quot;海口&quot;</span>, <span class="hljs-string">&quot;三亚&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;自贡&quot;</span>, <span class="hljs-string">&quot;攀枝花&quot;</span>, <span class="hljs-string">&quot;泸州&quot;</span>,<br>                <span class="hljs-string">&quot;德阳&quot;</span>, <span class="hljs-string">&quot;绵阳&quot;</span>, <span class="hljs-string">&quot;广元&quot;</span>, <span class="hljs-string">&quot;遂宁&quot;</span>, <span class="hljs-string">&quot;内江&quot;</span>, <span class="hljs-string">&quot;乐山&quot;</span>, <span class="hljs-string">&quot;南充&quot;</span>, <span class="hljs-string">&quot;眉山&quot;</span>, <span class="hljs-string">&quot;宜宾&quot;</span>, <span class="hljs-string">&quot;广安&quot;</span>,<br>                <span class="hljs-string">&quot;达州&quot;</span>, <span class="hljs-string">&quot;雅安&quot;</span>, <span class="hljs-string">&quot;巴中&quot;</span>, <span class="hljs-string">&quot;资阳&quot;</span>, <span class="hljs-string">&quot;阿坝藏族羌族自治&quot;</span>, <span class="hljs-string">&quot;甘孜藏族自治&quot;</span>, <span class="hljs-string">&quot;凉山彝族自治&quot;</span>,<br>                <span class="hljs-string">&quot;贵阳&quot;</span>, <span class="hljs-string">&quot;六盘水&quot;</span>, <span class="hljs-string">&quot;遵义&quot;</span>, <span class="hljs-string">&quot;安顺&quot;</span>, <span class="hljs-string">&quot;铜仁地&quot;</span>, <span class="hljs-string">&quot;黔西南布依族苗族自治&quot;</span>, <span class="hljs-string">&quot;毕节地&quot;</span>,<br>                <span class="hljs-string">&quot;黔东南苗族侗族自治&quot;</span>, <span class="hljs-string">&quot;黔南布依族苗族自治&quot;</span>, <span class="hljs-string">&quot;昆明&quot;</span>, <span class="hljs-string">&quot;曲靖&quot;</span>, <span class="hljs-string">&quot;玉溪&quot;</span>, <span class="hljs-string">&quot;保山&quot;</span>,<br>                <span class="hljs-string">&quot;昭通&quot;</span>, <span class="hljs-string">&quot;丽江&quot;</span>, <span class="hljs-string">&quot;临沧&quot;</span>, <span class="hljs-string">&quot;楚雄彝族自治&quot;</span>, <span class="hljs-string">&quot;红河哈尼族彝族自治&quot;</span>, <span class="hljs-string">&quot;文山壮族苗族自治&quot;</span>,<br>                <span class="hljs-string">&quot;西双版纳傣族自治&quot;</span>, <span class="hljs-string">&quot;大理白族自治&quot;</span>, <span class="hljs-string">&quot;德宏傣族景颇族自治&quot;</span>, <span class="hljs-string">&quot;怒江傈僳族自治&quot;</span>,<br>                <span class="hljs-string">&quot;迪庆藏族自治&quot;</span>, <span class="hljs-string">&quot;拉萨&quot;</span>, <span class="hljs-string">&quot;昌都地&quot;</span>, <span class="hljs-string">&quot;山南地&quot;</span>, <span class="hljs-string">&quot;日喀则地&quot;</span>, <span class="hljs-string">&quot;那曲地&quot;</span>, <span class="hljs-string">&quot;阿里地&quot;</span>,<br>                <span class="hljs-string">&quot;林芝地&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;铜川&quot;</span>, <span class="hljs-string">&quot;宝鸡&quot;</span>, <span class="hljs-string">&quot;咸阳&quot;</span>, <span class="hljs-string">&quot;渭南&quot;</span>, <span class="hljs-string">&quot;延安&quot;</span>, <span class="hljs-string">&quot;汉中&quot;</span>, <span class="hljs-string">&quot;榆林&quot;</span>,<br>                <span class="hljs-string">&quot;安康&quot;</span>, <span class="hljs-string">&quot;商洛&quot;</span>, <span class="hljs-string">&quot;兰州&quot;</span>, <span class="hljs-string">&quot;嘉峪关&quot;</span>, <span class="hljs-string">&quot;金昌&quot;</span>, <span class="hljs-string">&quot;白银&quot;</span>, <span class="hljs-string">&quot;天水&quot;</span>, <span class="hljs-string">&quot;武威&quot;</span>, <span class="hljs-string">&quot;张掖&quot;</span>,<br>                <span class="hljs-string">&quot;平凉&quot;</span>, <span class="hljs-string">&quot;酒泉&quot;</span>, <span class="hljs-string">&quot;庆阳&quot;</span>, <span class="hljs-string">&quot;定西&quot;</span>, <span class="hljs-string">&quot;陇南&quot;</span>, <span class="hljs-string">&quot;临夏回族自治&quot;</span>, <span class="hljs-string">&quot;甘南藏族自治&quot;</span>, <span class="hljs-string">&quot;西宁&quot;</span>,<br>                <span class="hljs-string">&quot;海东地&quot;</span>, <span class="hljs-string">&quot;海北藏族自治&quot;</span>, <span class="hljs-string">&quot;黄南藏族自治&quot;</span>, <span class="hljs-string">&quot;海南藏族自治&quot;</span>, <span class="hljs-string">&quot;果洛藏族自治&quot;</span>,<br>                <span class="hljs-string">&quot;玉树藏族自治&quot;</span>, <span class="hljs-string">&quot;海西蒙古族藏族自治&quot;</span>, <span class="hljs-string">&quot;银川&quot;</span>, <span class="hljs-string">&quot;石嘴山&quot;</span>, <span class="hljs-string">&quot;吴忠&quot;</span>, <span class="hljs-string">&quot;固原&quot;</span>, <span class="hljs-string">&quot;中卫&quot;</span>,<br>                <span class="hljs-string">&quot;乌鲁木齐&quot;</span>, <span class="hljs-string">&quot;克拉玛依&quot;</span>, <span class="hljs-string">&quot;吐鲁番地&quot;</span>, <span class="hljs-string">&quot;哈密地&quot;</span>, <span class="hljs-string">&quot;昌吉回族自治&quot;</span>, <span class="hljs-string">&quot;博尔塔拉蒙古自治&quot;</span>,<br>                <span class="hljs-string">&quot;巴音郭楞蒙古自治&quot;</span>, <span class="hljs-string">&quot;阿克苏地&quot;</span>, <span class="hljs-string">&quot;克孜勒苏柯尔克孜自治&quot;</span>, <span class="hljs-string">&quot;喀什地&quot;</span>, <span class="hljs-string">&quot;和田地&quot;</span>,<br>                <span class="hljs-string">&quot;伊犁哈萨克自治&quot;</span>, <span class="hljs-string">&quot;塔城地&quot;</span>, <span class="hljs-string">&quot;阿勒泰地&quot;</span>, <span class="hljs-string">&quot;仙桃&quot;</span>, <span class="hljs-string">&quot;潜江&quot;</span>, <span class="hljs-string">&quot;天门&quot;</span>, <span class="hljs-string">&quot;神农架林&quot;</span>,<br>                <span class="hljs-string">&quot;五指山&quot;</span>, <span class="hljs-string">&quot;琼海&quot;</span>, <span class="hljs-string">&quot;儋州&quot;</span>, <span class="hljs-string">&quot;文昌&quot;</span>, <span class="hljs-string">&quot;万宁&quot;</span>, <span class="hljs-string">&quot;东方&quot;</span>, <span class="hljs-string">&quot;定安县&quot;</span>, <span class="hljs-string">&quot;屯昌县&quot;</span>, <span class="hljs-string">&quot;澄迈县&quot;</span>,<br>                <span class="hljs-string">&quot;临高县&quot;</span>, <span class="hljs-string">&quot;白沙黎族自治县&quot;</span>, <span class="hljs-string">&quot;昌江黎族自治县&quot;</span>, <span class="hljs-string">&quot;乐东黎族自治县&quot;</span>, <span class="hljs-string">&quot;陵水黎族自治县&quot;</span>,<br>                <span class="hljs-string">&quot;保亭黎族苗族自治县&quot;</span>, <span class="hljs-string">&quot;琼中黎族苗族自治县&quot;</span>, <span class="hljs-string">&quot;石河子&quot;</span>]<br>    <span class="hljs-comment"># read database configuration</span><br>    db_config = read_db_config()<br><br>    toBeProcessedData = query_with_fetchall()<br><br>    <span class="hljs-comment"># prepare query and data</span><br>    query = <span class="hljs-string">&quot;&quot;&quot; UPDATE test_tb</span><br><span class="hljs-string">                SET src_loc = %s, dst_loc = %s</span><br><span class="hljs-string">                WHERE id = %s &quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">try</span>:<br>        conn = MySQLConnection(**db_config)<br><br>        <span class="hljs-comment"># update book title</span><br>        cursor = conn.cursor()<br>        <span class="hljs-comment"># cursor.execute(query, data)</span><br><br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> toBeProcessedData:<br>            rowId = row[<span class="hljs-number">0</span>]<br>            srcIp = row[<span class="hljs-number">1</span>]<br>            dstIp = row[<span class="hljs-number">2</span>]<br><br>            <span class="hljs-keyword">if</span> srcIp == <span class="hljs-string">&#x27;10.16.80.216&#x27;</span>: <span class="hljs-comment"># 这里要替换成本机的 ip</span><br>                srcLoc = <span class="hljs-string">&#x27;武汉&#x27;</span><br>            <span class="hljs-keyword">else</span>:<br>                srcJsonData = getJson(srcIp)<br>                <span class="hljs-built_in">print</span>(srcJsonData)<br>                srcLoc = srcJsonData[<span class="hljs-string">&#x27;city&#x27;</span>][<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]<br>            time.sleep(<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">if</span> dstIp == <span class="hljs-string">&#x27;10.16.80.216&#x27;</span>: <span class="hljs-comment"># 这里要替换成本机的 ip</span><br>                dstLoc = <span class="hljs-string">&#x27;武汉&#x27;</span><br>            <span class="hljs-keyword">else</span>:<br>                dstJsonData = getJson(dstIp)<br>                dstLoc = dstJsonData[<span class="hljs-string">&#x27;city&#x27;</span>][<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]<br>            time.sleep(<span class="hljs-number">1</span>)<br><br>            <span class="hljs-keyword">if</span> srcLoc != <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> srcLoc <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cityData:<br>                srcLoc = <span class="hljs-string">&#x27;海外&#x27;</span><br>            <span class="hljs-keyword">if</span> dstLoc != <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> dstLoc <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cityData:<br>                dstLoc = <span class="hljs-string">&#x27;海外&#x27;</span><br><br>            <span class="hljs-built_in">print</span>(srcLoc + dstLoc)<br>            <span class="hljs-built_in">print</span>(row)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;==========分割线=========&#x27;</span>)<br>            data = (srcLoc, dstLoc, rowId)<br>            cursor.execute(query, data)<br>            conn.commit()<br><br>        <span class="hljs-comment"># accept the changes</span><br>        conn.commit()<br><br>    <span class="hljs-keyword">except</span> Error <span class="hljs-keyword">as</span> error:<br>        <span class="hljs-built_in">print</span>(error)<br><br>    <span class="hljs-keyword">finally</span>:<br>        cursor.close()<br>        conn.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        update_testTb()<br><br></code></pre></td></tr></table></figure><p>再之后，使用 Spring Boot 创建一个 json 接口，主要的逻辑如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 过滤出同时具有 srcLoc 和 dstLoc 并且都是中国城市的数据</span><br><span class="hljs-comment">* </span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> InterruptedException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@GetMapping(&quot;/getJson&quot;)</span><br><span class="hljs-keyword">public</span> List&lt;TestTb&gt; <span class="hljs-title function_">getJsonData</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 先从数据库中取出数据</span><br>    List&lt;TestTb&gt; testTbList = testTbService.list();<br>    List&lt;TestTb&gt; filtedList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-comment">// 过滤</span><br>    <span class="hljs-keyword">for</span> (TestTb testTb : testTbList) &#123;<br>        <span class="hljs-keyword">if</span> (testTb.getSrcLoc() != <span class="hljs-literal">null</span><br>                &amp;&amp; testTb.getSrcLoc().length() != <span class="hljs-number">0</span><br>                &amp;&amp; !testTb.getSrcLoc().equals(<span class="hljs-string">&quot;海外&quot;</span>)<br>                &amp;&amp; testTb.getDstLoc() != <span class="hljs-literal">null</span><br>                &amp;&amp; testTb.getDstLoc().length() != <span class="hljs-number">0</span><br>                &amp;&amp; !testTb.getDstLoc().equals(<span class="hljs-string">&quot;海外&quot;</span>)) &#123;<br>            filtedList.add(testTb);<br>            System.out.println(testTb);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// System.out.println(filtedList);</span><br><br>    <span class="hljs-keyword">return</span> filtedList;<br>&#125;<br></code></pre></td></tr></table></figure><p>最后，是前端的逻辑：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getJsonData</span>(<span class="hljs-params">url</span>) &#123;<br>    <span class="hljs-keyword">let</span> obj = <span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)).<span class="hljs-title function_">json</span>();<br>    <span class="hljs-keyword">return</span> obj;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test&#x27;</span>);<br><br>url = <span class="hljs-string">&quot;http://localhost:8080/testTb/getJson&quot;</span><br><span class="hljs-title function_">getJsonData</span>(url).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">jsonData</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// console.log(jsonData);</span><br><br>    <span class="hljs-keyword">var</span> geoCoordMap = &#123;<br>        <span class="hljs-string">&#x27;北京&#x27;</span>: [<span class="hljs-number">116.398</span>, <span class="hljs-number">39.9082</span>],<br>        <span class="hljs-string">&#x27;天津&#x27;</span>: [<span class="hljs-number">117.252</span>, <span class="hljs-number">39.1039</span>],<br>        <span class="hljs-string">&#x27;上海&#x27;</span>: [<span class="hljs-number">121.476</span>, <span class="hljs-number">31.2244</span>],<br>        <span class="hljs-string">&#x27;重庆&#x27;</span>: [<span class="hljs-number">106.548</span>, <span class="hljs-number">29.5549</span>],<br>        <span class="hljs-string">&#x27;石家庄&#x27;</span>: [<span class="hljs-number">114.476</span>, <span class="hljs-number">38.0483</span>],<br>        <span class="hljs-string">&#x27;唐山&#x27;</span>: [<span class="hljs-number">118.167</span>, <span class="hljs-number">39.6353</span>],<br>        <span class="hljs-string">&#x27;秦皇岛&#x27;</span>: [<span class="hljs-number">119.59</span>, <span class="hljs-number">39.9479</span>],<br>        <span class="hljs-string">&#x27;邯郸&#x27;</span>: [<span class="hljs-number">114.489</span>, <span class="hljs-number">36.5994</span>],<br>        <span class="hljs-string">&#x27;邢台&#x27;</span>: [<span class="hljs-number">114.504</span>, <span class="hljs-number">37.0717</span>],<br>        <span class="hljs-string">&#x27;保定&#x27;</span>: [<span class="hljs-number">115.466</span>, <span class="hljs-number">38.8799</span>],<br>        <span class="hljs-string">&#x27;张家口&#x27;</span>: [<span class="hljs-number">114.89</span>, <span class="hljs-number">40.8262</span>],<br>        <span class="hljs-string">&#x27;承德&#x27;</span>: [<span class="hljs-number">117.935</span>, <span class="hljs-number">40.9955</span>],<br>        <span class="hljs-string">&#x27;沧州&#x27;</span>: [<span class="hljs-number">116.866</span>, <span class="hljs-number">38.3124</span>],<br>        <span class="hljs-string">&#x27;廊坊&#x27;</span>: [<span class="hljs-number">116.706</span>, <span class="hljs-number">39.5193</span>],<br>        <span class="hljs-string">&#x27;衡水&#x27;</span>: [<span class="hljs-number">115.698</span>, <span class="hljs-number">37.7354</span>],<br>        <span class="hljs-string">&#x27;太原&#x27;</span>: [<span class="hljs-number">112.531</span>, <span class="hljs-number">37.8551</span>],<br>        <span class="hljs-string">&#x27;大同&#x27;</span>: [<span class="hljs-number">113.3</span>, <span class="hljs-number">40.0784</span>],<br>        <span class="hljs-string">&#x27;阳泉&#x27;</span>: [<span class="hljs-number">113.58</span>, <span class="hljs-number">37.8567</span>],<br>        <span class="hljs-string">&#x27;长治&#x27;</span>: [<span class="hljs-number">113.117</span>, <span class="hljs-number">36.1922</span>],<br>        <span class="hljs-string">&#x27;晋城&#x27;</span>: [<span class="hljs-number">112.853</span>, <span class="hljs-number">35.4906</span>],<br>        <span class="hljs-string">&#x27;朔州&#x27;</span>: [<span class="hljs-number">112.429</span>, <span class="hljs-number">39.3186</span>],<br>        <span class="hljs-string">&#x27;晋中&#x27;</span>: [<span class="hljs-number">112.752</span>, <span class="hljs-number">37.6883</span>],<br>        <span class="hljs-string">&#x27;运城&#x27;</span>: [<span class="hljs-number">110.998</span>, <span class="hljs-number">35.0315</span>],<br>        <span class="hljs-string">&#x27;忻州&#x27;</span>: [<span class="hljs-number">112.735</span>, <span class="hljs-number">38.4158</span>],<br>        <span class="hljs-string">&#x27;临汾&#x27;</span>: [<span class="hljs-number">111.527</span>, <span class="hljs-number">36.1021</span>],<br>        <span class="hljs-string">&#x27;吕梁&#x27;</span>: [<span class="hljs-number">111.13</span>, <span class="hljs-number">37.5203</span>],<br>        <span class="hljs-string">&#x27;呼和浩特&#x27;</span>: [<span class="hljs-number">111.667</span>, <span class="hljs-number">40.8083</span>],<br>        <span class="hljs-string">&#x27;包头&#x27;</span>: [<span class="hljs-number">109.871</span>, <span class="hljs-number">40.6617</span>],<br>        <span class="hljs-string">&#x27;乌海&#x27;</span>: [<span class="hljs-number">106.814</span>, <span class="hljs-number">39.6692</span>],<br>        <span class="hljs-string">&#x27;赤峰&#x27;</span>: [<span class="hljs-number">118.957</span>, <span class="hljs-number">42.2673</span>],<br>        <span class="hljs-string">&#x27;通辽&#x27;</span>: [<span class="hljs-number">122.261</span>, <span class="hljs-number">43.6059</span>],<br>        <span class="hljs-string">&#x27;鄂尔多斯&#x27;</span>: [<span class="hljs-number">110.003</span>, <span class="hljs-number">39.8223</span>],<br>        <span class="hljs-string">&#x27;呼伦贝尔&#x27;</span>: [<span class="hljs-number">119.756</span>, <span class="hljs-number">49.2458</span>],<br>        <span class="hljs-string">&#x27;巴彦淖尔&#x27;</span>: [<span class="hljs-number">107.376</span>, <span class="hljs-number">40.7801</span>],<br>        <span class="hljs-string">&#x27;乌兰察布&#x27;</span>: [<span class="hljs-number">113.121</span>, <span class="hljs-number">41.0317</span>],<br>        <span class="hljs-string">&#x27;兴安&#x27;</span>: [<span class="hljs-number">122.135</span>, <span class="hljs-number">46.0872</span>],<br>        <span class="hljs-string">&#x27;锡林郭勒&#x27;</span>: [<span class="hljs-number">116.099</span>, <span class="hljs-number">43.9455</span>],<br>        <span class="hljs-string">&#x27;阿拉善&#x27;</span>: [<span class="hljs-number">105.686</span>, <span class="hljs-number">38.8464</span>],<br>        <span class="hljs-string">&#x27;沈阳&#x27;</span>: [<span class="hljs-number">123.434</span>, <span class="hljs-number">41.8057</span>],<br>        <span class="hljs-string">&#x27;大连&#x27;</span>: [<span class="hljs-number">121.617</span>, <span class="hljs-number">38.9143</span>],<br>        <span class="hljs-string">&#x27;鞍山&#x27;</span>: [<span class="hljs-number">123.002</span>, <span class="hljs-number">41.1158</span>],<br>        <span class="hljs-string">&#x27;抚顺&#x27;</span>: [<span class="hljs-number">123.924</span>, <span class="hljs-number">41.8678</span>],<br>        <span class="hljs-string">&#x27;本溪&#x27;</span>: [<span class="hljs-number">123.786</span>, <span class="hljs-number">41.2984</span>],<br>        <span class="hljs-string">&#x27;丹东&#x27;</span>: [<span class="hljs-number">124.398</span>, <span class="hljs-number">40.1325</span>],<br>        <span class="hljs-string">&#x27;锦州&#x27;</span>: [<span class="hljs-number">121.148</span>, <span class="hljs-number">41.1261</span>],<br>        <span class="hljs-string">&#x27;营口&#x27;</span>: [<span class="hljs-number">122.25</span>, <span class="hljs-number">40.6716</span>],<br>        <span class="hljs-string">&#x27;阜新&#x27;</span>: [<span class="hljs-number">121.654</span>, <span class="hljs-number">42.0143</span>],<br>        <span class="hljs-string">&#x27;辽阳&#x27;</span>: [<span class="hljs-number">123.179</span>, <span class="hljs-number">41.2778</span>],<br>        <span class="hljs-string">&#x27;盘锦&#x27;</span>: [<span class="hljs-number">122.071</span>, <span class="hljs-number">41.1188</span>],<br>        <span class="hljs-string">&#x27;铁岭&#x27;</span>: [<span class="hljs-number">123.843</span>, <span class="hljs-number">42.2867</span>],<br>        <span class="hljs-string">&#x27;朝阳&#x27;</span>: [<span class="hljs-number">120.45</span>, <span class="hljs-number">41.5735</span>],<br>        <span class="hljs-string">&#x27;葫芦岛&#x27;</span>: [<span class="hljs-number">120.856</span>, <span class="hljs-number">40.7481</span>],<br>        <span class="hljs-string">&#x27;长春&#x27;</span>: [<span class="hljs-number">125.325</span>, <span class="hljs-number">43.8869</span>],<br>        <span class="hljs-string">&#x27;吉林&#x27;</span>: [<span class="hljs-number">126.571</span>, <span class="hljs-number">43.8458</span>],<br>        <span class="hljs-string">&#x27;四平&#x27;</span>: [<span class="hljs-number">124.398</span>, <span class="hljs-number">43.1725</span>],<br>        <span class="hljs-string">&#x27;辽源&#x27;</span>: [<span class="hljs-number">125.145</span>, <span class="hljs-number">42.9058</span>],<br>        <span class="hljs-string">&#x27;通化&#x27;</span>: [<span class="hljs-number">125.94</span>, <span class="hljs-number">41.7292</span>],<br>        <span class="hljs-string">&#x27;白山&#x27;</span>: [<span class="hljs-number">126.424</span>, <span class="hljs-number">41.9401</span>],<br>        <span class="hljs-string">&#x27;松原&#x27;</span>: [<span class="hljs-number">124.824</span>, <span class="hljs-number">45.1409</span>],<br>        <span class="hljs-string">&#x27;白城&#x27;</span>: [<span class="hljs-number">122.838</span>, <span class="hljs-number">45.6204</span>],<br>        <span class="hljs-string">&#x27;延边朝鲜族自治&#x27;</span>: [<span class="hljs-number">129.498</span>, <span class="hljs-number">42.8942</span>],<br>        <span class="hljs-string">&#x27;哈尔滨&#x27;</span>: [<span class="hljs-number">126.652</span>, <span class="hljs-number">45.7613</span>],<br>        <span class="hljs-string">&#x27;齐齐哈尔&#x27;</span>: [<span class="hljs-number">123.937</span>, <span class="hljs-number">47.3416</span>],<br>        <span class="hljs-string">&#x27;鸡西&#x27;</span>: [<span class="hljs-number">130.97</span>, <span class="hljs-number">45.2952</span>],<br>        <span class="hljs-string">&#x27;鹤岗&#x27;</span>: [<span class="hljs-number">130.279</span>, <span class="hljs-number">47.3311</span>],<br>        <span class="hljs-string">&#x27;双鸭山&#x27;</span>: [<span class="hljs-number">131.16</span>, <span class="hljs-number">46.6469</span>],<br>        <span class="hljs-string">&#x27;大庆&#x27;</span>: [<span class="hljs-number">125.094</span>, <span class="hljs-number">46.5883</span>],<br>        <span class="hljs-string">&#x27;伊春&#x27;</span>: [<span class="hljs-number">128.901</span>, <span class="hljs-number">47.7247</span>],<br>        <span class="hljs-string">&#x27;佳木斯&#x27;</span>: [<span class="hljs-number">130.37</span>, <span class="hljs-number">46.8075</span>],<br>        <span class="hljs-string">&#x27;七台河&#x27;</span>: [<span class="hljs-number">131.008</span>, <span class="hljs-number">45.7719</span>],<br>        <span class="hljs-string">&#x27;牡丹江&#x27;</span>: [<span class="hljs-number">129.623</span>, <span class="hljs-number">44.5848</span>],<br>        <span class="hljs-string">&#x27;黑河&#x27;</span>: [<span class="hljs-number">127.501</span>, <span class="hljs-number">50.2479</span>],<br>        <span class="hljs-string">&#x27;绥化&#x27;</span>: [<span class="hljs-number">126.99</span>, <span class="hljs-number">46.637</span>],<br>        <span class="hljs-string">&#x27;大兴安岭地&#x27;</span>: [<span class="hljs-number">124.397</span>, <span class="hljs-number">51.6737</span>],<br>        <span class="hljs-string">&#x27;南京&#x27;</span>: [<span class="hljs-number">118.792</span>, <span class="hljs-number">32.0562</span>],<br>        <span class="hljs-string">&#x27;无锡&#x27;</span>: [<span class="hljs-number">120.359</span>, <span class="hljs-number">31.5611</span>],<br>        <span class="hljs-string">&#x27;徐州&#x27;</span>: [<span class="hljs-number">117.174</span>, <span class="hljs-number">34.2586</span>],<br>        <span class="hljs-string">&#x27;常州&#x27;</span>: [<span class="hljs-number">119.975</span>, <span class="hljs-number">31.7698</span>],<br>        <span class="hljs-string">&#x27;苏州&#x27;</span>: [<span class="hljs-number">120.639</span>, <span class="hljs-number">31.3205</span>],<br>        <span class="hljs-string">&#x27;南通&#x27;</span>: [<span class="hljs-number">120.871</span>, <span class="hljs-number">32.0093</span>],<br>        <span class="hljs-string">&#x27;连云港&#x27;</span>: [<span class="hljs-number">119.173</span>, <span class="hljs-number">34.5959</span>],<br>        <span class="hljs-string">&#x27;淮安&#x27;</span>: [<span class="hljs-number">119.015</span>, <span class="hljs-number">33.612</span>],<br>        <span class="hljs-string">&#x27;盐城&#x27;</span>: [<span class="hljs-number">120.139</span>, <span class="hljs-number">33.3794</span>],<br>        <span class="hljs-string">&#x27;扬州&#x27;</span>: [<span class="hljs-number">119.413</span>, <span class="hljs-number">32.4195</span>],<br>        <span class="hljs-string">&#x27;镇江&#x27;</span>: [<span class="hljs-number">119.442</span>, <span class="hljs-number">32.211</span>],<br>        <span class="hljs-string">&#x27;泰州&#x27;</span>: [<span class="hljs-number">119.921</span>, <span class="hljs-number">32.4617</span>],<br>        <span class="hljs-string">&#x27;宿迁&#x27;</span>: [<span class="hljs-number">118.297</span>, <span class="hljs-number">33.9539</span>],<br>        <span class="hljs-string">&#x27;杭州&#x27;</span>: [<span class="hljs-number">120.173</span>, <span class="hljs-number">30.274</span>],<br>        <span class="hljs-string">&#x27;宁波&#x27;</span>: [<span class="hljs-number">121.544</span>, <span class="hljs-number">29.8683</span>],<br>        <span class="hljs-string">&#x27;温州&#x27;</span>: [<span class="hljs-number">120.638</span>, <span class="hljs-number">28.027</span>],<br>        <span class="hljs-string">&#x27;嘉兴&#x27;</span>: [<span class="hljs-number">120.759</span>, <span class="hljs-number">30.7539</span>],<br>        <span class="hljs-string">&#x27;湖州&#x27;</span>: [<span class="hljs-number">120.097</span>, <span class="hljs-number">30.8706</span>],<br>        <span class="hljs-string">&#x27;绍兴&#x27;</span>: [<span class="hljs-number">120.586</span>, <span class="hljs-number">29.9958</span>],<br>        <span class="hljs-string">&#x27;金华&#x27;</span>: [<span class="hljs-number">119.652</span>, <span class="hljs-number">29.0896</span>],<br>        <span class="hljs-string">&#x27;衢州&#x27;</span>: [<span class="hljs-number">118.874</span>, <span class="hljs-number">28.9359</span>],<br>        <span class="hljs-string">&#x27;舟山&#x27;</span>: [<span class="hljs-number">122.106</span>, <span class="hljs-number">30.0132</span>],<br>        <span class="hljs-string">&#x27;台州&#x27;</span>: [<span class="hljs-number">121.456</span>, <span class="hljs-number">28.6708</span>],<br>        <span class="hljs-string">&#x27;丽水&#x27;</span>: [<span class="hljs-number">119.917</span>, <span class="hljs-number">28.4522</span>],<br>        <span class="hljs-string">&#x27;合肥&#x27;</span>: [<span class="hljs-number">117.296</span>, <span class="hljs-number">31.8693</span>],<br>        <span class="hljs-string">&#x27;芜湖&#x27;</span>: [<span class="hljs-number">118.376</span>, <span class="hljs-number">31.3273</span>],<br>        <span class="hljs-string">&#x27;蚌埠&#x27;</span>: [<span class="hljs-number">117.402</span>, <span class="hljs-number">32.9302</span>],<br>        <span class="hljs-string">&#x27;淮南&#x27;</span>: [<span class="hljs-number">117.0</span>, <span class="hljs-number">32.6383</span>],<br>        <span class="hljs-string">&#x27;马鞍山&#x27;</span>: [<span class="hljs-number">118.502</span>, <span class="hljs-number">31.693</span>],<br>        <span class="hljs-string">&#x27;淮北&#x27;</span>: [<span class="hljs-number">116.793</span>, <span class="hljs-number">33.969</span>],<br>        <span class="hljs-string">&#x27;铜陵&#x27;</span>: [<span class="hljs-number">117.811</span>, <span class="hljs-number">30.9446</span>],<br>        <span class="hljs-string">&#x27;安庆&#x27;</span>: [<span class="hljs-number">117.051</span>, <span class="hljs-number">30.527</span>],<br>        <span class="hljs-string">&#x27;黄山&#x27;</span>: [<span class="hljs-number">118.317</span>, <span class="hljs-number">29.7099</span>],<br>        <span class="hljs-string">&#x27;滁州&#x27;</span>: [<span class="hljs-number">118.318</span>, <span class="hljs-number">32.3011</span>],<br>        <span class="hljs-string">&#x27;阜阳&#x27;</span>: [<span class="hljs-number">115.82</span>, <span class="hljs-number">32.8971</span>],<br>        <span class="hljs-string">&#x27;宿州&#x27;</span>: [<span class="hljs-number">116.984</span>, <span class="hljs-number">33.6381</span>],<br>        <span class="hljs-string">&#x27;巢湖&#x27;</span>: [<span class="hljs-number">117.87</span>, <span class="hljs-number">31.6009</span>],<br>        <span class="hljs-string">&#x27;六安&#x27;</span>: [<span class="hljs-number">116.491</span>, <span class="hljs-number">31.7426</span>],<br>        <span class="hljs-string">&#x27;亳州&#x27;</span>: [<span class="hljs-number">115.783</span>, <span class="hljs-number">33.8696</span>],<br>        <span class="hljs-string">&#x27;池州&#x27;</span>: [<span class="hljs-number">117.489</span>, <span class="hljs-number">30.6557</span>],<br>        <span class="hljs-string">&#x27;宣城&#x27;</span>: [<span class="hljs-number">118.755</span>, <span class="hljs-number">30.9469</span>],<br>        <span class="hljs-string">&#x27;福州&#x27;</span>: [<span class="hljs-number">119.306</span>, <span class="hljs-number">26.0761</span>],<br>        <span class="hljs-string">&#x27;厦门&#x27;</span>: [<span class="hljs-number">118.117</span>, <span class="hljs-number">24.4838</span>],<br>        <span class="hljs-string">&#x27;莆田&#x27;</span>: [<span class="hljs-number">119.005</span>, <span class="hljs-number">25.434</span>],<br>        <span class="hljs-string">&#x27;三明&#x27;</span>: [<span class="hljs-number">117.64</span>, <span class="hljs-number">26.2681</span>],<br>        <span class="hljs-string">&#x27;泉州&#x27;</span>: [<span class="hljs-number">118.585</span>, <span class="hljs-number">24.9295</span>],<br>        <span class="hljs-string">&#x27;漳州&#x27;</span>: [<span class="hljs-number">117.666</span>, <span class="hljs-number">24.5124</span>],<br>        <span class="hljs-string">&#x27;南平&#x27;</span>: [<span class="hljs-number">118.179</span>, <span class="hljs-number">26.6399</span>],<br>        <span class="hljs-string">&#x27;龙岩&#x27;</span>: [<span class="hljs-number">117.033</span>, <span class="hljs-number">25.0946</span>],<br>        <span class="hljs-string">&#x27;宁德&#x27;</span>: [<span class="hljs-number">119.537</span>, <span class="hljs-number">26.6528</span>],<br>        <span class="hljs-string">&#x27;南昌&#x27;</span>: [<span class="hljs-number">115.897</span>, <span class="hljs-number">28.6788</span>],<br>        <span class="hljs-string">&#x27;景德镇&#x27;</span>: [<span class="hljs-number">117.193</span>, <span class="hljs-number">29.298</span>],<br>        <span class="hljs-string">&#x27;萍乡&#x27;</span>: [<span class="hljs-number">113.852</span>, <span class="hljs-number">27.6227</span>],<br>        <span class="hljs-string">&#x27;九江&#x27;</span>: [<span class="hljs-number">115.99</span>, <span class="hljs-number">29.7156</span>],<br>        <span class="hljs-string">&#x27;新余&#x27;</span>: [<span class="hljs-number">114.918</span>, <span class="hljs-number">27.8163</span>],<br>        <span class="hljs-string">&#x27;鹰潭&#x27;</span>: [<span class="hljs-number">117.034</span>, <span class="hljs-number">28.2394</span>],<br>        <span class="hljs-string">&#x27;赣州&#x27;</span>: [<span class="hljs-number">114.942</span>, <span class="hljs-number">25.8553</span>],<br>        <span class="hljs-string">&#x27;吉安&#x27;</span>: [<span class="hljs-number">114.987</span>, <span class="hljs-number">27.1136</span>],<br>        <span class="hljs-string">&#x27;宜春&#x27;</span>: [<span class="hljs-number">114.399</span>, <span class="hljs-number">27.8068</span>],<br>        <span class="hljs-string">&#x27;抚州&#x27;</span>: [<span class="hljs-number">116.363</span>, <span class="hljs-number">27.9793</span>],<br>        <span class="hljs-string">&#x27;上饶&#x27;</span>: [<span class="hljs-number">117.969</span>, <span class="hljs-number">28.4456</span>],<br>        <span class="hljs-string">&#x27;济南&#x27;</span>: [<span class="hljs-number">117.021</span>, <span class="hljs-number">36.6594</span>],<br>        <span class="hljs-string">&#x27;青岛&#x27;</span>: [<span class="hljs-number">120.357</span>, <span class="hljs-number">36.084</span>],<br>        <span class="hljs-string">&#x27;淄博&#x27;</span>: [<span class="hljs-number">118.05</span>, <span class="hljs-number">36.8063</span>],<br>        <span class="hljs-string">&#x27;枣庄&#x27;</span>: [<span class="hljs-number">117.309</span>, <span class="hljs-number">34.8127</span>],<br>        <span class="hljs-string">&#x27;东营&#x27;</span>: [<span class="hljs-number">118.675</span>, <span class="hljs-number">37.4321</span>],<br>        <span class="hljs-string">&#x27;烟台&#x27;</span>: [<span class="hljs-number">121.392</span>, <span class="hljs-number">37.5379</span>],<br>        <span class="hljs-string">&#x27;潍坊&#x27;</span>: [<span class="hljs-number">119.122</span>, <span class="hljs-number">36.7159</span>],<br>        <span class="hljs-string">&#x27;济宁&#x27;</span>: [<span class="hljs-number">116.588</span>, <span class="hljs-number">35.4133</span>],<br>        <span class="hljs-string">&#x27;泰安&#x27;</span>: [<span class="hljs-number">117.121</span>, <span class="hljs-number">36.1813</span>],<br>        <span class="hljs-string">&#x27;威海&#x27;</span>: [<span class="hljs-number">122.122</span>, <span class="hljs-number">37.5043</span>],<br>        <span class="hljs-string">&#x27;日照&#x27;</span>: [<span class="hljs-number">119.526</span>, <span class="hljs-number">35.4188</span>],<br>        <span class="hljs-string">&#x27;莱芜&#x27;</span>: [<span class="hljs-number">117.679</span>, <span class="hljs-number">36.2136</span>],<br>        <span class="hljs-string">&#x27;临沂&#x27;</span>: [<span class="hljs-number">118.346</span>, <span class="hljs-number">35.0538</span>],<br>        <span class="hljs-string">&#x27;德州&#x27;</span>: [<span class="hljs-number">116.302</span>, <span class="hljs-number">37.4545</span>],<br>        <span class="hljs-string">&#x27;聊城&#x27;</span>: [<span class="hljs-number">115.986</span>, <span class="hljs-number">36.4561</span>],<br>        <span class="hljs-string">&#x27;滨州&#x27;</span>: [<span class="hljs-number">118.016</span>, <span class="hljs-number">37.3832</span>],<br>        <span class="hljs-string">&#x27;郑州&#x27;</span>: [<span class="hljs-number">113.663</span>, <span class="hljs-number">34.7619</span>],<br>        <span class="hljs-string">&#x27;开封&#x27;</span>: [<span class="hljs-number">114.34</span>, <span class="hljs-number">34.7893</span>],<br>        <span class="hljs-string">&#x27;洛阳&#x27;</span>: [<span class="hljs-number">112.401</span>, <span class="hljs-number">34.6567</span>],<br>        <span class="hljs-string">&#x27;平顶山&#x27;</span>: [<span class="hljs-number">113.304</span>, <span class="hljs-number">33.7274</span>],<br>        <span class="hljs-string">&#x27;安阳&#x27;</span>: [<span class="hljs-number">114.346</span>, <span class="hljs-number">36.1112</span>],<br>        <span class="hljs-string">&#x27;鹤壁&#x27;</span>: [<span class="hljs-number">114.297</span>, <span class="hljs-number">35.7481</span>],<br>        <span class="hljs-string">&#x27;新乡&#x27;</span>: [<span class="hljs-number">113.89</span>, <span class="hljs-number">35.3015</span>],<br>        <span class="hljs-string">&#x27;焦作&#x27;</span>: [<span class="hljs-number">113.228</span>, <span class="hljs-number">35.2338</span>],<br>        <span class="hljs-string">&#x27;濮阳&#x27;</span>: [<span class="hljs-number">115.029</span>, <span class="hljs-number">35.7632</span>],<br>        <span class="hljs-string">&#x27;许昌&#x27;</span>: [<span class="hljs-number">113.832</span>, <span class="hljs-number">34.0222</span>],<br>        <span class="hljs-string">&#x27;漯河&#x27;</span>: [<span class="hljs-number">114.036</span>, <span class="hljs-number">33.5673</span>],<br>        <span class="hljs-string">&#x27;三门峡&#x27;</span>: [<span class="hljs-number">111.192</span>, <span class="hljs-number">34.7758</span>],<br>        <span class="hljs-string">&#x27;南阳&#x27;</span>: [<span class="hljs-number">112.534</span>, <span class="hljs-number">32.9993</span>],<br>        <span class="hljs-string">&#x27;商丘&#x27;</span>: [<span class="hljs-number">115.651</span>, <span class="hljs-number">34.4389</span>],<br>        <span class="hljs-string">&#x27;信阳&#x27;</span>: [<span class="hljs-number">114.075</span>, <span class="hljs-number">32.124</span>],<br>        <span class="hljs-string">&#x27;周口&#x27;</span>: [<span class="hljs-number">114.653</span>, <span class="hljs-number">33.6166</span>],<br>        <span class="hljs-string">&#x27;驻马店&#x27;</span>: [<span class="hljs-number">114.028</span>, <span class="hljs-number">32.9832</span>],<br>        <span class="hljs-string">&#x27;武汉&#x27;</span>: [<span class="hljs-number">114.281</span>, <span class="hljs-number">30.5781</span>],<br>        <span class="hljs-string">&#x27;黄石&#x27;</span>: [<span class="hljs-number">115.06</span>, <span class="hljs-number">30.2063</span>],<br>        <span class="hljs-string">&#x27;十堰&#x27;</span>: [<span class="hljs-number">110.782</span>, <span class="hljs-number">32.6553</span>],<br>        <span class="hljs-string">&#x27;宜昌&#x27;</span>: [<span class="hljs-number">111.295</span>, <span class="hljs-number">30.7012</span>],<br>        <span class="hljs-string">&#x27;襄樊&#x27;</span>: [<span class="hljs-number">112.135</span>, <span class="hljs-number">32.062</span>],<br>        <span class="hljs-string">&#x27;鄂州&#x27;</span>: [<span class="hljs-number">114.904</span>, <span class="hljs-number">30.3898</span>],<br>        <span class="hljs-string">&#x27;荆门&#x27;</span>: [<span class="hljs-number">112.196</span>, <span class="hljs-number">31.0277</span>],<br>        <span class="hljs-string">&#x27;孝感&#x27;</span>: [<span class="hljs-number">113.919</span>, <span class="hljs-number">30.9246</span>],<br>        <span class="hljs-string">&#x27;荆州&#x27;</span>: [<span class="hljs-number">112.245</span>, <span class="hljs-number">30.3252</span>],<br>        <span class="hljs-string">&#x27;黄冈&#x27;</span>: [<span class="hljs-number">114.875</span>, <span class="hljs-number">30.4465</span>],<br>        <span class="hljs-string">&#x27;咸宁&#x27;</span>: [<span class="hljs-number">114.336</span>, <span class="hljs-number">29.8337</span>],<br>        <span class="hljs-string">&#x27;随州&#x27;</span>: [<span class="hljs-number">113.375</span>, <span class="hljs-number">31.7167</span>],<br>        <span class="hljs-string">&#x27;恩施土家族苗族自治&#x27;</span>: [<span class="hljs-number">109.482</span>, <span class="hljs-number">30.2899</span>],<br>        <span class="hljs-string">&#x27;长沙&#x27;</span>: [<span class="hljs-number">113.009</span>, <span class="hljs-number">28.2085</span>],<br>        <span class="hljs-string">&#x27;株洲&#x27;</span>: [<span class="hljs-number">113.149</span>, <span class="hljs-number">27.8406</span>],<br>        <span class="hljs-string">&#x27;湘潭&#x27;</span>: [<span class="hljs-number">112.907</span>, <span class="hljs-number">27.8612</span>],<br>        <span class="hljs-string">&#x27;衡阳&#x27;</span>: [<span class="hljs-number">112.612</span>, <span class="hljs-number">26.8962</span>],<br>        <span class="hljs-string">&#x27;邵阳&#x27;</span>: [<span class="hljs-number">111.467</span>, <span class="hljs-number">27.2371</span>],<br>        <span class="hljs-string">&#x27;岳阳&#x27;</span>: [<span class="hljs-number">113.108</span>, <span class="hljs-number">29.3663</span>],<br>        <span class="hljs-string">&#x27;常德&#x27;</span>: [<span class="hljs-number">111.703</span>, <span class="hljs-number">29.0366</span>],<br>        <span class="hljs-string">&#x27;张家界&#x27;</span>: [<span class="hljs-number">110.477</span>, <span class="hljs-number">29.1197</span>],<br>        <span class="hljs-string">&#x27;益阳&#x27;</span>: [<span class="hljs-number">112.356</span>, <span class="hljs-number">28.58</span>],<br>        <span class="hljs-string">&#x27;郴州&#x27;</span>: [<span class="hljs-number">113.032</span>, <span class="hljs-number">25.7968</span>],<br>        <span class="hljs-string">&#x27;永州&#x27;</span>: [<span class="hljs-number">111.608</span>, <span class="hljs-number">26.438</span>],<br>        <span class="hljs-string">&#x27;怀化&#x27;</span>: [<span class="hljs-number">109.977</span>, <span class="hljs-number">27.5484</span>],<br>        <span class="hljs-string">&#x27;娄底&#x27;</span>: [<span class="hljs-number">111.998</span>, <span class="hljs-number">27.7259</span>],<br>        <span class="hljs-string">&#x27;湘西土家族苗族自治&#x27;</span>: [<span class="hljs-number">109.601</span>, <span class="hljs-number">27.9472</span>],<br>        <span class="hljs-string">&#x27;广州&#x27;</span>: [<span class="hljs-number">113.322</span>, <span class="hljs-number">23.1341</span>],<br>        <span class="hljs-string">&#x27;韶关&#x27;</span>: [<span class="hljs-number">113.598</span>, <span class="hljs-number">24.8024</span>],<br>        <span class="hljs-string">&#x27;深圳&#x27;</span>: [<span class="hljs-number">114.056</span>, <span class="hljs-number">22.5421</span>],<br>        <span class="hljs-string">&#x27;珠海&#x27;</span>: [<span class="hljs-number">113.547</span>, <span class="hljs-number">22.2532</span>],<br>        <span class="hljs-string">&#x27;汕头&#x27;</span>: [<span class="hljs-number">116.724</span>, <span class="hljs-number">23.3601</span>],<br>        <span class="hljs-string">&#x27;佛山&#x27;</span>: [<span class="hljs-number">113.121</span>, <span class="hljs-number">23.0305</span>],<br>        <span class="hljs-string">&#x27;江门&#x27;</span>: [<span class="hljs-number">113.085</span>, <span class="hljs-number">22.583</span>],<br>        <span class="hljs-string">&#x27;湛江&#x27;</span>: [<span class="hljs-number">110.421</span>, <span class="hljs-number">21.1989</span>],<br>        <span class="hljs-string">&#x27;茂名&#x27;</span>: [<span class="hljs-number">110.927</span>, <span class="hljs-number">21.6616</span>],<br>        <span class="hljs-string">&#x27;肇庆&#x27;</span>: [<span class="hljs-number">112.476</span>, <span class="hljs-number">23.0734</span>],<br>        <span class="hljs-string">&#x27;惠州&#x27;</span>: [<span class="hljs-number">114.417</span>, <span class="hljs-number">23.0896</span>],<br>        <span class="hljs-string">&#x27;梅州&#x27;</span>: [<span class="hljs-number">116.118</span>, <span class="hljs-number">24.2988</span>],<br>        <span class="hljs-string">&#x27;汕尾&#x27;</span>: [<span class="hljs-number">115.368</span>, <span class="hljs-number">22.7782</span>],<br>        <span class="hljs-string">&#x27;河源&#x27;</span>: [<span class="hljs-number">114.697</span>, <span class="hljs-number">23.7503</span>],<br>        <span class="hljs-string">&#x27;阳江&#x27;</span>: [<span class="hljs-number">111.984</span>, <span class="hljs-number">21.872</span>],<br>        <span class="hljs-string">&#x27;清远&#x27;</span>: [<span class="hljs-number">113.045</span>, <span class="hljs-number">23.6882</span>],<br>        <span class="hljs-string">&#x27;东莞&#x27;</span>: [<span class="hljs-number">113.759</span>, <span class="hljs-number">23.0384</span>],<br>        <span class="hljs-string">&#x27;中山&#x27;</span>: [<span class="hljs-number">113.372</span>, <span class="hljs-number">22.525</span>],<br>        <span class="hljs-string">&#x27;潮州&#x27;</span>: [<span class="hljs-number">116.642</span>, <span class="hljs-number">23.6713</span>],<br>        <span class="hljs-string">&#x27;揭阳&#x27;</span>: [<span class="hljs-number">116.37</span>, <span class="hljs-number">23.5276</span>],<br>        <span class="hljs-string">&#x27;云浮&#x27;</span>: [<span class="hljs-number">112.044</span>, <span class="hljs-number">22.9294</span>],<br>        <span class="hljs-string">&#x27;南宁&#x27;</span>: [<span class="hljs-number">108.311</span>, <span class="hljs-number">22.8178</span>],<br>        <span class="hljs-string">&#x27;柳州&#x27;</span>: [<span class="hljs-number">109.413</span>, <span class="hljs-number">24.3068</span>],<br>        <span class="hljs-string">&#x27;桂林&#x27;</span>: [<span class="hljs-number">110.285</span>, <span class="hljs-number">25.2827</span>],<br>        <span class="hljs-string">&#x27;梧州&#x27;</span>: [<span class="hljs-number">111.304</span>, <span class="hljs-number">23.5036</span>],<br>        <span class="hljs-string">&#x27;北海&#x27;</span>: [<span class="hljs-number">109.123</span>, <span class="hljs-number">21.4788</span>],<br>        <span class="hljs-string">&#x27;防城港&#x27;</span>: [<span class="hljs-number">108.346</span>, <span class="hljs-number">21.6146</span>],<br>        <span class="hljs-string">&#x27;钦州&#x27;</span>: [<span class="hljs-number">108.609</span>, <span class="hljs-number">21.9509</span>],<br>        <span class="hljs-string">&#x27;贵港&#x27;</span>: [<span class="hljs-number">109.606</span>, <span class="hljs-number">23.0939</span>],<br>        <span class="hljs-string">&#x27;玉林&#x27;</span>: [<span class="hljs-number">110.151</span>, <span class="hljs-number">22.6255</span>],<br>        <span class="hljs-string">&#x27;百色&#x27;</span>: [<span class="hljs-number">106.621</span>, <span class="hljs-number">23.9018</span>],<br>        <span class="hljs-string">&#x27;贺州&#x27;</span>: [<span class="hljs-number">111.563</span>, <span class="hljs-number">24.4279</span>],<br>        <span class="hljs-string">&#x27;河池&#x27;</span>: [<span class="hljs-number">108.062</span>, <span class="hljs-number">24.6972</span>],<br>        <span class="hljs-string">&#x27;来宾&#x27;</span>: [<span class="hljs-number">109.222</span>, <span class="hljs-number">23.7351</span>],<br>        <span class="hljs-string">&#x27;崇左&#x27;</span>: [<span class="hljs-number">107.339</span>, <span class="hljs-number">22.4248</span>],<br>        <span class="hljs-string">&#x27;海口&#x27;</span>: [<span class="hljs-number">110.32</span>, <span class="hljs-number">20.0323</span>],<br>        <span class="hljs-string">&#x27;三亚&#x27;</span>: [<span class="hljs-number">109.514</span>, <span class="hljs-number">18.2355</span>],<br>        <span class="hljs-string">&#x27;成都&#x27;</span>: [<span class="hljs-number">104.066</span>, <span class="hljs-number">30.6581</span>],<br>        <span class="hljs-string">&#x27;自贡&#x27;</span>: [<span class="hljs-number">104.77</span>, <span class="hljs-number">29.3534</span>],<br>        <span class="hljs-string">&#x27;攀枝花&#x27;</span>: [<span class="hljs-number">101.699</span>, <span class="hljs-number">26.5733</span>],<br>        <span class="hljs-string">&#x27;泸州&#x27;</span>: [<span class="hljs-number">105.444</span>, <span class="hljs-number">28.8889</span>],<br>        <span class="hljs-string">&#x27;德阳&#x27;</span>: [<span class="hljs-number">104.388</span>, <span class="hljs-number">31.1368</span>],<br>        <span class="hljs-string">&#x27;绵阳&#x27;</span>: [<span class="hljs-number">104.726</span>, <span class="hljs-number">31.467</span>],<br>        <span class="hljs-string">&#x27;广元&#x27;</span>: [<span class="hljs-number">105.834</span>, <span class="hljs-number">32.4384</span>],<br>        <span class="hljs-string">&#x27;遂宁&#x27;</span>: [<span class="hljs-number">105.583</span>, <span class="hljs-number">30.5137</span>],<br>        <span class="hljs-string">&#x27;内江&#x27;</span>: [<span class="hljs-number">105.063</span>, <span class="hljs-number">29.5825</span>],<br>        <span class="hljs-string">&#x27;乐山&#x27;</span>: [<span class="hljs-number">103.746</span>, <span class="hljs-number">29.5866</span>],<br>        <span class="hljs-string">&#x27;南充&#x27;</span>: [<span class="hljs-number">106.095</span>, <span class="hljs-number">30.7844</span>],<br>        <span class="hljs-string">&#x27;眉山&#x27;</span>: [<span class="hljs-number">103.826</span>, <span class="hljs-number">30.0389</span>],<br>        <span class="hljs-string">&#x27;宜宾&#x27;</span>: [<span class="hljs-number">104.621</span>, <span class="hljs-number">28.7705</span>],<br>        <span class="hljs-string">&#x27;广安&#x27;</span>: [<span class="hljs-number">106.642</span>, <span class="hljs-number">30.4706</span>],<br>        <span class="hljs-string">&#x27;达州&#x27;</span>: [<span class="hljs-number">107.488</span>, <span class="hljs-number">31.2126</span>],<br>        <span class="hljs-string">&#x27;雅安&#x27;</span>: [<span class="hljs-number">103.015</span>, <span class="hljs-number">29.9937</span>],<br>        <span class="hljs-string">&#x27;巴中&#x27;</span>: [<span class="hljs-number">106.755</span>, <span class="hljs-number">31.8574</span>],<br>        <span class="hljs-string">&#x27;资阳&#x27;</span>: [<span class="hljs-number">104.651</span>, <span class="hljs-number">30.1286</span>],<br>        <span class="hljs-string">&#x27;阿坝藏族羌族自治&#x27;</span>: [<span class="hljs-number">102.222</span>, <span class="hljs-number">31.8992</span>],<br>        <span class="hljs-string">&#x27;甘孜藏族自治&#x27;</span>: [<span class="hljs-number">101.866</span>, <span class="hljs-number">30.1414</span>],<br>        <span class="hljs-string">&#x27;凉山彝族自治&#x27;</span>: [<span class="hljs-number">102.242</span>, <span class="hljs-number">27.9095</span>],<br>        <span class="hljs-string">&#x27;贵阳&#x27;</span>: [<span class="hljs-number">106.713</span>, <span class="hljs-number">26.5768</span>],<br>        <span class="hljs-string">&#x27;六盘水&#x27;</span>: [<span class="hljs-number">104.873</span>, <span class="hljs-number">26.5821</span>],<br>        <span class="hljs-string">&#x27;遵义&#x27;</span>: [<span class="hljs-number">106.931</span>, <span class="hljs-number">27.6926</span>],<br>        <span class="hljs-string">&#x27;安顺&#x27;</span>: [<span class="hljs-number">105.927</span>, <span class="hljs-number">26.2573</span>],<br>        <span class="hljs-string">&#x27;铜仁地&#x27;</span>: [<span class="hljs-number">109.188</span>, <span class="hljs-number">27.7184</span>],<br>        <span class="hljs-string">&#x27;黔西南布依族苗族自治&#x27;</span>: [<span class="hljs-number">104.895</span>, <span class="hljs-number">25.0935</span>],<br>        <span class="hljs-string">&#x27;毕节地&#x27;</span>: [<span class="hljs-number">105.288</span>, <span class="hljs-number">27.3032</span>],<br>        <span class="hljs-string">&#x27;黔东南苗族侗族自治&#x27;</span>: [<span class="hljs-number">107.981</span>, <span class="hljs-number">26.5831</span>],<br>        <span class="hljs-string">&#x27;黔南布依族苗族自治&#x27;</span>: [<span class="hljs-number">107.511</span>, <span class="hljs-number">26.283</span>],<br>        <span class="hljs-string">&#x27;昆明&#x27;</span>: [<span class="hljs-number">102.703</span>, <span class="hljs-number">25.0499</span>],<br>        <span class="hljs-string">&#x27;曲靖&#x27;</span>: [<span class="hljs-number">103.784</span>, <span class="hljs-number">25.4913</span>],<br>        <span class="hljs-string">&#x27;玉溪&#x27;</span>: [<span class="hljs-number">102.536</span>, <span class="hljs-number">24.3472</span>],<br>        <span class="hljs-string">&#x27;保山&#x27;</span>: [<span class="hljs-number">99.1647</span>, <span class="hljs-number">25.1249</span>],<br>        <span class="hljs-string">&#x27;昭通&#x27;</span>: [<span class="hljs-number">103.704</span>, <span class="hljs-number">27.3656</span>],<br>        <span class="hljs-string">&#x27;丽江&#x27;</span>: [<span class="hljs-number">100.277</span>, <span class="hljs-number">26.9229</span>],<br>        <span class="hljs-string">&#x27;临沧&#x27;</span>: [<span class="hljs-number">100.085</span>, <span class="hljs-number">23.8971</span>],<br>        <span class="hljs-string">&#x27;楚雄彝族自治&#x27;</span>: [<span class="hljs-number">101.545</span>, <span class="hljs-number">25.0549</span>],<br>        <span class="hljs-string">&#x27;红河哈尼族彝族自治&#x27;</span>: [<span class="hljs-number">103.18</span>, <span class="hljs-number">23.4301</span>],<br>        <span class="hljs-string">&#x27;文山壮族苗族自治&#x27;</span>: [<span class="hljs-number">104.255</span>, <span class="hljs-number">23.3803</span>],<br>        <span class="hljs-string">&#x27;西双版纳傣族自治&#x27;</span>: [<span class="hljs-number">100.799</span>, <span class="hljs-number">22.0109</span>],<br>        <span class="hljs-string">&#x27;大理白族自治&#x27;</span>: [<span class="hljs-number">100.222</span>, <span class="hljs-number">25.5842</span>],<br>        <span class="hljs-string">&#x27;德宏傣族景颇族自治&#x27;</span>: [<span class="hljs-number">98.5669</span>, <span class="hljs-number">24.4484</span>],<br>        <span class="hljs-string">&#x27;怒江傈僳族自治&#x27;</span>: [<span class="hljs-number">98.903</span>, <span class="hljs-number">25.8583</span>],<br>        <span class="hljs-string">&#x27;迪庆藏族自治&#x27;</span>: [<span class="hljs-number">99.709</span>, <span class="hljs-number">27.859</span>],<br>        <span class="hljs-string">&#x27;拉萨&#x27;</span>: [<span class="hljs-number">91.1189</span>, <span class="hljs-number">29.6553</span>],<br>        <span class="hljs-string">&#x27;昌都地&#x27;</span>: [<span class="hljs-number">97.1503</span>, <span class="hljs-number">31.1816</span>],<br>        <span class="hljs-string">&#x27;山南地&#x27;</span>: [<span class="hljs-number">91.805</span>, <span class="hljs-number">29.2407</span>],<br>        <span class="hljs-string">&#x27;日喀则地&#x27;</span>: [<span class="hljs-number">88.8884</span>, <span class="hljs-number">29.2717</span>],<br>        <span class="hljs-string">&#x27;那曲地&#x27;</span>: [<span class="hljs-number">92.0593</span>, <span class="hljs-number">31.4524</span>],<br>        <span class="hljs-string">&#x27;阿里地&#x27;</span>: [<span class="hljs-number">80.1027</span>, <span class="hljs-number">32.5517</span>],<br>        <span class="hljs-string">&#x27;林芝地&#x27;</span>: [<span class="hljs-number">94.4083</span>, <span class="hljs-number">29.6352</span>],<br>        <span class="hljs-string">&#x27;西安&#x27;</span>: [<span class="hljs-number">108.954</span>, <span class="hljs-number">34.2649</span>],<br>        <span class="hljs-string">&#x27;铜川&#x27;</span>: [<span class="hljs-number">108.948</span>, <span class="hljs-number">34.9005</span>],<br>        <span class="hljs-string">&#x27;宝鸡&#x27;</span>: [<span class="hljs-number">107.139</span>, <span class="hljs-number">34.3698</span>],<br>        <span class="hljs-string">&#x27;咸阳&#x27;</span>: [<span class="hljs-number">108.71</span>, <span class="hljs-number">34.3268</span>],<br>        <span class="hljs-string">&#x27;渭南&#x27;</span>: [<span class="hljs-number">109.51</span>, <span class="hljs-number">34.5073</span>],<br>        <span class="hljs-string">&#x27;延安&#x27;</span>: [<span class="hljs-number">109.496</span>, <span class="hljs-number">36.5948</span>],<br>        <span class="hljs-string">&#x27;汉中&#x27;</span>: [<span class="hljs-number">107.031</span>, <span class="hljs-number">33.0799</span>],<br>        <span class="hljs-string">&#x27;榆林&#x27;</span>: [<span class="hljs-number">109.754</span>, <span class="hljs-number">38.2954</span>],<br>        <span class="hljs-string">&#x27;安康&#x27;</span>: [<span class="hljs-number">109.031</span>, <span class="hljs-number">32.6917</span>],<br>        <span class="hljs-string">&#x27;商洛&#x27;</span>: [<span class="hljs-number">109.943</span>, <span class="hljs-number">33.8825</span>],<br>        <span class="hljs-string">&#x27;兰州&#x27;</span>: [<span class="hljs-number">103.835</span>, <span class="hljs-number">36.0599</span>],<br>        <span class="hljs-string">&#x27;嘉峪关&#x27;</span>: [<span class="hljs-number">98.2536</span>, <span class="hljs-number">39.8001</span>],<br>        <span class="hljs-string">&#x27;金昌&#x27;</span>: [<span class="hljs-number">102.175</span>, <span class="hljs-number">38.4764</span>],<br>        <span class="hljs-string">&#x27;白银&#x27;</span>: [<span class="hljs-number">104.151</span>, <span class="hljs-number">36.5506</span>],<br>        <span class="hljs-string">&#x27;天水&#x27;</span>: [<span class="hljs-number">105.702</span>, <span class="hljs-number">34.5875</span>],<br>        <span class="hljs-string">&#x27;武威&#x27;</span>: [<span class="hljs-number">102.634</span>, <span class="hljs-number">37.9317</span>],<br>        <span class="hljs-string">&#x27;张掖&#x27;</span>: [<span class="hljs-number">100.451</span>, <span class="hljs-number">38.931</span>],<br>        <span class="hljs-string">&#x27;平凉&#x27;</span>: [<span class="hljs-number">106.725</span>, <span class="hljs-number">35.5097</span>],<br>        <span class="hljs-string">&#x27;酒泉&#x27;</span>: [<span class="hljs-number">98.5139</span>, <span class="hljs-number">39.7563</span>],<br>        <span class="hljs-string">&#x27;庆阳&#x27;</span>: [<span class="hljs-number">107.862</span>, <span class="hljs-number">35.9344</span>],<br>        <span class="hljs-string">&#x27;定西&#x27;</span>: [<span class="hljs-number">104.622</span>, <span class="hljs-number">35.5852</span>],<br>        <span class="hljs-string">&#x27;陇南&#x27;</span>: [<span class="hljs-number">104.934</span>, <span class="hljs-number">33.4695</span>],<br>        <span class="hljs-string">&#x27;临夏回族自治&#x27;</span>: [<span class="hljs-number">103.201</span>, <span class="hljs-number">35.5914</span>],<br>        <span class="hljs-string">&#x27;甘南藏族自治&#x27;</span>: [<span class="hljs-number">102.899</span>, <span class="hljs-number">34.9854</span>],<br>        <span class="hljs-string">&#x27;西宁&#x27;</span>: [<span class="hljs-number">101.777</span>, <span class="hljs-number">36.6172</span>],<br>        <span class="hljs-string">&#x27;海东地&#x27;</span>: [<span class="hljs-number">102.086</span>, <span class="hljs-number">36.5092</span>],<br>        <span class="hljs-string">&#x27;海北藏族自治&#x27;</span>: [<span class="hljs-number">100.973</span>, <span class="hljs-number">36.9433</span>],<br>        <span class="hljs-string">&#x27;黄南藏族自治&#x27;</span>: [<span class="hljs-number">102.027</span>, <span class="hljs-number">35.5399</span>],<br>        <span class="hljs-string">&#x27;海南藏族自治&#x27;</span>: [<span class="hljs-number">100.638</span>, <span class="hljs-number">36.3244</span>],<br>        <span class="hljs-string">&#x27;果洛藏族自治&#x27;</span>: [<span class="hljs-number">100.295</span>, <span class="hljs-number">34.4775</span>],<br>        <span class="hljs-string">&#x27;玉树藏族自治&#x27;</span>: [<span class="hljs-number">97.013</span>, <span class="hljs-number">33.0183</span>],<br>        <span class="hljs-string">&#x27;海西蒙古族藏族自治&#x27;</span>: [<span class="hljs-number">97.3632</span>, <span class="hljs-number">37.4214</span>],<br>        <span class="hljs-string">&#x27;银川&#x27;</span>: [<span class="hljs-number">106.283</span>, <span class="hljs-number">38.4628</span>],<br>        <span class="hljs-string">&#x27;石嘴山&#x27;</span>: [<span class="hljs-number">106.386</span>, <span class="hljs-number">39.0146</span>],<br>        <span class="hljs-string">&#x27;吴忠&#x27;</span>: [<span class="hljs-number">106.194</span>, <span class="hljs-number">37.9852</span>],<br>        <span class="hljs-string">&#x27;固原&#x27;</span>: [<span class="hljs-number">106.281</span>, <span class="hljs-number">36.011</span>],<br>        <span class="hljs-string">&#x27;中卫&#x27;</span>: [<span class="hljs-number">105.686</span>, <span class="hljs-number">37.4829</span>],<br>        <span class="hljs-string">&#x27;乌鲁木齐&#x27;</span>: [<span class="hljs-number">87.6168</span>, <span class="hljs-number">43.8235</span>],<br>        <span class="hljs-string">&#x27;克拉玛依&#x27;</span>: [<span class="hljs-number">84.9312</span>, <span class="hljs-number">45.5964</span>],<br>        <span class="hljs-string">&#x27;吐鲁番地&#x27;</span>: [<span class="hljs-number">89.2107</span>, <span class="hljs-number">43.007</span>],<br>        <span class="hljs-string">&#x27;哈密地&#x27;</span>: [<span class="hljs-number">93.5502</span>, <span class="hljs-number">42.8991</span>],<br>        <span class="hljs-string">&#x27;昌吉回族自治&#x27;</span>: [<span class="hljs-number">87.9882</span>, <span class="hljs-number">44.0044</span>],<br>        <span class="hljs-string">&#x27;博尔塔拉蒙古自治&#x27;</span>: [<span class="hljs-number">82.0787</span>, <span class="hljs-number">44.9126</span>],<br>        <span class="hljs-string">&#x27;巴音郭楞蒙古自治&#x27;</span>: [<span class="hljs-number">86.1827</span>, <span class="hljs-number">41.8974</span>],<br>        <span class="hljs-string">&#x27;阿克苏地&#x27;</span>: [<span class="hljs-number">80.2445</span>, <span class="hljs-number">41.1239</span>],<br>        <span class="hljs-string">&#x27;克孜勒苏柯尔克孜自治&#x27;</span>: [<span class="hljs-number">76.67</span>, <span class="hljs-number">39.8878</span>],<br>        <span class="hljs-string">&#x27;喀什地&#x27;</span>: [<span class="hljs-number">75.9994</span>, <span class="hljs-number">39.4657</span>],<br>        <span class="hljs-string">&#x27;和田地&#x27;</span>: [<span class="hljs-number">79.7641</span>, <span class="hljs-number">37.2296</span>],<br>        <span class="hljs-string">&#x27;伊犁哈萨克自治&#x27;</span>: [<span class="hljs-number">81.3383</span>, <span class="hljs-number">43.9233</span>],<br>        <span class="hljs-string">&#x27;塔城地&#x27;</span>: [<span class="hljs-number">83.0148</span>, <span class="hljs-number">46.7523</span>],<br>        <span class="hljs-string">&#x27;阿勒泰地&#x27;</span>: [<span class="hljs-number">88.069</span>, <span class="hljs-number">47.81</span>],<br>        <span class="hljs-string">&#x27;仙桃&#x27;</span>: [<span class="hljs-number">113.453</span>, <span class="hljs-number">30.3646</span>],<br>        <span class="hljs-string">&#x27;潜江&#x27;</span>: [<span class="hljs-number">112.894</span>, <span class="hljs-number">30.4198</span>],<br>        <span class="hljs-string">&#x27;天门&#x27;</span>: [<span class="hljs-number">113.164</span>, <span class="hljs-number">30.6513</span>],<br>        <span class="hljs-string">&#x27;神农架林&#x27;</span>: [<span class="hljs-number">110.676</span>, <span class="hljs-number">31.7448</span>],<br>        <span class="hljs-string">&#x27;五指山&#x27;</span>: [<span class="hljs-number">109.517</span>, <span class="hljs-number">18.7773</span>],<br>        <span class="hljs-string">&#x27;琼海&#x27;</span>: [<span class="hljs-number">110.46</span>, <span class="hljs-number">19.248</span>],<br>        <span class="hljs-string">&#x27;儋州&#x27;</span>: [<span class="hljs-number">109.579</span>, <span class="hljs-number">19.5199</span>],<br>        <span class="hljs-string">&#x27;文昌&#x27;</span>: [<span class="hljs-number">110.748</span>, <span class="hljs-number">19.6159</span>],<br>        <span class="hljs-string">&#x27;万宁&#x27;</span>: [<span class="hljs-number">110.388</span>, <span class="hljs-number">18.8122</span>],<br>        <span class="hljs-string">&#x27;东方&#x27;</span>: [<span class="hljs-number">108.693</span>, <span class="hljs-number">19.0807</span>],<br>        <span class="hljs-string">&#x27;定安县&#x27;</span>: [<span class="hljs-number">110.447</span>, <span class="hljs-number">19.4883</span>],<br>        <span class="hljs-string">&#x27;屯昌县&#x27;</span>: [<span class="hljs-number">110.097</span>, <span class="hljs-number">19.3686</span>],<br>        <span class="hljs-string">&#x27;澄迈县&#x27;</span>: [<span class="hljs-number">110.016</span>, <span class="hljs-number">19.7302</span>],<br>        <span class="hljs-string">&#x27;临高县&#x27;</span>: [<span class="hljs-number">109.689</span>, <span class="hljs-number">19.8973</span>],<br>        <span class="hljs-string">&#x27;白沙黎族自治县&#x27;</span>: [<span class="hljs-number">109.44</span>, <span class="hljs-number">19.2375</span>],<br>        <span class="hljs-string">&#x27;昌江黎族自治县&#x27;</span>: [<span class="hljs-number">109.036</span>, <span class="hljs-number">19.3083</span>],<br>        <span class="hljs-string">&#x27;乐东黎族自治县&#x27;</span>: [<span class="hljs-number">109.175</span>, <span class="hljs-number">18.7435</span>],<br>        <span class="hljs-string">&#x27;陵水黎族自治县&#x27;</span>: [<span class="hljs-number">110.029</span>, <span class="hljs-number">18.5167</span>],<br>        <span class="hljs-string">&#x27;保亭黎族苗族自治县&#x27;</span>: [<span class="hljs-number">109.7</span>, <span class="hljs-number">18.6263</span>],<br>        <span class="hljs-string">&#x27;琼中黎族苗族自治县&#x27;</span>: [<span class="hljs-number">109.832</span>, <span class="hljs-number">19.0467</span>],<br>        <span class="hljs-string">&#x27;石河子&#x27;</span>: [<span class="hljs-number">86.0526</span>, <span class="hljs-number">44.3051</span>]<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">WHData</span> = []<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; jsonData.<span class="hljs-property">length</span>; i++) &#123;<br>        <span class="hljs-comment">// console.log(jsonData[i]);</span><br>        tmp = [];<br>        tmp.<span class="hljs-title function_">push</span>(&#123; <span class="hljs-attr">name</span>: jsonData[i].<span class="hljs-property">srcLoc</span> &#125;);<br>        tmp.<span class="hljs-title function_">push</span>(&#123; <span class="hljs-attr">name</span>: jsonData[i].<span class="hljs-property">dstLoc</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> &#125;);<br>        <span class="hljs-title class_">WHData</span>.<span class="hljs-title function_">push</span>(tmp);<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> planePath = <span class="hljs-string">&#x27;path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z&#x27;</span>;<br>    planePath = <span class="hljs-string">&quot;arrow&quot;</span>;<br><br>    <span class="hljs-keyword">var</span> convertData = <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        <span class="hljs-keyword">var</span> res = [];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) &#123;<br>            <span class="hljs-keyword">var</span> dataItem = data[i];<br>            <span class="hljs-keyword">var</span> fromCoord = geoCoordMap[dataItem[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>];<br>            <span class="hljs-keyword">var</span> toCoord = geoCoordMap[dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>];<br>            <span class="hljs-keyword">if</span> (fromCoord &amp;&amp; toCoord) &#123;<br>                res.<span class="hljs-title function_">push</span>([&#123;<br>                    <span class="hljs-attr">coord</span>: fromCoord<br>                &#125;, &#123;<br>                    <span class="hljs-attr">coord</span>: toCoord<br>                &#125;]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> color = [<span class="hljs-string">&#x27;#a6c84c&#x27;</span>, <span class="hljs-string">&#x27;#ffa022&#x27;</span>, <span class="hljs-string">&#x27;#46bee9&#x27;</span>];<br>    <span class="hljs-keyword">var</span> series = [];<br>    [[<span class="hljs-string">&#x27;Beijing&#x27;</span>, <span class="hljs-title class_">WHData</span>]].<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) &#123;<br>        series.<span class="hljs-title function_">push</span>(&#123;<br>            <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;lines&#x27;</span>,<br>            <span class="hljs-attr">zlevel</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">effect</span>: &#123;<br>                <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">period</span>: <span class="hljs-number">6</span>,<br>                <span class="hljs-attr">trailLength</span>: <span class="hljs-number">0.7</span>,<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span>,<br>                <span class="hljs-attr">symbolSize</span>: <span class="hljs-number">3</span><br>            &#125;,<br>            <span class="hljs-attr">lineStyle</span>: &#123;<br>                <span class="hljs-attr">normal</span>: &#123;<br>                    <span class="hljs-attr">color</span>: color[i],<br>                    <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-attr">curveness</span>: <span class="hljs-number">0.2</span><br>                &#125;<br>            &#125;,<br>            <span class="hljs-attr">data</span>: <span class="hljs-title function_">convertData</span>(item[<span class="hljs-number">1</span>])<br>        &#125;,<br>            &#123;<br>                <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;lines&#x27;</span>,<br>                <span class="hljs-attr">zlevel</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-attr">effect</span>: &#123;<br>                    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                    <span class="hljs-attr">period</span>: <span class="hljs-number">6</span>,<br>                    <span class="hljs-attr">trailLength</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-attr">symbol</span>: planePath,<br>                    <span class="hljs-attr">symbolSize</span>: <span class="hljs-number">8</span><br>                &#125;,<br>                <span class="hljs-attr">lineStyle</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">color</span>: color[i],<br>                        <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>,<br>                        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.4</span>,<br>                        <span class="hljs-attr">curveness</span>: <span class="hljs-number">0.2</span><br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">data</span>: <span class="hljs-title function_">convertData</span>(item[<span class="hljs-number">1</span>])<br>            &#125;,<br>            &#123;<br>                <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;effectScatter&#x27;</span>,<br>                <span class="hljs-attr">coordinateSystem</span>: <span class="hljs-string">&#x27;geo&#x27;</span>,<br>                <span class="hljs-attr">zlevel</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-attr">rippleEffect</span>: &#123;<br>                    <span class="hljs-attr">brushType</span>: <span class="hljs-string">&#x27;stroke&#x27;</span><br>                &#125;,<br>                <span class="hljs-attr">label</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                        <span class="hljs-attr">position</span>: <span class="hljs-string">&#x27;right&#x27;</span>,<br>                        <span class="hljs-attr">formatter</span>: <span class="hljs-string">&#x27;&#123;b&#125;&#x27;</span><br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">symbolSize</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) &#123;<br>                    <span class="hljs-keyword">return</span> val[<span class="hljs-number">2</span>] / <span class="hljs-number">8</span>;<br>                &#125;,<br>                <span class="hljs-attr">itemStyle</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">color</span>: color[i]<br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">data</span>: item[<span class="hljs-number">1</span>].<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">dataItem</span>) &#123;<br>                    <span class="hljs-keyword">return</span> &#123;<br>                        <span class="hljs-attr">name</span>: dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>,<br>                        <span class="hljs-attr">value</span>: geoCoordMap[dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>].<span class="hljs-title function_">concat</span>([dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">value</span>])<br>                    &#125;;<br>                &#125;)<br>            &#125;);<br>    &#125;);<br><br><br>    <span class="hljs-comment">// based ready dom, initialize echarts instance </span><br>    <span class="hljs-keyword">var</span> chart = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;main&#x27;</span>));<br><br>    option = &#123;<br>        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#404a59&#x27;</span>,<br>        <span class="hljs-attr">title</span>: &#123;<br>            <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;流量地图&#x27;</span>,<br>            <span class="hljs-attr">subtext</span>: <span class="hljs-string">&#x27;数据来自 npcap 实时抓取&#x27;</span>,<br>            <span class="hljs-attr">left</span>: <span class="hljs-string">&#x27;center&#x27;</span>,<br>            <span class="hljs-attr">textStyle</span>: &#123;<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">tooltip</span>: &#123;<br>            <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;item&#x27;</span><br>        &#125;,<br>        <span class="hljs-attr">legend</span>: &#123;<br>            <span class="hljs-attr">orient</span>: <span class="hljs-string">&#x27;vertical&#x27;</span>,<br>            <span class="hljs-attr">top</span>: <span class="hljs-string">&#x27;bottom&#x27;</span>,<br>            <span class="hljs-attr">left</span>: <span class="hljs-string">&#x27;right&#x27;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-string">&#x27;Beijing Top10&#x27;</span>, <span class="hljs-string">&#x27;Shanghai Top10&#x27;</span>, <span class="hljs-string">&#x27;Canton Top10&#x27;</span>],<br>            <span class="hljs-attr">textStyle</span>: &#123;<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span><br>            &#125;,<br>            <span class="hljs-attr">selectedMode</span>: <span class="hljs-string">&#x27;single&#x27;</span><br>        &#125;,<br>        <span class="hljs-attr">geo</span>: &#123;<br>            <span class="hljs-attr">map</span>: <span class="hljs-string">&#x27;china&#x27;</span>,<br>            <span class="hljs-attr">label</span>: &#123;<br>                <span class="hljs-attr">emphasis</span>: &#123;<br>                    <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span><br>                &#125;<br>            &#125;,<br>            <span class="hljs-attr">roam</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">itemStyle</span>: &#123;<br>                <span class="hljs-attr">normal</span>: &#123;<br>                    <span class="hljs-attr">areaColor</span>: <span class="hljs-string">&#x27;#323c48&#x27;</span>,<br>                    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&#x27;#404a59&#x27;</span><br>                &#125;,<br>                <span class="hljs-attr">emphasis</span>: &#123;<br>                    <span class="hljs-attr">areaColor</span>: <span class="hljs-string">&#x27;#2a333d&#x27;</span><br>                &#125;<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">series</span>: series<br>    &#125;;<br><br>    <span class="hljs-comment">// Use just the specified configurations and data charts. </span><br>    chart.<span class="hljs-title function_">setOption</span>(option);<br>&#125;);<br></code></pre></td></tr></table></figure><p>实验其中一次的结果如下：</p><p><img src="https://i.imgur.com/sB9CxoX.png"></p><p>说明：图中的每一条路径上的箭头数量代表了流量包的数量。</p><h3 id="习题与思考题-1"><a href="#习题与思考题-1" class="headerlink" title="习题与思考题"></a>习题与思考题</h3><p>1、应用WINPCAP能实现哪些网络应用?</p><ul><li>捕获原始数据包。不管这个包是发往本地机，还是其他机器之间的交换包</li><li>在数据包被发送到应用程序之前，通过用户定义的规则过滤</li><li>向网络发送原始数据包</li><li>对网络通信量做出统计</li></ul><p>应用 winpcap 实现的典型应用程序如 WireShark。</p><h3 id="项目源码地址"><a href="#项目源码地址" class="headerlink" title="项目源码地址"></a>项目源码地址</h3><p><a href="https://github.com/FanyFull/ComputerNetworkExperiment">https://github.com/FanyFull/ComputerNetworkExperiment</a></p><hr><p>参考：</p><p>1、<a href="https://www.reddit.com/r/ccna/comments/7mh86d/what_does_protocol_control_information_means/">https://www.reddit.com/r/ccna/comments/7mh86d/what_does_protocol_control_information_means/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>实验报告</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>hexo 执行 hexo g 产生 YAMLException: end of the stream or a document separator is expected 问题解决</title>
    <link href="/2022/06/29/hexo-%E6%89%A7%E8%A1%8C-hexo-g-%E4%BA%A7%E7%94%9F-YAMLException-end-of-the-stream-or-a-document-separator-is-expected-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2022/06/29/hexo-%E6%89%A7%E8%A1%8C-hexo-g-%E4%BA%A7%E7%94%9F-YAMLException-end-of-the-stream-or-a-document-separator-is-expected-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>其实就是少了头部标注文件：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-meta">---</span><br><span class="hljs-attr">title:</span> <span class="hljs-string">&gt;-</span><br><span class="hljs-string">  hexo 执行 hexo g 产生 YAMLException: end of the stream or a document separator is</span><br><span class="hljs-string">  expected 问题解决</span><br><span class="hljs-string"></span><span class="hljs-attr">date:</span> <span class="hljs-number">2022-06-29 16:00:28</span><br><span class="hljs-attr">tags:</span><br><span class="hljs-attr">categories:</span><br><span class="hljs-attr">index_img:</span><br><span class="hljs-attr">banner_img:</span><br><span class="hljs-meta">---</span><br></code></pre></td></tr></table></figure><p>把这个头部标注文件加上就可以了。</p>]]></content>
    
    
    
    <tags>
      
      <tag>bugs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java 后端传 Long 值到前端时精度丢失问题</title>
    <link href="/2022/06/28/Java-%E5%90%8E%E7%AB%AF%E4%BC%A0-Long-%E5%80%BC%E5%88%B0%E5%89%8D%E7%AB%AF%E6%97%B6%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/"/>
    <url>/2022/06/28/Java-%E5%90%8E%E7%AB%AF%E4%BC%A0-Long-%E5%80%BC%E5%88%B0%E5%89%8D%E7%AB%AF%E6%97%B6%E7%B2%BE%E5%BA%A6%E4%B8%A2%E5%A4%B1%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>后端的值传递到前端最后会丢失一些精度。</p><p>问题出现的场景是我在做一个简单的学生管理系统时遇到的，</p><p>前端需要使用到的数据：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 班级选中</span><br>$(<span class="hljs-string">&#x27;#recipient-grade option&#x27;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">var</span> grade = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">val</span>();<br>    <span class="hljs-keyword">if</span> (grade == student.<span class="hljs-property">grade</span>.<span class="hljs-property">id</span>) &#123;<br>    $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">prop</span>(<span class="hljs-string">&quot;selected&quot;</span>, <span class="hljs-literal">true</span>);<br>    &#125;<br>&#125;);<br></code></pre></td></tr></table></figure><p>后端传过来的数据 Grade 类的 <code>id</code> 是 <code>Long</code> 类型，采用数据库的雪花算法生成，传递到前端时，js 的数字类型接收时会丢失一些精度，因为 js 的数字类型不够所以就出现了这样的问题。</p><p>然后，这个问题我觉得出现得也算比较早了，解决方案也比较成熟了，我觉得最简单的解决方案就是给实体类的属性加一个相关的注解：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-meta">@JsonSerialize(using = ToStringSerializer.class)</span><br><span class="hljs-keyword">private</span> Long id;<br></code></pre></td></tr></table></figure><p>引用的包为：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.annotation.JsonSerialize;<br><span class="hljs-keyword">import</span> com.fasterxml.jackson.databind.ser.std.ToStringSerializer;<br></code></pre></td></tr></table></figure><hr><p>参考：<a href="https://blog.csdn.net/u010398771/article/details/103520893">https://blog.csdn.net/u010398771/article/details/103520893</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VS2022 C++ 连接 MySQL8</title>
    <link href="/2022/06/20/VS2022-C-%E8%BF%9E%E6%8E%A5-MySQL8/"/>
    <url>/2022/06/20/VS2022-C-%E8%BF%9E%E6%8E%A5-MySQL8/</url>
    
    <content type="html"><![CDATA[<p>前置要求：</p><p>下载安装 VS2022，MySQL8。</p><p>然后，配置 VS 环境。</p><p>之后，就是把相关的头文件和库目录添加到配置中：</p><p><img src="https://i.imgur.com/D06EaWZ.png"></p><p><img src="https://i.imgur.com/aPwSR82.png"></p><p><img src="https://i.imgur.com/Dxi3Bfu.png"></p><p><img src="https://i.imgur.com/iaOXL9h.png"></p><p>之后，还要将 libmysql.lib 文件添加到项目的根目录下：</p><p><img src="https://i.imgur.com/1ait2E8.png"></p><p><img src="https://i.imgur.com/i2HVfUF.png"></p><p>然后，我们可以写一个简单的查询来测试一下：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Windows.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;mysql.h&gt;</span> </span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;iostream&gt;</span></span><br><span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> std;<br><br><span class="hljs-comment">//#pragma comment(lib,&quot;libmysql.lib&quot;)</span><br><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">const</span> <span class="hljs-type">char</span> user[] = <span class="hljs-string">&quot;root&quot;</span>;         <span class="hljs-comment">//username</span><br><span class="hljs-type">const</span> <span class="hljs-type">char</span> pswd[] = <span class="hljs-string">&quot;lf123456&quot;</span>;     <span class="hljs-comment">//password</span><br><span class="hljs-type">const</span> <span class="hljs-type">char</span> host[] = <span class="hljs-string">&quot;localhost&quot;</span>;    <span class="hljs-comment">//or&quot;127.0.0.1&quot;</span><br><span class="hljs-type">const</span> <span class="hljs-type">char</span> database[] = <span class="hljs-string">&quot;computer_network&quot;</span>;       <span class="hljs-comment">//database   //有相应的数据库</span><br><span class="hljs-type">unsigned</span> <span class="hljs-type">int</span> port = <span class="hljs-number">3306</span>;           <span class="hljs-comment">//server port        </span><br>MYSQL myCont;<br>MYSQL_RES* result = <span class="hljs-literal">NULL</span>;<br>MYSQL_ROW sql_row;<br>MYSQL_FIELD* fd;<br><span class="hljs-type">char</span> column[<span class="hljs-number">32</span>][<span class="hljs-number">32</span>];<br><span class="hljs-type">int</span> res;<br><span class="hljs-built_in">mysql_init</span>(&amp;myCont);<br><span class="hljs-comment">//auto ret = mysql_real_connect(&amp;myCont, host, user, pswd, database, port, NULL, 0);</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_real_connect</span>(&amp;myCont, host, user, pswd, database, port, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>))<br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;connect succeed!&quot;</span> &lt;&lt; endl;<br><span class="hljs-built_in">mysql_query</span>(&amp;myCont, <span class="hljs-string">&quot;SET NAMES GBK&quot;</span>); <span class="hljs-comment">//设置编码格式,否则在cmd下无法显示中文</span><br>res = <span class="hljs-built_in">mysql_query</span>(&amp;myCont, <span class="hljs-string">&quot;select * from test_tb limit 2&quot;</span>);<span class="hljs-comment">//查询    //database下有相应的表才能成功</span><br><span class="hljs-keyword">if</span> (!res)<br>&#123;<br>result = <span class="hljs-built_in">mysql_store_result</span>(&amp;myCont);<span class="hljs-comment">//保存查询到的数据到result</span><br><span class="hljs-keyword">if</span> (result)<br>&#123;<br><span class="hljs-type">int</span> i, j;<br>cout &lt;&lt; <span class="hljs-string">&quot;number of result: &quot;</span> &lt;&lt; (<span class="hljs-type">unsigned</span> <span class="hljs-type">long</span>)<span class="hljs-built_in">mysql_num_rows</span>(result) &lt;&lt; endl;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; fd = <span class="hljs-built_in">mysql_fetch_field</span>(result); i++)<span class="hljs-comment">//获取列名</span><br>&#123;<br><span class="hljs-built_in">strcpy</span>(column[i], fd-&gt;name);<br>&#125;<br>j = <span class="hljs-built_in">mysql_num_fields</span>(result);<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; j; i++)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\t&quot;</span>, column[i]);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br><span class="hljs-keyword">while</span> (sql_row = <span class="hljs-built_in">mysql_fetch_row</span>(result))<span class="hljs-comment">//获取具体的数据</span><br>&#123;<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; i &lt; j; i++)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, sql_row[i]);<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;query sql failed!&quot;</span> &lt;&lt; endl;<br>&#125;<br>&#125;<br><span class="hljs-keyword">else</span><br>&#123;<br>cout &lt;&lt; <span class="hljs-string">&quot;connect failed!&quot;</span> &lt;&lt; endl;<br>&#125;<br><span class="hljs-keyword">if</span> (result != <span class="hljs-literal">NULL</span>) <span class="hljs-built_in">mysql_free_result</span>(result);<span class="hljs-comment">//释放结果资源</span><br><span class="hljs-built_in">mysql_close</span>(&amp;myCont);<span class="hljs-comment">//断开连接</span><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>输出结果：</p><p><img src="https://i.imgur.com/m4ryib2.png"></p><p>数据库中的数据：</p><p><img src="https://i.imgur.com/gxNwI5q.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>环境配置</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络上机实验三</title>
    <link href="/2022/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E4%B8%89/"/>
    <url>/2022/06/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E4%B8%89/</url>
    
    <content type="html"><![CDATA[<h1 id="协议分析程序的编写"><a href="#协议分析程序的编写" class="headerlink" title="协议分析程序的编写"></a>协议分析程序的编写</h1><h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><ol><li><p>目的：分析IP协议，统计流量。大家可以把流量计做成流量地图，显示不同地点间数据实时发送的量，比如武汉到北京的数据包发送的数据量。 可以用echart画地图，用whois获取IP地址的所属地。</p></li><li><p>任务：根据IP协议，解析每个数据包的PCI，并对不同IP进行流量统计。</p></li><li><p>任务的说明：</p><ul><li>实现的软件能显示每个包的PCI。</li><li>能显示每个IP地址的流量，即显示接收包的数量。</li></ul></li></ol><h2 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h2><p>首先解释一下 PCI 的具体含义：</p><p>使用分层网络方法，每一层都会“封装”从其上一层向下传递的数据，同时添加自己的信息。然后，该层会将新的 PDU 向下传递到下一层（或者一旦您到达第 1 层，就将其通过物理介质发送）。一旦到达另一端，则采取相反的路径；每一层查看与其相关的标头&#x2F;尾标，处理它们，并将有效负载向上传递到下一层。<br>每个封装级别的具体信息取决于协议。例如，TCP 将添加源端口和目标端口、校验和、序列&#x2F;确认号以及其他一些东西。 IP 添加源&#x2F;目标地址、数据包长度和其他一些内容。以太网将添加源&#x2F;目标 MAC、EtherType、FCS 等。</p><p>然后就是利用实验二中使用的 npcap 进行抓包。这里主要是抓取 TCP 的数据包，然后将抓取到的每一个数据包解析之后，将它们的源 ip 和目标 ip 都存放到 MySQL 数据库中。然后使用 Python 调用解析 ip 归属地的接口，将每一个 ip 的归属地解析好，然后更新数据库中的相关字段。</p><p>之后使用 Spring Boot 搭建一个简单的后台接口，主要是给前端网页提供 json 数据。</p><p>前端主要使用 echarts 来绘图，绘图所需要的数据就来自上面 Spring Boot 提供的 json 数据接口。这样就可以实时地绘制我们所需的流量地图了。</p><h2 id="实验环境"><a href="#实验环境" class="headerlink" title="实验环境"></a>实验环境</h2><p>系统：Windows 10 家庭中文版 21H2</p><p>Visual Studio 版本：Visual Studio 2022</p><p>Npcap 版本：1.60</p><p>Npcap SDK 版本：1.12</p><p><img src="https://i.imgur.com/Rc4xA1K.png"></p><p>MySQL 版本：8.0.28</p><p>jdk 版本：openjdk version “17.0.2”</p><p>Python 版本：3.10.4</p><p>echart 版本：</p><h2 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h2><p>分析IP协议，统计流量。把流量计做成流量地图，显示不同地点间数据实时发送的量，比如武汉到北京的数据包发送的数据量。用echart画地图，用whois获取IP地址的所属地。</p><h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><p>首先，编写 C++ 程序进行抓包，这个在实验二中已经实现，这里就不再赘述。</p><p>这里主要介绍一下将捕获到的源 ip 地址和目标 ip 地址存放到数据库中的过程。</p><p>首先，配置环境，步骤如下：</p><p><img src="https://i.imgur.com/D06EaWZ.png"></p><p><img src="https://i.imgur.com/aPwSR82.png"></p><p><img src="https://i.imgur.com/Dxi3Bfu.png"></p><p><img src="https://i.imgur.com/iaOXL9h.png"></p><p>之后，还要将 libmysql.lib 文件添加到项目的根目录下：</p><p><img src="https://i.imgur.com/1ait2E8.png"></p><p><img src="https://i.imgur.com/i2HVfUF.png"></p><p>然后我们写一个 C++ 的类，从而实现对数据库中数据进行增删改查：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">//#include &quot;stdafx.h&quot;</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;DBMySQL.h&quot;</span></span><br><br>VspdCToMySQL::<span class="hljs-built_in">VspdCToMySQL</span>()<br>&#123;<br>&#125;<br><br>VspdCToMySQL::~<span class="hljs-built_in">VspdCToMySQL</span>()<br>&#123;<br>&#125;<br><br><span class="hljs-comment">//初始化数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::ConnMySQL</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* host, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* port, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Db, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* user, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* passwd, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* <span class="hljs-type">const</span> charset, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_init</span>(&amp;mysql) == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;inital mysql handle error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_real_connect</span>(&amp;mysql, host, user, passwd, Db, <span class="hljs-number">0</span>, <span class="hljs-literal">NULL</span>, <span class="hljs-number">0</span>) == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Failed to connect to database: Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_set_character_set</span>(&amp;mysql, charset) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;mysql_set_character_set Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//查询数据</span><br><span class="hljs-function">string <span class="hljs-title">VspdCToMySQL::SelectData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">int</span> Cnum, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br>MYSQL_ROW m_row;<br>MYSQL_RES* m_res;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-type">int</span> rnum = <span class="hljs-number">0</span>;<br><span class="hljs-type">char</span> rg = <span class="hljs-string">&#x27;\n&#x27;</span>;<span class="hljs-comment">//行隔开</span><br><span class="hljs-comment">// char rg=&#x27;\r&#x27;;</span><br><span class="hljs-type">char</span> cg = <span class="hljs-string">&#x27;\t&#x27;</span>;<span class="hljs-comment">//字段隔开</span><br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;select ps_info Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br>m_res = <span class="hljs-built_in">mysql_store_result</span>(&amp;mysql);<br><br><span class="hljs-keyword">if</span> (m_res == <span class="hljs-literal">NULL</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;select username Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-string">&quot;&quot;</span>;<br>&#125;<br><span class="hljs-function">string <span class="hljs-title">str</span><span class="hljs-params">(<span class="hljs-string">&quot;&quot;</span>)</span></span>;<br><span class="hljs-keyword">while</span> (m_row = <span class="hljs-built_in">mysql_fetch_row</span>(m_res))<br>&#123;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; Cnum; i++)<br>&#123;<br>str += m_row[i];<br>str += cg;<br>&#125;<br>str += rg;<br>rnum++;<br>&#125;<br><br><span class="hljs-built_in">mysql_free_result</span>(m_res);<br><br><span class="hljs-keyword">return</span> str;<br>&#125;<br><br><span class="hljs-comment">//插入数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::InsertData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Insert Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//更换数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::ReplaceData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Replace Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//更新数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::UpdateData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Update Data Error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//删除数据</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::DeleteData</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Delete Data error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">//调用数据库存储过程</span><br><span class="hljs-function"><span class="hljs-type">int</span> <span class="hljs-title">VspdCToMySQL::CallProcedure</span><span class="hljs-params">(<span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL, <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg)</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-type">char</span> sql[<span class="hljs-number">2048</span>];<br><span class="hljs-built_in">sprintf</span>(sql, SQL);<br><span class="hljs-keyword">if</span> (<span class="hljs-built_in">mysql_query</span>(&amp;mysql, sql) != <span class="hljs-number">0</span>)<br>&#123;<br>Msg = <span class="hljs-string">&quot;Call Procedure error&quot;</span>;<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><span class="hljs-comment">//关闭数据库连接</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">VspdCToMySQL::CloseMySQLConn</span><span class="hljs-params">()</span></span><br><span class="hljs-function"></span>&#123;<br><span class="hljs-built_in">mysql_close</span>(&amp;mysql);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;disconnect database\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>然后在抓包程序的回调函数中增加对数据库的操作即可：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><code class="hljs cpp"><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-function"><span class="hljs-type">void</span> <span class="hljs-title">packet_handler</span><span class="hljs-params">(u_char* param,</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span></span><br><span class="hljs-params"><span class="hljs-function">    <span class="hljs-type">const</span> u_char* pkt_data)</span></span><br><span class="hljs-function"></span>&#123;<br>    <span class="hljs-keyword">struct</span> <span class="hljs-title class_">tm</span> ltime;<br>    <span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br>    ip_header* ih;<br>    udp_header* uh;<br>    u_int ip_len;<br>    u_short sport, dport;<br>    <span class="hljs-type">time_t</span> local_tv_sec;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     * Unused variable</span><br><span class="hljs-comment">     */</span><br>    (VOID)(param);<br><br>    <span class="hljs-comment">/* convert the timestamp to readable format */</span><br>    local_tv_sec = header-&gt;ts.tv_sec;<br>    <span class="hljs-built_in">localtime_s</span>(&amp;ltime, &amp;local_tv_sec);<br>    <span class="hljs-built_in">strftime</span>(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, &amp;ltime);<br><br>    <span class="hljs-comment">/* print timestamp and length of the packet */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s.%.6d len:%d &quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>    <span class="hljs-comment">/* retireve the position of the ip header */</span><br>    ih = (ip_header*)(pkt_data +<br>        <span class="hljs-number">14</span>); <span class="hljs-comment">//length of ethernet header</span><br><br>      <span class="hljs-comment">/* retireve the position of the udp header */</span><br>    ip_len = (ih-&gt;ver_ihl &amp; <span class="hljs-number">0xf</span>) * <span class="hljs-number">4</span>;<br>    uh = (udp_header*)((u_char*)ih + ip_len);<br><br>    <span class="hljs-comment">/* convert from network byte order to host byte order */</span><br>    sport = <span class="hljs-built_in">ntohs</span>(uh-&gt;sport);<br>    dport = <span class="hljs-built_in">ntohs</span>(uh-&gt;dport);<br><br>    <span class="hljs-comment">/* print ip addresses and udp ports */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d.%d.%d.%d.%d -&gt; %d.%d.%d.%d.%d\n&quot;</span>,<br>        ih-&gt;saddr.byte1,<br>        ih-&gt;saddr.byte2,<br>        ih-&gt;saddr.byte3,<br>        ih-&gt;saddr.byte4,<br>        sport,<br>        ih-&gt;daddr.byte1,<br>        ih-&gt;daddr.byte2,<br>        ih-&gt;daddr.byte3,<br>        ih-&gt;daddr.byte4,<br>        dport);<br><br>    <span class="hljs-comment">// 将源 ip 地址和目的 ip 地址转换成字符串</span><br>    string srcIp = <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte1) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte2) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte3) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;saddr.byte4);<br>    string dstIp = <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte1) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte2) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte3) + <span class="hljs-string">&quot;.&quot;</span> + <span class="hljs-built_in">to_string</span>(ih-&gt;daddr.byte4);<br>    cout &lt;&lt; <span class="hljs-string">&quot;src ip  &quot;</span> &lt;&lt; srcIp &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;dst ip  &quot;</span> &lt;&lt; dstIp &lt;&lt; <span class="hljs-string">&quot;\t&quot;</span> &lt;&lt; endl;<br>    cout &lt;&lt; <span class="hljs-string">&quot;=========&quot;</span> &lt;&lt; endl;<br>    string SQLString = <span class="hljs-string">&quot;insert into test_tb(id, src_ip, dst_ip) values(&quot;</span> + <span class="hljs-built_in">to_string</span>(++id) + <span class="hljs-string">&quot;, &#x27;&quot;</span> + srcIp + <span class="hljs-string">&quot;&#x27;, &quot;</span><br>        + <span class="hljs-string">&quot;&#x27;&quot;</span> + dstIp + <span class="hljs-string">&quot;&#x27;)&quot;</span>;<br>    cout &lt;&lt; SQLString &lt;&lt; endl;<br>    <span class="hljs-comment">// 插入数据</span><br>    <span class="hljs-comment">/*const char* SQL = &quot;insert into test_tb(id, src_ip, dst_ip) values(4, &#x27;qingxiaofeng&#x27;, &#x27;fsdajfjsad&#x27;)&quot;;</span><br><span class="hljs-comment">    */</span><br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* SQL = SQLString.<span class="hljs-built_in">c_str</span>();<br>    <span class="hljs-type">const</span> <span class="hljs-type">char</span>* Msg = <span class="hljs-string">&quot;&quot;</span>;<br>    <span class="hljs-keyword">if</span> (vspdctomysql-&gt;<span class="hljs-built_in">InsertData</span>(SQL, Msg) == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;insert success\n&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里的逻辑是每一次启动这个抓包程序时，会自动清空上一次在数据库中存储的数据，然后再将本次抓取到的数据存放到数据库中。</p><p>之后就是 Pyhton 实现对 ip 地址的解析，并将解析好的结果更新到数据库中：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> time<br><span class="hljs-keyword">from</span> mysql.connector <span class="hljs-keyword">import</span> MySQLConnection, Error<br><span class="hljs-keyword">from</span> python_mysql_dbconfig <span class="hljs-keyword">import</span> read_db_config<br><span class="hljs-keyword">import</span> requests<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">getJson</span>(<span class="hljs-params">ip</span>):<br>    myUrl = <span class="hljs-string">&#x27;https://ip.useragentinfo.com/json?ip=&#x27;</span> + ip<br>    <span class="hljs-comment"># myUrl = &#x27;http://whois.pconline.com.cn/ipJson.jsp?ip=&#x27; + ip + &#x27;&amp;json=true&#x27;</span><br>    <span class="hljs-comment"># ip = &#x27;40.79.150.121&#x27;</span><br>    r = requests.get(myUrl)<br>    <span class="hljs-keyword">return</span> r.json()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">query_with_fetchall</span>():<br>    <span class="hljs-keyword">try</span>:<br>        dbconfig = read_db_config()<br>        conn = MySQLConnection(**dbconfig)<br>        cursor = conn.cursor()<br>        cursor.execute(<span class="hljs-string">&quot;SELECT * FROM test_tb&quot;</span>)<br>        rows = cursor.fetchall()<br><br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Total Row(s):&#x27;</span>, cursor.rowcount)<br>        res = []<br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> rows:<br>            <span class="hljs-keyword">if</span> row[<span class="hljs-number">3</span>] == <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> row[<span class="hljs-number">4</span>] == <span class="hljs-literal">None</span>:<br>                res.append(row)<br>        <span class="hljs-comment"># print(res)</span><br>        <span class="hljs-keyword">return</span> res<br>    <span class="hljs-keyword">except</span> Error <span class="hljs-keyword">as</span> e:<br>        <span class="hljs-built_in">print</span>(e)<br><br>    <span class="hljs-keyword">finally</span>:<br>        cursor.close()<br>        conn.close()<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">update_testTb</span>():<br>    cityData = [<span class="hljs-string">&quot;北京&quot;</span>, <span class="hljs-string">&quot;天津&quot;</span>, <span class="hljs-string">&quot;上海&quot;</span>, <span class="hljs-string">&quot;重庆&quot;</span>, <span class="hljs-string">&quot;石家庄&quot;</span>, <span class="hljs-string">&quot;唐山&quot;</span>, <span class="hljs-string">&quot;秦皇岛&quot;</span>, <span class="hljs-string">&quot;邯 郸&quot;</span>,<br>                <span class="hljs-string">&quot;邢台&quot;</span>, <span class="hljs-string">&quot;保定&quot;</span>, <span class="hljs-string">&quot;张家口&quot;</span>, <span class="hljs-string">&quot;承德&quot;</span>, <span class="hljs-string">&quot;沧州&quot;</span>, <span class="hljs-string">&quot;廊坊&quot;</span>, <span class="hljs-string">&quot;衡水&quot;</span>, <span class="hljs-string">&quot;太原&quot;</span>, <span class="hljs-string">&quot;大同&quot;</span>,<br>                <span class="hljs-string">&quot;阳泉&quot;</span>, <span class="hljs-string">&quot;长治&quot;</span>, <span class="hljs-string">&quot;晋城&quot;</span>, <span class="hljs-string">&quot;朔州&quot;</span>, <span class="hljs-string">&quot;晋中&quot;</span>, <span class="hljs-string">&quot;运城&quot;</span>, <span class="hljs-string">&quot;忻州&quot;</span>, <span class="hljs-string">&quot;临汾&quot;</span>, <span class="hljs-string">&quot;吕梁&quot;</span>,<br>                <span class="hljs-string">&quot;呼和浩特&quot;</span>, <span class="hljs-string">&quot;包头&quot;</span>, <span class="hljs-string">&quot;乌海&quot;</span>, <span class="hljs-string">&quot;赤峰&quot;</span>, <span class="hljs-string">&quot;通辽&quot;</span>, <span class="hljs-string">&quot;鄂尔多斯&quot;</span>, <span class="hljs-string">&quot;呼伦贝尔&quot;</span>, <span class="hljs-string">&quot;巴彦淖尔&quot;</span>,<br>                <span class="hljs-string">&quot;乌兰察布&quot;</span>, <span class="hljs-string">&quot;兴安&quot;</span>, <span class="hljs-string">&quot;锡林郭勒&quot;</span>, <span class="hljs-string">&quot;阿拉善&quot;</span>, <span class="hljs-string">&quot;沈阳&quot;</span>, <span class="hljs-string">&quot;大连&quot;</span>, <span class="hljs-string">&quot;鞍山&quot;</span>, <span class="hljs-string">&quot;抚顺&quot;</span>,<br>                <span class="hljs-string">&quot;本溪&quot;</span>, <span class="hljs-string">&quot;丹东&quot;</span>, <span class="hljs-string">&quot;锦州&quot;</span>, <span class="hljs-string">&quot;营口&quot;</span>, <span class="hljs-string">&quot;阜新&quot;</span>, <span class="hljs-string">&quot;辽阳&quot;</span>, <span class="hljs-string">&quot;盘锦&quot;</span>, <span class="hljs-string">&quot;铁岭&quot;</span>, <span class="hljs-string">&quot;朝阳&quot;</span>,<br>                <span class="hljs-string">&quot;葫芦岛&quot;</span>, <span class="hljs-string">&quot;长春&quot;</span>, <span class="hljs-string">&quot;吉林&quot;</span>, <span class="hljs-string">&quot;四平&quot;</span>, <span class="hljs-string">&quot;辽源&quot;</span>, <span class="hljs-string">&quot;通化&quot;</span>, <span class="hljs-string">&quot;白山&quot;</span>, <span class="hljs-string">&quot;松原&quot;</span>, <span class="hljs-string">&quot;白城&quot;</span>,<br>                <span class="hljs-string">&quot;延边朝鲜族自治&quot;</span>, <span class="hljs-string">&quot;哈尔滨&quot;</span>, <span class="hljs-string">&quot;齐齐哈尔&quot;</span>, <span class="hljs-string">&quot;鸡西&quot;</span>, <span class="hljs-string">&quot;鹤岗&quot;</span>, <span class="hljs-string">&quot;双鸭山&quot;</span>, <span class="hljs-string">&quot;大庆&quot;</span>,<br>                <span class="hljs-string">&quot;伊春&quot;</span>, <span class="hljs-string">&quot;佳木斯&quot;</span>, <span class="hljs-string">&quot;七台河&quot;</span>, <span class="hljs-string">&quot;牡丹江&quot;</span>, <span class="hljs-string">&quot;黑河&quot;</span>, <span class="hljs-string">&quot;绥化&quot;</span>, <span class="hljs-string">&quot;大兴安岭地&quot;</span>, <span class="hljs-string">&quot;南京&quot;</span>,<br>                <span class="hljs-string">&quot;无锡&quot;</span>, <span class="hljs-string">&quot;徐州&quot;</span>, <span class="hljs-string">&quot;常州&quot;</span>, <span class="hljs-string">&quot;苏州&quot;</span>, <span class="hljs-string">&quot;南通&quot;</span>, <span class="hljs-string">&quot;连云港&quot;</span>, <span class="hljs-string">&quot;淮安&quot;</span>, <span class="hljs-string">&quot;盐城&quot;</span>, <span class="hljs-string">&quot;扬州&quot;</span>,<br>                <span class="hljs-string">&quot;镇江&quot;</span>, <span class="hljs-string">&quot;泰州&quot;</span>, <span class="hljs-string">&quot;宿迁&quot;</span>, <span class="hljs-string">&quot;杭州&quot;</span>, <span class="hljs-string">&quot;宁波&quot;</span>, <span class="hljs-string">&quot;温州&quot;</span>, <span class="hljs-string">&quot;嘉兴&quot;</span>, <span class="hljs-string">&quot;湖州&quot;</span>, <span class="hljs-string">&quot;绍兴&quot;</span>,<br>                <span class="hljs-string">&quot;金华&quot;</span>, <span class="hljs-string">&quot;衢州&quot;</span>, <span class="hljs-string">&quot;舟山&quot;</span>, <span class="hljs-string">&quot;台州&quot;</span>, <span class="hljs-string">&quot;丽水&quot;</span>, <span class="hljs-string">&quot;合肥&quot;</span>, <span class="hljs-string">&quot;芜湖&quot;</span>, <span class="hljs-string">&quot;蚌埠&quot;</span>, <span class="hljs-string">&quot;淮南&quot;</span>,<br>                <span class="hljs-string">&quot;马鞍山&quot;</span>, <span class="hljs-string">&quot;淮北&quot;</span>, <span class="hljs-string">&quot;铜陵&quot;</span>, <span class="hljs-string">&quot;安庆&quot;</span>, <span class="hljs-string">&quot;黄山&quot;</span>, <span class="hljs-string">&quot;滁州&quot;</span>, <span class="hljs-string">&quot;阜阳&quot;</span>, <span class="hljs-string">&quot;宿州&quot;</span>, <span class="hljs-string">&quot;巢湖&quot;</span>,<br>                <span class="hljs-string">&quot;六安&quot;</span>, <span class="hljs-string">&quot;亳州&quot;</span>, <span class="hljs-string">&quot;池州&quot;</span>, <span class="hljs-string">&quot;宣城&quot;</span>, <span class="hljs-string">&quot;福州&quot;</span>, <span class="hljs-string">&quot;厦门&quot;</span>, <span class="hljs-string">&quot;莆田&quot;</span>, <span class="hljs-string">&quot;三明&quot;</span>, <span class="hljs-string">&quot;泉州&quot;</span>,<br>                <span class="hljs-string">&quot;漳州&quot;</span>, <span class="hljs-string">&quot;南平&quot;</span>, <span class="hljs-string">&quot;龙岩&quot;</span>, <span class="hljs-string">&quot;宁德&quot;</span>, <span class="hljs-string">&quot;南昌&quot;</span>, <span class="hljs-string">&quot;景德镇&quot;</span>, <span class="hljs-string">&quot;萍乡&quot;</span>, <span class="hljs-string">&quot;九江&quot;</span>, <span class="hljs-string">&quot;新余&quot;</span>,<br>                <span class="hljs-string">&quot;鹰潭&quot;</span>, <span class="hljs-string">&quot;赣州&quot;</span>, <span class="hljs-string">&quot;吉安&quot;</span>, <span class="hljs-string">&quot;宜春&quot;</span>, <span class="hljs-string">&quot;抚州&quot;</span>, <span class="hljs-string">&quot;上饶&quot;</span>, <span class="hljs-string">&quot;济南&quot;</span>, <span class="hljs-string">&quot;青岛&quot;</span>, <span class="hljs-string">&quot;淄博&quot;</span>,<br>                <span class="hljs-string">&quot;枣庄&quot;</span>, <span class="hljs-string">&quot;东营&quot;</span>, <span class="hljs-string">&quot;烟台&quot;</span>, <span class="hljs-string">&quot;潍坊&quot;</span>, <span class="hljs-string">&quot;济宁&quot;</span>, <span class="hljs-string">&quot;泰安&quot;</span>, <span class="hljs-string">&quot;威海&quot;</span>, <span class="hljs-string">&quot;日照&quot;</span>, <span class="hljs-string">&quot;莱芜&quot;</span>,<br>                <span class="hljs-string">&quot;临沂&quot;</span>, <span class="hljs-string">&quot;德州&quot;</span>, <span class="hljs-string">&quot;聊城&quot;</span>, <span class="hljs-string">&quot;滨州&quot;</span>, <span class="hljs-string">&quot;郑州&quot;</span>, <span class="hljs-string">&quot;开封&quot;</span>, <span class="hljs-string">&quot;洛阳&quot;</span>, <span class="hljs-string">&quot;平顶山&quot;</span>, <span class="hljs-string">&quot;安阳&quot;</span>,<br>                <span class="hljs-string">&quot;鹤壁&quot;</span>, <span class="hljs-string">&quot;新乡&quot;</span>, <span class="hljs-string">&quot;焦作&quot;</span>, <span class="hljs-string">&quot;濮阳&quot;</span>, <span class="hljs-string">&quot;许昌&quot;</span>, <span class="hljs-string">&quot;漯河&quot;</span>, <span class="hljs-string">&quot;三门峡&quot;</span>, <span class="hljs-string">&quot;南阳&quot;</span>, <span class="hljs-string">&quot;商丘&quot;</span>,<br>                <span class="hljs-string">&quot;信阳&quot;</span>, <span class="hljs-string">&quot;周口&quot;</span>, <span class="hljs-string">&quot;驻马店&quot;</span>, <span class="hljs-string">&quot;武汉&quot;</span>, <span class="hljs-string">&quot;黄石&quot;</span>, <span class="hljs-string">&quot;十堰&quot;</span>, <span class="hljs-string">&quot;宜昌&quot;</span>, <span class="hljs-string">&quot;襄樊&quot;</span>, <span class="hljs-string">&quot;鄂州&quot;</span>,<br>                <span class="hljs-string">&quot;荆门&quot;</span>, <span class="hljs-string">&quot;孝感&quot;</span>, <span class="hljs-string">&quot;荆州&quot;</span>, <span class="hljs-string">&quot;黄冈&quot;</span>, <span class="hljs-string">&quot;咸宁&quot;</span>, <span class="hljs-string">&quot;随州&quot;</span>, <span class="hljs-string">&quot;恩施土家族苗族自治&quot;</span>, <span class="hljs-string">&quot;长沙&quot;</span>,<br>                <span class="hljs-string">&quot;株洲&quot;</span>, <span class="hljs-string">&quot;湘潭&quot;</span>, <span class="hljs-string">&quot;衡阳&quot;</span>, <span class="hljs-string">&quot;邵阳&quot;</span>, <span class="hljs-string">&quot;岳阳&quot;</span>, <span class="hljs-string">&quot;常德&quot;</span>, <span class="hljs-string">&quot;张家界&quot;</span>, <span class="hljs-string">&quot;益阳&quot;</span>, <span class="hljs-string">&quot;郴州&quot;</span>,<br>                <span class="hljs-string">&quot;永州&quot;</span>, <span class="hljs-string">&quot;怀化&quot;</span>, <span class="hljs-string">&quot;娄底&quot;</span>, <span class="hljs-string">&quot;湘西土家族苗族自治&quot;</span>, <span class="hljs-string">&quot;广州&quot;</span>, <span class="hljs-string">&quot;韶关&quot;</span>, <span class="hljs-string">&quot;深圳&quot;</span>, <span class="hljs-string">&quot;珠海&quot;</span>,<br>                <span class="hljs-string">&quot;汕头&quot;</span>, <span class="hljs-string">&quot;佛山&quot;</span>, <span class="hljs-string">&quot;江门&quot;</span>, <span class="hljs-string">&quot;湛江&quot;</span>, <span class="hljs-string">&quot;茂名&quot;</span>, <span class="hljs-string">&quot;肇庆&quot;</span>, <span class="hljs-string">&quot;惠州&quot;</span>, <span class="hljs-string">&quot;梅州&quot;</span>, <span class="hljs-string">&quot;汕尾&quot;</span>, <span class="hljs-string">&quot;河源&quot;</span>,<br>                <span class="hljs-string">&quot;阳江&quot;</span>, <span class="hljs-string">&quot;清远&quot;</span>, <span class="hljs-string">&quot;东莞&quot;</span>, <span class="hljs-string">&quot;中山&quot;</span>, <span class="hljs-string">&quot;潮州&quot;</span>, <span class="hljs-string">&quot;揭阳&quot;</span>, <span class="hljs-string">&quot;云浮&quot;</span>, <span class="hljs-string">&quot;南宁&quot;</span>, <span class="hljs-string">&quot;柳州&quot;</span>,<br>                <span class="hljs-string">&quot;桂林&quot;</span>, <span class="hljs-string">&quot;梧州&quot;</span>, <span class="hljs-string">&quot;北海&quot;</span>, <span class="hljs-string">&quot;防城港&quot;</span>, <span class="hljs-string">&quot;钦州&quot;</span>, <span class="hljs-string">&quot;贵港&quot;</span>, <span class="hljs-string">&quot;玉林&quot;</span>, <span class="hljs-string">&quot;百色&quot;</span>, <span class="hljs-string">&quot;贺州&quot;</span>,<br>                <span class="hljs-string">&quot;河池&quot;</span>, <span class="hljs-string">&quot;来宾&quot;</span>, <span class="hljs-string">&quot;崇左&quot;</span>, <span class="hljs-string">&quot;海口&quot;</span>, <span class="hljs-string">&quot;三亚&quot;</span>, <span class="hljs-string">&quot;成都&quot;</span>, <span class="hljs-string">&quot;自贡&quot;</span>, <span class="hljs-string">&quot;攀枝花&quot;</span>, <span class="hljs-string">&quot;泸州&quot;</span>,<br>                <span class="hljs-string">&quot;德阳&quot;</span>, <span class="hljs-string">&quot;绵阳&quot;</span>, <span class="hljs-string">&quot;广元&quot;</span>, <span class="hljs-string">&quot;遂宁&quot;</span>, <span class="hljs-string">&quot;内江&quot;</span>, <span class="hljs-string">&quot;乐山&quot;</span>, <span class="hljs-string">&quot;南充&quot;</span>, <span class="hljs-string">&quot;眉山&quot;</span>, <span class="hljs-string">&quot;宜宾&quot;</span>, <span class="hljs-string">&quot;广安&quot;</span>,<br>                <span class="hljs-string">&quot;达州&quot;</span>, <span class="hljs-string">&quot;雅安&quot;</span>, <span class="hljs-string">&quot;巴中&quot;</span>, <span class="hljs-string">&quot;资阳&quot;</span>, <span class="hljs-string">&quot;阿坝藏族羌族自治&quot;</span>, <span class="hljs-string">&quot;甘孜藏族自治&quot;</span>, <span class="hljs-string">&quot;凉山彝族自治&quot;</span>,<br>                <span class="hljs-string">&quot;贵阳&quot;</span>, <span class="hljs-string">&quot;六盘水&quot;</span>, <span class="hljs-string">&quot;遵义&quot;</span>, <span class="hljs-string">&quot;安顺&quot;</span>, <span class="hljs-string">&quot;铜仁地&quot;</span>, <span class="hljs-string">&quot;黔西南布依族苗族自治&quot;</span>, <span class="hljs-string">&quot;毕节地&quot;</span>,<br>                <span class="hljs-string">&quot;黔东南苗族侗族自治&quot;</span>, <span class="hljs-string">&quot;黔南布依族苗族自治&quot;</span>, <span class="hljs-string">&quot;昆明&quot;</span>, <span class="hljs-string">&quot;曲靖&quot;</span>, <span class="hljs-string">&quot;玉溪&quot;</span>, <span class="hljs-string">&quot;保山&quot;</span>,<br>                <span class="hljs-string">&quot;昭通&quot;</span>, <span class="hljs-string">&quot;丽江&quot;</span>, <span class="hljs-string">&quot;临沧&quot;</span>, <span class="hljs-string">&quot;楚雄彝族自治&quot;</span>, <span class="hljs-string">&quot;红河哈尼族彝族自治&quot;</span>, <span class="hljs-string">&quot;文山壮族苗族自治&quot;</span>,<br>                <span class="hljs-string">&quot;西双版纳傣族自治&quot;</span>, <span class="hljs-string">&quot;大理白族自治&quot;</span>, <span class="hljs-string">&quot;德宏傣族景颇族自治&quot;</span>, <span class="hljs-string">&quot;怒江傈僳族自治&quot;</span>,<br>                <span class="hljs-string">&quot;迪庆藏族自治&quot;</span>, <span class="hljs-string">&quot;拉萨&quot;</span>, <span class="hljs-string">&quot;昌都地&quot;</span>, <span class="hljs-string">&quot;山南地&quot;</span>, <span class="hljs-string">&quot;日喀则地&quot;</span>, <span class="hljs-string">&quot;那曲地&quot;</span>, <span class="hljs-string">&quot;阿里地&quot;</span>,<br>                <span class="hljs-string">&quot;林芝地&quot;</span>, <span class="hljs-string">&quot;西安&quot;</span>, <span class="hljs-string">&quot;铜川&quot;</span>, <span class="hljs-string">&quot;宝鸡&quot;</span>, <span class="hljs-string">&quot;咸阳&quot;</span>, <span class="hljs-string">&quot;渭南&quot;</span>, <span class="hljs-string">&quot;延安&quot;</span>, <span class="hljs-string">&quot;汉中&quot;</span>, <span class="hljs-string">&quot;榆林&quot;</span>,<br>                <span class="hljs-string">&quot;安康&quot;</span>, <span class="hljs-string">&quot;商洛&quot;</span>, <span class="hljs-string">&quot;兰州&quot;</span>, <span class="hljs-string">&quot;嘉峪关&quot;</span>, <span class="hljs-string">&quot;金昌&quot;</span>, <span class="hljs-string">&quot;白银&quot;</span>, <span class="hljs-string">&quot;天水&quot;</span>, <span class="hljs-string">&quot;武威&quot;</span>, <span class="hljs-string">&quot;张掖&quot;</span>,<br>                <span class="hljs-string">&quot;平凉&quot;</span>, <span class="hljs-string">&quot;酒泉&quot;</span>, <span class="hljs-string">&quot;庆阳&quot;</span>, <span class="hljs-string">&quot;定西&quot;</span>, <span class="hljs-string">&quot;陇南&quot;</span>, <span class="hljs-string">&quot;临夏回族自治&quot;</span>, <span class="hljs-string">&quot;甘南藏族自治&quot;</span>, <span class="hljs-string">&quot;西宁&quot;</span>,<br>                <span class="hljs-string">&quot;海东地&quot;</span>, <span class="hljs-string">&quot;海北藏族自治&quot;</span>, <span class="hljs-string">&quot;黄南藏族自治&quot;</span>, <span class="hljs-string">&quot;海南藏族自治&quot;</span>, <span class="hljs-string">&quot;果洛藏族自治&quot;</span>,<br>                <span class="hljs-string">&quot;玉树藏族自治&quot;</span>, <span class="hljs-string">&quot;海西蒙古族藏族自治&quot;</span>, <span class="hljs-string">&quot;银川&quot;</span>, <span class="hljs-string">&quot;石嘴山&quot;</span>, <span class="hljs-string">&quot;吴忠&quot;</span>, <span class="hljs-string">&quot;固原&quot;</span>, <span class="hljs-string">&quot;中卫&quot;</span>,<br>                <span class="hljs-string">&quot;乌鲁木齐&quot;</span>, <span class="hljs-string">&quot;克拉玛依&quot;</span>, <span class="hljs-string">&quot;吐鲁番地&quot;</span>, <span class="hljs-string">&quot;哈密地&quot;</span>, <span class="hljs-string">&quot;昌吉回族自治&quot;</span>, <span class="hljs-string">&quot;博尔塔拉蒙古自治&quot;</span>,<br>                <span class="hljs-string">&quot;巴音郭楞蒙古自治&quot;</span>, <span class="hljs-string">&quot;阿克苏地&quot;</span>, <span class="hljs-string">&quot;克孜勒苏柯尔克孜自治&quot;</span>, <span class="hljs-string">&quot;喀什地&quot;</span>, <span class="hljs-string">&quot;和田地&quot;</span>,<br>                <span class="hljs-string">&quot;伊犁哈萨克自治&quot;</span>, <span class="hljs-string">&quot;塔城地&quot;</span>, <span class="hljs-string">&quot;阿勒泰地&quot;</span>, <span class="hljs-string">&quot;仙桃&quot;</span>, <span class="hljs-string">&quot;潜江&quot;</span>, <span class="hljs-string">&quot;天门&quot;</span>, <span class="hljs-string">&quot;神农架林&quot;</span>,<br>                <span class="hljs-string">&quot;五指山&quot;</span>, <span class="hljs-string">&quot;琼海&quot;</span>, <span class="hljs-string">&quot;儋州&quot;</span>, <span class="hljs-string">&quot;文昌&quot;</span>, <span class="hljs-string">&quot;万宁&quot;</span>, <span class="hljs-string">&quot;东方&quot;</span>, <span class="hljs-string">&quot;定安县&quot;</span>, <span class="hljs-string">&quot;屯昌县&quot;</span>, <span class="hljs-string">&quot;澄迈县&quot;</span>,<br>                <span class="hljs-string">&quot;临高县&quot;</span>, <span class="hljs-string">&quot;白沙黎族自治县&quot;</span>, <span class="hljs-string">&quot;昌江黎族自治县&quot;</span>, <span class="hljs-string">&quot;乐东黎族自治县&quot;</span>, <span class="hljs-string">&quot;陵水黎族自治县&quot;</span>,<br>                <span class="hljs-string">&quot;保亭黎族苗族自治县&quot;</span>, <span class="hljs-string">&quot;琼中黎族苗族自治县&quot;</span>, <span class="hljs-string">&quot;石河子&quot;</span>]<br>    <span class="hljs-comment"># read database configuration</span><br>    db_config = read_db_config()<br><br>    toBeProcessedData = query_with_fetchall()<br><br>    <span class="hljs-comment"># prepare query and data</span><br>    query = <span class="hljs-string">&quot;&quot;&quot; UPDATE test_tb</span><br><span class="hljs-string">                SET src_loc = %s, dst_loc = %s</span><br><span class="hljs-string">                WHERE id = %s &quot;&quot;&quot;</span><br><br>    <span class="hljs-keyword">try</span>:<br>        conn = MySQLConnection(**db_config)<br><br>        <span class="hljs-comment"># update book title</span><br>        cursor = conn.cursor()<br>        <span class="hljs-comment"># cursor.execute(query, data)</span><br><br>        <span class="hljs-keyword">for</span> row <span class="hljs-keyword">in</span> toBeProcessedData:<br>            rowId = row[<span class="hljs-number">0</span>]<br>            srcIp = row[<span class="hljs-number">1</span>]<br>            dstIp = row[<span class="hljs-number">2</span>]<br><br>            <span class="hljs-keyword">if</span> srcIp == <span class="hljs-string">&#x27;10.16.80.216&#x27;</span>: <span class="hljs-comment"># 这里要替换成本机的 ip</span><br>                srcLoc = <span class="hljs-string">&#x27;武汉&#x27;</span><br>            <span class="hljs-keyword">else</span>:<br>                srcJsonData = getJson(srcIp)<br>                <span class="hljs-built_in">print</span>(srcJsonData)<br>                srcLoc = srcJsonData[<span class="hljs-string">&#x27;city&#x27;</span>][<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]<br>            time.sleep(<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">if</span> dstIp == <span class="hljs-string">&#x27;10.16.80.216&#x27;</span>: <span class="hljs-comment"># 这里要替换成本机的 ip</span><br>                dstLoc = <span class="hljs-string">&#x27;武汉&#x27;</span><br>            <span class="hljs-keyword">else</span>:<br>                dstJsonData = getJson(dstIp)<br>                dstLoc = dstJsonData[<span class="hljs-string">&#x27;city&#x27;</span>][<span class="hljs-number">0</span>:-<span class="hljs-number">1</span>]<br>            time.sleep(<span class="hljs-number">1</span>)<br><br>            <span class="hljs-keyword">if</span> srcLoc != <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> srcLoc <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cityData:<br>                srcLoc = <span class="hljs-string">&#x27;海外&#x27;</span><br>            <span class="hljs-keyword">if</span> dstLoc != <span class="hljs-string">&#x27;&#x27;</span> <span class="hljs-keyword">and</span> dstLoc <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> cityData:<br>                dstLoc = <span class="hljs-string">&#x27;海外&#x27;</span><br><br>            <span class="hljs-built_in">print</span>(srcLoc + dstLoc)<br>            <span class="hljs-built_in">print</span>(row)<br>            <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;==========分割线=========&#x27;</span>)<br>            data = (srcLoc, dstLoc, rowId)<br>            cursor.execute(query, data)<br>            conn.commit()<br><br>        <span class="hljs-comment"># accept the changes</span><br>        conn.commit()<br><br>    <span class="hljs-keyword">except</span> Error <span class="hljs-keyword">as</span> error:<br>        <span class="hljs-built_in">print</span>(error)<br><br>    <span class="hljs-keyword">finally</span>:<br>        cursor.close()<br>        conn.close()<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-keyword">while</span> <span class="hljs-literal">True</span>:<br>        update_testTb()<br><br></code></pre></td></tr></table></figure><p>再之后，使用 Spring Boot 创建一个 json 接口，主要的逻辑如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment">* 过滤出同时具有 srcLoc 和 dstLoc 并且都是中国城市的数据</span><br><span class="hljs-comment">* </span><br><span class="hljs-comment">* <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> IOException</span><br><span class="hljs-comment">* <span class="hljs-doctag">@throws</span> InterruptedException</span><br><span class="hljs-comment">*/</span><br><span class="hljs-meta">@GetMapping(&quot;/getJson&quot;)</span><br><span class="hljs-keyword">public</span> List&lt;TestTb&gt; <span class="hljs-title function_">getJsonData</span><span class="hljs-params">()</span> &#123;<br>    <span class="hljs-comment">// 先从数据库中取出数据</span><br>    List&lt;TestTb&gt; testTbList = testTbService.list();<br>    List&lt;TestTb&gt; filtedList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-comment">// 过滤</span><br>    <span class="hljs-keyword">for</span> (TestTb testTb : testTbList) &#123;<br>        <span class="hljs-keyword">if</span> (testTb.getSrcLoc() != <span class="hljs-literal">null</span><br>                &amp;&amp; testTb.getSrcLoc().length() != <span class="hljs-number">0</span><br>                &amp;&amp; !testTb.getSrcLoc().equals(<span class="hljs-string">&quot;海外&quot;</span>)<br>                &amp;&amp; testTb.getDstLoc() != <span class="hljs-literal">null</span><br>                &amp;&amp; testTb.getDstLoc().length() != <span class="hljs-number">0</span><br>                &amp;&amp; !testTb.getDstLoc().equals(<span class="hljs-string">&quot;海外&quot;</span>)) &#123;<br>            filtedList.add(testTb);<br>            System.out.println(testTb);<br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// System.out.println(filtedList);</span><br><br>    <span class="hljs-keyword">return</span> filtedList;<br>&#125;<br></code></pre></td></tr></table></figure><p>最后，是前端的逻辑：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getJsonData</span>(<span class="hljs-params">url</span>) &#123;<br>    <span class="hljs-keyword">let</span> obj = <span class="hljs-keyword">await</span> (<span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(url)).<span class="hljs-title function_">json</span>();<br>    <span class="hljs-keyword">return</span> obj;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;test&#x27;</span>);<br><br>url = <span class="hljs-string">&quot;http://localhost:8080/testTb/getJson&quot;</span><br><span class="hljs-title function_">getJsonData</span>(url).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">jsonData</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// console.log(jsonData);</span><br><br>    <span class="hljs-keyword">var</span> geoCoordMap = &#123;<br>        <span class="hljs-string">&#x27;北京&#x27;</span>: [<span class="hljs-number">116.398</span>, <span class="hljs-number">39.9082</span>],<br>        <span class="hljs-string">&#x27;天津&#x27;</span>: [<span class="hljs-number">117.252</span>, <span class="hljs-number">39.1039</span>],<br>        <span class="hljs-string">&#x27;上海&#x27;</span>: [<span class="hljs-number">121.476</span>, <span class="hljs-number">31.2244</span>],<br>        <span class="hljs-string">&#x27;重庆&#x27;</span>: [<span class="hljs-number">106.548</span>, <span class="hljs-number">29.5549</span>],<br>        <span class="hljs-string">&#x27;石家庄&#x27;</span>: [<span class="hljs-number">114.476</span>, <span class="hljs-number">38.0483</span>],<br>        <span class="hljs-string">&#x27;唐山&#x27;</span>: [<span class="hljs-number">118.167</span>, <span class="hljs-number">39.6353</span>],<br>        <span class="hljs-string">&#x27;秦皇岛&#x27;</span>: [<span class="hljs-number">119.59</span>, <span class="hljs-number">39.9479</span>],<br>        <span class="hljs-string">&#x27;邯郸&#x27;</span>: [<span class="hljs-number">114.489</span>, <span class="hljs-number">36.5994</span>],<br>        <span class="hljs-string">&#x27;邢台&#x27;</span>: [<span class="hljs-number">114.504</span>, <span class="hljs-number">37.0717</span>],<br>        <span class="hljs-string">&#x27;保定&#x27;</span>: [<span class="hljs-number">115.466</span>, <span class="hljs-number">38.8799</span>],<br>        <span class="hljs-string">&#x27;张家口&#x27;</span>: [<span class="hljs-number">114.89</span>, <span class="hljs-number">40.8262</span>],<br>        <span class="hljs-string">&#x27;承德&#x27;</span>: [<span class="hljs-number">117.935</span>, <span class="hljs-number">40.9955</span>],<br>        <span class="hljs-string">&#x27;沧州&#x27;</span>: [<span class="hljs-number">116.866</span>, <span class="hljs-number">38.3124</span>],<br>        <span class="hljs-string">&#x27;廊坊&#x27;</span>: [<span class="hljs-number">116.706</span>, <span class="hljs-number">39.5193</span>],<br>        <span class="hljs-string">&#x27;衡水&#x27;</span>: [<span class="hljs-number">115.698</span>, <span class="hljs-number">37.7354</span>],<br>        <span class="hljs-string">&#x27;太原&#x27;</span>: [<span class="hljs-number">112.531</span>, <span class="hljs-number">37.8551</span>],<br>        <span class="hljs-string">&#x27;大同&#x27;</span>: [<span class="hljs-number">113.3</span>, <span class="hljs-number">40.0784</span>],<br>        <span class="hljs-string">&#x27;阳泉&#x27;</span>: [<span class="hljs-number">113.58</span>, <span class="hljs-number">37.8567</span>],<br>        <span class="hljs-string">&#x27;长治&#x27;</span>: [<span class="hljs-number">113.117</span>, <span class="hljs-number">36.1922</span>],<br>        <span class="hljs-string">&#x27;晋城&#x27;</span>: [<span class="hljs-number">112.853</span>, <span class="hljs-number">35.4906</span>],<br>        <span class="hljs-string">&#x27;朔州&#x27;</span>: [<span class="hljs-number">112.429</span>, <span class="hljs-number">39.3186</span>],<br>        <span class="hljs-string">&#x27;晋中&#x27;</span>: [<span class="hljs-number">112.752</span>, <span class="hljs-number">37.6883</span>],<br>        <span class="hljs-string">&#x27;运城&#x27;</span>: [<span class="hljs-number">110.998</span>, <span class="hljs-number">35.0315</span>],<br>        <span class="hljs-string">&#x27;忻州&#x27;</span>: [<span class="hljs-number">112.735</span>, <span class="hljs-number">38.4158</span>],<br>        <span class="hljs-string">&#x27;临汾&#x27;</span>: [<span class="hljs-number">111.527</span>, <span class="hljs-number">36.1021</span>],<br>        <span class="hljs-string">&#x27;吕梁&#x27;</span>: [<span class="hljs-number">111.13</span>, <span class="hljs-number">37.5203</span>],<br>        <span class="hljs-string">&#x27;呼和浩特&#x27;</span>: [<span class="hljs-number">111.667</span>, <span class="hljs-number">40.8083</span>],<br>        <span class="hljs-string">&#x27;包头&#x27;</span>: [<span class="hljs-number">109.871</span>, <span class="hljs-number">40.6617</span>],<br>        <span class="hljs-string">&#x27;乌海&#x27;</span>: [<span class="hljs-number">106.814</span>, <span class="hljs-number">39.6692</span>],<br>        <span class="hljs-string">&#x27;赤峰&#x27;</span>: [<span class="hljs-number">118.957</span>, <span class="hljs-number">42.2673</span>],<br>        <span class="hljs-string">&#x27;通辽&#x27;</span>: [<span class="hljs-number">122.261</span>, <span class="hljs-number">43.6059</span>],<br>        <span class="hljs-string">&#x27;鄂尔多斯&#x27;</span>: [<span class="hljs-number">110.003</span>, <span class="hljs-number">39.8223</span>],<br>        <span class="hljs-string">&#x27;呼伦贝尔&#x27;</span>: [<span class="hljs-number">119.756</span>, <span class="hljs-number">49.2458</span>],<br>        <span class="hljs-string">&#x27;巴彦淖尔&#x27;</span>: [<span class="hljs-number">107.376</span>, <span class="hljs-number">40.7801</span>],<br>        <span class="hljs-string">&#x27;乌兰察布&#x27;</span>: [<span class="hljs-number">113.121</span>, <span class="hljs-number">41.0317</span>],<br>        <span class="hljs-string">&#x27;兴安&#x27;</span>: [<span class="hljs-number">122.135</span>, <span class="hljs-number">46.0872</span>],<br>        <span class="hljs-string">&#x27;锡林郭勒&#x27;</span>: [<span class="hljs-number">116.099</span>, <span class="hljs-number">43.9455</span>],<br>        <span class="hljs-string">&#x27;阿拉善&#x27;</span>: [<span class="hljs-number">105.686</span>, <span class="hljs-number">38.8464</span>],<br>        <span class="hljs-string">&#x27;沈阳&#x27;</span>: [<span class="hljs-number">123.434</span>, <span class="hljs-number">41.8057</span>],<br>        <span class="hljs-string">&#x27;大连&#x27;</span>: [<span class="hljs-number">121.617</span>, <span class="hljs-number">38.9143</span>],<br>        <span class="hljs-string">&#x27;鞍山&#x27;</span>: [<span class="hljs-number">123.002</span>, <span class="hljs-number">41.1158</span>],<br>        <span class="hljs-string">&#x27;抚顺&#x27;</span>: [<span class="hljs-number">123.924</span>, <span class="hljs-number">41.8678</span>],<br>        <span class="hljs-string">&#x27;本溪&#x27;</span>: [<span class="hljs-number">123.786</span>, <span class="hljs-number">41.2984</span>],<br>        <span class="hljs-string">&#x27;丹东&#x27;</span>: [<span class="hljs-number">124.398</span>, <span class="hljs-number">40.1325</span>],<br>        <span class="hljs-string">&#x27;锦州&#x27;</span>: [<span class="hljs-number">121.148</span>, <span class="hljs-number">41.1261</span>],<br>        <span class="hljs-string">&#x27;营口&#x27;</span>: [<span class="hljs-number">122.25</span>, <span class="hljs-number">40.6716</span>],<br>        <span class="hljs-string">&#x27;阜新&#x27;</span>: [<span class="hljs-number">121.654</span>, <span class="hljs-number">42.0143</span>],<br>        <span class="hljs-string">&#x27;辽阳&#x27;</span>: [<span class="hljs-number">123.179</span>, <span class="hljs-number">41.2778</span>],<br>        <span class="hljs-string">&#x27;盘锦&#x27;</span>: [<span class="hljs-number">122.071</span>, <span class="hljs-number">41.1188</span>],<br>        <span class="hljs-string">&#x27;铁岭&#x27;</span>: [<span class="hljs-number">123.843</span>, <span class="hljs-number">42.2867</span>],<br>        <span class="hljs-string">&#x27;朝阳&#x27;</span>: [<span class="hljs-number">120.45</span>, <span class="hljs-number">41.5735</span>],<br>        <span class="hljs-string">&#x27;葫芦岛&#x27;</span>: [<span class="hljs-number">120.856</span>, <span class="hljs-number">40.7481</span>],<br>        <span class="hljs-string">&#x27;长春&#x27;</span>: [<span class="hljs-number">125.325</span>, <span class="hljs-number">43.8869</span>],<br>        <span class="hljs-string">&#x27;吉林&#x27;</span>: [<span class="hljs-number">126.571</span>, <span class="hljs-number">43.8458</span>],<br>        <span class="hljs-string">&#x27;四平&#x27;</span>: [<span class="hljs-number">124.398</span>, <span class="hljs-number">43.1725</span>],<br>        <span class="hljs-string">&#x27;辽源&#x27;</span>: [<span class="hljs-number">125.145</span>, <span class="hljs-number">42.9058</span>],<br>        <span class="hljs-string">&#x27;通化&#x27;</span>: [<span class="hljs-number">125.94</span>, <span class="hljs-number">41.7292</span>],<br>        <span class="hljs-string">&#x27;白山&#x27;</span>: [<span class="hljs-number">126.424</span>, <span class="hljs-number">41.9401</span>],<br>        <span class="hljs-string">&#x27;松原&#x27;</span>: [<span class="hljs-number">124.824</span>, <span class="hljs-number">45.1409</span>],<br>        <span class="hljs-string">&#x27;白城&#x27;</span>: [<span class="hljs-number">122.838</span>, <span class="hljs-number">45.6204</span>],<br>        <span class="hljs-string">&#x27;延边朝鲜族自治&#x27;</span>: [<span class="hljs-number">129.498</span>, <span class="hljs-number">42.8942</span>],<br>        <span class="hljs-string">&#x27;哈尔滨&#x27;</span>: [<span class="hljs-number">126.652</span>, <span class="hljs-number">45.7613</span>],<br>        <span class="hljs-string">&#x27;齐齐哈尔&#x27;</span>: [<span class="hljs-number">123.937</span>, <span class="hljs-number">47.3416</span>],<br>        <span class="hljs-string">&#x27;鸡西&#x27;</span>: [<span class="hljs-number">130.97</span>, <span class="hljs-number">45.2952</span>],<br>        <span class="hljs-string">&#x27;鹤岗&#x27;</span>: [<span class="hljs-number">130.279</span>, <span class="hljs-number">47.3311</span>],<br>        <span class="hljs-string">&#x27;双鸭山&#x27;</span>: [<span class="hljs-number">131.16</span>, <span class="hljs-number">46.6469</span>],<br>        <span class="hljs-string">&#x27;大庆&#x27;</span>: [<span class="hljs-number">125.094</span>, <span class="hljs-number">46.5883</span>],<br>        <span class="hljs-string">&#x27;伊春&#x27;</span>: [<span class="hljs-number">128.901</span>, <span class="hljs-number">47.7247</span>],<br>        <span class="hljs-string">&#x27;佳木斯&#x27;</span>: [<span class="hljs-number">130.37</span>, <span class="hljs-number">46.8075</span>],<br>        <span class="hljs-string">&#x27;七台河&#x27;</span>: [<span class="hljs-number">131.008</span>, <span class="hljs-number">45.7719</span>],<br>        <span class="hljs-string">&#x27;牡丹江&#x27;</span>: [<span class="hljs-number">129.623</span>, <span class="hljs-number">44.5848</span>],<br>        <span class="hljs-string">&#x27;黑河&#x27;</span>: [<span class="hljs-number">127.501</span>, <span class="hljs-number">50.2479</span>],<br>        <span class="hljs-string">&#x27;绥化&#x27;</span>: [<span class="hljs-number">126.99</span>, <span class="hljs-number">46.637</span>],<br>        <span class="hljs-string">&#x27;大兴安岭地&#x27;</span>: [<span class="hljs-number">124.397</span>, <span class="hljs-number">51.6737</span>],<br>        <span class="hljs-string">&#x27;南京&#x27;</span>: [<span class="hljs-number">118.792</span>, <span class="hljs-number">32.0562</span>],<br>        <span class="hljs-string">&#x27;无锡&#x27;</span>: [<span class="hljs-number">120.359</span>, <span class="hljs-number">31.5611</span>],<br>        <span class="hljs-string">&#x27;徐州&#x27;</span>: [<span class="hljs-number">117.174</span>, <span class="hljs-number">34.2586</span>],<br>        <span class="hljs-string">&#x27;常州&#x27;</span>: [<span class="hljs-number">119.975</span>, <span class="hljs-number">31.7698</span>],<br>        <span class="hljs-string">&#x27;苏州&#x27;</span>: [<span class="hljs-number">120.639</span>, <span class="hljs-number">31.3205</span>],<br>        <span class="hljs-string">&#x27;南通&#x27;</span>: [<span class="hljs-number">120.871</span>, <span class="hljs-number">32.0093</span>],<br>        <span class="hljs-string">&#x27;连云港&#x27;</span>: [<span class="hljs-number">119.173</span>, <span class="hljs-number">34.5959</span>],<br>        <span class="hljs-string">&#x27;淮安&#x27;</span>: [<span class="hljs-number">119.015</span>, <span class="hljs-number">33.612</span>],<br>        <span class="hljs-string">&#x27;盐城&#x27;</span>: [<span class="hljs-number">120.139</span>, <span class="hljs-number">33.3794</span>],<br>        <span class="hljs-string">&#x27;扬州&#x27;</span>: [<span class="hljs-number">119.413</span>, <span class="hljs-number">32.4195</span>],<br>        <span class="hljs-string">&#x27;镇江&#x27;</span>: [<span class="hljs-number">119.442</span>, <span class="hljs-number">32.211</span>],<br>        <span class="hljs-string">&#x27;泰州&#x27;</span>: [<span class="hljs-number">119.921</span>, <span class="hljs-number">32.4617</span>],<br>        <span class="hljs-string">&#x27;宿迁&#x27;</span>: [<span class="hljs-number">118.297</span>, <span class="hljs-number">33.9539</span>],<br>        <span class="hljs-string">&#x27;杭州&#x27;</span>: [<span class="hljs-number">120.173</span>, <span class="hljs-number">30.274</span>],<br>        <span class="hljs-string">&#x27;宁波&#x27;</span>: [<span class="hljs-number">121.544</span>, <span class="hljs-number">29.8683</span>],<br>        <span class="hljs-string">&#x27;温州&#x27;</span>: [<span class="hljs-number">120.638</span>, <span class="hljs-number">28.027</span>],<br>        <span class="hljs-string">&#x27;嘉兴&#x27;</span>: [<span class="hljs-number">120.759</span>, <span class="hljs-number">30.7539</span>],<br>        <span class="hljs-string">&#x27;湖州&#x27;</span>: [<span class="hljs-number">120.097</span>, <span class="hljs-number">30.8706</span>],<br>        <span class="hljs-string">&#x27;绍兴&#x27;</span>: [<span class="hljs-number">120.586</span>, <span class="hljs-number">29.9958</span>],<br>        <span class="hljs-string">&#x27;金华&#x27;</span>: [<span class="hljs-number">119.652</span>, <span class="hljs-number">29.0896</span>],<br>        <span class="hljs-string">&#x27;衢州&#x27;</span>: [<span class="hljs-number">118.874</span>, <span class="hljs-number">28.9359</span>],<br>        <span class="hljs-string">&#x27;舟山&#x27;</span>: [<span class="hljs-number">122.106</span>, <span class="hljs-number">30.0132</span>],<br>        <span class="hljs-string">&#x27;台州&#x27;</span>: [<span class="hljs-number">121.456</span>, <span class="hljs-number">28.6708</span>],<br>        <span class="hljs-string">&#x27;丽水&#x27;</span>: [<span class="hljs-number">119.917</span>, <span class="hljs-number">28.4522</span>],<br>        <span class="hljs-string">&#x27;合肥&#x27;</span>: [<span class="hljs-number">117.296</span>, <span class="hljs-number">31.8693</span>],<br>        <span class="hljs-string">&#x27;芜湖&#x27;</span>: [<span class="hljs-number">118.376</span>, <span class="hljs-number">31.3273</span>],<br>        <span class="hljs-string">&#x27;蚌埠&#x27;</span>: [<span class="hljs-number">117.402</span>, <span class="hljs-number">32.9302</span>],<br>        <span class="hljs-string">&#x27;淮南&#x27;</span>: [<span class="hljs-number">117.0</span>, <span class="hljs-number">32.6383</span>],<br>        <span class="hljs-string">&#x27;马鞍山&#x27;</span>: [<span class="hljs-number">118.502</span>, <span class="hljs-number">31.693</span>],<br>        <span class="hljs-string">&#x27;淮北&#x27;</span>: [<span class="hljs-number">116.793</span>, <span class="hljs-number">33.969</span>],<br>        <span class="hljs-string">&#x27;铜陵&#x27;</span>: [<span class="hljs-number">117.811</span>, <span class="hljs-number">30.9446</span>],<br>        <span class="hljs-string">&#x27;安庆&#x27;</span>: [<span class="hljs-number">117.051</span>, <span class="hljs-number">30.527</span>],<br>        <span class="hljs-string">&#x27;黄山&#x27;</span>: [<span class="hljs-number">118.317</span>, <span class="hljs-number">29.7099</span>],<br>        <span class="hljs-string">&#x27;滁州&#x27;</span>: [<span class="hljs-number">118.318</span>, <span class="hljs-number">32.3011</span>],<br>        <span class="hljs-string">&#x27;阜阳&#x27;</span>: [<span class="hljs-number">115.82</span>, <span class="hljs-number">32.8971</span>],<br>        <span class="hljs-string">&#x27;宿州&#x27;</span>: [<span class="hljs-number">116.984</span>, <span class="hljs-number">33.6381</span>],<br>        <span class="hljs-string">&#x27;巢湖&#x27;</span>: [<span class="hljs-number">117.87</span>, <span class="hljs-number">31.6009</span>],<br>        <span class="hljs-string">&#x27;六安&#x27;</span>: [<span class="hljs-number">116.491</span>, <span class="hljs-number">31.7426</span>],<br>        <span class="hljs-string">&#x27;亳州&#x27;</span>: [<span class="hljs-number">115.783</span>, <span class="hljs-number">33.8696</span>],<br>        <span class="hljs-string">&#x27;池州&#x27;</span>: [<span class="hljs-number">117.489</span>, <span class="hljs-number">30.6557</span>],<br>        <span class="hljs-string">&#x27;宣城&#x27;</span>: [<span class="hljs-number">118.755</span>, <span class="hljs-number">30.9469</span>],<br>        <span class="hljs-string">&#x27;福州&#x27;</span>: [<span class="hljs-number">119.306</span>, <span class="hljs-number">26.0761</span>],<br>        <span class="hljs-string">&#x27;厦门&#x27;</span>: [<span class="hljs-number">118.117</span>, <span class="hljs-number">24.4838</span>],<br>        <span class="hljs-string">&#x27;莆田&#x27;</span>: [<span class="hljs-number">119.005</span>, <span class="hljs-number">25.434</span>],<br>        <span class="hljs-string">&#x27;三明&#x27;</span>: [<span class="hljs-number">117.64</span>, <span class="hljs-number">26.2681</span>],<br>        <span class="hljs-string">&#x27;泉州&#x27;</span>: [<span class="hljs-number">118.585</span>, <span class="hljs-number">24.9295</span>],<br>        <span class="hljs-string">&#x27;漳州&#x27;</span>: [<span class="hljs-number">117.666</span>, <span class="hljs-number">24.5124</span>],<br>        <span class="hljs-string">&#x27;南平&#x27;</span>: [<span class="hljs-number">118.179</span>, <span class="hljs-number">26.6399</span>],<br>        <span class="hljs-string">&#x27;龙岩&#x27;</span>: [<span class="hljs-number">117.033</span>, <span class="hljs-number">25.0946</span>],<br>        <span class="hljs-string">&#x27;宁德&#x27;</span>: [<span class="hljs-number">119.537</span>, <span class="hljs-number">26.6528</span>],<br>        <span class="hljs-string">&#x27;南昌&#x27;</span>: [<span class="hljs-number">115.897</span>, <span class="hljs-number">28.6788</span>],<br>        <span class="hljs-string">&#x27;景德镇&#x27;</span>: [<span class="hljs-number">117.193</span>, <span class="hljs-number">29.298</span>],<br>        <span class="hljs-string">&#x27;萍乡&#x27;</span>: [<span class="hljs-number">113.852</span>, <span class="hljs-number">27.6227</span>],<br>        <span class="hljs-string">&#x27;九江&#x27;</span>: [<span class="hljs-number">115.99</span>, <span class="hljs-number">29.7156</span>],<br>        <span class="hljs-string">&#x27;新余&#x27;</span>: [<span class="hljs-number">114.918</span>, <span class="hljs-number">27.8163</span>],<br>        <span class="hljs-string">&#x27;鹰潭&#x27;</span>: [<span class="hljs-number">117.034</span>, <span class="hljs-number">28.2394</span>],<br>        <span class="hljs-string">&#x27;赣州&#x27;</span>: [<span class="hljs-number">114.942</span>, <span class="hljs-number">25.8553</span>],<br>        <span class="hljs-string">&#x27;吉安&#x27;</span>: [<span class="hljs-number">114.987</span>, <span class="hljs-number">27.1136</span>],<br>        <span class="hljs-string">&#x27;宜春&#x27;</span>: [<span class="hljs-number">114.399</span>, <span class="hljs-number">27.8068</span>],<br>        <span class="hljs-string">&#x27;抚州&#x27;</span>: [<span class="hljs-number">116.363</span>, <span class="hljs-number">27.9793</span>],<br>        <span class="hljs-string">&#x27;上饶&#x27;</span>: [<span class="hljs-number">117.969</span>, <span class="hljs-number">28.4456</span>],<br>        <span class="hljs-string">&#x27;济南&#x27;</span>: [<span class="hljs-number">117.021</span>, <span class="hljs-number">36.6594</span>],<br>        <span class="hljs-string">&#x27;青岛&#x27;</span>: [<span class="hljs-number">120.357</span>, <span class="hljs-number">36.084</span>],<br>        <span class="hljs-string">&#x27;淄博&#x27;</span>: [<span class="hljs-number">118.05</span>, <span class="hljs-number">36.8063</span>],<br>        <span class="hljs-string">&#x27;枣庄&#x27;</span>: [<span class="hljs-number">117.309</span>, <span class="hljs-number">34.8127</span>],<br>        <span class="hljs-string">&#x27;东营&#x27;</span>: [<span class="hljs-number">118.675</span>, <span class="hljs-number">37.4321</span>],<br>        <span class="hljs-string">&#x27;烟台&#x27;</span>: [<span class="hljs-number">121.392</span>, <span class="hljs-number">37.5379</span>],<br>        <span class="hljs-string">&#x27;潍坊&#x27;</span>: [<span class="hljs-number">119.122</span>, <span class="hljs-number">36.7159</span>],<br>        <span class="hljs-string">&#x27;济宁&#x27;</span>: [<span class="hljs-number">116.588</span>, <span class="hljs-number">35.4133</span>],<br>        <span class="hljs-string">&#x27;泰安&#x27;</span>: [<span class="hljs-number">117.121</span>, <span class="hljs-number">36.1813</span>],<br>        <span class="hljs-string">&#x27;威海&#x27;</span>: [<span class="hljs-number">122.122</span>, <span class="hljs-number">37.5043</span>],<br>        <span class="hljs-string">&#x27;日照&#x27;</span>: [<span class="hljs-number">119.526</span>, <span class="hljs-number">35.4188</span>],<br>        <span class="hljs-string">&#x27;莱芜&#x27;</span>: [<span class="hljs-number">117.679</span>, <span class="hljs-number">36.2136</span>],<br>        <span class="hljs-string">&#x27;临沂&#x27;</span>: [<span class="hljs-number">118.346</span>, <span class="hljs-number">35.0538</span>],<br>        <span class="hljs-string">&#x27;德州&#x27;</span>: [<span class="hljs-number">116.302</span>, <span class="hljs-number">37.4545</span>],<br>        <span class="hljs-string">&#x27;聊城&#x27;</span>: [<span class="hljs-number">115.986</span>, <span class="hljs-number">36.4561</span>],<br>        <span class="hljs-string">&#x27;滨州&#x27;</span>: [<span class="hljs-number">118.016</span>, <span class="hljs-number">37.3832</span>],<br>        <span class="hljs-string">&#x27;郑州&#x27;</span>: [<span class="hljs-number">113.663</span>, <span class="hljs-number">34.7619</span>],<br>        <span class="hljs-string">&#x27;开封&#x27;</span>: [<span class="hljs-number">114.34</span>, <span class="hljs-number">34.7893</span>],<br>        <span class="hljs-string">&#x27;洛阳&#x27;</span>: [<span class="hljs-number">112.401</span>, <span class="hljs-number">34.6567</span>],<br>        <span class="hljs-string">&#x27;平顶山&#x27;</span>: [<span class="hljs-number">113.304</span>, <span class="hljs-number">33.7274</span>],<br>        <span class="hljs-string">&#x27;安阳&#x27;</span>: [<span class="hljs-number">114.346</span>, <span class="hljs-number">36.1112</span>],<br>        <span class="hljs-string">&#x27;鹤壁&#x27;</span>: [<span class="hljs-number">114.297</span>, <span class="hljs-number">35.7481</span>],<br>        <span class="hljs-string">&#x27;新乡&#x27;</span>: [<span class="hljs-number">113.89</span>, <span class="hljs-number">35.3015</span>],<br>        <span class="hljs-string">&#x27;焦作&#x27;</span>: [<span class="hljs-number">113.228</span>, <span class="hljs-number">35.2338</span>],<br>        <span class="hljs-string">&#x27;濮阳&#x27;</span>: [<span class="hljs-number">115.029</span>, <span class="hljs-number">35.7632</span>],<br>        <span class="hljs-string">&#x27;许昌&#x27;</span>: [<span class="hljs-number">113.832</span>, <span class="hljs-number">34.0222</span>],<br>        <span class="hljs-string">&#x27;漯河&#x27;</span>: [<span class="hljs-number">114.036</span>, <span class="hljs-number">33.5673</span>],<br>        <span class="hljs-string">&#x27;三门峡&#x27;</span>: [<span class="hljs-number">111.192</span>, <span class="hljs-number">34.7758</span>],<br>        <span class="hljs-string">&#x27;南阳&#x27;</span>: [<span class="hljs-number">112.534</span>, <span class="hljs-number">32.9993</span>],<br>        <span class="hljs-string">&#x27;商丘&#x27;</span>: [<span class="hljs-number">115.651</span>, <span class="hljs-number">34.4389</span>],<br>        <span class="hljs-string">&#x27;信阳&#x27;</span>: [<span class="hljs-number">114.075</span>, <span class="hljs-number">32.124</span>],<br>        <span class="hljs-string">&#x27;周口&#x27;</span>: [<span class="hljs-number">114.653</span>, <span class="hljs-number">33.6166</span>],<br>        <span class="hljs-string">&#x27;驻马店&#x27;</span>: [<span class="hljs-number">114.028</span>, <span class="hljs-number">32.9832</span>],<br>        <span class="hljs-string">&#x27;武汉&#x27;</span>: [<span class="hljs-number">114.281</span>, <span class="hljs-number">30.5781</span>],<br>        <span class="hljs-string">&#x27;黄石&#x27;</span>: [<span class="hljs-number">115.06</span>, <span class="hljs-number">30.2063</span>],<br>        <span class="hljs-string">&#x27;十堰&#x27;</span>: [<span class="hljs-number">110.782</span>, <span class="hljs-number">32.6553</span>],<br>        <span class="hljs-string">&#x27;宜昌&#x27;</span>: [<span class="hljs-number">111.295</span>, <span class="hljs-number">30.7012</span>],<br>        <span class="hljs-string">&#x27;襄樊&#x27;</span>: [<span class="hljs-number">112.135</span>, <span class="hljs-number">32.062</span>],<br>        <span class="hljs-string">&#x27;鄂州&#x27;</span>: [<span class="hljs-number">114.904</span>, <span class="hljs-number">30.3898</span>],<br>        <span class="hljs-string">&#x27;荆门&#x27;</span>: [<span class="hljs-number">112.196</span>, <span class="hljs-number">31.0277</span>],<br>        <span class="hljs-string">&#x27;孝感&#x27;</span>: [<span class="hljs-number">113.919</span>, <span class="hljs-number">30.9246</span>],<br>        <span class="hljs-string">&#x27;荆州&#x27;</span>: [<span class="hljs-number">112.245</span>, <span class="hljs-number">30.3252</span>],<br>        <span class="hljs-string">&#x27;黄冈&#x27;</span>: [<span class="hljs-number">114.875</span>, <span class="hljs-number">30.4465</span>],<br>        <span class="hljs-string">&#x27;咸宁&#x27;</span>: [<span class="hljs-number">114.336</span>, <span class="hljs-number">29.8337</span>],<br>        <span class="hljs-string">&#x27;随州&#x27;</span>: [<span class="hljs-number">113.375</span>, <span class="hljs-number">31.7167</span>],<br>        <span class="hljs-string">&#x27;恩施土家族苗族自治&#x27;</span>: [<span class="hljs-number">109.482</span>, <span class="hljs-number">30.2899</span>],<br>        <span class="hljs-string">&#x27;长沙&#x27;</span>: [<span class="hljs-number">113.009</span>, <span class="hljs-number">28.2085</span>],<br>        <span class="hljs-string">&#x27;株洲&#x27;</span>: [<span class="hljs-number">113.149</span>, <span class="hljs-number">27.8406</span>],<br>        <span class="hljs-string">&#x27;湘潭&#x27;</span>: [<span class="hljs-number">112.907</span>, <span class="hljs-number">27.8612</span>],<br>        <span class="hljs-string">&#x27;衡阳&#x27;</span>: [<span class="hljs-number">112.612</span>, <span class="hljs-number">26.8962</span>],<br>        <span class="hljs-string">&#x27;邵阳&#x27;</span>: [<span class="hljs-number">111.467</span>, <span class="hljs-number">27.2371</span>],<br>        <span class="hljs-string">&#x27;岳阳&#x27;</span>: [<span class="hljs-number">113.108</span>, <span class="hljs-number">29.3663</span>],<br>        <span class="hljs-string">&#x27;常德&#x27;</span>: [<span class="hljs-number">111.703</span>, <span class="hljs-number">29.0366</span>],<br>        <span class="hljs-string">&#x27;张家界&#x27;</span>: [<span class="hljs-number">110.477</span>, <span class="hljs-number">29.1197</span>],<br>        <span class="hljs-string">&#x27;益阳&#x27;</span>: [<span class="hljs-number">112.356</span>, <span class="hljs-number">28.58</span>],<br>        <span class="hljs-string">&#x27;郴州&#x27;</span>: [<span class="hljs-number">113.032</span>, <span class="hljs-number">25.7968</span>],<br>        <span class="hljs-string">&#x27;永州&#x27;</span>: [<span class="hljs-number">111.608</span>, <span class="hljs-number">26.438</span>],<br>        <span class="hljs-string">&#x27;怀化&#x27;</span>: [<span class="hljs-number">109.977</span>, <span class="hljs-number">27.5484</span>],<br>        <span class="hljs-string">&#x27;娄底&#x27;</span>: [<span class="hljs-number">111.998</span>, <span class="hljs-number">27.7259</span>],<br>        <span class="hljs-string">&#x27;湘西土家族苗族自治&#x27;</span>: [<span class="hljs-number">109.601</span>, <span class="hljs-number">27.9472</span>],<br>        <span class="hljs-string">&#x27;广州&#x27;</span>: [<span class="hljs-number">113.322</span>, <span class="hljs-number">23.1341</span>],<br>        <span class="hljs-string">&#x27;韶关&#x27;</span>: [<span class="hljs-number">113.598</span>, <span class="hljs-number">24.8024</span>],<br>        <span class="hljs-string">&#x27;深圳&#x27;</span>: [<span class="hljs-number">114.056</span>, <span class="hljs-number">22.5421</span>],<br>        <span class="hljs-string">&#x27;珠海&#x27;</span>: [<span class="hljs-number">113.547</span>, <span class="hljs-number">22.2532</span>],<br>        <span class="hljs-string">&#x27;汕头&#x27;</span>: [<span class="hljs-number">116.724</span>, <span class="hljs-number">23.3601</span>],<br>        <span class="hljs-string">&#x27;佛山&#x27;</span>: [<span class="hljs-number">113.121</span>, <span class="hljs-number">23.0305</span>],<br>        <span class="hljs-string">&#x27;江门&#x27;</span>: [<span class="hljs-number">113.085</span>, <span class="hljs-number">22.583</span>],<br>        <span class="hljs-string">&#x27;湛江&#x27;</span>: [<span class="hljs-number">110.421</span>, <span class="hljs-number">21.1989</span>],<br>        <span class="hljs-string">&#x27;茂名&#x27;</span>: [<span class="hljs-number">110.927</span>, <span class="hljs-number">21.6616</span>],<br>        <span class="hljs-string">&#x27;肇庆&#x27;</span>: [<span class="hljs-number">112.476</span>, <span class="hljs-number">23.0734</span>],<br>        <span class="hljs-string">&#x27;惠州&#x27;</span>: [<span class="hljs-number">114.417</span>, <span class="hljs-number">23.0896</span>],<br>        <span class="hljs-string">&#x27;梅州&#x27;</span>: [<span class="hljs-number">116.118</span>, <span class="hljs-number">24.2988</span>],<br>        <span class="hljs-string">&#x27;汕尾&#x27;</span>: [<span class="hljs-number">115.368</span>, <span class="hljs-number">22.7782</span>],<br>        <span class="hljs-string">&#x27;河源&#x27;</span>: [<span class="hljs-number">114.697</span>, <span class="hljs-number">23.7503</span>],<br>        <span class="hljs-string">&#x27;阳江&#x27;</span>: [<span class="hljs-number">111.984</span>, <span class="hljs-number">21.872</span>],<br>        <span class="hljs-string">&#x27;清远&#x27;</span>: [<span class="hljs-number">113.045</span>, <span class="hljs-number">23.6882</span>],<br>        <span class="hljs-string">&#x27;东莞&#x27;</span>: [<span class="hljs-number">113.759</span>, <span class="hljs-number">23.0384</span>],<br>        <span class="hljs-string">&#x27;中山&#x27;</span>: [<span class="hljs-number">113.372</span>, <span class="hljs-number">22.525</span>],<br>        <span class="hljs-string">&#x27;潮州&#x27;</span>: [<span class="hljs-number">116.642</span>, <span class="hljs-number">23.6713</span>],<br>        <span class="hljs-string">&#x27;揭阳&#x27;</span>: [<span class="hljs-number">116.37</span>, <span class="hljs-number">23.5276</span>],<br>        <span class="hljs-string">&#x27;云浮&#x27;</span>: [<span class="hljs-number">112.044</span>, <span class="hljs-number">22.9294</span>],<br>        <span class="hljs-string">&#x27;南宁&#x27;</span>: [<span class="hljs-number">108.311</span>, <span class="hljs-number">22.8178</span>],<br>        <span class="hljs-string">&#x27;柳州&#x27;</span>: [<span class="hljs-number">109.413</span>, <span class="hljs-number">24.3068</span>],<br>        <span class="hljs-string">&#x27;桂林&#x27;</span>: [<span class="hljs-number">110.285</span>, <span class="hljs-number">25.2827</span>],<br>        <span class="hljs-string">&#x27;梧州&#x27;</span>: [<span class="hljs-number">111.304</span>, <span class="hljs-number">23.5036</span>],<br>        <span class="hljs-string">&#x27;北海&#x27;</span>: [<span class="hljs-number">109.123</span>, <span class="hljs-number">21.4788</span>],<br>        <span class="hljs-string">&#x27;防城港&#x27;</span>: [<span class="hljs-number">108.346</span>, <span class="hljs-number">21.6146</span>],<br>        <span class="hljs-string">&#x27;钦州&#x27;</span>: [<span class="hljs-number">108.609</span>, <span class="hljs-number">21.9509</span>],<br>        <span class="hljs-string">&#x27;贵港&#x27;</span>: [<span class="hljs-number">109.606</span>, <span class="hljs-number">23.0939</span>],<br>        <span class="hljs-string">&#x27;玉林&#x27;</span>: [<span class="hljs-number">110.151</span>, <span class="hljs-number">22.6255</span>],<br>        <span class="hljs-string">&#x27;百色&#x27;</span>: [<span class="hljs-number">106.621</span>, <span class="hljs-number">23.9018</span>],<br>        <span class="hljs-string">&#x27;贺州&#x27;</span>: [<span class="hljs-number">111.563</span>, <span class="hljs-number">24.4279</span>],<br>        <span class="hljs-string">&#x27;河池&#x27;</span>: [<span class="hljs-number">108.062</span>, <span class="hljs-number">24.6972</span>],<br>        <span class="hljs-string">&#x27;来宾&#x27;</span>: [<span class="hljs-number">109.222</span>, <span class="hljs-number">23.7351</span>],<br>        <span class="hljs-string">&#x27;崇左&#x27;</span>: [<span class="hljs-number">107.339</span>, <span class="hljs-number">22.4248</span>],<br>        <span class="hljs-string">&#x27;海口&#x27;</span>: [<span class="hljs-number">110.32</span>, <span class="hljs-number">20.0323</span>],<br>        <span class="hljs-string">&#x27;三亚&#x27;</span>: [<span class="hljs-number">109.514</span>, <span class="hljs-number">18.2355</span>],<br>        <span class="hljs-string">&#x27;成都&#x27;</span>: [<span class="hljs-number">104.066</span>, <span class="hljs-number">30.6581</span>],<br>        <span class="hljs-string">&#x27;自贡&#x27;</span>: [<span class="hljs-number">104.77</span>, <span class="hljs-number">29.3534</span>],<br>        <span class="hljs-string">&#x27;攀枝花&#x27;</span>: [<span class="hljs-number">101.699</span>, <span class="hljs-number">26.5733</span>],<br>        <span class="hljs-string">&#x27;泸州&#x27;</span>: [<span class="hljs-number">105.444</span>, <span class="hljs-number">28.8889</span>],<br>        <span class="hljs-string">&#x27;德阳&#x27;</span>: [<span class="hljs-number">104.388</span>, <span class="hljs-number">31.1368</span>],<br>        <span class="hljs-string">&#x27;绵阳&#x27;</span>: [<span class="hljs-number">104.726</span>, <span class="hljs-number">31.467</span>],<br>        <span class="hljs-string">&#x27;广元&#x27;</span>: [<span class="hljs-number">105.834</span>, <span class="hljs-number">32.4384</span>],<br>        <span class="hljs-string">&#x27;遂宁&#x27;</span>: [<span class="hljs-number">105.583</span>, <span class="hljs-number">30.5137</span>],<br>        <span class="hljs-string">&#x27;内江&#x27;</span>: [<span class="hljs-number">105.063</span>, <span class="hljs-number">29.5825</span>],<br>        <span class="hljs-string">&#x27;乐山&#x27;</span>: [<span class="hljs-number">103.746</span>, <span class="hljs-number">29.5866</span>],<br>        <span class="hljs-string">&#x27;南充&#x27;</span>: [<span class="hljs-number">106.095</span>, <span class="hljs-number">30.7844</span>],<br>        <span class="hljs-string">&#x27;眉山&#x27;</span>: [<span class="hljs-number">103.826</span>, <span class="hljs-number">30.0389</span>],<br>        <span class="hljs-string">&#x27;宜宾&#x27;</span>: [<span class="hljs-number">104.621</span>, <span class="hljs-number">28.7705</span>],<br>        <span class="hljs-string">&#x27;广安&#x27;</span>: [<span class="hljs-number">106.642</span>, <span class="hljs-number">30.4706</span>],<br>        <span class="hljs-string">&#x27;达州&#x27;</span>: [<span class="hljs-number">107.488</span>, <span class="hljs-number">31.2126</span>],<br>        <span class="hljs-string">&#x27;雅安&#x27;</span>: [<span class="hljs-number">103.015</span>, <span class="hljs-number">29.9937</span>],<br>        <span class="hljs-string">&#x27;巴中&#x27;</span>: [<span class="hljs-number">106.755</span>, <span class="hljs-number">31.8574</span>],<br>        <span class="hljs-string">&#x27;资阳&#x27;</span>: [<span class="hljs-number">104.651</span>, <span class="hljs-number">30.1286</span>],<br>        <span class="hljs-string">&#x27;阿坝藏族羌族自治&#x27;</span>: [<span class="hljs-number">102.222</span>, <span class="hljs-number">31.8992</span>],<br>        <span class="hljs-string">&#x27;甘孜藏族自治&#x27;</span>: [<span class="hljs-number">101.866</span>, <span class="hljs-number">30.1414</span>],<br>        <span class="hljs-string">&#x27;凉山彝族自治&#x27;</span>: [<span class="hljs-number">102.242</span>, <span class="hljs-number">27.9095</span>],<br>        <span class="hljs-string">&#x27;贵阳&#x27;</span>: [<span class="hljs-number">106.713</span>, <span class="hljs-number">26.5768</span>],<br>        <span class="hljs-string">&#x27;六盘水&#x27;</span>: [<span class="hljs-number">104.873</span>, <span class="hljs-number">26.5821</span>],<br>        <span class="hljs-string">&#x27;遵义&#x27;</span>: [<span class="hljs-number">106.931</span>, <span class="hljs-number">27.6926</span>],<br>        <span class="hljs-string">&#x27;安顺&#x27;</span>: [<span class="hljs-number">105.927</span>, <span class="hljs-number">26.2573</span>],<br>        <span class="hljs-string">&#x27;铜仁地&#x27;</span>: [<span class="hljs-number">109.188</span>, <span class="hljs-number">27.7184</span>],<br>        <span class="hljs-string">&#x27;黔西南布依族苗族自治&#x27;</span>: [<span class="hljs-number">104.895</span>, <span class="hljs-number">25.0935</span>],<br>        <span class="hljs-string">&#x27;毕节地&#x27;</span>: [<span class="hljs-number">105.288</span>, <span class="hljs-number">27.3032</span>],<br>        <span class="hljs-string">&#x27;黔东南苗族侗族自治&#x27;</span>: [<span class="hljs-number">107.981</span>, <span class="hljs-number">26.5831</span>],<br>        <span class="hljs-string">&#x27;黔南布依族苗族自治&#x27;</span>: [<span class="hljs-number">107.511</span>, <span class="hljs-number">26.283</span>],<br>        <span class="hljs-string">&#x27;昆明&#x27;</span>: [<span class="hljs-number">102.703</span>, <span class="hljs-number">25.0499</span>],<br>        <span class="hljs-string">&#x27;曲靖&#x27;</span>: [<span class="hljs-number">103.784</span>, <span class="hljs-number">25.4913</span>],<br>        <span class="hljs-string">&#x27;玉溪&#x27;</span>: [<span class="hljs-number">102.536</span>, <span class="hljs-number">24.3472</span>],<br>        <span class="hljs-string">&#x27;保山&#x27;</span>: [<span class="hljs-number">99.1647</span>, <span class="hljs-number">25.1249</span>],<br>        <span class="hljs-string">&#x27;昭通&#x27;</span>: [<span class="hljs-number">103.704</span>, <span class="hljs-number">27.3656</span>],<br>        <span class="hljs-string">&#x27;丽江&#x27;</span>: [<span class="hljs-number">100.277</span>, <span class="hljs-number">26.9229</span>],<br>        <span class="hljs-string">&#x27;临沧&#x27;</span>: [<span class="hljs-number">100.085</span>, <span class="hljs-number">23.8971</span>],<br>        <span class="hljs-string">&#x27;楚雄彝族自治&#x27;</span>: [<span class="hljs-number">101.545</span>, <span class="hljs-number">25.0549</span>],<br>        <span class="hljs-string">&#x27;红河哈尼族彝族自治&#x27;</span>: [<span class="hljs-number">103.18</span>, <span class="hljs-number">23.4301</span>],<br>        <span class="hljs-string">&#x27;文山壮族苗族自治&#x27;</span>: [<span class="hljs-number">104.255</span>, <span class="hljs-number">23.3803</span>],<br>        <span class="hljs-string">&#x27;西双版纳傣族自治&#x27;</span>: [<span class="hljs-number">100.799</span>, <span class="hljs-number">22.0109</span>],<br>        <span class="hljs-string">&#x27;大理白族自治&#x27;</span>: [<span class="hljs-number">100.222</span>, <span class="hljs-number">25.5842</span>],<br>        <span class="hljs-string">&#x27;德宏傣族景颇族自治&#x27;</span>: [<span class="hljs-number">98.5669</span>, <span class="hljs-number">24.4484</span>],<br>        <span class="hljs-string">&#x27;怒江傈僳族自治&#x27;</span>: [<span class="hljs-number">98.903</span>, <span class="hljs-number">25.8583</span>],<br>        <span class="hljs-string">&#x27;迪庆藏族自治&#x27;</span>: [<span class="hljs-number">99.709</span>, <span class="hljs-number">27.859</span>],<br>        <span class="hljs-string">&#x27;拉萨&#x27;</span>: [<span class="hljs-number">91.1189</span>, <span class="hljs-number">29.6553</span>],<br>        <span class="hljs-string">&#x27;昌都地&#x27;</span>: [<span class="hljs-number">97.1503</span>, <span class="hljs-number">31.1816</span>],<br>        <span class="hljs-string">&#x27;山南地&#x27;</span>: [<span class="hljs-number">91.805</span>, <span class="hljs-number">29.2407</span>],<br>        <span class="hljs-string">&#x27;日喀则地&#x27;</span>: [<span class="hljs-number">88.8884</span>, <span class="hljs-number">29.2717</span>],<br>        <span class="hljs-string">&#x27;那曲地&#x27;</span>: [<span class="hljs-number">92.0593</span>, <span class="hljs-number">31.4524</span>],<br>        <span class="hljs-string">&#x27;阿里地&#x27;</span>: [<span class="hljs-number">80.1027</span>, <span class="hljs-number">32.5517</span>],<br>        <span class="hljs-string">&#x27;林芝地&#x27;</span>: [<span class="hljs-number">94.4083</span>, <span class="hljs-number">29.6352</span>],<br>        <span class="hljs-string">&#x27;西安&#x27;</span>: [<span class="hljs-number">108.954</span>, <span class="hljs-number">34.2649</span>],<br>        <span class="hljs-string">&#x27;铜川&#x27;</span>: [<span class="hljs-number">108.948</span>, <span class="hljs-number">34.9005</span>],<br>        <span class="hljs-string">&#x27;宝鸡&#x27;</span>: [<span class="hljs-number">107.139</span>, <span class="hljs-number">34.3698</span>],<br>        <span class="hljs-string">&#x27;咸阳&#x27;</span>: [<span class="hljs-number">108.71</span>, <span class="hljs-number">34.3268</span>],<br>        <span class="hljs-string">&#x27;渭南&#x27;</span>: [<span class="hljs-number">109.51</span>, <span class="hljs-number">34.5073</span>],<br>        <span class="hljs-string">&#x27;延安&#x27;</span>: [<span class="hljs-number">109.496</span>, <span class="hljs-number">36.5948</span>],<br>        <span class="hljs-string">&#x27;汉中&#x27;</span>: [<span class="hljs-number">107.031</span>, <span class="hljs-number">33.0799</span>],<br>        <span class="hljs-string">&#x27;榆林&#x27;</span>: [<span class="hljs-number">109.754</span>, <span class="hljs-number">38.2954</span>],<br>        <span class="hljs-string">&#x27;安康&#x27;</span>: [<span class="hljs-number">109.031</span>, <span class="hljs-number">32.6917</span>],<br>        <span class="hljs-string">&#x27;商洛&#x27;</span>: [<span class="hljs-number">109.943</span>, <span class="hljs-number">33.8825</span>],<br>        <span class="hljs-string">&#x27;兰州&#x27;</span>: [<span class="hljs-number">103.835</span>, <span class="hljs-number">36.0599</span>],<br>        <span class="hljs-string">&#x27;嘉峪关&#x27;</span>: [<span class="hljs-number">98.2536</span>, <span class="hljs-number">39.8001</span>],<br>        <span class="hljs-string">&#x27;金昌&#x27;</span>: [<span class="hljs-number">102.175</span>, <span class="hljs-number">38.4764</span>],<br>        <span class="hljs-string">&#x27;白银&#x27;</span>: [<span class="hljs-number">104.151</span>, <span class="hljs-number">36.5506</span>],<br>        <span class="hljs-string">&#x27;天水&#x27;</span>: [<span class="hljs-number">105.702</span>, <span class="hljs-number">34.5875</span>],<br>        <span class="hljs-string">&#x27;武威&#x27;</span>: [<span class="hljs-number">102.634</span>, <span class="hljs-number">37.9317</span>],<br>        <span class="hljs-string">&#x27;张掖&#x27;</span>: [<span class="hljs-number">100.451</span>, <span class="hljs-number">38.931</span>],<br>        <span class="hljs-string">&#x27;平凉&#x27;</span>: [<span class="hljs-number">106.725</span>, <span class="hljs-number">35.5097</span>],<br>        <span class="hljs-string">&#x27;酒泉&#x27;</span>: [<span class="hljs-number">98.5139</span>, <span class="hljs-number">39.7563</span>],<br>        <span class="hljs-string">&#x27;庆阳&#x27;</span>: [<span class="hljs-number">107.862</span>, <span class="hljs-number">35.9344</span>],<br>        <span class="hljs-string">&#x27;定西&#x27;</span>: [<span class="hljs-number">104.622</span>, <span class="hljs-number">35.5852</span>],<br>        <span class="hljs-string">&#x27;陇南&#x27;</span>: [<span class="hljs-number">104.934</span>, <span class="hljs-number">33.4695</span>],<br>        <span class="hljs-string">&#x27;临夏回族自治&#x27;</span>: [<span class="hljs-number">103.201</span>, <span class="hljs-number">35.5914</span>],<br>        <span class="hljs-string">&#x27;甘南藏族自治&#x27;</span>: [<span class="hljs-number">102.899</span>, <span class="hljs-number">34.9854</span>],<br>        <span class="hljs-string">&#x27;西宁&#x27;</span>: [<span class="hljs-number">101.777</span>, <span class="hljs-number">36.6172</span>],<br>        <span class="hljs-string">&#x27;海东地&#x27;</span>: [<span class="hljs-number">102.086</span>, <span class="hljs-number">36.5092</span>],<br>        <span class="hljs-string">&#x27;海北藏族自治&#x27;</span>: [<span class="hljs-number">100.973</span>, <span class="hljs-number">36.9433</span>],<br>        <span class="hljs-string">&#x27;黄南藏族自治&#x27;</span>: [<span class="hljs-number">102.027</span>, <span class="hljs-number">35.5399</span>],<br>        <span class="hljs-string">&#x27;海南藏族自治&#x27;</span>: [<span class="hljs-number">100.638</span>, <span class="hljs-number">36.3244</span>],<br>        <span class="hljs-string">&#x27;果洛藏族自治&#x27;</span>: [<span class="hljs-number">100.295</span>, <span class="hljs-number">34.4775</span>],<br>        <span class="hljs-string">&#x27;玉树藏族自治&#x27;</span>: [<span class="hljs-number">97.013</span>, <span class="hljs-number">33.0183</span>],<br>        <span class="hljs-string">&#x27;海西蒙古族藏族自治&#x27;</span>: [<span class="hljs-number">97.3632</span>, <span class="hljs-number">37.4214</span>],<br>        <span class="hljs-string">&#x27;银川&#x27;</span>: [<span class="hljs-number">106.283</span>, <span class="hljs-number">38.4628</span>],<br>        <span class="hljs-string">&#x27;石嘴山&#x27;</span>: [<span class="hljs-number">106.386</span>, <span class="hljs-number">39.0146</span>],<br>        <span class="hljs-string">&#x27;吴忠&#x27;</span>: [<span class="hljs-number">106.194</span>, <span class="hljs-number">37.9852</span>],<br>        <span class="hljs-string">&#x27;固原&#x27;</span>: [<span class="hljs-number">106.281</span>, <span class="hljs-number">36.011</span>],<br>        <span class="hljs-string">&#x27;中卫&#x27;</span>: [<span class="hljs-number">105.686</span>, <span class="hljs-number">37.4829</span>],<br>        <span class="hljs-string">&#x27;乌鲁木齐&#x27;</span>: [<span class="hljs-number">87.6168</span>, <span class="hljs-number">43.8235</span>],<br>        <span class="hljs-string">&#x27;克拉玛依&#x27;</span>: [<span class="hljs-number">84.9312</span>, <span class="hljs-number">45.5964</span>],<br>        <span class="hljs-string">&#x27;吐鲁番地&#x27;</span>: [<span class="hljs-number">89.2107</span>, <span class="hljs-number">43.007</span>],<br>        <span class="hljs-string">&#x27;哈密地&#x27;</span>: [<span class="hljs-number">93.5502</span>, <span class="hljs-number">42.8991</span>],<br>        <span class="hljs-string">&#x27;昌吉回族自治&#x27;</span>: [<span class="hljs-number">87.9882</span>, <span class="hljs-number">44.0044</span>],<br>        <span class="hljs-string">&#x27;博尔塔拉蒙古自治&#x27;</span>: [<span class="hljs-number">82.0787</span>, <span class="hljs-number">44.9126</span>],<br>        <span class="hljs-string">&#x27;巴音郭楞蒙古自治&#x27;</span>: [<span class="hljs-number">86.1827</span>, <span class="hljs-number">41.8974</span>],<br>        <span class="hljs-string">&#x27;阿克苏地&#x27;</span>: [<span class="hljs-number">80.2445</span>, <span class="hljs-number">41.1239</span>],<br>        <span class="hljs-string">&#x27;克孜勒苏柯尔克孜自治&#x27;</span>: [<span class="hljs-number">76.67</span>, <span class="hljs-number">39.8878</span>],<br>        <span class="hljs-string">&#x27;喀什地&#x27;</span>: [<span class="hljs-number">75.9994</span>, <span class="hljs-number">39.4657</span>],<br>        <span class="hljs-string">&#x27;和田地&#x27;</span>: [<span class="hljs-number">79.7641</span>, <span class="hljs-number">37.2296</span>],<br>        <span class="hljs-string">&#x27;伊犁哈萨克自治&#x27;</span>: [<span class="hljs-number">81.3383</span>, <span class="hljs-number">43.9233</span>],<br>        <span class="hljs-string">&#x27;塔城地&#x27;</span>: [<span class="hljs-number">83.0148</span>, <span class="hljs-number">46.7523</span>],<br>        <span class="hljs-string">&#x27;阿勒泰地&#x27;</span>: [<span class="hljs-number">88.069</span>, <span class="hljs-number">47.81</span>],<br>        <span class="hljs-string">&#x27;仙桃&#x27;</span>: [<span class="hljs-number">113.453</span>, <span class="hljs-number">30.3646</span>],<br>        <span class="hljs-string">&#x27;潜江&#x27;</span>: [<span class="hljs-number">112.894</span>, <span class="hljs-number">30.4198</span>],<br>        <span class="hljs-string">&#x27;天门&#x27;</span>: [<span class="hljs-number">113.164</span>, <span class="hljs-number">30.6513</span>],<br>        <span class="hljs-string">&#x27;神农架林&#x27;</span>: [<span class="hljs-number">110.676</span>, <span class="hljs-number">31.7448</span>],<br>        <span class="hljs-string">&#x27;五指山&#x27;</span>: [<span class="hljs-number">109.517</span>, <span class="hljs-number">18.7773</span>],<br>        <span class="hljs-string">&#x27;琼海&#x27;</span>: [<span class="hljs-number">110.46</span>, <span class="hljs-number">19.248</span>],<br>        <span class="hljs-string">&#x27;儋州&#x27;</span>: [<span class="hljs-number">109.579</span>, <span class="hljs-number">19.5199</span>],<br>        <span class="hljs-string">&#x27;文昌&#x27;</span>: [<span class="hljs-number">110.748</span>, <span class="hljs-number">19.6159</span>],<br>        <span class="hljs-string">&#x27;万宁&#x27;</span>: [<span class="hljs-number">110.388</span>, <span class="hljs-number">18.8122</span>],<br>        <span class="hljs-string">&#x27;东方&#x27;</span>: [<span class="hljs-number">108.693</span>, <span class="hljs-number">19.0807</span>],<br>        <span class="hljs-string">&#x27;定安县&#x27;</span>: [<span class="hljs-number">110.447</span>, <span class="hljs-number">19.4883</span>],<br>        <span class="hljs-string">&#x27;屯昌县&#x27;</span>: [<span class="hljs-number">110.097</span>, <span class="hljs-number">19.3686</span>],<br>        <span class="hljs-string">&#x27;澄迈县&#x27;</span>: [<span class="hljs-number">110.016</span>, <span class="hljs-number">19.7302</span>],<br>        <span class="hljs-string">&#x27;临高县&#x27;</span>: [<span class="hljs-number">109.689</span>, <span class="hljs-number">19.8973</span>],<br>        <span class="hljs-string">&#x27;白沙黎族自治县&#x27;</span>: [<span class="hljs-number">109.44</span>, <span class="hljs-number">19.2375</span>],<br>        <span class="hljs-string">&#x27;昌江黎族自治县&#x27;</span>: [<span class="hljs-number">109.036</span>, <span class="hljs-number">19.3083</span>],<br>        <span class="hljs-string">&#x27;乐东黎族自治县&#x27;</span>: [<span class="hljs-number">109.175</span>, <span class="hljs-number">18.7435</span>],<br>        <span class="hljs-string">&#x27;陵水黎族自治县&#x27;</span>: [<span class="hljs-number">110.029</span>, <span class="hljs-number">18.5167</span>],<br>        <span class="hljs-string">&#x27;保亭黎族苗族自治县&#x27;</span>: [<span class="hljs-number">109.7</span>, <span class="hljs-number">18.6263</span>],<br>        <span class="hljs-string">&#x27;琼中黎族苗族自治县&#x27;</span>: [<span class="hljs-number">109.832</span>, <span class="hljs-number">19.0467</span>],<br>        <span class="hljs-string">&#x27;石河子&#x27;</span>: [<span class="hljs-number">86.0526</span>, <span class="hljs-number">44.3051</span>]<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> <span class="hljs-title class_">WHData</span> = []<br><br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; jsonData.<span class="hljs-property">length</span>; i++) &#123;<br>        <span class="hljs-comment">// console.log(jsonData[i]);</span><br>        tmp = [];<br>        tmp.<span class="hljs-title function_">push</span>(&#123; <span class="hljs-attr">name</span>: jsonData[i].<span class="hljs-property">srcLoc</span> &#125;);<br>        tmp.<span class="hljs-title function_">push</span>(&#123; <span class="hljs-attr">name</span>: jsonData[i].<span class="hljs-property">dstLoc</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">10</span> &#125;);<br>        <span class="hljs-title class_">WHData</span>.<span class="hljs-title function_">push</span>(tmp);<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> planePath = <span class="hljs-string">&#x27;path://M1705.06,1318.313v-89.254l-319.9-221.799l0.073-208.063c0.521-84.662-26.629-121.796-63.961-121.491c-37.332-0.305-64.482,36.829-63.961,121.491l0.073,208.063l-319.9,221.799v89.254l330.343-157.288l12.238,241.308l-134.449,92.931l0.531,42.034l175.125-42.917l175.125,42.917l0.531-42.034l-134.449-92.931l12.238-241.308L1705.06,1318.313z&#x27;</span>;<br>    planePath = <span class="hljs-string">&quot;arrow&quot;</span>;<br><br>    <span class="hljs-keyword">var</span> convertData = <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>        <span class="hljs-keyword">var</span> res = [];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; data.<span class="hljs-property">length</span>; i++) &#123;<br>            <span class="hljs-keyword">var</span> dataItem = data[i];<br>            <span class="hljs-keyword">var</span> fromCoord = geoCoordMap[dataItem[<span class="hljs-number">0</span>].<span class="hljs-property">name</span>];<br>            <span class="hljs-keyword">var</span> toCoord = geoCoordMap[dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>];<br>            <span class="hljs-keyword">if</span> (fromCoord &amp;&amp; toCoord) &#123;<br>                res.<span class="hljs-title function_">push</span>([&#123;<br>                    <span class="hljs-attr">coord</span>: fromCoord<br>                &#125;, &#123;<br>                    <span class="hljs-attr">coord</span>: toCoord<br>                &#125;]);<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> res;<br>    &#125;;<br><br>    <span class="hljs-keyword">var</span> color = [<span class="hljs-string">&#x27;#a6c84c&#x27;</span>, <span class="hljs-string">&#x27;#ffa022&#x27;</span>, <span class="hljs-string">&#x27;#46bee9&#x27;</span>];<br>    <span class="hljs-keyword">var</span> series = [];<br>    [[<span class="hljs-string">&#x27;Beijing&#x27;</span>, <span class="hljs-title class_">WHData</span>]].<span class="hljs-title function_">forEach</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">item, i</span>) &#123;<br>        series.<span class="hljs-title function_">push</span>(&#123;<br>            <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>            <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;lines&#x27;</span>,<br>            <span class="hljs-attr">zlevel</span>: <span class="hljs-number">1</span>,<br>            <span class="hljs-attr">effect</span>: &#123;<br>                <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                <span class="hljs-attr">period</span>: <span class="hljs-number">6</span>,<br>                <span class="hljs-attr">trailLength</span>: <span class="hljs-number">0.7</span>,<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span>,<br>                <span class="hljs-attr">symbolSize</span>: <span class="hljs-number">3</span><br>            &#125;,<br>            <span class="hljs-attr">lineStyle</span>: &#123;<br>                <span class="hljs-attr">normal</span>: &#123;<br>                    <span class="hljs-attr">color</span>: color[i],<br>                    <span class="hljs-attr">width</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-attr">curveness</span>: <span class="hljs-number">0.2</span><br>                &#125;<br>            &#125;,<br>            <span class="hljs-attr">data</span>: <span class="hljs-title function_">convertData</span>(item[<span class="hljs-number">1</span>])<br>        &#125;,<br>            &#123;<br>                <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;lines&#x27;</span>,<br>                <span class="hljs-attr">zlevel</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-attr">effect</span>: &#123;<br>                    <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                    <span class="hljs-attr">period</span>: <span class="hljs-number">6</span>,<br>                    <span class="hljs-attr">trailLength</span>: <span class="hljs-number">0</span>,<br>                    <span class="hljs-attr">symbol</span>: planePath,<br>                    <span class="hljs-attr">symbolSize</span>: <span class="hljs-number">8</span><br>                &#125;,<br>                <span class="hljs-attr">lineStyle</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">color</span>: color[i],<br>                        <span class="hljs-attr">width</span>: <span class="hljs-number">1</span>,<br>                        <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.4</span>,<br>                        <span class="hljs-attr">curveness</span>: <span class="hljs-number">0.2</span><br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">data</span>: <span class="hljs-title function_">convertData</span>(item[<span class="hljs-number">1</span>])<br>            &#125;,<br>            &#123;<br>                <span class="hljs-attr">name</span>: item[<span class="hljs-number">0</span>],<br>                <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;effectScatter&#x27;</span>,<br>                <span class="hljs-attr">coordinateSystem</span>: <span class="hljs-string">&#x27;geo&#x27;</span>,<br>                <span class="hljs-attr">zlevel</span>: <span class="hljs-number">2</span>,<br>                <span class="hljs-attr">rippleEffect</span>: &#123;<br>                    <span class="hljs-attr">brushType</span>: <span class="hljs-string">&#x27;stroke&#x27;</span><br>                &#125;,<br>                <span class="hljs-attr">label</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,<br>                        <span class="hljs-attr">position</span>: <span class="hljs-string">&#x27;right&#x27;</span>,<br>                        <span class="hljs-attr">formatter</span>: <span class="hljs-string">&#x27;&#123;b&#125;&#x27;</span><br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">symbolSize</span>: <span class="hljs-keyword">function</span> (<span class="hljs-params">val</span>) &#123;<br>                    <span class="hljs-keyword">return</span> val[<span class="hljs-number">2</span>] / <span class="hljs-number">8</span>;<br>                &#125;,<br>                <span class="hljs-attr">itemStyle</span>: &#123;<br>                    <span class="hljs-attr">normal</span>: &#123;<br>                        <span class="hljs-attr">color</span>: color[i]<br>                    &#125;<br>                &#125;,<br>                <span class="hljs-attr">data</span>: item[<span class="hljs-number">1</span>].<span class="hljs-title function_">map</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">dataItem</span>) &#123;<br>                    <span class="hljs-keyword">return</span> &#123;<br>                        <span class="hljs-attr">name</span>: dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>,<br>                        <span class="hljs-attr">value</span>: geoCoordMap[dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">name</span>].<span class="hljs-title function_">concat</span>([dataItem[<span class="hljs-number">1</span>].<span class="hljs-property">value</span>])<br>                    &#125;;<br>                &#125;)<br>            &#125;);<br>    &#125;);<br><br><br>    <span class="hljs-comment">// based ready dom, initialize echarts instance </span><br>    <span class="hljs-keyword">var</span> chart = echarts.<span class="hljs-title function_">init</span>(<span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;main&#x27;</span>));<br><br>    option = &#123;<br>        <span class="hljs-attr">backgroundColor</span>: <span class="hljs-string">&#x27;#404a59&#x27;</span>,<br>        <span class="hljs-attr">title</span>: &#123;<br>            <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;流量地图&#x27;</span>,<br>            <span class="hljs-attr">subtext</span>: <span class="hljs-string">&#x27;数据来自 npcap 实时抓取&#x27;</span>,<br>            <span class="hljs-attr">left</span>: <span class="hljs-string">&#x27;center&#x27;</span>,<br>            <span class="hljs-attr">textStyle</span>: &#123;<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span><br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">tooltip</span>: &#123;<br>            <span class="hljs-attr">trigger</span>: <span class="hljs-string">&#x27;item&#x27;</span><br>        &#125;,<br>        <span class="hljs-attr">legend</span>: &#123;<br>            <span class="hljs-attr">orient</span>: <span class="hljs-string">&#x27;vertical&#x27;</span>,<br>            <span class="hljs-attr">top</span>: <span class="hljs-string">&#x27;bottom&#x27;</span>,<br>            <span class="hljs-attr">left</span>: <span class="hljs-string">&#x27;right&#x27;</span>,<br>            <span class="hljs-attr">data</span>: [<span class="hljs-string">&#x27;Beijing Top10&#x27;</span>, <span class="hljs-string">&#x27;Shanghai Top10&#x27;</span>, <span class="hljs-string">&#x27;Canton Top10&#x27;</span>],<br>            <span class="hljs-attr">textStyle</span>: &#123;<br>                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#fff&#x27;</span><br>            &#125;,<br>            <span class="hljs-attr">selectedMode</span>: <span class="hljs-string">&#x27;single&#x27;</span><br>        &#125;,<br>        <span class="hljs-attr">geo</span>: &#123;<br>            <span class="hljs-attr">map</span>: <span class="hljs-string">&#x27;china&#x27;</span>,<br>            <span class="hljs-attr">label</span>: &#123;<br>                <span class="hljs-attr">emphasis</span>: &#123;<br>                    <span class="hljs-attr">show</span>: <span class="hljs-literal">false</span><br>                &#125;<br>            &#125;,<br>            <span class="hljs-attr">roam</span>: <span class="hljs-literal">true</span>,<br>            <span class="hljs-attr">itemStyle</span>: &#123;<br>                <span class="hljs-attr">normal</span>: &#123;<br>                    <span class="hljs-attr">areaColor</span>: <span class="hljs-string">&#x27;#323c48&#x27;</span>,<br>                    <span class="hljs-attr">borderColor</span>: <span class="hljs-string">&#x27;#404a59&#x27;</span><br>                &#125;,<br>                <span class="hljs-attr">emphasis</span>: &#123;<br>                    <span class="hljs-attr">areaColor</span>: <span class="hljs-string">&#x27;#2a333d&#x27;</span><br>                &#125;<br>            &#125;<br>        &#125;,<br>        <span class="hljs-attr">series</span>: series<br>    &#125;;<br><br>    <span class="hljs-comment">// Use just the specified configurations and data charts. </span><br>    chart.<span class="hljs-title function_">setOption</span>(option);<br>&#125;);<br></code></pre></td></tr></table></figure><p>实验其中一次的结果如下：</p><p><img src="https://i.imgur.com/sB9CxoX.png"></p><p>说明：图中的每一条路径上的箭头数量代表了流量包的数量。</p><h2 id="习题与思考题"><a href="#习题与思考题" class="headerlink" title="习题与思考题"></a>习题与思考题</h2><p>1、应用WINPCAP能实现哪些网络应用?</p><ul><li>捕获原始数据包。不管这个包是发往本地机，还是其他机器之间的交换包</li><li>在数据包被发送到应用程序之前，通过用户定义的规则过滤</li><li>向网络发送原始数据包</li><li>对网络通信量做出统计</li></ul><p>应用 winpcap 实现的典型应用程序如 WireShark。</p><h2 id="项目源码地址"><a href="#项目源码地址" class="headerlink" title="项目源码地址"></a>项目源码地址</h2><p><a href="https://github.com/FanyFull/ComputerNetworkExperiment">https://github.com/FanyFull/ComputerNetworkExperiment</a></p><hr><p>参考：</p><p>1、<a href="https://www.reddit.com/r/ccna/comments/7mh86d/what_does_protocol_control_information_means/">https://www.reddit.com/r/ccna/comments/7mh86d/what_does_protocol_control_information_means/</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>计网</tag>
      
      <tag>实验</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机网络实验二</title>
    <link href="/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E4%BA%8C/"/>
    <url>/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%AE%9E%E9%AA%8C%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<h1 id="winpcap-编程"><a href="#winpcap-编程" class="headerlink" title="winpcap 编程"></a>winpcap 编程</h1><h2 id="实验目的"><a href="#实验目的" class="headerlink" title="实验目的"></a>实验目的</h2><ul><li>了解 winpcap 的架构</li><li>学习 winpcap 编程</li></ul><h2 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h2><p>WinPcap是一个基于Win32平台的，用于捕获网络数据包并进行分析的开源库。</p><p>大多数网络应用程序通过被广泛使用的操作系统元件来访问网络，比如sockets。这是一种简单的实现方式，因为操作系统已经妥善处理了底层具体实现细节（比如协议处理，封装数据包等等），并且提供了一个与读写文件类似的，令人熟悉的接口。</p><p>然而，有些时候，这种“简单的方式”并不能满足任务的需求，因为有些应用程序需要直接访问网络中的数据包。也就是说，那些应用程序需要访问原始数据包，即没有被操作系统利用网络协议处理过的数据包。</p><p>WinPcap产生的目的，就是为Win32应用程序提供这种访问方式；WinPcap提供了以下功能：</p><ol><li>捕获原始数据包，无论它是发往某台机器的，还是在其他设备（共享媒介）上进行交换的  </li><li>在数据包发送给某应用程序前，根据用户指定的规则过滤数据包  </li><li>将原始数据包通过网络发送出去  </li><li>收集并统计网络流量信息</li></ol><p>以上这些功能需要借助安装在Win32内核中的网络设备驱动程序才能实现，再加上几个动态链接库DLL。</p><p>所有这些功能都能通过一个强大的编程接口来表现出来,易于开发，并能在不同的操作系统上使用。</p><p>WinPcap可以被用来制作网络分析、监控工具。一些基于WinPcap的典型应用有：</p><ol><li>网络与协议分析器 (network and protocol analyzers)  </li><li>网络监视器 (network monitors)  </li><li>网络流量记录器 (traffic loggers)  </li><li>网络流量发生器 (traffic generators)  </li><li>用户级网桥及路由 (user-level bridges and routers)  </li><li>网络入侵检测系统 (network intrusion detection systems (NIDS))  </li><li>网络扫描器 (network scanners)  </li><li>安全工具 (security tools)</li></ol><h2 id="实验内容"><a href="#实验内容" class="headerlink" title="实验内容"></a>实验内容</h2><p>通过学习WINPCAP架构，编写一个网络抓包程序。</p><h2 id="实验过程"><a href="#实验过程" class="headerlink" title="实验过程"></a>实验过程</h2><p>首先要说明一点，winpcap 官网建议使用 npcap，因为根据官网说明，winpcap 已经不适用于 windows10 和 windows11，有些函数可能会出现意想不到的效果。根据我的实践，发现winpcap无法获取适配器的具体名称，比如我的 wifi6 适配器，使用 winpcap 就只能获取模糊的 “Microsoft” 这个名称，而使用 npcap 就可以获取其完整的名称，而且 winpcap 或识别不了一些适配器，而这一点在 npcap 上得到了很好的改善。</p><p><img src="https://i.imgur.com/hSbEMym.png"></p><h3 id="1、npcap-的下载安装与配置"><a href="#1、npcap-的下载安装与配置" class="headerlink" title="1、npcap 的下载安装与配置"></a>1、npcap 的下载安装与配置</h3><ul><li>访问npcap官网：<a href="https://www.winpcap.org/">https://www.winpcap.org/</a></li><li>选择npcap的最新版，下载Installer for Windows并安装</li><li>在VS中导入相应头文件和lib文件</li></ul><p>安装配置的详细过程见我的<a href="https://fanyfull.github.io/2022/05/28/Visual-Studio-2022-%E9%85%8D%E7%BD%AE-winpcap-%E7%8E%AF%E5%A2%83/">这一篇博客</a>，这里不再赘述。</p><h3 id="2、获取设备列表"><a href="#2、获取设备列表" class="headerlink" title="2、获取设备列表"></a>2、获取设备列表</h3><p>通常情况下，一个基于Npcap的应用程序所做的第一件事就是获得一个连接的网络适配器的列表。libpcap和Npcap都为这个目的提供了<code>cap_findalldevs_ex()</code>函数：这个函数返回一个<code>cap_if</code>结构的链接列表，每个结构都包含一个连接的适配器的全面信息。特别是，字段<code>name</code>和<code>description</code>分别包含了相应设备的名称和可读的描述。</p><p>下面的代码检索适配器列表并显示在屏幕上，如果没有找到适配器，则打印一个错误。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;pcap.h&quot;</span></span><br><br>main()<br>&#123;<br>    <span class="hljs-type">pcap_if_t</span>* alldevs;<br>    <span class="hljs-type">pcap_if_t</span>* d;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><br>    <span class="hljs-comment">/* Retrieve the device list from the local machine */</span><br>    <span class="hljs-keyword">if</span> (pcap_findalldevs_ex(PCAP_SRC_IF_STRING,<br>        <span class="hljs-literal">NULL</span> <span class="hljs-comment">/* auth is not needed */</span>,<br>        &amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>            <span class="hljs-string">&quot;Error in pcap_findalldevs_ex: %s\n&quot;</span>,<br>            errbuf);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Print the list */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs; d != <span class="hljs-literal">NULL</span>; d = d-&gt;next)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br>        <span class="hljs-keyword">if</span> (d-&gt;description)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* We don&#x27;t need any more the device list. Free it */</span><br>    pcap_freealldevs(alldevs);<br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/SvJrQHy.png"></p><p>下面利用控制面板查看到的网络适配器：</p><p><img src="https://i.imgur.com/q8Z1qFN.png"></p><p><img src="https://i.imgur.com/juJFZnP.png"></p><p><strong>注</strong>：可以发现，通过程序打印出来的适配器列表和通过 windows 的设备管理器查看到的适配器列表有一些区别，主要是数量上的区别。已经打印出来的部分都可以和设备管理器中的对应得上。</p><p>关于这个代码的一些注释如下。</p><p>首先，<code>pcap_findalldevs_ex()</code>和其他libpcap函数一样，有一个<code>errbuf</code>参数。这个参数指向一个由libpcap填充的字符串，其中包括出错时的错误描述。</p><p>其次，请记住，并不是所有的操作系统都由libpcap支持，提供网络接口的描述，因此，如果我们想写一个可移植的应用程序，我们必须考虑描述为空的情况：在这种情况下，我们打印字符串”No description available”。</p><p>最后注意，当我们用完这个列表后，我们用<code>pcap_freealldevs()</code>释放它。</p><p>假设我们已经编译了该程序，让我们试着运行它。在我的 Windows10 系统上，我们得到的结果是</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">1</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">3</span>CEB626A-F27B-<span class="hljs-number">4267</span>-B79D-<span class="hljs-number">2</span>C6280763C13&#125; (Network adapter &#x27;WAN Miniport (Network Monitor)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">2</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">4</span>BC226A2-E243-<span class="hljs-number">421</span>C-<span class="hljs-number">9438</span>-E30A96261403&#125; (Network adapter &#x27;WAN Miniport (IPv6)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">3</span>. rpcap://\Device\NPF_&#123;D3594FDB-<span class="hljs-number">28</span>EF-<span class="hljs-number">4133</span>-<span class="hljs-number">931</span>A-<span class="hljs-number">1</span>CDF0C2F56E1&#125; (Network adapter &#x27;WAN Miniport (IP)&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">4</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">9464</span>D53B-<span class="hljs-number">3103</span>-<span class="hljs-number">4</span>A4A-<span class="hljs-number">9</span>B91-<span class="hljs-number">75</span>A5DA984497&#125; (Network adapter &#x27;Microsoft Wi-Fi Direct Virtual Adapter&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">5</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">0</span>D437C70-<span class="hljs-number">8383</span>-<span class="hljs-number">45</span>EE-A70B-D00C04950AEF&#125; (Network adapter &#x27;Intel(R) Wi-Fi <span class="hljs-number">6</span> AX200 <span class="hljs-number">160</span>MHz&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">6</span>. rpcap://\Device\NPF_&#123;<span class="hljs-number">6</span>A1116E4-<span class="hljs-number">93</span>E7-<span class="hljs-number">4</span>A84-<span class="hljs-number">99</span>D1-<span class="hljs-number">7</span>E4CB0428CCE&#125; (Network adapter &#x27;Microsoft Wi-Fi Direct Virtual Adapter #<span class="hljs-number">2</span>&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">7</span>. rpcap://\Device\NPF_Loopback (Network adapter &#x27;Adapter for loopback traffic capture&#x27; <span class="hljs-literal">on</span> local host)<br><span class="hljs-attribute">8</span>. rpcap://\Device\NPF_&#123;B5950B27-<span class="hljs-number">9860</span>-<span class="hljs-number">4</span>CEE-ADF9-<span class="hljs-number">3</span>AFF86481291&#125; (Network adapter &#x27;Realtek PCIe GbE Family Controller&#x27; <span class="hljs-literal">on</span> local host)<br></code></pre></td></tr></table></figure><h3 id="3、获取已安装设备的高级信息"><a href="#3、获取已安装设备的高级信息" class="headerlink" title="3、获取已安装设备的高级信息"></a>3、获取已安装设备的高级信息</h3><p>上一部分（名为 “获取设备列表 “的部分）演示了如何获取关于可用适配器的基本信息（即设备名称和描述）。实际上，Npcap还提供了其他高级信息。特别是，由<code>pcap_findalldevs_ex()</code>返回的每个<code>cap_if</code>结构都包含一个<code>cap_addr</code>结构的列表，其中包括：</p><ul><li>该接口的地址列表。</li><li>一个网络掩码的列表（每个掩码对应于地址列表中的一个条目）。</li><li>广播地址的列表（每个地址对应于地址列表中的一个条目）。</li><li>目标地址的列表（每个地址对应于地址列表中的一个条目）。</li></ul><p>此外，<code>cap_findalldevs_ex()</code>还可以返回远程适配器和位于指定本地文件夹中的pcap文件列表。</p><p>下面的代码提供了一个 <code>ifprint()</code> 函数，它可以打印 <code>pcap_if</code> 结构的全部内容。程序对 <code>pcap_findalldevs_ex()</code> 返回的每个条目都会调用该函数。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* Print all the available information on the given interface */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span> *d)</span><br>&#123;<br>  <span class="hljs-type">pcap_addr_t</span> *a;<br>  <span class="hljs-type">char</span> ip6str[<span class="hljs-number">128</span>];<br><br>  <span class="hljs-comment">/* Name */</span><br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>,d-&gt;name);<br><br>  <span class="hljs-comment">/* Description */</span><br>  <span class="hljs-keyword">if</span> (d-&gt;description)<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDescription: %s\n&quot;</span>,d-&gt;description);<br><br>  <span class="hljs-comment">/* Loopback Address*/</span><br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tLoopback: %s\n&quot;</span>,(d-&gt;flags &amp; PCAP_IF_LOOPBACK)?<span class="hljs-string">&quot;yes&quot;</span>:<span class="hljs-string">&quot;no&quot;</span>);<br><br>  <span class="hljs-comment">/* IP addresses */</span><br>  <span class="hljs-keyword">for</span>(a=d-&gt;addresses;a;a=a-&gt;next) &#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family: #%d\n&quot;</span>,a-&gt;addr-&gt;sa_family);<br>  <br>    <span class="hljs-keyword">switch</span>(a-&gt;addr-&gt;sa_family)<br>    &#123;<br>      <span class="hljs-keyword">case</span> AF_INET:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET\n&quot;</span>);<br>        <span class="hljs-keyword">if</span> (a-&gt;addr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;addr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;netmask)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tNetmask: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;netmask)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;broadaddr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tBroadcast Address: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;broadaddr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">if</span> (a-&gt;dstaddr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDestination Address: %s\n&quot;</span>,iptos(((<span class="hljs-keyword">struct</span> sockaddr_in *)a-&gt;dstaddr)-&gt;sin_addr.s_addr));<br>        <span class="hljs-keyword">break</span>;<br><br>      <span class="hljs-keyword">case</span> AF_INET6:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET6\n&quot;</span>);<br>        <span class="hljs-keyword">if</span> (a-&gt;addr)<br>          <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, ip6tos(a-&gt;addr, ip6str, <span class="hljs-keyword">sizeof</span>(ip6str)));<br>       <span class="hljs-keyword">break</span>;<br><br>      <span class="hljs-keyword">default</span>:<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: Unknown\n&quot;</span>);<br>        <span class="hljs-keyword">break</span>;<br>    &#125;<br>  &#125;<br>  <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure><p>完整代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/socket.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;netinet/in.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;winsock.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><br><span class="hljs-comment">// Function prototypes</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span>;<br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span>;<br><span class="hljs-type">char</span>* <span class="hljs-title function_">ip6tos</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> sockaddr* sockaddr, <span class="hljs-type">char</span>* address, <span class="hljs-type">int</span> addrlen)</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE + <span class="hljs-number">1</span>];<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* Scan the list printing every entry */</span><br><span class="hljs-keyword">for</span> (d = alldevs;d;d = d-&gt;next)<br>&#123;<br>ifprint(d);<br>&#125;<br><br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><br><span class="hljs-comment">/* Print all the available information on the given interface */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span><br>&#123;<br><span class="hljs-type">pcap_addr_t</span>* a;<br><span class="hljs-type">char</span> ip6str[<span class="hljs-number">128</span>];<br><br><span class="hljs-comment">/* Name */</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, d-&gt;name);<br><br><span class="hljs-comment">/* Description */</span><br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDescription: %s\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* Loopback Address*/</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tLoopback: %s\n&quot;</span>, (d-&gt;flags &amp; PCAP_IF_LOOPBACK) ? <span class="hljs-string">&quot;yes&quot;</span> : <span class="hljs-string">&quot;no&quot;</span>);<br><br><span class="hljs-comment">/* IP addresses */</span><br><span class="hljs-keyword">for</span> (a = d-&gt;addresses;a;a = a-&gt;next) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family: #%d\n&quot;</span>, a-&gt;addr-&gt;sa_family);<br><br><span class="hljs-keyword">switch</span> (a-&gt;addr-&gt;sa_family)<br>&#123;<br><span class="hljs-keyword">case</span> AF_INET:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET\n&quot;</span>);<br><span class="hljs-keyword">if</span> (a-&gt;addr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;addr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;netmask)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tNetmask: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;netmask)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;broadaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tBroadcast Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;broadaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;dstaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDestination Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;dstaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">case</span> AF_INET6:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET6\n&quot;</span>);<br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __MINGW32__ <span class="hljs-comment">/* Cygnus doesn&#x27;t have IPv6 */</span></span><br><span class="hljs-keyword">if</span> (a-&gt;addr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, ip6tos(a-&gt;addr, ip6str, <span class="hljs-keyword">sizeof</span>(ip6str)));<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">default</span>:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: Unknown\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><span class="hljs-comment">/* From tcptraceroute, convert a numeric IP address to a string */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> IPTOSBUFFERS12</span><br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span><br>&#123;<br><span class="hljs-type">static</span> <span class="hljs-type">char</span> output[IPTOSBUFFERS][<span class="hljs-number">3</span> * <span class="hljs-number">4</span> + <span class="hljs-number">3</span> + <span class="hljs-number">1</span>];<br><span class="hljs-type">static</span> <span class="hljs-type">short</span> which;<br>u_char* p;<br><br>p = (u_char*)&amp;in;<br>which = (which + <span class="hljs-number">1</span> == IPTOSBUFFERS ? <span class="hljs-number">0</span> : which + <span class="hljs-number">1</span>);<br><span class="hljs-built_in">sprintf</span>(output[which], <span class="hljs-string">&quot;%d.%d.%d.%d&quot;</span>, p[<span class="hljs-number">0</span>], p[<span class="hljs-number">1</span>], p[<span class="hljs-number">2</span>], p[<span class="hljs-number">3</span>]);<br><span class="hljs-keyword">return</span> output[which];<br>&#125;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifndef</span> __MINGW32__ <span class="hljs-comment">/* Cygnus doesn&#x27;t have IPv6 */</span></span><br><span class="hljs-type">char</span>* <span class="hljs-title function_">ip6tos</span><span class="hljs-params">(<span class="hljs-keyword">struct</span> sockaddr* sockaddr, <span class="hljs-type">char</span>* address, <span class="hljs-type">int</span> addrlen)</span><br>&#123;<br><span class="hljs-type">socklen_t</span> sockaddrlen;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br>sockaddrlen = <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> sockaddr_in6);<br><span class="hljs-meta">#<span class="hljs-keyword">else</span></span><br>sockaddrlen = <span class="hljs-keyword">sizeof</span>(<span class="hljs-keyword">struct</span> sockaddr_storage);<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><br><span class="hljs-keyword">if</span> (getnameinfo(sockaddr,<br>sockaddrlen,<br>address,<br>addrlen,<br><span class="hljs-literal">NULL</span>,<br><span class="hljs-number">0</span>,<br>NI_NUMERICHOST) != <span class="hljs-number">0</span>) address = <span class="hljs-literal">NULL</span>;<br><br><span class="hljs-keyword">return</span> address;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span> <span class="hljs-comment">/* __MINGW32__ */</span></span><br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/y361wAw.png"></p><p>然后我们看一下这个 WIFI6 适配器，发现它的地址和通过 powershell 查看到的 ipv4 地址是一样的：</p><p><img src="https://i.imgur.com/2Ju5VZS.png"></p><p><img src="https://i.imgur.com/RbtI2tx.png"></p><p>结果分析：</p><p>npcap 获取了 6 块逻辑网卡的高级信息：包含设备描述、IP地址、子网掩码、广播地址等。</p><h3 id="4、打开适配器并捕获数据包"><a href="#4、打开适配器并捕获数据包" class="headerlink" title="4、打开适配器并捕获数据包"></a>4、打开适配器并捕获数据包</h3><p>现在我们已经看到了如何获得一个适配器来玩(对，play，所谓的 toy programs)，让我们开始真正的工作，打开一个适配器并捕获一些流量。在这一课中，我们将编写一个程序，打印出流经适配器的每个数据包的一些信息。</p><p>打开一个捕获设备的函数是 <code>pcap_open()</code>。参数 <code>snaplen</code>，<code>flags</code> 和 <code>to_ms</code> 值得解释一下。</p><p><code>snaplen</code>：指定了要捕获的数据包的部分。在一些操作系统上（如xBSD和Win32），数据包驱动可以被配置为只捕获任何数据包的初始部分：这减少了要复制到应用程序的数据量，因此提高了捕获的效率。在这种情况下，我们使用65536这个值，这比我们可能遇到的最大MTU要高。通过这种方式，我们确保应用程序将始终收到整个数据包。</p><p><code>flags</code>：最重要的标志是指示适配器是否将进入混杂模式的标志。在正常操作中，适配器仅捕获来自网络的发往它的数据包；因此，其他主机交换的数据包将被忽略。相反，当适配器处于混杂模式时，它会捕获所有数据包，无论它们是否发往它。这意味着在共享媒体（如非交换以太网）上，Npcap 将能够捕获其他主机的数据包。混杂模式是大多数捕获应用程序的默认模式，因此我们在以下代码中启用它。</p><p><code>to_ms</code>：指定读取超时，以毫秒为单位。适配器上的读取（例如，使用 <code>pcap_dispatch()</code> 或 <code>pcap_next_ex()</code>）将始终在 <code>to_ms</code> 毫秒后返回，即使网络上没有可用的数据包。如果适配器处于统计模式，<code>to_ms</code> 还定义统计报告之间的间隔（有关统计模式的信息，请参阅官网教程 “\ref wpcap_tut9”）。将 <code>to_ms</code> 设置为 0 意味着没有超时，如果没有数据包到达，适配器上的读取永远不会返回。另一端的 -1 超时会导致适配器上的读取始终立即返回。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* prototype of the packet handler */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span>;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">int</span> inum;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">pcap_t</span>* adhandle;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* Print the list */</span><br><span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br><span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Jump to the selected adapter */</span><br><span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br><span class="hljs-comment">/* Open the device */</span><br><span class="hljs-comment">/* Open the adapter */</span><br><span class="hljs-keyword">if</span> ((adhandle = pcap_open_live(d-&gt;name,<span class="hljs-comment">// name of the device</span><br><span class="hljs-number">65536</span>,<span class="hljs-comment">// portion of the packet to capture. </span><br>   <span class="hljs-comment">// 65536 grants that the whole packet will be captured on all the MACs.</span><br><span class="hljs-number">1</span>,<span class="hljs-comment">// promiscuous mode (nonzero means promiscuous)</span><br><span class="hljs-number">1000</span>,<span class="hljs-comment">// read timeout</span><br>errbuf<span class="hljs-comment">// error buffer</span><br>)) == <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>, d-&gt;name);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-comment">/* start the capture */</span><br>pcap_loop(adhandle, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">NULL</span>);<br><br>pcap_close(adhandle);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><br><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param, <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header, <span class="hljs-type">const</span> u_char* pkt_data)</span><br>&#123;<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span>* <span class="hljs-title">ltime</span>;</span><br><span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br><span class="hljs-type">time_t</span> local_tv_sec;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * unused parameters</span><br><span class="hljs-comment"> */</span><br>(VOID)(param);<br>(VOID)(pkt_data);<br><br><span class="hljs-comment">/* convert the timestamp to readable format */</span><br>local_tv_sec = header-&gt;ts.tv_sec;<br>ltime = localtime(&amp;local_tv_sec);<br>strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, ltime);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s,%.6d len:%d\n&quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/dxtXbjC.png"></p><p>打开适配器后，可以使用 <code>pcap_dispatch()</code> 或 <code>pcap_loop()</code> 开始捕获。这两个函数非常相似，不同之处在于 <code>pcap_dispatch()</code> 在超时到期时返回（尽管不能保证），而 <code>pcap_loop()</code> 在捕获到 <code>cnt</code> 个数据包之前不会返回，因此它可以在下一个任意时间段内阻塞-利用网络。 <code>pcap_loop()</code> 足以满足我们的目的，而 <code>pcap_dispatch()</code> 通常用于更复杂的程序中。</p><p>这两个函数都有一个回调参数，<code>packet_handler</code>，指向一个将接收数据包的函数。这个函数由 libpcap 为来自网络的每个新数据包调用，并接收一个通用状态（对应于 <code>pcap_loop()</code> 和 <code>pcap_dispatch()</code> 的 <code>user</code> 参数），一个包含关于数据包的一些信息的标头，例如时间戳和长度以及数据包的实际数据，包括所有协议头。请注意，帧 CRC 通常不存在，因为它在帧验证后被网络适配器删除。另请注意，大多数适配器会丢弃具有错误 CRC 的数据包，因此 Npcap 通常无法捕获它们。</p><p>上面的代码从 <code>pcap_pkthdr</code> 标头中提取每个数据包的时间戳和长度，并将它们打印在屏幕上。</p><p>不过要注意，使用 <code>pcap_loop()</code> 可能有一个缺点，主要与抓包驱动程序调用处理程序有关；因此，用户应用程序无法直接控制它。另一种方法（并且具有更易读的程序）是使用 <code>pcap_next_ex()</code> 函数。这里就不再赘述。详情可以参考<a href="https://npcap.com/guide/npcap-tutorial.html">官方教程</a>。</p><h3 id="5、在没有回调的情况下捕获数据包"><a href="#5、在没有回调的情况下捕获数据包" class="headerlink" title="5、在没有回调的情况下捕获数据包"></a>5、在没有回调的情况下捕获数据包</h3><p>本节的代码的行为与前面的程序（名为”打开适配器并捕获数据包”的部分）完全一样，但它使用了 <code>pcap_next_ex()</code> 而不是 <code>pcap_loop()</code>。</p><p><code>pcap_loop()</code>的基于回调的捕获机制很优雅，在某些情况下它可能是一个很好的选择。然而，处理回调有时并不实用——它常常使程序更加复杂，特别是在多线程应用程序或C++类的情况下。</p><p>在这些情况下，<code>pcap_next_ex()</code>通过直接调用来获取数据包——使用<code>pcap_next_ex()</code>，数据包只有在程序员想要的时候才会被接收。</p><p>这个函数的参数与捕获回调相同。它接收一个适配器描述符和几个指针，这些指针将被初始化并返回给用户（一个指向<code>pcap_pkthdr</code>结构，另一个指向包含数据包的缓冲区）。</p><p>在下面的程序中，我们回收了上一节代码中的回调代码，并将其移到<code>main()</code>中，紧接着调用<code>pcap_next_ex()</code>。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>_TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>UINT len;<br>len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br><span class="hljs-keyword">if</span> (!len) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br>_tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br><span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br><span class="hljs-keyword">return</span> FALSE;<br>&#125;<br><span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">int</span> inum;<br><span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br><span class="hljs-type">pcap_t</span>* adhandle;<br><span class="hljs-type">int</span> res;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span>* <span class="hljs-title">ltime</span>;</span><br><span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">pcap_pkthdr</span>* <span class="hljs-title">header</span>;</span><br><span class="hljs-type">const</span> u_char* pkt_data;<br><span class="hljs-type">time_t</span> local_tv_sec;<br><br><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _WIN32</span><br><span class="hljs-comment">/* Load Npcap and its functions. */</span><br><span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-comment">/* Retrieve the device list */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs(&amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Print the list */</span><br><span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br><span class="hljs-keyword">else</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>&#125;<br><br><span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br><span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>&#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">/* Jump to the selected adapter */</span><br><span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br><span class="hljs-comment">/* Open the adapter */</span><br><span class="hljs-keyword">if</span> ((adhandle = pcap_open_live(d-&gt;name,<span class="hljs-comment">// name of the device</span><br><span class="hljs-number">65536</span>,<span class="hljs-comment">// portion of the packet to capture. </span><br>   <span class="hljs-comment">// 65536 grants that the whole packet will be captured on all the MACs.</span><br><span class="hljs-number">1</span>,<span class="hljs-comment">// promiscuous mode (nonzero means promiscuous)</span><br><span class="hljs-number">1000</span>,<span class="hljs-comment">// read timeout</span><br>errbuf<span class="hljs-comment">// error buffer</span><br>)) == <span class="hljs-literal">NULL</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>, d-&gt;name);<br><span class="hljs-comment">/* Free the device list */</span><br>pcap_freealldevs(alldevs);<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>pcap_freealldevs(alldevs);<br><br><span class="hljs-comment">/* Retrieve the packets */</span><br><span class="hljs-keyword">while</span> ((res = pcap_next_ex(adhandle, &amp;header, &amp;pkt_data)) &gt;= <span class="hljs-number">0</span>) &#123;<br><br><span class="hljs-keyword">if</span> (res == <span class="hljs-number">0</span>)<br><span class="hljs-comment">/* Timeout elapsed */</span><br><span class="hljs-keyword">continue</span>;<br><br><span class="hljs-comment">/* convert the timestamp to readable format */</span><br>local_tv_sec = header-&gt;ts.tv_sec;<br>ltime = localtime(&amp;local_tv_sec);<br>strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, ltime);<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s,%.6d len:%d\n&quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br>&#125;<br><br><span class="hljs-keyword">if</span> (res == <span class="hljs-number">-1</span>) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Error reading the packets: %s\n&quot;</span>, pcap_geterr(adhandle));<br><span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br>pcap_close(adhandle);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>为什么我们使用 <code>pcap_next_ex()</code> 而不是以前的 <code>pcap_next()</code>？因为 <code>pcap_next()</code> 有一些缺点。首先，它的效率很低，因为它隐藏了回调方法，但仍然依赖于 <code>pcap_dispatch()</code>。其次，它不能检测<code>EOF</code>，所以当从文件中收集数据包时，它不是很有用。</p><p>还请注意，<code>pcap_next_ex()</code>对成功、超时、错误和<code>EOF</code>条件返回不同的值。</p><h3 id="6、过滤流量"><a href="#6、过滤流量" class="headerlink" title="6、过滤流量"></a>6、过滤流量</h3><p>Npcap（以及 libpcap）提供的最强大的功能之一是过滤引擎。它提供了一种非常有效的方式来接收网络流量的子集，并且（通常）与 Npcap 提供的捕获机制集成。用于过滤数据包的函数是 <code>pcap_compile()</code> 和 <code>pcap_setfilter()</code>。</p><p><code>pcap_compile()</code> 接受一个包含高级布尔（过滤器）表达式的字符串，并生成一个低级别的字节码，该字节码可由数据包驱动程序中的文件过滤器引擎解释。布尔表达式的语法可以在本文档的过滤表达式语法部分中找到。</p><p><code>pcap_setfilter()</code>在内核驱动中把一个过滤器与一个捕获会话联系起来。一旦调用 <code>pcap_setfilter()</code>，相关的过滤器将被应用于所有来自网络的数据包，所有符合要求的数据包（即布尔表达式评估为真的数据包）将被实际拷贝到应用程序中。</p><p>下面的代码展示了如何编译和设置一个过滤器。注意，我们必须从描述适配器的 <code>pcap_if</code> 结构中获取网络掩码，因为由 <code>pcap_compile()</code> 创建的一些过滤器需要它。</p><p>在这个代码片段中传递给 <code>pcap_compile()</code> 的过滤器是“ip and tcp”，这意味着“只保留 IPv4 和 TCP 的数据包并将它们传递给应用程序”。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">if</span> (d-&gt;addresses != <span class="hljs-literal">NULL</span>)<br>  <span class="hljs-comment">/* Retrieve the mask of the first address of the interface */</span><br>  netmask=((<span class="hljs-keyword">struct</span> sockaddr_in *)(d-&gt;addresses-&gt;netmask))-&gt;sin_addr.S_un.S_addr;<br><span class="hljs-keyword">else</span><br>  <span class="hljs-comment">/* If the interface is without an address</span><br><span class="hljs-comment">   * we suppose to be in a C class network */</span><br>  netmask=<span class="hljs-number">0xffffff</span>; <br><br><br><span class="hljs-comment">//compile the filter</span><br><span class="hljs-keyword">if</span> (pcap_compile(adhandle, &amp;fcode, <span class="hljs-string">&quot;ip and tcp&quot;</span>, <span class="hljs-number">1</span>, netmask) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>  <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>    <span class="hljs-string">&quot;\nUnable to compile the packet filter. Check the syntax.\n&quot;</span>);<br>  <span class="hljs-comment">/* Free the device list */</span><br>  pcap_freealldevs(alldevs);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br><br><span class="hljs-comment">//set the filter</span><br><span class="hljs-keyword">if</span> (pcap_setfilter(adhandle, &amp;fcode) &lt; <span class="hljs-number">0</span>)<br>&#123;<br>  <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<span class="hljs-string">&quot;\nError setting the filter.\n&quot;</span>);<br>  <span class="hljs-comment">/* Free the device list */</span><br>  pcap_freealldevs(alldevs);<br>  <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>上面的代码将会在下面的“解读数据包”这一节种使用到。</p><h3 id="7、解读数据包"><a href="#7、解读数据包" class="headerlink" title="7、解读数据包"></a>7、解读数据包</h3><p>现在我们能够捕获和过滤网络流量，我们希望将我们的知识用于一个简单的“现实世界”应用程序。</p><p>在本节中，我们将从之前的小节中获取代码，并使用这些部分来构建一个更有用的程序。当前程序的主要目的是展示如何解析和解释捕获的数据包的协议头。由此生成的应用程序，称为 UDPdump，打印我们网络上 UDP 流量的摘要。</p><p>我们选择了解析和显示UDP协议，因为它比其他协议（如TCP）更容易获得，因此是一个很好的初始例子。让我们看一下代码。</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pcap.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;Winsock2.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;time.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;tchar.h&gt;</span></span><br>BOOL <span class="hljs-title function_">LoadNpcapDlls</span><span class="hljs-params">()</span><br>&#123;<br>    _TCHAR npcap_dir[<span class="hljs-number">512</span>];<br>    UINT len;<br>    len = GetSystemDirectory(npcap_dir, <span class="hljs-number">480</span>);<br>    <span class="hljs-keyword">if</span> (!len) &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in GetSystemDirectory: %x&quot;</span>, GetLastError());<br>        <span class="hljs-keyword">return</span> FALSE;<br>    &#125;<br>    _tcscat_s(npcap_dir, <span class="hljs-number">512</span>, _T(<span class="hljs-string">&quot;\\Npcap&quot;</span>));<br>    <span class="hljs-keyword">if</span> (SetDllDirectory(npcap_dir) == <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in SetDllDirectory: %x&quot;</span>, GetLastError());<br>        <span class="hljs-keyword">return</span> FALSE;<br>    &#125;<br>    <span class="hljs-keyword">return</span> TRUE;<br>&#125;<br><br><br><span class="hljs-comment">/* 4 bytes IP address */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ip_address</span> &#123;</span><br>    u_char byte1;<br>    u_char byte2;<br>    u_char byte3;<br>    u_char byte4;<br>&#125;ip_address;<br><br><span class="hljs-comment">/* IPv4 header */</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">ip_header</span> &#123;</span><br>    u_char  ver_ihl; <span class="hljs-comment">// Version (4 bits) + IP header length (4 bits)</span><br>    u_char  tos;     <span class="hljs-comment">// Type of service </span><br>    u_short tlen;    <span class="hljs-comment">// Total length </span><br>    u_short identification; <span class="hljs-comment">// Identification</span><br>    u_short flags_fo; <span class="hljs-comment">// Flags (3 bits) + Fragment offset (13 bits)</span><br>    u_char  ttl;      <span class="hljs-comment">// Time to live</span><br>    u_char  proto;    <span class="hljs-comment">// Protocol</span><br>    u_short crc;      <span class="hljs-comment">// Header checksum</span><br>    ip_address  saddr; <span class="hljs-comment">// Source address</span><br>    ip_address  daddr; <span class="hljs-comment">// Destination address</span><br>    u_int  op_pad;     <span class="hljs-comment">// Option + Padding</span><br>&#125;ip_header;<br><br><span class="hljs-comment">/* UDP header*/</span><br><span class="hljs-keyword">typedef</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">udp_header</span> &#123;</span><br>    u_short sport; <span class="hljs-comment">// Source port</span><br>    u_short dport; <span class="hljs-comment">// Destination port</span><br>    u_short len;   <span class="hljs-comment">// Datagram length</span><br>    u_short crc;   <span class="hljs-comment">// Checksum</span><br>&#125;udp_header;<br><br><span class="hljs-comment">/* prototype of the packet handler */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> u_char* pkt_data)</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">pcap_if_t</span>* alldevs;<br>    <span class="hljs-type">pcap_if_t</span>* d;<br>    <span class="hljs-type">int</span> inum;<br>    <span class="hljs-type">int</span> i = <span class="hljs-number">0</span>;<br>    <span class="hljs-type">pcap_t</span>* adhandle;<br>    <span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE];<br>    u_int netmask;<br>    <span class="hljs-type">char</span> packet_filter[] = <span class="hljs-string">&quot;ip and udp&quot;</span>;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">bpf_program</span> <span class="hljs-title">fcode</span>;</span><br><br>    <span class="hljs-comment">/* Load Npcap and its functions. */</span><br>    <span class="hljs-keyword">if</span> (!LoadNpcapDlls())<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Couldn&#x27;t load Npcap\n&quot;</span>);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Retrieve the device list */</span><br>    <span class="hljs-keyword">if</span> (pcap_findalldevs_ex(PCAP_SRC_IF_STRING,<br>        <span class="hljs-literal">NULL</span>, &amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br>        <span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/* Print the list */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d. %s&quot;</span>, ++i, d-&gt;name);<br>        <span class="hljs-keyword">if</span> (d-&gt;description)<br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (%s)\n&quot;</span>, d-&gt;description);<br>        <span class="hljs-keyword">else</span><br>            <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot; (No description available)\n&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (i == <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nNo interfaces found! Make sure Npcap is installed.\n&quot;</span>);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the interface number (1-%d):&quot;</span>, i);<br>    scanf_s(<span class="hljs-string">&quot;%d&quot;</span>, &amp;inum);<br><br>    <span class="hljs-keyword">if</span> (inum &lt; <span class="hljs-number">1</span> || inum &gt; i)<br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nInterface number out of range.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* Jump to the selected adapter */</span><br>    <span class="hljs-keyword">for</span> (d = alldevs, i = <span class="hljs-number">0</span>; i &lt; inum - <span class="hljs-number">1</span>;d = d-&gt;next, i++);<br><br>    <span class="hljs-comment">/* Open the adapter */</span><br>    <span class="hljs-keyword">if</span> ((adhandle = pcap_open(d-&gt;name, <span class="hljs-comment">// name of the device</span><br>        <span class="hljs-number">65536</span>, <span class="hljs-comment">// portion of the packet to capture. </span><br>               <span class="hljs-comment">// 65536 grants that the whole packet</span><br>               <span class="hljs-comment">// will be captured on all the MACs.</span><br>        PCAP_OPENFLAG_PROMISCUOUS, <span class="hljs-comment">// promiscuous mode</span><br>        <span class="hljs-number">1000</span>, <span class="hljs-comment">// read timeout</span><br>        <span class="hljs-literal">NULL</span>, <span class="hljs-comment">// remote authentication</span><br>        errbuf <span class="hljs-comment">// error buffer</span><br>    )) == <span class="hljs-literal">NULL</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>,<br>            <span class="hljs-string">&quot;\nUnable to open the adapter. %s is not supported by Npcap\n&quot;</span>,<br>            d-&gt;name);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/* Check the link layer. We support only Ethernet for simplicity. */</span><br>    <span class="hljs-keyword">if</span> (pcap_datalink(adhandle) != DLT_EN10MB)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nThis program works only on Ethernet networks.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">if</span> (d-&gt;addresses != <span class="hljs-literal">NULL</span>)<br>        <span class="hljs-comment">/* Retrieve the mask of the first address of the interface */</span><br>        netmask = ((<span class="hljs-keyword">struct</span> sockaddr_in*)(d-&gt;addresses-&gt;netmask))-&gt;sin_addr.S_un.S_addr;<br>    <span class="hljs-keyword">else</span><br>        <span class="hljs-comment">/* If the interface is without addresses</span><br><span class="hljs-comment">         * we suppose to be in a C class network */</span><br>        netmask = <span class="hljs-number">0xffffff</span>;<br><br><br>    <span class="hljs-comment">//compile the filter</span><br>    <span class="hljs-keyword">if</span> (pcap_compile(adhandle, &amp;fcode, packet_filter, <span class="hljs-number">1</span>, netmask) &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nUnable to compile the packet filter. Check the syntax.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-comment">//set the filter</span><br>    <span class="hljs-keyword">if</span> (pcap_setfilter(adhandle, &amp;fcode) &lt; <span class="hljs-number">0</span>)<br>    &#123;<br>        <span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;\nError setting the filter.\n&quot;</span>);<br>        <span class="hljs-comment">/* Free the device list */</span><br>        pcap_freealldevs(alldevs);<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">-1</span>;<br>    &#125;<br><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\nlistening on %s...\n&quot;</span>, d-&gt;description);<br><br>    <span class="hljs-comment">/* At this point, we don&#x27;t need any more the device list. Free it */</span><br>    pcap_freealldevs(alldevs);<br><br>    <span class="hljs-comment">/* start the capture */</span><br>    pcap_loop(adhandle, <span class="hljs-number">0</span>, packet_handler, <span class="hljs-literal">NULL</span>);<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br><br><span class="hljs-comment">/* Callback function invoked by libpcap for every incoming packet */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">packet_handler</span><span class="hljs-params">(u_char* param,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> <span class="hljs-keyword">struct</span> pcap_pkthdr* header,</span><br><span class="hljs-params">    <span class="hljs-type">const</span> u_char* pkt_data)</span><br>&#123;<br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">tm</span> <span class="hljs-title">ltime</span>;</span><br>    <span class="hljs-type">char</span> timestr[<span class="hljs-number">16</span>];<br>    ip_header* ih;<br>    udp_header* uh;<br>    u_int ip_len;<br>    u_short sport, dport;<br>    <span class="hljs-type">time_t</span> local_tv_sec;<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     * Unused variable</span><br><span class="hljs-comment">     */</span><br>    (VOID)(param);<br><br>    <span class="hljs-comment">/* convert the timestamp to readable format */</span><br>    local_tv_sec = header-&gt;ts.tv_sec;<br>    localtime_s(&amp;ltime, &amp;local_tv_sec);<br>    strftime(timestr, <span class="hljs-keyword">sizeof</span> timestr, <span class="hljs-string">&quot;%H:%M:%S&quot;</span>, &amp;ltime);<br><br>    <span class="hljs-comment">/* print timestamp and length of the packet */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s.%.6d len:%d &quot;</span>, timestr, header-&gt;ts.tv_usec, header-&gt;len);<br><br>    <span class="hljs-comment">/* retireve the position of the ip header */</span><br>    ih = (ip_header*)(pkt_data +<br>        <span class="hljs-number">14</span>); <span class="hljs-comment">//length of ethernet header</span><br><br>      <span class="hljs-comment">/* retireve the position of the udp header */</span><br>    ip_len = (ih-&gt;ver_ihl &amp; <span class="hljs-number">0xf</span>) * <span class="hljs-number">4</span>;<br>    uh = (udp_header*)((u_char*)ih + ip_len);<br><br>    <span class="hljs-comment">/* convert from network byte order to host byte order */</span><br>    sport = ntohs(uh-&gt;sport);<br>    dport = ntohs(uh-&gt;dport);<br><br>    <span class="hljs-comment">/* print ip addresses and udp ports */</span><br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d.%d.%d.%d.%d -&gt; %d.%d.%d.%d.%d\n&quot;</span>,<br>        ih-&gt;saddr.byte1,<br>        ih-&gt;saddr.byte2,<br>        ih-&gt;saddr.byte3,<br>        ih-&gt;saddr.byte4,<br>        sport,<br>        ih-&gt;daddr.byte1,<br>        ih-&gt;daddr.byte2,<br>        ih-&gt;daddr.byte3,<br>        ih-&gt;daddr.byte4,<br>        dport);<br>&#125;<br></code></pre></td></tr></table></figure><p>运行如下：</p><p><img src="https://i.imgur.com/oO5Otcu.png"></p><p>首先，我们将过滤器设置为“ip and udp”。通过这种方式，我们可以确定 <code>packet_handler()</code> 将只接收 IPv4 上的 UDP 数据包：这简化了解析并提高了程序的效率。</p><p>我们还创建了几个描述 IP 和 UDP 标头的结构。<code>packet_handler()</code> 使用这些结构来正确定位各种标头字段。</p><p><code>packet_handler()</code> 虽然仅限于单个协议解析器（UDP over IPv4），但它显示了 tcpdump&#x2F;WinDump 等复杂的“嗅探器”如何解码网络流量。由于我们对 MAC 标头不感兴趣，因此我们跳过它。为简单起见，在开始捕获之前，我们使用 <code>pcap_datalink()</code> 检查 MAC 层，以确保我们正在处理以太网网络。这样我们就可以确定 MAC 报头正好是 14 个字节。</p><p>IP 标头位于 MAC 标头之后。我们将从 IP 标头中提取 IP 源地址和目标地址。</p><p>到达 UDP 报头有点复杂，因为 IP 报头没有固定的长度。因此，我们使用 IP 头的长度字段来知道它的大小。一旦我们知道 UDP 标头的位置，我们就提取源端口和目标端口。</p><h2 id="习题与思考题"><a href="#习题与思考题" class="headerlink" title="习题与思考题"></a>习题与思考题</h2><p>1、WINPCAP(Npcap)是否能实现服务质量的控制？</p><p>答：不能。WinPcap可以独立地通过主机协议发送和接受数据，如同TCP-IP。这就意味着WinPcap不能阻止、过滤或操纵同一机器上的其他应用程序的通讯：它仅仅能简单地”监视”在网络上传输的数据包。所以，它不能提供类似网络流量控制、服务质量调度和个人防火墙之类的支持，因而不能实现服务质量的控制。</p><hr><p>参考：<br>1、<a href="https://npcap.com/guide/npcap-tutorial.html">https://npcap.com/guide/npcap-tutorial.html</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>作业</tag>
      
      <tag>实验</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机游戏设计第二次上机</title>
    <link href="/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%B8%8A%E6%9C%BA/"/>
    <url>/2022/05/31/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%B8%8A%E6%9C%BA/</url>
    
    <content type="html"><![CDATA[<p>题目描述：</p><p>一个冒险家到达一个旧的废墟，主入口的大门由一个巨大的石头人看守，只有说服了这个石头人，冒险家才能通过，玩家手头有2种不同的对话方式：<strong>胁迫、赞美</strong>。为这种情况编写一个有底稿的交谈，在这个交谈的每一个菜单中，玩家对应每一种方法都有一个可供选择的选项。你的交谈<strong>至少应该包含四个交换</strong>，如果玩家选择从头到尾都选择一种一致的方法，那么石头人就打开大门；如果玩家没有，那么石头人就拒绝打开大门然后交谈就此结束。</p><p><img src="https://i.imgur.com/l67yIZU.png"></p>]]></content>
    
    
    
    <tags>
      
      <tag>作业</tag>
      
      <tag>上机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机游戏设计上机一 游戏世界分析</title>
    <link href="/2022/05/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E4%B8%8A%E6%9C%BA%E4%B8%80-%E6%B8%B8%E6%88%8F%E4%B8%96%E7%95%8C%E5%88%86%E6%9E%90/"/>
    <url>/2022/05/30/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%B8%B8%E6%88%8F%E8%AE%BE%E8%AE%A1%E4%B8%8A%E6%9C%BA%E4%B8%80-%E6%B8%B8%E6%88%8F%E4%B8%96%E7%95%8C%E5%88%86%E6%9E%90/</url>
    
    <content type="html"><![CDATA[<p>题目：</p><p>《…》游戏世界分析</p><p>要求：</p><ul><li>内容：6 个维度分析，先简要介绍所选择游戏</li><li>游戏类型：RPG 或 RTS</li><li>时间 1.5 次上机完成</li><li>提交方式<ul><li>每人提交电子文档，以学号和姓名为文件名，pdf 或 word2007 格式</li><li>班长收集和压缩，以专业班级为文件名</li></ul></li></ul><h1 id="《尼尔：自动人形》游戏世界分析"><a href="#《尼尔：自动人形》游戏世界分析" class="headerlink" title="《尼尔：自动人形》游戏世界分析"></a>《尼尔：自动人形》游戏世界分析</h1><h2 id="游戏介绍"><a href="#游戏介绍" class="headerlink" title="游戏介绍"></a>游戏介绍</h2><p>《尼尔：自动人形》（日语：ニーア オートマタ，英语：NieR:Automata，又译作“尼尔：机械纪元”），是由白金工作室开发，史克威尔艾尼克斯发行的动作角色扮演游戏，2017年于PlayStation 4与Microsoft Windows平台推出，隔年移植至Xbox One平台。本作是《龙背上的骑兵》的外传游戏——2010年发行的《尼尔》之续作。故事设定在遥远的未来，地球被外星机械生物全面占领，而人类只能移往月球上生存；为了重回地球，人类派出人造人部队“寄叶”降下地球以消灭机械生物。本作以部队中的新型人造人二号B型与九号S型等为中心，描述著两方势力间漫长的战争。共有27种结局（A-Z及DLC结局），主要剧情结局有5种。</p><p>《尼尔：自动人形》于2014年开始计划制作，由齐藤阳介担当项目制作人，并由横尾太郎负责总监与剧本编写，音乐由冈部启一、帆足圭吾创作。白金工作室的稻叶敦志设计本作标题，吉田明彦担纲主要人物设定。本作所有版本的出货量合计超过600万套，因口碑与销量俱佳，也促使了官方将《尼尔》自此作为一个系列发展。</p><h2 id="游戏世界分析"><a href="#游戏世界分析" class="headerlink" title="游戏世界分析"></a>游戏世界分析</h2><p>从物理维度、时间维度、环境维度、感情维度、道德维度以及现实度六个维度分析《尼尔：自动人形》游戏世界。</p><h3 id="物理维度"><a href="#物理维度" class="headerlink" title="物理维度"></a>物理维度</h3><p>所谓物理维度，我的理解是包括了游戏人物设计，人物动作设计，玩家操作方式、游戏音乐设计等方面的分析。下面就其中的一条或者几条对游戏的物理维度进行具体分析。</p><p>首先，本作是一款经典的 3d 游戏。这是毋庸置疑的。作品中的所有人物以及场景都采用 3D 建模。游戏中的整体物理系统是和我们现实世界的物理规则大部分是吻合的。比如碰撞系统，重力系统等。</p><p>接下来，我们具体分析游戏中人物的物理动作设计。</p><p>尼尔中的闪避和跳跃这两个使用频率较高适用性较广的两个动作，被设定为能取消任何当前动作，只要按下按键就立即施放。在游戏中具体体现就是，不论玩家是站立状态，跳跃状态还是各种攻击招式途中，不论你是什么姿势下，按下回避键，她就能回避。这个设计是可以在相当程度上提高用户的游戏体验度。但是，在游戏中其实还是存在着玩家无法回避的时候，比如收到伤害的途中，这是游戏设计者经过平衡过的设计。这些无法回避的场合确实会让游戏体验变得更好。</p><p>然后是对尼尔的开放世界这一模式的分析。</p><p>尼尔的开放世界，从准确的角度来看，它其实不是严格的开放世界。我们知道，一般我们在谈论游戏的自由度时，脑海浮现的可能就是那种大型开放式的沙盒游戏，即有很大的地图，可以探索很多区域的游戏。从这个角度来看，其实我们很难将尼尔完全定义为开放世界游戏。游戏的开发者也承认，他在制作尼尔这款游戏的地图的时候，就是把《塞尔达传说：时光之笛》的地图抄一遍，包括地图区域的划分，甚至是从这一头移动到那一头的所需要的时间，都是严格按照塞尔达传说的设定。虽然没法完全定义尼尔为开放世界游戏，但是玩家在游玩的过程中，可以随意穿梭于地图中，在游戏中具体的表现就是使用穿梭机，穿梭于地球的各个地图，也可以穿梭回月球，玩家也可以探索已完成的场景，就这点而言，尼尔提供的自由感是不属于一些开放世界沙盒游戏的。</p><p>另外，要提到一点，游戏的音乐制作非常优秀，与其说优秀，不如说是相当惊艳。尼尔拥有数十首质量上乘的OST，能够数小时不重复。这些bgm能够完美地与剧情和场景结合在一起，不论是战斗时的热血恢弘还是在营地时的祥和轻松，都能给玩家的游戏体验带来生化。尼尔的很多经典音乐的旋律其实比较简单，但是简单的旋律中却蕴含着很醇厚的情感，因此，可以与剧情和画面有着很好的交融，很容易让人沉浸其中。</p><h3 id="时间维度"><a href="#时间维度" class="headerlink" title="时间维度"></a>时间维度</h3><p>游戏的整体时间系统与现实并无关联。其时间系统是固定的设计。</p><p>上面的物理维度也提到过，在地图区域从这一头移动到那一头所需要的时间，是严格按照塞尔达传说的设定，因此，可以猜测，在时间的维度这一块，尼尔在一定程度上借鉴了塞尔达的时间设定。</p><p>在正常的探索过程中，游戏中的时间在某种意义上是静止的，因为玩家可以花费任意时间来刷支线任务，或者联系人物的招式。在战斗的过程中，与普通小怪进行战斗不会有时间的限制。在某些主线章节的末尾，战斗是有一定的时间限制的，如果玩家没有在规定的时间内战胜关卡怪物，那么，时间将会重置，同样地，如果玩家在战斗过程中死亡，时间以及游戏进度同样将会重置至挑战章节怪物的节点。另外，有一些挑战性的支线任务，比如训练角色的某项能力去挑战一些地下修罗场，每一场战斗也是有时间限制的，当玩家满足在规定的时间内杀死怪物这个条件之后，才能够获取最终的奖励。</p><p>游戏系统有一个玩家游玩时间的记录。游戏主线的攻略时间大概在40小时以上，但是尼尔有一个有趣的设定，就是游戏的解决有很多种，并且，有所谓的“真结局”，所以，整个游戏的游玩时间可以达到80小时以上。</p><h3 id="环境维度"><a href="#环境维度" class="headerlink" title="环境维度"></a>环境维度</h3><p>尼尔的环境设计，主要采用了末日风格。尼尔作为末世题材世界观的游戏，各个大地图的创意设计是非常优秀的，从破败却又充满生机的废墟都市，到被漫天黄沙埋葬的人类遗址，又或者是巨人生存过一般的森林王国，山与流水，铺满青苔的城堡，飞鸟与鹿，每一个场景都能感受到制作的用心。</p><p>但是不能追求细节。有很多环境的建模欠缺细节，游戏中出现的场景并不是都能够探索，甚至有的时候还会出现穿模的情况。好在它有爽快的战斗系统来进行弥补。</p><h3 id="感情维度"><a href="#感情维度" class="headerlink" title="感情维度"></a>感情维度</h3><p>这个游戏是我两年前打通的，我至今对其一句台词记忆犹新：</p><blockquote><p>最后都没有看我一眼。</p></blockquote><p>在游戏中，游乐园有一个诡异的boss，名为simone，其实是用了法国存在主义文学家的名字西蒙娜·德·波伏娃(Simone de Beauvoir)。</p><p><img src="https://i.imgur.com/Pound6i.png"></p><p>用2b打完这个boss会出现这个boss的回忆(走二周目9s路线更能体现，打完boss之后的字幕其实是波伏娃著作《第二性》中原文的再表达)。她似乎深爱着一个机器人，这个机器人的名字是法国存在主义代表人物——让·保罗·萨特(Jean-Paul Sartre)。游戏里在帕斯卡村的机器人正是他，萨特的存在主义三大原则：一、“存在先于本质”，二、“自由选择”，三、“世界是荒诞的”。萨特与波伏娃是情侣，两人终生未婚，萨特一生风流，游戏中让·保罗的信体现了这一点。</p><p>在9s视角下打败波伏娃后的字幕：</p><blockquote><p>呐 你看到了吗 我变得很漂亮了吧 所以 你喜欢我吗<br>呐 看看我吧 我变得很漂亮了 可以只注视着我吗<br>这个衣服很漂亮吧<br>说到底 这种感情到底是什么呢 我不知道<br>但是为了得到那个人的注意 我会加油<br>所以 我决定了<br>以前 听其他老机器人说过 美丽的东西可以获得爱<br>美丽的东西 那是什么<br>我们机械生命体没有这种概念 调查了以前人类的资料 通过装饰 让肌肤变得漂亮<br>借以变得美丽 我要为了那个人 变得美丽<br>听说东方发现了贵重宝石 为了得到它 我摔得满身是伤<br>真是闪闪发光的宝石呢<br>又听到一个传闻说 吃掉人造人可以获得永恒的美丽<br>真是愚蠢呢 但是只要有一丝可能 我就会去做<br>吃起来就像腐烂的油一样我吃了好多 但是他还是不看我<br>我又去学唱歌 他还是不看我<br>不看我 不看我 不看我 不看我 不看我 不看我<br>不看我 不看我 不看我 不看我 不看我 不看我 不看我<br>他对这些都没兴趣 我到底是为了什么变成这样的 我看着镜子发出了悲鸣</p></blockquote><p>不得不说，在游戏的过程中，看到这样的字幕，给人感情上的冲击是有的。机器人的感情，这不是现在游戏作品中新鲜的话题，可是，这个台词的设计却给人一种很悲伤的感觉。重要的是，这一段台词有联系波伏娃的著作《第二性》中的内容：</p><blockquote><p>一、但情况依然是，女人打扮得越漂亮，她就越受到尊重；她越是需要工作，绝佳的外貌对她就越是有利；姣好容貌是一种武器，一面旗帜，一种防御，一封推荐信。<br>二、服饰对许多女人之所以如此重要，是因为它们可以使女人凭借幻觉，同时重塑外部世界和她们的内在自我。<br>三、打扮不仅仅是修饰，它还表明了女人的社会处境。<br>四、人们常说，女人打扮是为了引起别的女人的嫉妒，而这种嫉妒实际上是成功的明显标志；但这并不是唯一的目的。通过被人嫉妒、羡慕或赞赏，她想得到的是对她的美、她的典雅、她的情趣——对她自己的绝对肯定；她为了实现自己而展示自己。</p></blockquote><p>如此看来，尼尔的感情维度是有经过精心的设计的。</p><h3 id="道德维度"><a href="#道德维度" class="headerlink" title="道德维度"></a>道德维度</h3><p>对于道德维度的分析，我们可以联想到经典的机器人与人的关系。</p><p>尼尔是一部彻头彻尾的悲剧。无论是从整体的世界，还是从2b和a2和9s这几个游戏角色来看。整个世界的背景是人类灭亡，被机器人毁灭。而游戏的角色也是被赋予悲剧的命运，先赋予他们梦想和活着的意义，然后再把它们一一粉碎。于是作为旁观者的玩家只能难过，、遗憾、怒吼以及无能为力。</p><p>故事的一开始就注定了结局。并且是一种 bad ending。从这一点看，作者的道德观和我们传统的中国的道德观不太一样。中国的艺术作品，尤其是传统的艺术作品，其结局都是 happy ending。而尼尔所展现的是一种悲观的宿命观，这个和日本的文化有一定的联系。</p><p>我们再看其他方面，就游戏里面展现的，机器人似乎也有爱情，似乎也有友情，这一点我们不管是从主线还是支线，都可以看出。而主要角色的命运最后竟然是不断地重复之前的命运，那个悲惨的命运，仿佛堕入了无尽的深渊，无尽的地狱，这给玩家带来了极大的心灵上的沉重感。我无法主观地说这种道德观就一定不好，每个人都有自己的评判标准，尊重每个人自由的选择似乎才是我们应该做的。</p><h3 id="现实度维度"><a href="#现实度维度" class="headerlink" title="现实度维度"></a>现实度维度</h3><p>故事的背景设定在地球。整个环境的设计也有地球的特色。没落残败的都市，却又长满荒草，典型的现代化都市。游乐园场景也是根据现实中的游乐园来进行建模设计，沙漠的现实感也很强。当然，有一些超现代化的建筑充满了科幻感，这个明显超越了现实。另外，月球的场景设计同样超越了现实。</p><p>但是，整个游戏有一个出色的点，和现实的联系也非常强烈，就是最后我们打到真正的结局时，我们可以打破世界维度的限制，来到“现实”，那就是，pod 会一次次问你，</p><blockquote><p>你是否还要继续？<br>你选择在此放弃吗？<br>你承认这个世界没有意义吗？<br>你认为区区游戏很愚蠢吧？<br>要就此放弃吗？</p></blockquote><blockquote><p>当然。<br>不。<br>不。<br>不。<br>绝不。</p></blockquote><p>典型的日本的中二气息，却让人欲罢不能。</p><p>最后我们玩家可以利用弹幕机来攻击游戏的制作人名单，以此来改变人造人那该死的无尽的宿命，在此过程中，有无数的玩家献祭的自己的存档来帮助自己一次次复活，一次次来尝试打破命运的循环，整个过程充满了现实的味道，因为那个制作人的名单真真切切是尼尔的制作人名单。</p><p>接受救援之后BGM会变调，舒缓有力的女声变成了众人一起的合唱，那瞬间忽然有种错觉，仿佛看到了世界上有那么多同伴。</p><p>原来那么多人和我一样，为了拯救他们而努力着。</p><p>“原来我真的不是孤身一人”</p><p>虽然是单机游戏，最后确实给人一种有很多同伴的感觉。</p><p>当然，最后，我们可以选择献出自己的存档，来帮助其他玩家闯过最后一关。</p><p>至此，游戏结束。</p><hr><p>参考：<br>1、<a href="https://www.bilibili.com/read/cv3530623">https://www.bilibili.com/read/cv3530623</a><br>2、<a href="https://www.zhihu.com/question/48094475">https://www.zhihu.com/question/48094475</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>作业</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Visual Studio 2022 配置 winpcap 环境</title>
    <link href="/2022/05/28/Visual-Studio-2022-%E9%85%8D%E7%BD%AE-winpcap-%E7%8E%AF%E5%A2%83/"/>
    <url>/2022/05/28/Visual-Studio-2022-%E9%85%8D%E7%BD%AE-winpcap-%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<p>这个可以同样地应用到 npcap 中。可以说，npcap 的配置和 winpcap <strong>完全一致</strong>。</p><p>另，说明，虽然本篇博客写的是 winpcap 的配置，但是本人在实验中使用的其实还是 npcap，另外，我也建议你使用 npcap，因为那是针对 win10 和 win11 升级的，winpcap 的很多功能在 win10 和 win11 中无法使用，比如有些适配器它根本识别不了。诸君，慎重。</p><p>之所以这篇博客没有改成 npcap 的配置教程，单纯是因为我懒。</p><h1 id="安装软件"><a href="#安装软件" class="headerlink" title="安装软件"></a>安装软件</h1><p>首先，到 <a href="https://www.winpcap.org/">winpcap</a> 官网下载 winpcap 这个软件。注意，这个是软件，下面我们还要下载一个开发包。</p><p><img src="https://i.imgur.com/3GHQPH6.png"></p><p>然后，安装即可，注意，在安装的过程中有一个选项要勾选上：</p><p><img src="https://i.imgur.com/Gg8iQyV.png"></p><h1 id="安装开发包"><a href="#安装开发包" class="headerlink" title="安装开发包"></a>安装开发包</h1><p>即开发者所需要用到的 api。</p><p>来着<a href="https://www.winpcap.org/devel.htm">开发包下载网页</a>，然后解压到一个没有中文路径的目录即可：</p><p><img src="https://i.imgur.com/kqk9npg.png"></p><h1 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h1><p>上面的目录解压后，有一个官方示例：</p><p><img src="https://i.imgur.com/hGBjutV.png"></p><p>这个我们使用 VS 打开工程的话，IDE 会自动给我们升级项目，在这样的情况下，项目是可以正常运行的。</p><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>下面我们来手动配置这个环境。</p><p>打开项目配置，</p><p><img src="https://i.imgur.com/3dPp0Cz.png"></p><p>然后将刚刚解压的目录中的 Include 路径和 Lib 路径分别添加到包含目录和库目录中，</p><p><img src="https://i.imgur.com/xaW6hFH.png"></p><p>然后设置预处理器，即添加 <strong>WIN32;WPCAP;HAVE_REMOTE</strong>，</p><p><img src="https://i.imgur.com/InJzIdB.png"></p><p>然后是链接器，添加这个附加库目录，<strong>注意</strong>这个附加库目录是 Lib 目录下的 x64 子目录，</p><p><img src="https://i.imgur.com/ZE4Khav.png"></p><p>然后添加两个附加依赖项，即 <strong>wpcap.lib;Packet.lib</strong>，</p><p><img src="https://i.imgur.com/vkX5thl.png"></p><p>然后在写代码时，我们需要添加经典的预定义：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br></code></pre></td></tr></table></figure><p>之后就可以愉快地写代码了。</p><p>下面是测试：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">ifdef</span> _MSC_VER</span><br><span class="hljs-comment">/*</span><br><span class="hljs-comment"> * we do not want the warnings about the old deprecated and unsecure CRT functions</span><br><span class="hljs-comment"> * since these examples can be compiled under *nix as well</span><br><span class="hljs-comment"> */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> _CRT_SECURE_NO_WARNINGS</span><br><span class="hljs-meta">#<span class="hljs-keyword">endif</span></span><br><br><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&quot;pcap.h&quot;</span></span><br><br> <span class="hljs-comment">// 函数原型</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span>;<br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span>;<br><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br><span class="hljs-type">pcap_if_t</span>* alldevs;<br><span class="hljs-type">pcap_if_t</span>* d;<br><span class="hljs-type">char</span> errbuf[PCAP_ERRBUF_SIZE + <span class="hljs-number">1</span>];<br><span class="hljs-type">char</span> source[PCAP_ERRBUF_SIZE + <span class="hljs-number">1</span>];<br><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Enter the device you want to list:\n&quot;</span><br><span class="hljs-string">&quot;rpcap://              ==&gt; lists interfaces in the local machine\n&quot;</span><br><span class="hljs-string">&quot;rpcap://hostname:port ==&gt; lists interfaces in a remote machine\n&quot;</span><br><span class="hljs-string">&quot;                          (rpcapd daemon must be up and running\n&quot;</span><br><span class="hljs-string">&quot;                           and it must accept &#x27;null&#x27; authentication)\n&quot;</span><br><span class="hljs-string">&quot;file://foldername     ==&gt; lists all pcap files in the give folder\n\n&quot;</span><br><span class="hljs-string">&quot;Enter your choice: &quot;</span>);<br><br>fgets(source, PCAP_ERRBUF_SIZE, <span class="hljs-built_in">stdin</span>);<br>source[PCAP_ERRBUF_SIZE] = <span class="hljs-string">&#x27;\0&#x27;</span>;<br><br><span class="hljs-comment">/* 获得接口列表 */</span><br><span class="hljs-keyword">if</span> (pcap_findalldevs_ex(source, <span class="hljs-literal">NULL</span>, &amp;alldevs, errbuf) == <span class="hljs-number">-1</span>)<br>&#123;<br><span class="hljs-built_in">fprintf</span>(<span class="hljs-built_in">stderr</span>, <span class="hljs-string">&quot;Error in pcap_findalldevs: %s\n&quot;</span>, errbuf);<br><span class="hljs-built_in">exit</span>(<span class="hljs-number">1</span>);<br>&#125;<br><br><span class="hljs-comment">/* 扫描列表并打印每一项 */</span><br><span class="hljs-keyword">for</span> (d = alldevs; d; d = d-&gt;next)<br>&#123;<br>ifprint(d);<br>&#125;<br><br>pcap_freealldevs(alldevs);<br>getchar();<br><span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;<br>&#125;<br><br><br><span class="hljs-comment">/* 打印所有可用信息 */</span><br><span class="hljs-type">void</span> <span class="hljs-title function_">ifprint</span><span class="hljs-params">(<span class="hljs-type">pcap_if_t</span>* d)</span><br>&#123;<br><span class="hljs-type">pcap_addr_t</span>* a;<br><br><span class="hljs-comment">/* 设备名(Name) */</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%s\n&quot;</span>, d-&gt;name);<br><br><span class="hljs-comment">/* 设备描述(Description) */</span><br><span class="hljs-keyword">if</span> (d-&gt;description)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDescription: %s\n&quot;</span>, d-&gt;description);<br><br><span class="hljs-comment">/* Loopback Address*/</span><br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tLoopback: %s\n&quot;</span>, (d-&gt;flags &amp; PCAP_IF_LOOPBACK) ? <span class="hljs-string">&quot;yes&quot;</span> : <span class="hljs-string">&quot;no&quot;</span>);<br><br><span class="hljs-comment">/* IP addresses */</span><br><span class="hljs-keyword">for</span> (a = d-&gt;addresses; a; a = a-&gt;next) &#123;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family: #%d\n&quot;</span>, a-&gt;addr-&gt;sa_family);<br><br><span class="hljs-keyword">switch</span> (a-&gt;addr-&gt;sa_family)<br>&#123;<br><span class="hljs-keyword">case</span> AF_INET:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: AF_INET\n&quot;</span>);<br><span class="hljs-keyword">if</span> (a-&gt;addr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;addr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;netmask)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tNetmask: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;netmask)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;broadaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tBroadcast Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;broadaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">if</span> (a-&gt;dstaddr)<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tDestination Address: %s\n&quot;</span>, iptos(((<span class="hljs-keyword">struct</span> sockaddr_in*)a-&gt;dstaddr)-&gt;sin_addr.s_addr));<br><span class="hljs-keyword">break</span>;<br><br><span class="hljs-keyword">default</span>:<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\tAddress Family Name: Unknown\n&quot;</span>);<br><span class="hljs-keyword">break</span>;<br>&#125;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>&#125;<br><br><br><br><span class="hljs-comment">/* 将数字类型的IP地址转换成字符串类型的 */</span><br><span class="hljs-meta">#<span class="hljs-keyword">define</span> IPTOSBUFFERS    12</span><br><span class="hljs-type">char</span>* <span class="hljs-title function_">iptos</span><span class="hljs-params">(u_long in)</span><br>&#123;<br><span class="hljs-type">static</span> <span class="hljs-type">char</span> output[IPTOSBUFFERS][<span class="hljs-number">3</span> * <span class="hljs-number">4</span> + <span class="hljs-number">3</span> + <span class="hljs-number">1</span>];<br><span class="hljs-type">static</span> <span class="hljs-type">short</span> which;<br>u_char* p;<br><br>p = (u_char*)&amp;in;<br>which = (which + <span class="hljs-number">1</span> == IPTOSBUFFERS ? <span class="hljs-number">0</span> : which + <span class="hljs-number">1</span>);<br><span class="hljs-built_in">sprintf</span>(output[which], <span class="hljs-string">&quot;%d.%d.%d.%d&quot;</span>, p[<span class="hljs-number">0</span>], p[<span class="hljs-number">1</span>], p[<span class="hljs-number">2</span>], p[<span class="hljs-number">3</span>]);<br><span class="hljs-keyword">return</span> output[which];<br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/fvrgHvp.png"></p><h1 id="其它可能会出现的问题"><a href="#其它可能会出现的问题" class="headerlink" title="其它可能会出现的问题"></a>其它可能会出现的问题</h1><p>如果出现如下的错误：</p><figure class="highlight subunit"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs subunit"><span class="hljs-keyword">Error</span>LNK2019unresolved external symbol __imp_getnameinfo referenced in function ip6tos<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/HGCG4DO.png"></p><p>那么，解决的方法很简单，只需要在链接器的输入的附加依赖中。</p><p><img src="https://i.imgur.com/HucWZkc.png"></p><p>至于为什么要添加这个库，只需要稍微到网上了解一下这个库就行。</p><hr><p>参考：</p><p>1、<a href="https://blog.csdn.net/qsycn/article/details/4455531">https://blog.csdn.net/qsycn/article/details/4455531</a></p>]]></content>
    
    
    
    <tags>
      
      <tag>计网</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode Couldn&#39;t download IntelliCode model. Please check your network connectivity 问题解决</title>
    <link href="/2022/05/16/VSCode-Couldn-t-download-IntelliCode-model-Please-check-your-network-connectivity-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2022/05/16/VSCode-Couldn-t-download-IntelliCode-model-Please-check-your-network-connectivity-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<p>今天被这个问题困扰了好久没有解决。</p><p>经过一番查找探究，发现其实应该是微软的这个官方扩展的版本更新之后出了问题。所以回退到上一个版本即可。</p><p><img src="https://i.imgur.com/3X5tItq.png"></p><p>在此之前，试了各种方案，什么设置 Proxy Support 的 mode，设置 Strict SSL，都不管用，</p><p><img src="https://i.imgur.com/unWAEWn.png"></p><p>其实，微软官方描述了这个问题，详见<a href="https://docs.microsoft.com/en-us/visualstudio/intellicode/intellicode-visual-studio-code">这个链接</a>，</p><p><img src="https://i.imgur.com/hTVJwbs.png"></p><p>我也是点进它给的几个链接才学到切换版本的方法，毕竟在今天之前一直这个扩展一直都是正常运行的。</p>]]></content>
    
    
    <categories>
      
      <category>VSCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>C 语言关于 %d 打印 double 值的问题</title>
    <link href="/2022/05/15/C-%E8%AF%AD%E8%A8%80%E5%85%B3%E4%BA%8E-d-%E6%89%93%E5%8D%B0-double-%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98/"/>
    <url>/2022/05/15/C-%E8%AF%AD%E8%A8%80%E5%85%B3%E4%BA%8E-d-%E6%89%93%E5%8D%B0-double-%E5%80%BC%E7%9A%84%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>先贴上我在 v2ex 上问的<a href="https://www.v2ex.com/t/852434">这个问题</a>：</p><p>让我疑惑的代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">float</span> a = <span class="hljs-number">3.3f</span>;<br>    <span class="hljs-type">int</span> b = <span class="hljs-number">2</span>;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d&quot;</span>, a * b);<br>&#125;<br></code></pre></td></tr></table></figure><p>运行截图：</p><p><img src="https://i.imgur.com/vBxXbL8.png"></p><p>运行环境：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">Microsoft</span> Windows<span class="hljs-meta"> [版本 10.0.19043.1645]</span><br><span class="hljs-attribute">gcc</span> version <span class="hljs-number">11</span>.<span class="hljs-number">3</span>.<span class="hljs-number">0</span> (MinGW-W64 x86_64-ucrt-posix-seh, built by Brecht Sanders)<br></code></pre></td></tr></table></figure><p>在这个环境下每一次运行出来的结果都是一样的。</p><p>然后切换到 Linux 的环境：</p><p>运行截图：</p><p><img src="https://i.imgur.com/ytf92lJ.png"></p><p>运行环境：</p><figure class="highlight apache"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs apache"><span class="hljs-attribute">cenos</span><br><span class="hljs-attribute">gcc</span> version <span class="hljs-number">8</span>.<span class="hljs-number">5</span>.<span class="hljs-number">0</span> <span class="hljs-number">20210514</span> (Red Hat <span class="hljs-number">8</span>.<span class="hljs-number">5</span>.<span class="hljs-number">0</span>-<span class="hljs-number">4</span>) (GCC)<br></code></pre></td></tr></table></figure><p>在 Linux 这个环境下每一次的运行结果都是不一样的。</p><p>然后我想弄清楚的是，这个问题是不是就是<strong>将 double 类型的值在内存中截掉一半</strong>然后打印出来(截掉前半段)。</p><p>所以我们用一个程序来验证一下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-class"><span class="hljs-keyword">union</span> <span class="hljs-title">HEXDOUBLE</span></span><br><span class="hljs-class">&#123;</span><br>    <span class="hljs-type">double</span> num;<br>    <span class="hljs-type">unsigned</span> <span class="hljs-type">char</span> bnum[<span class="hljs-number">8</span>];<br>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">()</span><br>&#123;<br>    <span class="hljs-type">float</span> m = <span class="hljs-number">3.3f</span>;<br>    <span class="hljs-type">int</span> n = <span class="hljs-number">2</span>;<br>    <span class="hljs-class"><span class="hljs-keyword">union</span> <span class="hljs-title">HEXDOUBLE</span> <span class="hljs-title">a</span>;</span><br>    a.num = (<span class="hljs-type">double</span>)m * n;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, a.num);<br>    <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">8</span>; ++i) <span class="hljs-comment">//大端模式顺着来0-8，小端模式逆着来8-0</span><br>    &#123;<br>        <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%x &quot;</span>, a.bnum[<span class="hljs-number">8</span> - i - <span class="hljs-number">1</span>]);<br>    &#125;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;\n&quot;</span>);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>, a.num);<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%lf&quot;</span>, a.num);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://i.imgur.com/d3pO6xQ.png"></p><p>(double) a * b &#x3D; 0x40 1a 66 66 60 00 00 00, 截断四个字节后 0x60 00 00 00 &#x3D; 1610612736</p><p>我利用这个<a href="https://tooltt.com/floatconverter/">工具网</a>将 16 进制的数转换了一下，使用 IEEE754 标准，如下：</p><p><img src="https://i.imgur.com/GjH8NrJ.png"></p><p>发现在 Windows 下，C 语言 %d 打印 double 的结果确实是把 double 类型在内存中的值截掉一半然后打印。</p><p>对于 Linux 系统中的值，我在 v 站中得到了这样的解释：</p><blockquote><p>在 x86_64 下，整数和指针参数通过通用寄存器传递，浮点数通过浮点数寄存器传递。<br>这里调用时往浮点数寄存器写入了参数，但函数里面却去通用寄存器里读取，所以结果是随机的。<br>在 x86 下，参数都通过栈传递，结果应该是 double 截断的结果。</p></blockquote><p>但是，新的问题又来了，为什么第二次打印 <code>a.num</code> 的值一直是 <code>10</code> 呢？</p><p><img src="https://i.imgur.com/gJlMDv9.png"></p><p>也罢，暂时把这个问题先搁置在这里，汇编编译出来的代码如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs s">.file&quot;test_format_d.c&quot;<br>.text<br>.section.rodata<br>.LC1:<br>.string&quot;%d\n&quot;<br>.LC2:<br>.string&quot;%x &quot;<br>.LC3:<br>.string&quot;%lf&quot;<br>.text<br>.globlmain<br>.typemain, @function<br>main:<br>.LFB0:<br>.cfi_startproc<br>pushq%rbp<br>.cfi_def_cfa_offset 16<br>.cfi_offset 6, -16<br>movq%rsp, %rbp<br>.cfi_def_cfa_register 6<br>subq$32, %rsp<br>movss.LC0(%rip), %xmm0<br>movss%xmm0, -8(%rbp)<br>movl$2, -12(%rbp)<br>cvtss2sd-8(%rbp), %xmm1<br>cvtsi2sd-12(%rbp), %xmm0<br>mulsd%xmm1, %xmm0<br>movsd%xmm0, -24(%rbp)<br>movsd-24(%rbp), %xmm0<br>movl$.LC1, %edi<br>movl$1, %eax<br>callprintf<br>movsd-24(%rbp), %xmm0<br>movl$.LC1, %edi<br>movl$1, %eax<br>callprintf<br>movl$0, -4(%rbp)<br>jmp.L2<br>.L3:<br>movl$7, %eax<br>subl-4(%rbp), %eax<br>cltq<br>movzbl-24(%rbp,%rax), %eax<br>movzbl%al, %eax<br>movl%eax, %esi<br>movl$.LC2, %edi<br>movl$0, %eax<br>callprintf<br>addl$1, -4(%rbp)<br>.L2:<br>cmpl$7, -4(%rbp)<br>jle.L3<br>movl$10, %edi<br>callputchar<br>movsd-24(%rbp), %xmm0<br>movl$.LC1, %edi<br>movl$1, %eax<br>callprintf<br>movsd-24(%rbp), %xmm0<br>movl$.LC3, %edi<br>movl$1, %eax<br>callprintf<br>movl$0, %eax<br>leave<br>.cfi_def_cfa 7, 8<br>ret<br>.cfi_endproc<br>.LFE0:<br>.sizemain, .-main<br>.section.rodata<br>.align 4<br>.LC0:<br>.long1079194419<br>.ident&quot;GCC: (GNU) 8.5.0 20210514 (Red Hat 8.5.0-4)&quot;<br>.section.note.GNU-stack,&quot;&quot;,@progbits<br><br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/y0bv5PU.png"></p>]]></content>
    
    
    <categories>
      
      <category>C 语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C 语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Git 学习记录</title>
    <link href="/2022/02/09/Git-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2022/02/09/Git-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="git-回退版本"><a href="#git-回退版本" class="headerlink" title="git 回退版本"></a>git 回退版本</h1><p>git reset 命令用于回退版本，可以指定退回某一次提交的版本。</p><p>git reset 命令语法格式如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reset [--soft | --mixed | --hard] [HEAD]<br></code></pre></td></tr></table></figure><p><code>--mixed</code> 为默认，可以不用带该参数，用于重置暂存区的文件与上一次的提交(commit)保持一致，工作区文件内容保持不变。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git reset  [HEAD] <br></code></pre></td></tr></table></figure><p>实例：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset HEAD^            <span class="hljs-comment"># 回退所有内容到上一个版本  </span><br>$ git reset HEAD^ hello.php  <span class="hljs-comment"># 回退 hello.php 文件的版本到上一个版本  </span><br>$ git reset  052e            <span class="hljs-comment"># 回退到指定版本</span><br>$ git reset --hard HEAD^^    <span class="hljs-comment"># 回退到上上个版本</span><br></code></pre></td></tr></table></figure><p>HEAD 说明：</p><ul><li>HEAD 表示当前版本</li><li>HEAD^ 上一个版本</li><li>HEAD^^ 上上一个版本</li><li>HEAD^^^ 上上上一个版本</li></ul><p>以此类推…</p><p>也可以使用 ~ 数字表示：</p><ul><li>HEAD~0 表示当前版本</li><li>HEAD~1 上一个版本</li><li>HEAD^2 上上一个版本</li><li>HEAD^3 上上上一个版本</li></ul><h1 id="git-撤销或者丢掉本地修改"><a href="#git-撤销或者丢掉本地修改" class="headerlink" title="git 撤销或者丢掉本地修改"></a>git 撤销或者丢掉本地修改</h1><p>在没有 <code>git add</code> 的情况下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout -- filepathname<br></code></pre></td></tr></table></figure><p>在已经 <code>git add</code> 的情况下就只能使用 <code>git reset</code> 这样的命令。</p><h1 id="一些常用的命令"><a href="#一些常用的命令" class="headerlink" title="一些常用的命令"></a>一些常用的命令</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global user.name <span class="hljs-string">&quot;fanyfull&quot;</span><br>git config --global user.email <span class="hljs-string">&quot;lxyfl6688@gmail.com&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit -m <span class="hljs-string">&quot;Add a banana to the shopping list&quot;</span><br></code></pre></td></tr></table></figure><p>同</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit --message <span class="hljs-string">&quot;Add a banana to the shopping list&quot;</span><br></code></pre></td></tr></table></figure><p>m 是 message 的意思。参见 <a href="https://git-scm.com/docs/git-commit">https://git-scm.com/docs/git-commit</a>，可以查看各种 options。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git commit --amend --reset-author<br></code></pre></td></tr></table></figure><blockquote><p>When used with -C&#x2F;-c&#x2F;–amend options, or when committing after a conflicting cherry-pick, declare that the authorship of the resulting commit now belongs to the committer. This also renews the author timestamp.</p></blockquote><p>这个命令应用的场景是，clone 别人的项目之后，然后自己再进行开发，然后在本地提交。</p><hr><p>参考：</p><p>1、<a href="https://www.runoob.com/git/git-reset.html">https://www.runoob.com/git/git-reset.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Git</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Git</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一台电脑搭建两个 Hexo 博客</title>
    <link href="/2022/01/24/%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E4%B8%A4%E4%B8%AA-Hexo-%E5%8D%9A%E5%AE%A2/"/>
    <url>/2022/01/24/%E4%B8%80%E5%8F%B0%E7%94%B5%E8%84%91%E6%90%AD%E5%BB%BA%E4%B8%A4%E4%B8%AA-Hexo-%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<p>2022.05.23 更新：</p><p>遇到了一个连接超时的问题，在<a href="https://www.jianshu.com/p/c3aac5024877">这里</a>得到了解决。</p><p>修改后的 ssh 的 config 文件如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs stylus">Host github<span class="hljs-selector-class">.com</span><br>    HostName ssh<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.com</span><br>    User git<br>    IdentityFile ~/.ssh/id_rsa<br>    Port <span class="hljs-number">443</span><br><br>#第二个新账号，#<span class="hljs-string">&quot;xxxxxx&quot;</span>为前缀名，可以任意设置，要记住，后面需要用到<br>Host luflyan<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.com</span><br>HostName ssh<span class="hljs-selector-class">.github</span><span class="hljs-selector-class">.com</span><br>User git<br>IdentityFile ~/.ssh/luflyan<br>    Port <span class="hljs-number">443</span><br></code></pre></td></tr></table></figure><p><strong>另外</strong>，</p><p>不需要取消 git 的全局用户名和邮箱。只需要在另一个博客的 git 目录下更改用户名和邮箱即可。</p><p>以下是原博客。</p><hr><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>因为我比较喜欢重装系统，最近也确实重装了不少次，仗着学校可以免费使用 Windows 系统，我确实有点不知道收敛了。说回来，不收敛也有不收敛的好处，每次重装完系统还是能够收获很多快乐的。</p><p>之前也配置过不少次了，想着每一次都是去看别人的博客，这一次自己也记录一下子吧。下一次就方便了。而且，更方便我去重装系统了。</p><p>下面就开工。</p><h1 id="配置过程"><a href="#配置过程" class="headerlink" title="配置过程"></a>配置过程</h1><p>首先，本操作是建立在电脑上本身就已经搭建好一个 Hexo 博客的情况下。关于搭建一个 Hexo 博客的参考，可以参见<a href="https://fanyfull.github.io/2021/10/16/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA-GitHub-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/#%E4%BD%BF%E7%94%A8-hexo-%E5%8D%9A%E5%AE%A2%E6%A1%86%E6%9E%B6">GiHub + Hexo 真·从零开始搭建个人博客</a>。</p><p>然后，创建密钥：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">ssh<span class="hljs-literal">-keygen</span> <span class="hljs-literal">-t</span> rsa <span class="hljs-literal">-C</span> <span class="hljs-string">&quot;user.email&quot;</span> <span class="hljs-comment"># user.email 为 GitHub 上注册的邮箱</span><br></code></pre></td></tr></table></figure><p>这里最好要在 <code>.ssh</code> 的目录下执行命令。否则新创建的密钥文件可能会跑到 <code>C:\Users\FanyFull\</code> 目录下面。</p><p>注意，回车后要输入文件名称，不可以像搭建一个博客那样什么都不做，三个回车，</p><p>然后，两个回车就行，</p><p>新密钥创建完毕。</p><p><img src="https://i.imgur.com/ko7IS0Q.png"></p><p>然后，在 <code>C:\Users\FanyFull\.ssh\</code> 目录下创建一个 <code>config</code> 文件：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment">#第一个账号，默认使用的账号，不用做任何更改</span><br>Host github.com<br>HostName github.com<br><span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>IdentityFile ~/.ssh/id_rsa<br><br><span class="hljs-comment">#第二个新账号，#&quot;xxxxxx&quot;为前缀名，可以任意设置，要记住，后面需要用到</span><br>Host xxxxxx.github.com<br>HostName github.com<br><span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>IdentityFile ~/.ssh/这里是你创建的新密钥的名称<br></code></pre></td></tr></table></figure><p>我这里的设置：</p><figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs crmsh"><span class="hljs-comment">#第一个账号，默认使用的账号，不用做任何更改</span><br>Host github.com<br>HostName github.com<br><span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>IdentityFile ~/.ssh/id_rsa<br><br><span class="hljs-comment">#第二个新账号，#&quot;xxxxxx&quot;为前缀名，可以任意设置，要记住，后面需要用到</span><br>Host luflyan.github.com<br>HostName github.com<br><span class="hljs-keyword">User</span> <span class="hljs-title">git</span><br>IdentityFile ~/.ssh/luflyan<br></code></pre></td></tr></table></figure><p>然后，到 GitHub 中添加刚刚新建的密钥。</p><p>然后，到 <code>.ssh</code> 目录下依次执行如下几条命令（这些命令必须到 git bash 中执行）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">ssh-agent bash<br>ssh-add -D<br>ssh-add xxxxxx <span class="hljs-comment">#旧密钥名称，一般是id_rsa</span><br>ssh-add xxxxxx <span class="hljs-comment">#新创建的密钥名称</span><br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/TEozAM5.png"></p><h1 id="验证是否成功"><a href="#验证是否成功" class="headerlink" title="验证是否成功"></a>验证是否成功</h1><p>依次执行以下命令，第一个为默认 ssh_key 验证；第二个为新的 ssh_key 验证，其中 “xxxxxx” 为先前在 config 文件中的命名。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell">ssh <span class="hljs-literal">-T</span> git@github.com<br>ssh <span class="hljs-literal">-T</span> git@xxxxxx.github.com<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/xsH07mA.png"></p><h1 id="取消全局用户名-邮箱配置，单独设置用户名-邮箱"><a href="#取消全局用户名-邮箱配置，单独设置用户名-邮箱" class="headerlink" title="取消全局用户名&#x2F;邮箱配置，单独设置用户名&#x2F;邮箱"></a>取消全局用户名&#x2F;邮箱配置，单独设置用户名&#x2F;邮箱</h1><p>执行如下命令，取消全局用户名和邮箱配置（如果已经设置了全局的话）：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs stylus">git config <span class="hljs-attr">--global</span> <span class="hljs-attr">--unset</span> user<span class="hljs-selector-class">.name</span><br>git config <span class="hljs-attr">--global</span> <span class="hljs-attr">--unset</span> user.email<br></code></pre></td></tr></table></figure><p>分别进入你的两个 Hexo 博客 .git 目录下执行以下命令单独设置用户名&#x2F;邮箱：</p><p><img src="https://i.imgur.com/9c2noNi.png"></p><p><img src="https://i.imgur.com/nuIYdKK.png"></p><h1 id="hexo-配置文件修改-git-地址"><a href="#hexo-配置文件修改-git-地址" class="headerlink" title="hexo 配置文件修改 git 地址"></a>hexo 配置文件修改 git 地址</h1><p>打开你的第二个博客 Hexo 目录下的 _config.yml 文件，找到 deploy 关键字，写入以下配置并保存：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repository:</span> <span class="hljs-string">git@xxxxxx.github.com:你的用户名/你的用户名.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><p>到这里，第二个博客就部署完成了。</p><hr><p>参考：</p><p>1、<a href="https://blog.csdn.net/qq_36759224/article/details/86546729">CSDN</a></p>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MarkText 快捷键整理</title>
    <link href="/2022/01/21/MarkText-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%95%B4%E7%90%86/"/>
    <url>/2022/01/21/MarkText-%E5%BF%AB%E6%8D%B7%E9%94%AE%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<ul><li>侧边文件信息显示：Ctrl + J</li><li>插入图片：Ctrl + Shift + I</li></ul><p>算了，还是用回 VSCode 好了。</p><p>配置一下用户代码片段和自动提示，VSCode 就挺好用的。插入图片什么的，直接用快捷键来解决。</p>]]></content>
    
    
    <categories>
      
      <category>软件</category>
      
    </categories>
    
    
    <tags>
      
      <tag>软件</tag>
      
      <tag>杂</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的重装电脑记录</title>
    <link href="/2022/01/07/%E6%88%91%E7%9A%84%E9%87%8D%E8%A3%85%E7%94%B5%E8%84%91%E8%AE%B0%E5%BD%95/"/>
    <url>/2022/01/07/%E6%88%91%E7%9A%84%E9%87%8D%E8%A3%85%E7%94%B5%E8%84%91%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>最重要的文件夹应该是 <code>HDisk</code>，备份。</p><p>系统重新装好后，一些必备软件：</p><ul><li>Chrome</li><li>Snipaste</li><li>Firefox，这个主要是为了使用 imgur 的图床。</li><li>Windows Terminal</li><li>Scoop<ul><li>pandoc</li><li>latex</li><li>nodejs</li></ul></li><li>hexo</li><li>Python</li><li>VSCode</li><li>WPS</li><li>Adobe Acrobat DC</li><li>Office</li><li>Telegram</li><li>clash</li><li>Goldendict: <a href="https://github.com/goldendict/goldendict/wiki/Early-Access-Builds-for-Windows">github</a></li></ul><p>差不多就这些了。</p><p>当然，还有一些非必备的工具，比如</p><ul><li>Potplayer</li></ul><p>还有一些必备的操作，比如，给本机设置 GitHub 的 SSH。而且是两个博客。其实，我感觉最麻烦的部分就是这个地方了。其他的装软件的部分都还好，不过，如果没有一台电脑上需要两个博客的需求，那么，这个也就没有什么烦人的地方。</p>]]></content>
    
    
    <categories>
      
      <category>电脑</category>
      
    </categories>
    
    
    <tags>
      
      <tag>电脑</tag>
      
      <tag>系统</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一些软件的常用使用技巧</title>
    <link href="/2022/01/07/%E4%B8%80%E4%BA%9B%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/"/>
    <url>/2022/01/07/%E4%B8%80%E4%BA%9B%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%B8%B8%E7%94%A8%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>杂</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的 URL 收藏夹</title>
    <link href="/2022/01/07/%E6%88%91%E7%9A%84-URL-%E6%94%B6%E8%97%8F%E5%A4%B9/"/>
    <url>/2022/01/07/%E6%88%91%E7%9A%84-URL-%E6%94%B6%E8%97%8F%E5%A4%B9/</url>
    
    <content type="html"><![CDATA[<h1 id="下载-Youtube-视频"><a href="#下载-Youtube-视频" class="headerlink" title="下载 Youtube 视频"></a>下载 Youtube 视频</h1><p>y2mate.com</p><h1 id="同一台电脑部署两个-github-pages"><a href="#同一台电脑部署两个-github-pages" class="headerlink" title="同一台电脑部署两个 github pages"></a>同一台电脑部署两个 github pages</h1><p><a href="https://blog.csdn.net/qq_36759224/article/details/86546729">CSDN</a></p><h1 id="一个-go-语言-clone-的-Google-Keep"><a href="#一个-go-语言-clone-的-Google-Keep" class="headerlink" title="一个 go 语言 clone 的 Google Keep"></a>一个 go 语言 clone 的 Google Keep</h1><p><a href="https://github.com/anselm94/googlekeepclone">github</a></p><h1 id="给-PowerShell-设置永久代理"><a href="#给-PowerShell-设置永久代理" class="headerlink" title="给 PowerShell 设置永久代理"></a>给 PowerShell 设置永久代理</h1><p><a href="https://www.yixuju.cn/other/talking-about-proxy/">逸絮居</a></p>]]></content>
    
    
    <categories>
      
      <category>杂</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>线性代数笔记</title>
    <link href="/2022/01/04/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%AC%94%E8%AE%B0/"/>
    <url>/2022/01/04/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="矩阵的初等变换与线性方程组"><a href="#矩阵的初等变换与线性方程组" class="headerlink" title="矩阵的初等变换与线性方程组"></a>矩阵的初等变换与线性方程组</h1><blockquote><p>矩阵的初等行变换？</p></blockquote><p><img src="https://i.imgur.com/sM4qR0q.png"></p><blockquote><p>矩阵的初等列变换？</p></blockquote><p><img src="https://i.imgur.com/DZo8zLB.png"></p><blockquote><p>矩阵的初等变换？</p></blockquote><p>矩阵的初等行变换与初等列变换，统称初等变换。</p><blockquote><p>矩阵的等价？</p></blockquote><p><img src="https://i.imgur.com/3FALS5H.png"></p>]]></content>
    
    
    <categories>
      
      <category>数学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数学</tag>
      
      <tag>工科数学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 31-35 记录</title>
    <link href="/2022/01/03/LeetCode-31-35-%E8%AE%B0%E5%BD%95/"/>
    <url>/2022/01/03/LeetCode-31-35-%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="31"><a href="#31" class="headerlink" title="31"></a>31</h1><p><a href="https://leetcode.com/problems/next-permutation/">https://leetcode.com/problems/next-permutation/</a></p><p><img src="https://i.imgur.com/V2YxcSy.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">nextPermutation</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-literal">None</span>:<br>        <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">        Do not return anything, modify nums in-place instead.</span><br><span class="hljs-string">        &quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span><br>        <span class="hljs-keyword">if</span> nums[-<span class="hljs-number">1</span>] &gt; nums[-<span class="hljs-number">2</span>]:<br>            nums[-<span class="hljs-number">1</span>], nums[-<span class="hljs-number">2</span>] = nums[-<span class="hljs-number">2</span>], nums[-<span class="hljs-number">1</span>]<br>            <span class="hljs-keyword">return</span><br>        i = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> nums[i - <span class="hljs-number">1</span>] &gt;= nums[i] <span class="hljs-keyword">and</span> i &gt;= <span class="hljs-number">0</span>:<br>            i -= <span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span>:<br>            nums.sort()<br>            <span class="hljs-keyword">return</span><br>        left = i - <span class="hljs-number">1</span><br>        nums[i:] = <span class="hljs-built_in">sorted</span>(nums[i:])<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, <span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[j] &gt; nums[left]:<br>                nums[j], nums[left] = nums[left], nums[j]<br>                <span class="hljs-keyword">break</span><br>        nums[i:] = <span class="hljs-built_in">sorted</span>(nums[i:])<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    nums = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>    nums = [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>]<br>    nums = [<span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>]<br>    solu.nextPermutation(nums)<br>    <span class="hljs-built_in">print</span>(nums)<br></code></pre></td></tr></table></figure><p>思路其实是比较简单的，只是一开始想要暴力解决，结果反而误入歧途，不过，也因此重新复习了一下如何生成一个列表的全排列。或许，有时间研究一下 <code>itertool</code> 中的库函数是一个不错的注意。</p><p>说回思路，就是判断列表最后两个元素的大小，如果是正序，直接交换两个元素即可，如果不是，则一直往前寻找到第一个打破秩序的数字，然后将这个元素和后面的列表切片中刚好大于这个数字的元素交换，最后，再将后面的部分排个序即可。</p><h1 id="32"><a href="#32" class="headerlink" title="32"></a>32</h1><p><a href="https://leetcode.com/problems/longest-valid-parentheses/">https://leetcode.com/problems/longest-valid-parentheses/</a></p><p><img src="https://i.imgur.com/jkm1DW4.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestValidParentheses</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> s:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        res = []<br>        stack = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            <span class="hljs-keyword">if</span> stack <span class="hljs-keyword">and</span> s[i] == <span class="hljs-string">&#x27;)&#x27;</span>:<br>                res.append(stack.pop())<br>                res.append(i)<br>            <span class="hljs-keyword">if</span> s[i] == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                stack.append(i)<br>        res.sort()<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(res) &lt;= <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> ans<br>        ans = <span class="hljs-number">1</span><br>        index = <span class="hljs-number">0</span><br>        tmp_res = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> index &lt; <span class="hljs-built_in">len</span>(res) - <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">if</span> res[index + <span class="hljs-number">1</span>] == res[index] + <span class="hljs-number">1</span>:<br>                tmp_res += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                tmp_res = <span class="hljs-number">1</span><br>                index += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-keyword">if</span> tmp_res &gt; ans:<br>                ans = tmp_res<br>            index += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    s = <span class="hljs-string">&#x27;)(()())&#x27;</span><br>    Output = solu.longestValidParentheses(s)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><h1 id="33"><a href="#33" class="headerlink" title="33"></a>33</h1><p><a href="https://leetcode.com/problems/search-in-rotated-sorted-array/">https://leetcode.com/problems/search-in-rotated-sorted-array/</a></p><p><img src="https://i.imgur.com/Bsrnhgl.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">search</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> nums:<br>            <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(nums) == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> <span class="hljs-keyword">if</span> nums[<span class="hljs-number">0</span>] == target <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br>        left = <span class="hljs-number">0</span><br>        right = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">while</span> left &lt; right:<br>            mid = (left + right) // <span class="hljs-number">2</span><br>            <span class="hljs-keyword">if</span> nums[mid] == target:  <span class="hljs-comment"># 如果中间值等于目标值，直接返回</span><br>                <span class="hljs-keyword">return</span> mid<br>            <span class="hljs-keyword">elif</span> nums[mid] &gt; nums[right]:  <span class="hljs-comment"># 右边有序</span><br>                <span class="hljs-keyword">if</span> nums[left] &lt;= target &lt;= nums[mid]:  <span class="hljs-comment"># 如果目标值在左边有序的区间内，则右边查找</span><br>                    right = mid<br>                <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 否则，左边查找</span><br>                    left = mid + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">elif</span> nums[mid] &lt; nums[right]:  <span class="hljs-comment"># 左边有序</span><br>                <span class="hljs-keyword">if</span> nums[mid] &lt;= target &lt;= nums[right]:  <span class="hljs-comment"># 如果目标值在右边有序的区间内，则左边查找</span><br>                    left = mid + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># 否则，右边查找</span><br>                    right = mid<br>            <span class="hljs-keyword">else</span>:  <span class="hljs-comment"># nums[mid] == nums[right]</span><br>                right -= <span class="hljs-number">1</span><br>        <span class="hljs-comment"># 如果目标值等于中间值，则返回中间值的下标，否则返回-1</span><br>        <span class="hljs-keyword">return</span> left <span class="hljs-keyword">if</span> nums[left] == target <span class="hljs-keyword">else</span> -<span class="hljs-number">1</span><br><br><br>solu = Solution()<br><span class="hljs-built_in">print</span>(solu.search([<span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>], <span class="hljs-number">0</span>))  <span class="hljs-comment"># 4</span><br><br></code></pre></td></tr></table></figure><p>依然是二分查找，只不过判断条件比普通的二分查找多了一些。</p><h1 id="34"><a href="#34" class="headerlink" title="34"></a>34</h1>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode tricks track</title>
    <link href="/2022/01/02/VSCode-tricks-track/"/>
    <url>/2022/01/02/VSCode-tricks-track/</url>
    
    <content type="html"><![CDATA[<h1 id="设置运行-Python-代码快捷键"><a href="#设置运行-Python-代码快捷键" class="headerlink" title="设置运行 Python 代码快捷键"></a>设置运行 Python 代码快捷键</h1><p>参考：<a href="https://stackoverflow.com/questions/69984897/current-shortcut-to-run-python-in-vs-code">stackoverflow</a></p><p><code>file-&gt;preference-&gt;keyboard shortcuts</code></p><p>我这里直接将其设置成 <code>Ctrl + Alt + P</code>。</p><p><img src="https://i.imgur.com/6JraeJ2.png"></p><h1 id="设置光标在编辑区和内置的控制台之间切换"><a href="#设置光标在编辑区和内置的控制台之间切换" class="headerlink" title="设置光标在编辑区和内置的控制台之间切换"></a>设置光标在编辑区和内置的控制台之间切换</h1><p>参考：<a href="https://stackoverflow.com/questions/42796887/switch-focus-between-editor-and-integrated-terminal-in-visual-studio-code">stackoverflow</a></p><p>照着设置，就可以使用 <code>Ctrl + `</code> 快捷键切换了。</p><h1 id="show-and-hide-the-terminal-shortcut"><a href="#show-and-hide-the-terminal-shortcut" class="headerlink" title="show and hide the terminal shortcut"></a>show and hide the terminal shortcut</h1><p><code>Ctrl + J</code> both.</p><h1 id="format-codes-shortcut"><a href="#format-codes-shortcut" class="headerlink" title="format codes shortcut"></a>format codes shortcut</h1><p><code>Shift + Alt + F</code></p><h1 id="switch-between-terminals"><a href="#switch-between-terminals" class="headerlink" title="switch between terminals"></a>switch between terminals</h1><p><a href="https://stackoverflow.com/questions/48440673/how-to-switch-between-terminals-in-visual-studio-code">stackoverflow</a></p><p>快捷键：<code>Ctrl + PgUp</code> 和 <code>Ctrl + PgDn</code>。</p>]]></content>
    
    
    <categories>
      
      <category>VSCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>VSCode</tag>
      
      <tag>工具</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数学建模上机实验报告</title>
    <link href="/2021/12/31/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <url>/2021/12/31/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<p>按：有待进一步施工，尤其是最后一个问题…</p><p>这一届(19级)的数学建模的上机题目是在晚上上机的三个小时(可以适当延时一到两个小时)完成一道题目的建模与求解。可以使用任何方法，如果使用计算机求解，那么需要给出代码。因此，这里在建模之后，当然是选择使用 Python 来求解。而题目本身则是一道经典的运筹学问题。在网上也比较容易找到相关的题目。</p><h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p><img src="https://i.imgur.com/DxYgs5n.png"></p><p><img src="https://i.imgur.com/Zima8vd.png"></p><p><img src="https://i.imgur.com/Jwxf84O.png"></p><p>以下没有排版的文字描述仅供搜索引擎检索时使用。</p><p>某医院每天各时间段内需要的值班护士数如表1所示：<br>该医院护士上班分五个班次，每班8小时，具体上班时间为第一班2:00<del>10:00，第二班6:00</del>14:00，第三班10:00<del>18:00，第四班14:00</del>22:00，第五班18:00~2:00（次日）。每名护士每周上5个班，并被安排在不同的日子，由一名总护士长负责护士的值班安排。值班方案要做到在人员或经济上比较节省，又做到尽可能合情合理。下面是一些正在考虑中的值班方案：<br>方案1：每名护士连续上班5天，休息2天，并从上班第一天起按从上第一班到第五班顺序安排。<br>方案2：考虑到方案1中每名护士在周末（周六、周日）两天内休息安排不均匀，于是规定每名护士在周六、周日两天内安排一天、且只安排一天休息，再在周一至周五期间安排4个班，同样上班的5天内分别顺序安排5个不同班次。<br>在对方案1、2建立线性规划模型并求解后发现，方案2虽然在安排周末休息上比较合理，但所需值班人员要比方案1有较多增加，经济上不太合算，于是又提出了第3方案。<br>方案3：在方案2的基础上，动员一部分护士放弃周末休息，即每周在周一至周五间由总护士长给安排三天值班，加周六周日共上五个班，同样五个班分别安排不同班次。作为奖励，规定放弃周末休息的护士，其工资和奖金总额比其他护士增加a%。<br>根据上述方案，帮助总护士长分析研究：<br>（1）对方案1、2建立使值班护士人数为最少的线性规划模型并求解。<br>（2）对方案3，同样建立使值班护士人数为最少的线性规划模型并求解，<br>然后回答a的值为多大时，第3方案较第2方案更经济。</p><h1 id="（1）对方案-1、2-建立使值班护士人数为最少的线性规划模型并求解。"><a href="#（1）对方案-1、2-建立使值班护士人数为最少的线性规划模型并求解。" class="headerlink" title="（1）对方案 1、2 建立使值班护士人数为最少的线性规划模型并求解。"></a>（1）对方案 1、2 建立使值班护士人数为最少的线性规划模型并求解。</h1><h2 id="对方案-1"><a href="#对方案-1" class="headerlink" title="对方案 1"></a>对方案 1</h2><p>设 $x_i$ 表示星期 $i$ 上第一班的人数($i &#x3D; 1,2,3,…,7$)，于是我们可以画出护士的值班表，然后我们可以对方案 1 建模</p><p>$$<br>min ; z &#x3D; x_1 + x_2 + x_3 + x_4 + x_5 + x_6 + x_7<br>$$</p><p>s.t.</p><p>$$<br>\begin{align}<br>&amp; x_1 + x_7 \geq 21 \<br>&amp; x_6 + x_7 \geq 21 \<br>&amp; x_6 + x_5 \geq 21 \<br>&amp; x_5 + x_4 \geq 21 \<br>&amp; x_4 + x_3 \geq 21 \<br>&amp; x_3 + x_2 \geq 21 \<br>&amp; x_2 + x_1 \geq 21 \<br>&amp; x_i \geq 11 (i &#x3D; 1,2…7)<br>\end{align}<br>$$</p><p><code>Python</code> 代码如下：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> linprog<br><br><span class="hljs-comment"># 需要优化的函数对应的参数</span><br>c = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br><span class="hljs-comment"># 不等式对应的参数矩阵</span><br>A = [[-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]]<br><span class="hljs-comment"># 不等式对应的上界</span><br>b = [-<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>, <br>     -<span class="hljs-number">21</span>]<br><br>x0_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x1_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x2_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x3_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x4_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x5_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x6_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br><br><span class="hljs-comment"># 代入参数，利用 Linprog 求解</span><br>res = linprog(c, A_ub=A, b_ub=b, bounds=(x0_bounds, x1_bounds, x2_bounds, x3_bounds, x4_bounds, x5_bounds, x6_bounds), options=&#123;<span class="hljs-string">&quot;disp&quot;</span>:<span class="hljs-literal">True</span>&#125;)<br><span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><p>运行结果如下</p><pre><code class="hljs">Primal Feasibility  Dual Feasibility    Duality Gap         Step             Path Parameter      Objective1.0                 1.0                 1.0                 -                1.0                 84.00.2809006503072     0.2809006503072     0.2809006503072     0.7236863182761  0.2809006503072     91.03677956402      0.08188226522114    0.08188226522115    0.08188226522115    0.7562200719556  0.08188226522115    77.6110644976       0.003285103873164   0.003285103873165   0.003285103873165   0.9666015052536  0.003285103873165   77.04759485173      4.141424664791e-07  4.141424663523e-07  4.141424663529e-07  0.9998761933313  4.141424663523e-07  77.00000725134      2.070722078688e-11  2.070712356167e-11  2.070712356152e-11  0.9999499999994  2.070712356154e-11  77.00000000036      Optimization terminated successfully.        Current function value: 77.000000           Iterations: 5    con: array([], dtype=float64)    fun: 77.00000000036258message: &#39;Optimization terminated successfully.&#39;    nit: 5slack: array([ 1.,  1.,  1., 12.,  1.,  1.,  1.])status: 0success: True    x: array([11., 11., 11., 11., 11., 11., 11.])</code></pre><p>所以得到的结果是：</p><p>$$<br>x_1 &#x3D; 11, x2 &#x3D; 11, x_3 &#x3D; 11, x_4 &#x3D; 11, x_5 &#x3D; 11, x_6 &#x3D; 11, x_7 &#x3D; 11<br>$$</p><h1 id="对方案-2"><a href="#对方案-2" class="headerlink" title="对方案 2"></a>对方案 2</h1><p>周一到周五连续安排 4 个班，所以可以先安排周末的护士值班情况：周六、周末两天共 10 个班次，用 $x_j(j &#x3D; 1…10)$ 表示周六周末两天 10 个班次的护士人数，其中 $x_1 …x_5$ 分别代表周六第 1 个到第 5 个班次的护士人数，$x_6…x_{10}$ 分别代表周日从第 1 个到第 5 个班次的护士人数。因此，我们可以列出其值班表(这里略)。</p><p>对方案 2 建立如下线性规划模型：</p><p>$min ; w &#x3D; x_1 + \cdots + x_{10}$</p><p>s.t.</p><p>$$<br>\begin{align}<br>x_1 + x_5 + x_9 + x_{10} \geq 21 \<br>x_4 + x_5 + x_8 + x_9 \geq 21 \<br>x_1 + x_2 + x_6 + x_{10} \geq 21 \<br>x_2 + x_3 + x_6 + x_7 \geq 20 \<br>x_3 + x_4 + x_7 + x_8 \geq 19 \<br>x_1 + x_2 \geq 19 \<br>x_6 + x_{10} \geq 19 \<br>x_2 + x_3 \geq 21 \<br>x_6 + x_7 \geq 21 \<br>x_3 + x_4 \geq 21 \<br>x_7 + x_8 \geq 21 \<br>x_8 + x_9 \geq 20 \<br>x_4 + x_5 \geq 20 \<br>x_1 + x_5 \geq 18 \<br>x_9 + x_{10} \geq 18 \<br>x_4 + x_8 \geq 11 \<br>x_3 + x_7 \geq 11 \<br>x_2 + x_6 \geq 11 \<br>x_5 + x_9 \geq 11 \<br>x_1, x_2, x_5, x_6, x_9, x_{10} \geq 11 \<br>x_j \geq 0  ; (j &#x3D; 1,2,…,10)<br>\end{align}<br>$$</p><p><code>Python</code> 代码如下：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> linprog<br><br><span class="hljs-comment"># 需要优化的函数对应的参数</span><br>c = [<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>]<br><span class="hljs-comment"># 不等式对应的参数矩阵</span><br>A = [[-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>]]<br><span class="hljs-comment"># 不等式对应的上界</span><br>b = [-<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">20</span>,<br>     -<span class="hljs-number">19</span>,<br>     -<span class="hljs-number">19</span>,<br>     -<span class="hljs-number">19</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">21</span>,<br>     -<span class="hljs-number">20</span>,<br>     -<span class="hljs-number">20</span>,<br>     -<span class="hljs-number">18</span>,<br>     -<span class="hljs-number">18</span>,<br>     -<span class="hljs-number">11</span>,<br>     -<span class="hljs-number">11</span>,<br>     -<span class="hljs-number">11</span>,<br>     -<span class="hljs-number">11</span>]<br><br>x0_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x1_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x2_bounds = (<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>x3_bounds = (<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>x4_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x5_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x6_bounds = (<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>x7_bounds = (<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>x8_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br>x9_bounds = (<span class="hljs-number">11</span>, <span class="hljs-literal">None</span>)<br><br><span class="hljs-comment"># 代入参数，利用 Linprog 求解</span><br>res = linprog(c, A_ub=A, b_ub=b, bounds=(x0_bounds, x1_bounds, x2_bounds, x3_bounds, x4_bounds, x5_bounds, x6_bounds,x7_bounds, x8_bounds, x9_bounds), options=&#123;<span class="hljs-string">&quot;disp&quot;</span>:<span class="hljs-literal">True</span>&#125;)<br><span class="hljs-built_in">print</span>(res)<br></code></pre></td></tr></table></figure><p>运行结果如下：</p><pre><code class="hljs">Primal Feasibility  Dual Feasibility    Duality Gap         Step             Path Parameter      Objective1.0                 1.0                 1.0                 -                1.0                 76.00.1665271036098     0.1665271036098     0.1665271036098     0.8426664003083  0.1665271036098     99.77035462588      0.02577816616616    0.02577816616617    0.02577816616617    0.8554761926722  0.02577816616617    141.9514028382      0.004990687117403   0.004990687117402   0.004990687117402   0.8274173331906  0.004990687117403   107.7426696988      0.0002950591091504  0.0002950591091505  0.0002950591091506  0.9487415264061  0.0002950591091506  107.9482724078      5.696569995622e-08  5.696569991676e-08  5.696569979366e-08  0.9998223879716  5.696569998307e-08  108.00000478        2.848279017625e-12  2.84830035367e-12   2.848388191978e-12  0.9999499996825  2.848288065828e-12  108.0000000002      Optimization terminated successfully.        Current function value: 108.000000          Iterations: 6    con: array([], dtype=float64)    fun: 108.000000000239message: &#39;Optimization terminated successfully.&#39;    nit: 6slack: array([ 2.30000000e+01,  2.07164358e+01,  2.30000000e+01,  2.42835642e+01,        2.30000000e+01,  3.00000000e+00,  3.00000000e+00,  1.14178209e+00,        1.14178209e+00, -4.13713508e-10, -4.13720613e-10,  8.58217912e-01,        8.58217913e-01,  4.00000000e+00,  4.00000000e+00,  8.71643582e+00,        1.12835642e+01,  1.10000000e+01,  1.10000000e+01])status: 0success: True    x: array([11.        , 11.        , 11.14178209,  9.85821791, 11.        ,    11.        , 11.14178209,  9.85821791, 11.        , 11.        ])</code></pre><p>所以得到的结果是：</p><p>$$<br>x_1 &#x3D; 11 \<br>x_2 &#x3D; 11 \<br>x_3 &#x3D; 12 \<br>x_4 &#x3D; 10 \<br>x_5 &#x3D; 11 \<br>x_6 &#x3D; 11 \<br>x_7 &#x3D; 12 \<br>x_8 &#x3D; 10 \<br>x_9 &#x3D; 11 \<br>x_{10} &#x3D; 11<br>$$</p><h1 id="对方案-3，同样建立使值班护士人数为最少的线性规划模型并求解，然后回答-a-的值为多大时，第-3-方案较第-2-方案更经济。"><a href="#对方案-3，同样建立使值班护士人数为最少的线性规划模型并求解，然后回答-a-的值为多大时，第-3-方案较第-2-方案更经济。" class="headerlink" title="对方案 3，同样建立使值班护士人数为最少的线性规划模型并求解，然后回答 a 的值为多大时，第 3 方案较第 2 方案更经济。"></a>对方案 3，同样建立使值班护士人数为最少的线性规划模型并求解，然后回答 a 的值为多大时，第 3 方案较第 2 方案更经济。</h1><p><code>Python</code> 代码如下：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> linprog<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># 需要优化的函数对应的参数</span><br><br><span class="hljs-comment"># 不等式对应的参数矩阵</span><br><span class="hljs-keyword">from</span> scipy.optimize <span class="hljs-keyword">import</span> linprog<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># 需要优化的函数对应的参数</span><br><br><span class="hljs-comment"># 不等式对应的参数矩阵</span><br>A = np.array([[<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [-<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>],<br>     [<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>]])<br><br><span class="hljs-comment"># 不等式对应的上界</span><br>b = np.array(<br>    [-<span class="hljs-number">19</span>, -<span class="hljs-number">19</span>, -<span class="hljs-number">19</span>, -<span class="hljs-number">19</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">21</span>, -<span class="hljs-number">20</span>, -<span class="hljs-number">20</span>, -<span class="hljs-number">20</span>, -<span class="hljs-number">20</span>, -<span class="hljs-number">20</span>, -<span class="hljs-number">18</span>, -<span class="hljs-number">18</span>, -<span class="hljs-number">18</span>, -<span class="hljs-number">18</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>,<br>     -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>, -<span class="hljs-number">11</span>])<br>c = np.array([<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>])<br><br><span class="hljs-comment"># 代入参数，利用 Linprog 求解</span><br>res = linprog(c, A_ub=A, b_ub=b, options=&#123;<span class="hljs-string">&quot;disp&quot;</span>: <span class="hljs-literal">True</span>&#125;)<br><span class="hljs-built_in">print</span>(res.x)<br></code></pre></td></tr></table></figure><p>结果如下：</p><pre><code class="hljs">Primal Feasibility  Dual Feasibility    Duality Gap         Step             Path Parameter      Objective1.0                 1.0                 1.0                 -                1.0                 37.00.2426475349467     0.2426475349467     0.2426475349467     0.7716251234008  0.2426475349467     55.01818412195      0.04252842427154    0.04252842427153    0.04252842427153    0.8355997887823  0.04252842427153    104.247705703       0.009356747800954   0.009356747800955   0.009356747800955   0.7953997093281  0.009356747800955   103.5089480738      0.0005030671623338  0.000503067162334   0.0005030671623341  0.949055846188   0.000503067162334   104.012914924       7.859317598419e-08  7.859317820896e-08  7.859317829872e-08  0.9998545163766  7.859317721648e-08  103.9999952247      3.929662644848e-12  3.929721186398e-12  3.929745417963e-12  0.9999499992073  3.929678577412e-12  103.9999999998      Optimization terminated successfully.        Current function value: 104.000000          Iterations: 6[ 7.14875174  2.83528395  6.35115075  7.24511069  6.60703322 11.11.          8.         13.          7.          4.39296678  6.765940714.2500236   4.64884925  3.75488931]</code></pre><p>由于放弃周末休息的护士其工资和奖金总额比其他护士增加a%，假设未放<br>弃周末休息的护士的工资为A<br>园，若使方案三比方案2更经济，可列一下方程：<br>66*A + 38 * A (1+a%) &lt; 108 *A<br>解以上方程可得：<br>a% &lt; 10.5263%<br>即a&lt;10.5263时，方案三比方案二更经济。</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>数学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 26 - 30 记录</title>
    <link href="/2021/12/28/LeetCode-26-30-%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/12/28/LeetCode-26-30-%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="26"><a href="#26" class="headerlink" title="26"></a>26</h1><p><a href="https://leetcode.com/problems/remove-duplicates-from-sorted-array/">https://leetcode.com/problems/remove-duplicates-from-sorted-array/</a></p><p><img src="https://i.imgur.com/kg36Rlt.png"></p><p>简单的题目。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">removeDuplicates</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-built_in">int</span>:<br>        index = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">if</span> nums[i] != nums[i - <span class="hljs-number">1</span>]:<br>                index = index + <span class="hljs-number">1</span><br>                nums[index] = nums[i]<br>        <span class="hljs-keyword">return</span> index + <span class="hljs-number">1</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    Input = [<span class="hljs-number">0</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>]<br>    Output = solu.removeDuplicates(Input)<br>    <span class="hljs-built_in">print</span>(Input)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><h1 id="27"><a href="#27" class="headerlink" title="27"></a>27</h1><p><a href="https://leetcode.com/problems/remove-element/">https://leetcode.com/problems/remove-element/</a></p><p><img src="https://i.imgur.com/sTixaim.png"></p><p>和上一题类似。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">from</span> singly_list_utils <span class="hljs-keyword">import</span> print_linked_list<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">removeElement</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], val: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        index = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> num <span class="hljs-keyword">in</span> nums:<br>            <span class="hljs-keyword">if</span> num != val:<br>                nums[index] = num<br>                index += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> index<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    nums = [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>    val = <span class="hljs-number">3</span><br>    Output = solu.removeElement(nums, val)<br>    <span class="hljs-built_in">print</span>(Output)<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(Output):<br>        <span class="hljs-built_in">print</span>(nums[i], end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br></code></pre></td></tr></table></figure><h1 id="28"><a href="#28" class="headerlink" title="28"></a>28</h1><p><a href="https://leetcode.com/problems/implement-strstr/">https://leetcode.com/problems/implement-strstr/</a></p><p><img src="https://i.imgur.com/ucrXyTS.png"></p><p>真是让人生气的一题。看到 downvotes 就比 upvotes 差一点点，我就应该知道这道题是什么情况了。</p><p>本来是想直接使用遍历的，不用 Python 的切片。那个超时的用例给我整懵了。算了，就用切片好了。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">strStr</span>(<span class="hljs-params">self, haystack: <span class="hljs-built_in">str</span>, needle: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">if</span> needle == <span class="hljs-string">&#x27;&#x27;</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        res = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(haystack)):<br>            <span class="hljs-keyword">if</span> haystack[i] == needle[<span class="hljs-number">0</span>]:<br>                <span class="hljs-keyword">if</span> haystack[i:i + <span class="hljs-built_in">len</span>(needle)] ==needle:<br>                    res = i<br>            <span class="hljs-keyword">if</span> res != -<span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">break</span><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    haystack = <span class="hljs-string">&#x27;hello&#x27;</span><br>    needle = <span class="hljs-string">&#x27;ll&#x27;</span><br>    Output = solu.strStr(haystack, needle)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><h1 id="29"><a href="#29" class="headerlink" title="29"></a>29</h1><p><a href="https://leetcode.com/problems/divide-two-integers/">https://leetcode.com/problems/divide-two-integers/</a></p><p><img src="https://i.imgur.com/ZB99qo4.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">divide</span>(<span class="hljs-params">self, dividend: <span class="hljs-built_in">int</span>, divisor: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        INT_MAX = <span class="hljs-number">2</span> ** <span class="hljs-number">31</span> - <span class="hljs-number">1</span><br>        INT_MIN = -<span class="hljs-number">2</span> ** <span class="hljs-number">31</span><br>        <span class="hljs-comment"># dividend is INT_MIN</span><br>        <span class="hljs-keyword">if</span> dividend == INT_MIN:<br>            <span class="hljs-keyword">if</span> divisor == <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> dividend<br>            <span class="hljs-keyword">elif</span> divisor == -<span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">return</span> INT_MAX<br>        <span class="hljs-comment"># ddivisor is INT_MIN</span><br>        <span class="hljs-keyword">if</span> divisor == INT_MIN:<br>            <span class="hljs-keyword">if</span> dividend == INT_MIN:<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span><br>            <span class="hljs-keyword">else</span>:<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> divisor == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> dividend<br>        <span class="hljs-keyword">if</span> divisor == -<span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> -dividend<br>        <span class="hljs-keyword">if</span> dividend == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>        <br>        <span class="hljs-comment"># normal situation</span><br>        <span class="hljs-comment"># recursive method, this is the core method</span><br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">recurse_div</span>(<span class="hljs-params">dividend: <span class="hljs-built_in">int</span>, divisor: <span class="hljs-built_in">int</span></span>):<br>            <span class="hljs-keyword">if</span> dividend &lt; divisor:<br>                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span><br>            cur_min = <span class="hljs-number">1</span><br>            util_num = divisor<br>            <span class="hljs-keyword">while</span> util_num &lt;= dividend - util_num: <span class="hljs-comment"># the fisrt clause to detect overflow</span><br>                cur_min += cur_min<br>                util_num += util_num <span class="hljs-comment"># equals to multiply by 2</span><br>            <span class="hljs-keyword">return</span> cur_min + recurse_div(dividend - util_num, divisor)<br>        <br>        flag = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">if</span> (dividend &gt;= <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> divisor &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">or</span> (dividend &lt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> divisor &lt; <span class="hljs-number">0</span>):<br>            flag = <span class="hljs-number">1</span><br><br>        <span class="hljs-keyword">if</span> dividend == INT_MIN:<br>            <span class="hljs-keyword">if</span> divisor &lt; <span class="hljs-number">0</span>:<br>                ans = <span class="hljs-number">1</span> + recurse_div(<span class="hljs-built_in">abs</span>(dividend - divisor), <span class="hljs-built_in">abs</span>(divisor))<br>            <span class="hljs-keyword">if</span> divisor &gt; <span class="hljs-number">0</span>:<br>                ans = <span class="hljs-number">1</span> + recurse_div(<span class="hljs-built_in">abs</span>(dividend + divisor), divisor)<br><br>        <span class="hljs-keyword">else</span>:<br>            ans = recurse_div(<span class="hljs-built_in">abs</span>(dividend), <span class="hljs-built_in">abs</span>(divisor))<br>        <span class="hljs-keyword">return</span> ans <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span> <span class="hljs-keyword">else</span> -ans<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    Output = solu.divide(-<span class="hljs-number">2147483648</span>, -<span class="hljs-number">2</span>)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><p>代码写得不好，题目本身的限制有点烦。好在终于 AC 了。</p><p>我看很多人的题解都没有考虑 32 位数的限制。</p><p>我这里本来是这样来判断的：</p><p>把</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">util_num + uitl_num &lt;= INT_MAX<br></code></pre></td></tr></table></figure><p>转化成减法即可：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">util_num &lt;= INT_MAX - util_num<br></code></pre></td></tr></table></figure><p>后来发现其实把 <code>while</code> </p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">util_num + util_num &lt;= dividend<br></code></pre></td></tr></table></figure><p>转化成</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">util_num &lt;= dividend - util_num<br></code></pre></td></tr></table></figure><p>就行了。</p><p>另外，边界处理是真的烦人。我这里对 <code>-2147483648</code> 的处理是先将其剪掉一个 <code>divisor</code>，然后在用核心代码来处理。即：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">if</span> dividend == INT_MIN:<br>    <span class="hljs-keyword">if</span> divisor &lt; <span class="hljs-number">0</span>:<br>        ans = <span class="hljs-number">1</span> + recurse_div(<span class="hljs-built_in">abs</span>(dividend - divisor), <span class="hljs-built_in">abs</span>(divisor))<br>    <span class="hljs-keyword">if</span> divisor &gt; <span class="hljs-number">0</span>:<br>        ans = <span class="hljs-number">1</span> + recurse_div(<span class="hljs-built_in">abs</span>(dividend + divisor), divisor)<br></code></pre></td></tr></table></figure><h1 id="30"><a href="#30" class="headerlink" title="30"></a>30</h1><p><a href="https://leetcode.com/problems/substring-with-concatenation-of-all-words/">https://leetcode.com/problems/substring-with-concatenation-of-all-words/</a></p><p><img src="https://i.imgur.com/gZDWPxU.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-comment"># 先用效率低一点的遍历方式来遍历试一下</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, words: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        res = []<br>        <span class="hljs-keyword">from</span> collections <span class="hljs-keyword">import</span> Counter<br>        words_counter = Counter(words)<br>        single_word_len = <span class="hljs-built_in">len</span>(words[<span class="hljs-number">0</span>])<br>        word_num = <span class="hljs-built_in">len</span>(words)<br>        all_word_len = word_num * single_word_len<br>        s_len = <span class="hljs-built_in">len</span>(s)<br>        <span class="hljs-keyword">for</span> index <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, s_len - all_word_len + <span class="hljs-number">1</span>):<br>            sub_string = s[index:index + all_word_len]<br>            flag = <span class="hljs-literal">True</span><br>            words_counter_copy = Counter(words_counter)<br>            <span class="hljs-keyword">for</span> index2 <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, all_word_len - single_word_len + <span class="hljs-number">1</span>, single_word_len):<br>                each_word = sub_string[index2:index2+single_word_len]<br>                words_counter_copy[each_word] -= <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> words_counter_copy[each_word] &lt; <span class="hljs-number">0</span>:<br>                    flag = <span class="hljs-literal">False</span><br>                    <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> flag == <span class="hljs-literal">True</span>:<br>                res.append(index)<br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-comment"># Input</span><br>    s = <span class="hljs-string">&quot;barfoothefoobarman&quot;</span><br>    words = [<span class="hljs-string">&quot;foo&quot;</span>,<span class="hljs-string">&quot;bar&quot;</span>]<br>    <span class="hljs-comment"># s = &quot;barfoofoobarthefoobarman&quot;</span><br>    <span class="hljs-comment"># words = [&quot;bar&quot;,&quot;foo&quot;,&quot;the&quot;]</span><br>    s = <span class="hljs-string">&quot;wordgoodgoodgoodbestword&quot;</span><br>    words = [<span class="hljs-string">&quot;word&quot;</span>,<span class="hljs-string">&quot;good&quot;</span>,<span class="hljs-string">&quot;best&quot;</span>,<span class="hljs-string">&quot;good&quot;</span>]<br>    Output = solu.findSubstring(s, words)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><p>这里用了简单的遍历，对每一个子串利用字典进行判断是否符合条件。这个字典其实就是 hash 表，但我感觉，这个和我学过的 hash 是不一样的。</p><p>注意题目的条件，给定的字符串数组中的每一个字符串的长度是一样的。</p><p>还有，关于 Python 的字符统计，有一个库函数 <code>Counter</code>，具体使用的方法可以参见：<a href="https://www.guru99.com/python-counter-collections-example.html">https://www.guru99.com/python-counter-collections-example.html</a></p><p>按：有例子的讲述最容易理解了。</p><p>这道题目可以用滑动窗口来优化，暂时搁置。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库第四次上机实验报告</title>
    <link href="/2021/12/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E5%9B%9B%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <url>/2021/12/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E5%9B%9B%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<p>咳咳，数据库实验十三准备重构中…</p><p>之前摆烂，现在得还债了。</p><h1 id="实验十一-数据库的备份与恢复"><a href="#实验十一-数据库的备份与恢复" class="headerlink" title="实验十一 数据库的备份与恢复"></a>实验十一 数据库的备份与恢复</h1><h2 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>了解 Navicat 的数据备份和恢复机制，掌握 Navicat 中数据库备份和恢复的方法。</p><h2 id="二、实验内容"><a href="#二、实验内容" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、备份</p><p>步骤：使用用户 root 打开连接 MySQL —打开数据库 world —点击界面上方的“备份”—新建备份，如图所示：</p><p><img src="https://i.imgur.com/5syemCi.png"></p><p><img src="https://i.imgur.com/MacUG55.png"></p><p>点击“backup”—成功完成后点击保存—保存名称为 world —确定，结果如图1.2所示：</p><p><img src="https://i.imgur.com/6Zp5b6g.png"></p><p><img src="https://i.imgur.com/56HYLAy.png"></p><p><img src="https://i.imgur.com/iFSpurc.png"></p><p>2、恢复还原</p><p>步骤：接第1部分操作—删除数据库 world — 在连接 MySQL 中新建一个空的数据库 world（名称需相同）–打开—点击“备份”可以看到如图所示界面：</p><p><img src="https://i.imgur.com/yR8kCpc.png"></p><p>选择标有时间的备份文件—点击“还原备份”，会弹出如所示对话框：</p><p><img src="https://i.imgur.com/jaU0043.png"></p><p>点击开始—确定。</p><p>过程成功之后会发现数据库 world 已成功恢复（可能需要先关闭再打开）。</p><p><img src="https://i.imgur.com/U0G8ifT.png"></p><p><img src="https://i.imgur.com/CtatXhd.png"></p><p>3、用 Navicat 计划任务备份 MySQL 数据库。</p><p>备份连接 MySQL 中的所有数据库（也可以单独选择某一数据库进行备份）：</p><p>① 点击“计划” -&gt; “新建批处理作业”<br>② 默认就有“Backup Server MySQL”这个备份动作。如图所示：</p><p><img src="https://i.imgur.com/dG8mylR.png"></p><p>③ 双击它，它就被加入到了如图所示的计划队列中：</p><p><img src="https://i.imgur.com/euv8DoD.png"></p><p>④ 点击“保存”，弹出设置文件名的对话框，输入这个计划的名称即可，如图所示：</p><p><img src="https://i.imgur.com/Lt6G8cR.png"></p><p>⑤ 保存之后，任务栏上的“设置计划任务”变成可用状态。点击“设置计划任务”（可能会报错：“指定的错误：0x80041315，任务计划程序服务没有运行。”或者“指定错误：0x80070005：拒绝访问”解决方法见本实验的步骤4），弹出设置的对话框。在“任务”标签下设置密码，就是数据库所在电脑的登录密码，没有的话可以不设。如图所示：</p><p><img src="https://i.imgur.com/qkX01bX.png"></p><p><img src="https://i.imgur.com/NaJTprK.png"></p><p><img src="https://i.imgur.com/0KZoriQ.png"></p><p>⑦ 设置完之后，点击确定，等这个计划运行过之后（可以控制设置的时间以尽快看到结果），看一下备份的效果，备份的文件的位置为：“我的文档” -&gt; “Navicat” -&gt; “MySQL” -&gt; “servers” -&gt; “MySQL”，里面就有各个数据库对应的文件夹，如图所示：</p><p><img src="https://i.imgur.com/ESzgRCK.png"></p><p>⑧ 各文件中会生成 <code>.psc</code> 文件，包含了这个库的数据，以后可以用来做还原。如图所示：</p><p><img src="https://i.imgur.com/szp48Av.png"></p><h2 id="三、课后练习题"><a href="#三、课后练习题" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、创建一个备份设备用于备份数据库 master，并尝试还原数据库 master。</p><p>备份：</p><p><img src="https://i.imgur.com/tVVY2wR.png"></p><p><img src="https://i.imgur.com/cVjoGHI.png"></p><p><img src="https://i.imgur.com/5VOht1M.png"></p><p>还原：</p><p><img src="https://i.imgur.com/V7A94Vq.png"></p><p><img src="https://i.imgur.com/UMlBQ7z.png"></p><p><img src="https://i.imgur.com/rfiCMSB.png"></p><p><img src="https://i.imgur.com/yEdMRGZ.png"></p><p>2、实验二中所用到的导出和导入方法也可以达到备份的效果，尝试用该方法备份和还原数据库 world。</p><p>备份：</p><p><img src="https://i.imgur.com/E7GrK7f.png"></p><p><img src="https://i.imgur.com/Xk4W0Le.png"></p><p><img src="https://i.imgur.com/4M3IJQt.png"></p><p>还原：</p><p><img src="https://i.imgur.com/R3vy0cB.png"></p><p><img src="https://i.imgur.com/AdiFjwK.png"></p><p><img src="https://i.imgur.com/31h8sFj.png"></p><p>3、思考题：备份策略和备份规划指的分别是什么？</p><p>备份策略：全量数据备份、增量数据备份、日志备份</p><p>备份规划：备份的时间、内容、频率等等</p><p>4、给数据库 world 设计一个备份规划（频率和时间自定，要可看到结果）。</p><p><img src="https://i.imgur.com/i1Csi7R.png"></p><p><img src="https://i.imgur.com/6sXmneV.png"></p><p><img src="https://i.imgur.com/2t5qQxm.png"></p><p>结果：</p><p><img src="https://i.imgur.com/YUYwajU.png"></p><h1 id="实验十三-综合实验"><a href="#实验十三-综合实验" class="headerlink" title="实验十三 综合实验"></a>实验十三 综合实验</h1><h2 id="一、实验目的-1"><a href="#一、实验目的-1" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>1、熟悉数据库应用系统需求分析；</p><p>2、熟悉数据库设计的基本方法；</p><p>3、掌握数据库和数据表的创建方法；</p><p>4、掌握视图的创建方法；</p><p>5、了解各种数据完整性约束；</p><p>6、对存储过程和触发器有一个完整的认识。</p><h2 id="二、实验要求"><a href="#二、实验要求" class="headerlink" title="二、实验要求"></a>二、实验要求</h2><p>给出网上书店管理系统的需求分析报告（见四），要求根据功能分析和数据分析设计概念模型，实现完整的数据库（包括：各种表，视图，必要的存储过程，触发器等）。</p><h2 id="三、实验内容和步骤"><a href="#三、实验内容和步骤" class="headerlink" title="三、实验内容和步骤"></a>三、实验内容和步骤</h2><p>1、需求分析：</p><p>一个书店中的书籍类别、数量是非常庞大的，虽然书籍的分类是非常规范，但仅仅局限于概念上的分类仍无法运用于实践当中，这就给管理人员带来了极大的工作量，因此就需要一个比较科学的管理办法来解决此问题——利用 MySQL 数据库来进行数据管理。</p><p>2、概要分析：</p><p>该系统主要分为两部分，一个为普通会员用户部分，亦即前台系统。另外一个是系统的管理员部分，即后台系统。网上书店前台系统部分主要是实现网上选书、购书、产生订单等功能的系统。后台实现书籍管理、用户管理、订单处理等功能。</p><p>3、开发技术：</p><p>MySQL 8.0.25，Navicat。</p><p>开发语言：MySQL</p><p>开发技术：数据库开发技术</p><p>面向对象：需求者</p><p>4、系统 E-R 图</p><p><img src="https://i.imgur.com/ptQ14JN.png"></p><p>5、概念结构设计</p><p>系统共有 6 个实体：图书目录、图书库存、采购、客户、订单、发货、供应商</p><p>（1）图书目录的属性：书号、书名、作者、出版社、价格、关键字、本书的目录、封皮</p><p>（2）图书库存的属性：书号、存货量、供书商、丛书、库存存放位置</p><p>（3）采购的属性：书号、书名、出版社、供书商、数量、登记日期、顾客email</p><p>（4）客户的属性：网上ID、登录密码、名称、地址、帐户余额、信用等级</p><p>（5）订单的属性：订单号、订货日期、客户ID、书号、订书数量、金额、发货地址、发货情况</p><p>（6）供应商的属性：供应商编号、供应商基本信息、供应商供货信息、现有书目信息</p><p>6、逻辑结构设计</p><p>图书（书号，书名，出版社，价格，目录，封皮）</p><p>作者（作者名，书号，顺序号）</p><p>关键字（关键字，书号）</p><p>供应（书号，供书商）</p><p>丛书（书号，书名）</p><p>库存（书号，存货量，库存存放位置）</p><p>采购单（书号，数量，登记日期，顾客email）</p><p>客户（网上ID，登录密码，名称，地址，帐户余额，信用等级，信用额度）</p><p>订单（订单号，订货日期，客户ID，订单金额）</p><p>订单中的书（订单号，书号，数量）</p><p>发货（订单号，发货情况）</p><p>供应商（供应商编号，供应商基本信息）</p><p>供应商供货（供应商编号，供应商供货信息）</p><p>供应商现有书目（供应商编号，书号，数量）</p><p>7、细化表结构</p><p>(1) 图书信息表book_info：</p><p><img src="https://i.imgur.com/QBzALcc.png"></p><p>(2) 作者信息表 author_list：</p><p><img src="https://i.imgur.com/WhUw8EC.png"></p><p>(3) 关键字表 keywords_list：</p><p><img src="https://i.imgur.com/0N6fvKY.png"></p><p>(4) 供应表 provide_list：</p><p><img src="https://i.imgur.com/xLuSelR.png"></p><p>(5) 丛书情况表 series_book：</p><p><img src="https://i.imgur.com/Hkx3QgN.png"></p><p>(6) 库存情况表 reserve_info：</p><p><img src="https://i.imgur.com/f9ovJ2M.png"></p><p>(7) 采购表 purchase_list：</p><p><img src="https://i.imgur.com/kgp1sMR.png"></p><p>(8) 客户表 customer_info：</p><p><img src="https://i.imgur.com/bMwb5k1.png"></p><p>(9) 订单表 order_list：</p><p><img src="https://i.imgur.com/uUP2I1b.png"></p><p>(10) 订单中的书 books_in_order：</p><p><img src="https://i.imgur.com/T4soVAb.png"></p><p>(11) 发货表 delivery_info：</p><p><img src="https://i.imgur.com/LKeBT8W.png"></p><p>(12) 供应商 provider_list：</p><p><img src="https://i.imgur.com/ZfXACo1.png"></p><p>(13) 供应商供货 provider_supply：</p><p><img src="https://i.imgur.com/xAcxr7K.png"></p><p>(14) 供应商现有书目 provider_books：</p><p><img src="https://i.imgur.com/UaD0xNz.png"></p><p>8、创建数据库</p><p><img src="https://i.imgur.com/dSXxtMD.png"></p><p>9、创建数据表及必要的约束：</p><p><img src="https://i.imgur.com/b81103u.png"></p><p>10、建立必要的视图：</p><p><img src="https://i.imgur.com/QgHQWYQ.png"></p><p>11、创建必要的外键：</p><p><img src="https://i.imgur.com/DndpFW1.png"></p><p>12、创建必要的触发器：</p><p><img src="https://i.imgur.com/eeFLXLI.png"></p><h2 id="四、相关资料"><a href="#四、相关资料" class="headerlink" title="四、相关资料"></a>四、相关资料</h2><p><strong>网上书店管理系统的需求分析报告</strong></p><p>设计一个小型的数据库应用系统，服务于一个网上书店的日常处理业务及网上购书业务，包括供书目录、库存管理、采购管理、客户管理，顾客订单管理、发货管理，供应商管理及网上浏览等。</p><p>总体设计要求：书店内部日常处理业务通过C&#x2F;S模式来实现，而顾客可通过Internet进行网上订书及查询浏览，为改善性能，应尽量将业务规则放在中间层或数据库服务器一端。<br>该系统的主要功能如下：</p><p>1、供书目录及库存管理</p><p>供书目录管理及库存管理为书店的主要日常业务，应包括建立和更新供书目录，新书入库功能等。需要记录供书的信息有：书号，书名，作者（最多可包括四个作者，有序），出版社，价格，关键字（最多10个），本书的目录（可选），封皮（可选），存货量，供书商（一本书可有多个供应商，可选）等，并且需考虑丛书的问题（即一个书号包含多本书），库存存放位置（可采用示意图表示，可选）。</p><p>2、采购管理</p><p>采购管理为书店的主要日常业务之一，包括缺书登记管理及采购单管理。<br>缺书登记可通过以下几种方法生成：</p><ul><li>1）直接进行缺书登记，包括书号，书名，出版社，供书商，数量，登记日期。</li><li>2）存书量低于一定限度时，自动生成缺书记录（注：不能有重复）,最低存书量可设定。（可选）</li><li>3）顾客在网上进行缺书登记或订货数量超出库存时，生成缺书记录（注：不能有重复），必要时，应记录下顾客的缺书请求，以便答复。（可选）<br>采购单管理：根据缺书记录单可选择生成采购单，到货时对采购单作相应处理，并增加库存量，删除缺书记录，EMAIL通知缺书登记的顾客（可选）等。</li></ul><p>采购单管理：根据缺书记录单可选择生成采购单，到货时对采购单作相应处理，并增加库存量，删除缺书记录，EMAIL 通知缺书登记的顾客（可选）等。</p><p>3、客户管理</p><p>客户管理包括客户信息管理及信用管理。需要记录客户的信息包括：网上 ID，登录密码，名称，地址，帐户余额，信用等级等。</p><p>有关客户信息的管理，分别由书店管理和客户网上管理完成，书店管理包括收到客户的款项后，增加客户的帐户余额；调整信用额度。客户其他信息由客户在网上维护，如注册一个新的用户，修改用户信息等等。</p><p>信用等级分为五级，一级为 10% 的折扣，不能透支；二级为 15% 的折扣，不能透支；三级为15%的折扣，可先发书再付款，透支有额度限制；四级为 20% 的折扣，可先发书再付款，透支有额度限制；五级为 25% 的折扣，可先发书再付款，透支无额度限制。信用等级管理有两种形式：一种是书店进行管理；一种是自动进行管理，即在每月月初根据该帐户的余额或累计购书总金额进行调整，如帐户余额超过一定金额，提升其信用额度，或者累计购书总金额超过一定金额提升其信用额度（可选）。</p><p>4、顾客订单管理和发货管理</p><p>顾客订单包括订单号，订货日期，客户ID，书号，订书数量，金额，发货地址，发货情况等。</p><p>订单由顾客在网上申请生成。一个订单可订多本书（可选）。并仅能对书库中已有的书目进行订购，库存量不足时可以先订货；当客户查询的书目在书库中没有找到时，将会询问客户是否希望做进一步的询价及报价。</p><p>发货管理为书店日常业务管理之一，必须根据订单情况及客户的信用等级判断其付款额是否到帐，并相应扣减其帐户余额后，才能发货。对一个订单可分次发货（可选）</p><p>5、供应商管理</p><p>供应商相关信息，包括：供应商基本信息，供应商供货信息，并且不同的供应商发布自己现有书目信息。</p><p>6、网上浏览查询</p><p>可查询以下二类信息：</p><ul><li>1）客户相关信息，包括：客户基本信息，客户历史订单信息，相关订单的发货信息等。</li><li>2）书目信息：可按照书号，书名，出版社，关键字（可指定匹配程度（可选））、作者（按第一，第二……作者查询（可选）），进行查询，并可进行模糊查询（可选）。<br>要求：必须根据所有必选的功能和数据需求设计实现完整的数据库（包括：各种表，视图，必要的存储过程，触发器等）。</li></ul><hr><p>参考：</p><p>1、<a href="https://blog.csdn.net/lee1hong/article/details/105763631?spm=1001.2014.3001.5501">哆啦一泓</a></p>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>面向对象系统分析与设计作业四</title>
    <link href="/2021/12/22/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%9B%9B/"/>
    <url>/2021/12/22/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E5%9B%9B/</url>
    
    <content type="html"><![CDATA[<h1 id="作业4-时序图及综合"><a href="#作业4-时序图及综合" class="headerlink" title="作业4 时序图及综合"></a>作业4 时序图及综合</h1><p>设计一个建材超市的系统，该系统的用例包括收银员收银、采购员采购物品、库存管理员入库登记、出库登记和盘存，实体类的类模型如图1所示。其中 Order 表示帐单类，一个账单对象表示一次购物，有该次购物的 dateTime 即日期时间、total 即总金额等属性；OrderItem 表示帐单项类，一个账单项对象表示一次购物中所购买的一种物品，包含所购买物品的 inventoryId 即物品条码、qty 即本次购买该物品的数量、price 即购买单价，共3个属性；Inventory表示物品类，一个物品对象表示超市里货架上的一种物品，有 inventoryId 即物品条码、desc 即物品名称描述、factory 即供货厂家、markedPrice 即物品标价、evenCost 即库存均价、qOH 即当前库存量等属性。超市货架上的每件物品都贴有物品条码，为某种物品的唯一编码，用光笔扫描可有效输入。<br>其中“收银员收银”用例的事件流描述如下：顾客选好物品后到收银台交给收银员，收银员为顾客建立一份帐单，逐一扫描每种物品上所贴的条码，核对此物品的库存名称描述，并输入此物品的本次购买数量，同时建立帐单项，计算账单项的小计金额，更新订单项物品的当前库存数量，直到所有物品的帐单项建立完成，得出累计总金额，顾客按金额缴纳现金，现金收讫后打印收据交顾客。 </p><p>请在以上需求描述的基础上，完成下列设计：</p><p>1. 设计此建材超市系统的用例图；<br>2. 依据收银用例的事件流描述，设计其时序图，其界面对象和控制对象分别用一个对象表示，实体对象依据图1，要求写明完整详细的消息交互；<br>3. 细化结果2的界面对象和控制对象，写出此用例事件流的完整交互的时序图；<br>4. 设计此收银过程中，实体对象 inventory 的状态图，并给出库物品对象的方法函数，及其部分伪码。</p><p><img src="https://i.imgur.com/GkvEO0y.png" alt="图1 建材超市系统的部分实体类类图"></p><p>解：</p><p>1. 用例图如下：</p><p><img src="https://i.imgur.com/i8ugI03.png"></p><p>2. 时序图如下：</p><p><img src="https://i.imgur.com/U4Uq3JR.png"></p><p>3. 更详细的时序图如下：</p><p><img src="https://i.imgur.com/VHA1y53.png"></p><p>4. 状态图及部分伪码如下：</p><p><img src="https://i.imgur.com/BTc7huG.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Inventory</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> inventoryId;<br>    <span class="hljs-keyword">private</span> String desc;<br>    <span class="hljs-keyword">private</span> String factory;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> markedPrice;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> evenCost;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> qOH;<br><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">vertifyInformation</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 检查库存是否符合情况</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Boolean <span class="hljs-title function_">updateInformation</span><span class="hljs-params">()</span> (<br>        <span class="hljs-comment">// 更新库存情况</span><br>    )<br><br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>作业</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android 布局学习</title>
    <link href="/2021/12/14/Android-%E5%B8%83%E5%B1%80%E5%AD%A6%E4%B9%A0/"/>
    <url>/2021/12/14/Android-%E5%B8%83%E5%B1%80%E5%AD%A6%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>Youtube 学习记录。</p><p>主要是根据 Youtube 的一个安卓 Youtuber 的视频教程来学习，或者说复习一下安卓的布局。以前看过《Android 第一行代码》第二版。</p><h1 id="LinearLayout"><a href="#LinearLayout" class="headerlink" title="LinearLayout"></a>LinearLayout</h1><p>线性布局。</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;utf-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span> <span class="hljs-attr">xmlns:android</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res/android&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:app</span>=<span class="hljs-string">&quot;http://schemas.android.com/apk/res-auto&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">xmlns:tools</span>=<span class="hljs-string">&quot;http://schemas.android.com/tools&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">&quot;vertical&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">android:padding</span>=<span class="hljs-string">&quot;16dp&quot;</span></span><br><span class="hljs-tag">    <span class="hljs-attr">tools:context</span>=<span class="hljs-string">&quot;.MainActivity&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">&quot;horizontal&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">&quot;1&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:hint</span>=<span class="hljs-string">&quot;First Name&quot;</span>/&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">&quot;1&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:hint</span>=<span class="hljs-string">&quot;Last Name&quot;</span>/&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:hint</span>=<span class="hljs-string">&quot;Birth Date&quot;</span> /&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">LinearLayout</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;match_parent&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">        <span class="hljs-attr">android:orientation</span>=<span class="hljs-string">&quot;horizontal&quot;</span>&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">EditText</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">&quot;1&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:hint</span>=<span class="hljs-string">&quot;Country&quot;</span> /&gt;</span><br><br>        <span class="hljs-tag">&lt;<span class="hljs-name">Button</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_width</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_height</span>=<span class="hljs-string">&quot;wrap_content&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:layout_weight</span>=<span class="hljs-string">&quot;1&quot;</span></span><br><span class="hljs-tag">            <span class="hljs-attr">android:text</span>=<span class="hljs-string">&quot;Apply&quot;</span> /&gt;</span><br><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">LinearLayout</span>&gt;</span><br></code></pre></td></tr></table></figure><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs xml">xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;<br>xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;<br>xmlns:tools=&quot;http://schemas.android.com/tools&quot;<br></code></pre></td></tr></table></figure><p>一般来说，这三个命名空间是必须的。</p><p>我们设置 <code>layout_width</code> 的值常用的有三种：</p><ul><li>match-parent: 最外面的 <code>LinearLayout</code> 如果使用这个值，会填充整个屏幕。</li><li>wrap-content: 包裹内容的大小即可。</li><li>20dp: 20 仅仅是一个示例，实际可以设置成任何值。</li></ul><p><code>orientation</code> 是放置的方式。分为水平和垂直两种方式。</p><p>在 <code>LinearLayout</code> 布局中可以再嵌套 <code>LinearLayout</code> 布局。</p><p><img src="https://i.imgur.com/CAD8ahy.png"></p><h1 id="ConstraintLayout"><a href="#ConstraintLayout" class="headerlink" title="ConstraintLayout"></a>ConstraintLayout</h1><p><a href="https://youtu.be/PqkWT92BT3U">Youtube link</a></p><p>首先，熟悉一下 Android Studio 的使用。</p><p><img src="https://i.imgur.com/gvRffiy.png"></p><p>创建三个按钮，并让它们水平和垂直居中：</p><p><img src="https://i.imgur.com/oqD9hDb.png"></p><p><img src="https://i.imgur.com/FbEzZwj.png"></p><p>然后依然是一些关于调整位置方面的东西。</p><ul><li>chains</li><li>baseline</li></ul><p>利用纯拖拽创建的一个页面：</p><p><img src="https://i.imgur.com/OrTq2bv.png"></p><p><img src="https://i.imgur.com/44Jdg6j.png"></p><h1 id=""><a href="#" class="headerlink" title=""></a></h1><p>Rename 快捷键：<code>Shift + F6</code></p>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Kotlin Learning Notes</title>
    <link href="/2021/12/13/Kotlin-Learning-Notes/"/>
    <url>/2021/12/13/Kotlin-Learning-Notes/</url>
    
    <content type="html"><![CDATA[<p>Just look through the basic grammers of Kotlin. To conclude, Kotlin seems so like Java, but has a lot of additional grammar sugar.</p><h1 id="ep01"><a href="#ep01" class="headerlink" title="ep01"></a>ep01</h1><p>Why you should learn Kotlin?</p><ol><li>Complete null safety</li><li>Use all Java libraries in Kotin, too</li><li>Kotlin has coroutines</li></ol><h1 id="ep02-ep03"><a href="#ep02-ep03" class="headerlink" title="ep02 ep03"></a>ep02 ep03</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(<span class="hljs-string">&quot;Hello World&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/U2DNTIV.png"></p><h1 id="ep04"><a href="#ep04" class="headerlink" title="ep04"></a>ep04</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> myVariable: <span class="hljs-built_in">Int</span> = <span class="hljs-number">5</span><br>    println(myVariable)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> myVariable: <span class="hljs-built_in">Int</span> = <span class="hljs-number">5</span><br>    println(<span class="hljs-string">&quot;The value of our variable is: <span class="hljs-variable">$myVariable</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> myVariable: <span class="hljs-built_in">Int</span> = <span class="hljs-number">5</span><br>    myVariable = <span class="hljs-number">1</span><br>    println(<span class="hljs-string">&quot;The value of our variable is: <span class="hljs-variable">$myVariable</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> myVariable = <span class="hljs-number">5</span><br>    println(<span class="hljs-string">&quot;The value of our variable is: <span class="hljs-variable">$myVariable</span>&quot;</span>)<br>    myVariable = <span class="hljs-number">1</span><br>    println(<span class="hljs-string">&quot;The value is now: <span class="hljs-variable">$myVariable</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>Because the tutorials are too basic, then I switch to official guideline.</p><h1 id="Package-definition-and-imports"><a href="#Package-definition-and-imports" class="headerlink" title="Package definition and imports"></a>Package definition and imports</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">package</span> my.demo<br><br><span class="hljs-keyword">import</span> kotlin.text.*<br><br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure><h1 id="Program-entry-point"><a href="#Program-entry-point" class="headerlink" title="Program entry point"></a>Program entry point</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(<span class="hljs-string">&quot;Hello world!&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">(args: <span class="hljs-type">Array</span>&lt;<span class="hljs-type">String</span>&gt;)</span></span> &#123;<br>    println(args.contentToString())<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Print-to-the-standard-output"><a href="#Print-to-the-standard-output" class="headerlink" title="Print to the standard output"></a>Print to the standard output</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kt">print(<span class="hljs-string">&quot;Hello &quot;</span>)<br>print(<span class="hljs-string">&quot;world!&quot;</span>)<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs kt">println(<span class="hljs-string">&quot;Hello world!&quot;</span>)<br>println(<span class="hljs-number">42</span>)<br></code></pre></td></tr></table></figure><h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sum</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123;<br>    <span class="hljs-keyword">return</span> a + b<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    print(<span class="hljs-string">&quot;sum of 3 and 5 is &quot;</span>)<br>    println(sum(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>))<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">sum</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> = a + b<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(<span class="hljs-string">&quot;sum of 19 and 23 is <span class="hljs-subst">$&#123;sum(<span class="hljs-number">19</span>, <span class="hljs-number">23</span>)&#125;</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Unit</span> &#123;<br>    println(<span class="hljs-string">&quot;sum of <span class="hljs-variable">$a</span> and <span class="hljs-variable">$b</span> is <span class="hljs-subst">$&#123;a + b&#125;</span>&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    printSum(-<span class="hljs-number">1</span>, <span class="hljs-number">8</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>按：<code>Unit</code> 似乎和 Java 的 <code>void</code> 比较像。<code>Unit</code> 可以省略。</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printSum</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span> &#123;<br>    println(<span class="hljs-string">&quot;sum of <span class="hljs-variable">$a</span> and <span class="hljs-variable">$b</span> is <span class="hljs-subst">$&#123;a + b&#125;</span>&quot;</span>)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    printSum(-<span class="hljs-number">1</span>, <span class="hljs-number">8</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Variables"><a href="#Variables" class="headerlink" title="Variables"></a>Variables</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> a: <span class="hljs-built_in">Int</span> = <span class="hljs-number">1</span>  <span class="hljs-comment">// immediate assignment</span><br>    <span class="hljs-keyword">val</span> b = <span class="hljs-number">2</span>   <span class="hljs-comment">// `Int` type is inferred</span><br>    <span class="hljs-keyword">val</span> c: <span class="hljs-built_in">Int</span>  <span class="hljs-comment">// Type required when no initializer is provided</span><br>    c = <span class="hljs-number">3</span>       <span class="hljs-comment">// deferred assignment</span><br>    println(<span class="hljs-string">&quot;a = <span class="hljs-variable">$a</span>, b = <span class="hljs-variable">$b</span>, c = <span class="hljs-variable">$c</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> x = <span class="hljs-number">5</span> <span class="hljs-comment">// `Int` type is inferred</span><br>    x += <span class="hljs-number">1</span><br>    println(<span class="hljs-string">&quot;x = <span class="hljs-variable">$x</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">val</span> PI = <span class="hljs-number">3.14</span><br><span class="hljs-keyword">var</span> x = <span class="hljs-number">0</span><br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">incrementX</span><span class="hljs-params">()</span></span> &#123; <br>    x += <span class="hljs-number">1</span> <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(<span class="hljs-string">&quot;x = <span class="hljs-variable">$x</span>; PI = <span class="hljs-variable">$PI</span>&quot;</span>)<br>    incrementX()<br>    println(<span class="hljs-string">&quot;incrementX()&quot;</span>)<br>    println(<span class="hljs-string">&quot;x = <span class="hljs-variable">$x</span>; PI = <span class="hljs-variable">$PI</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Creating-classes-and-instances"><a href="#Creating-classes-and-instances" class="headerlink" title="Creating classes and instances"></a>Creating classes and instances</h1><p>To define a class, use the <code>class</code> keyword.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span><br></code></pre></td></tr></table></figure><p>Properties of a class can be listed in its declaration or body.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-keyword">var</span> height: <span class="hljs-built_in">Double</span>, <span class="hljs-keyword">var</span> length: <span class="hljs-built_in">Double</span>) &#123;<br>    <span class="hljs-keyword">var</span> perimeter = (height + length) * <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><p>The default constructor with parameters listed in the class declaration is available automatically.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-keyword">var</span> height: <span class="hljs-built_in">Double</span>, <span class="hljs-keyword">var</span> length: <span class="hljs-built_in">Double</span>) &#123;<br>    <span class="hljs-keyword">var</span> perimeter = (height + length) * <span class="hljs-number">2</span> <br>&#125;<br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> rectangle = Rectangle(<span class="hljs-number">5.0</span>, <span class="hljs-number">2.0</span>)<br>    println(<span class="hljs-string">&quot;The perimeter is <span class="hljs-subst">$&#123;rectangle.perimeter&#125;</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>Inheritance between classes is declared by a colon (<code>:</code>). Classes are final by default; to make a class inheritable, mark it as <code>open</code>.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-keyword">open</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Shape</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span>(<span class="hljs-keyword">var</span> height: <span class="hljs-built_in">Double</span>, <span class="hljs-keyword">var</span> length: <span class="hljs-built_in">Double</span>): Shape() &#123;<br>    <span class="hljs-keyword">var</span> perimeter = (height + length) * <span class="hljs-number">2</span><br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h1><p>Just like most modern languages, Kotlin supports single-line (or end-of-line) and multi-line (block) comments.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-comment">// This is an end-of-line comment</span><br><br><span class="hljs-comment">/* This is a block comment</span><br><span class="hljs-comment">   on multiple lines. */</span><br></code></pre></td></tr></table></figure><p>Block comments in Kotlin can be nested.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-comment">/* The comment starts here</span><br><span class="hljs-comment"><span class="hljs-comment">/* contains a nested comment *⁠/</span></span><br><span class="hljs-comment"><span class="hljs-comment">and ends here. */</span></span><br></code></pre></td></tr></table></figure><h1 id="String-templates"><a href="#String-templates" class="headerlink" title="String templates"></a>String templates</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">var</span> a = <span class="hljs-number">1</span><br>    <span class="hljs-comment">// simple name in template:</span><br>    <span class="hljs-keyword">val</span> s1 = <span class="hljs-string">&quot;a is <span class="hljs-variable">$a</span>&quot;</span> <br><br>    a = <span class="hljs-number">2</span><br>    <span class="hljs-comment">// arbitrary expression in template:</span><br>    <span class="hljs-keyword">val</span> s2 = <span class="hljs-string">&quot;<span class="hljs-subst">$&#123;s1.replace(<span class="hljs-string">&quot;is&quot;</span>, <span class="hljs-string">&quot;was&quot;</span>)&#125;</span>, but now is <span class="hljs-variable">$a</span>&quot;</span><br>    println(s2)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Conditional-expressions"><a href="#Conditional-expressions" class="headerlink" title="Conditional expressions"></a>Conditional expressions</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">maxOf</span><span class="hljs-params">(a: <span class="hljs-type">Int</span>, b: <span class="hljs-type">Int</span>)</span></span>: <span class="hljs-built_in">Int</span> &#123;<br>    <span class="hljs-keyword">if</span> (a &gt; b) &#123;<br>        <span class="hljs-keyword">return</span> a<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-keyword">return</span> b<br>    &#125;<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(<span class="hljs-string">&quot;max of 0 and 42 is <span class="hljs-subst">$&#123;maxOf(<span class="hljs-number">0</span>, <span class="hljs-number">42</span>)&#125;</span>&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs kt">In Kotlin, <span class="hljs-keyword">if</span> can also be used <span class="hljs-keyword">as</span> an expression.<br></code></pre></td></tr></table></figure><h1 id="for-loop"><a href="#for-loop" class="headerlink" title="for loop"></a>for loop</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> items = listOf(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> items) &#123;<br>        println(item)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> items = listOf(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    <span class="hljs-keyword">for</span> (index <span class="hljs-keyword">in</span> items.indices) &#123;<br>        println(<span class="hljs-string">&quot;item at <span class="hljs-variable">$index</span> is <span class="hljs-subst">$&#123;items[index]&#125;</span>&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="while-loop"><a href="#while-loop" class="headerlink" title="while loop"></a>while loop</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> items = listOf(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    <span class="hljs-keyword">var</span> index = <span class="hljs-number">0</span><br>    <span class="hljs-keyword">while</span> (index &lt; items.size) &#123;<br>        println(<span class="hljs-string">&quot;item at <span class="hljs-variable">$index</span> is <span class="hljs-subst">$&#123;items[index]&#125;</span>&quot;</span>)<br>        index++<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="when-expression"><a href="#when-expression" class="headerlink" title="when expression"></a>when expression</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">describe</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span>: String =<br>    <span class="hljs-keyword">when</span> (obj) &#123;<br>        <span class="hljs-number">1</span>          -&gt; <span class="hljs-string">&quot;One&quot;</span><br>        <span class="hljs-string">&quot;Hello&quot;</span>    -&gt; <span class="hljs-string">&quot;Greeting&quot;</span><br>        <span class="hljs-keyword">is</span> <span class="hljs-built_in">Long</span>    -&gt; <span class="hljs-string">&quot;Long&quot;</span><br>        !<span class="hljs-keyword">is</span> String -&gt; <span class="hljs-string">&quot;Not a string&quot;</span><br>        <span class="hljs-keyword">else</span>       -&gt; <span class="hljs-string">&quot;Unknown&quot;</span><br>    &#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    println(describe(<span class="hljs-number">1</span>))<br>    println(describe(<span class="hljs-string">&quot;Hello&quot;</span>))<br>    println(describe(<span class="hljs-number">1000L</span>))<br>    println(describe(<span class="hljs-number">2</span>))<br>    println(describe(<span class="hljs-string">&quot;other&quot;</span>))<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Ranges"><a href="#Ranges" class="headerlink" title="Ranges"></a>Ranges</h1><p>Check if a number is within a range using <code>in</code> operator.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> x = <span class="hljs-number">10</span><br>    <span class="hljs-keyword">val</span> y = <span class="hljs-number">9</span><br>    <span class="hljs-keyword">if</span> (x <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span>.y+<span class="hljs-number">1</span>) &#123;<br>        println(<span class="hljs-string">&quot;fits in range&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Check if a number is out of range.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> list = listOf(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>)<br><br>    <span class="hljs-keyword">if</span> (-<span class="hljs-number">1</span> !<span class="hljs-keyword">in</span> <span class="hljs-number">0.</span>.list.lastIndex) &#123;<br>        println(<span class="hljs-string">&quot;-1 is out of range&quot;</span>)<br>    &#125;<br>    <span class="hljs-keyword">if</span> (list.size !<span class="hljs-keyword">in</span> list.indices) &#123;<br>        println(<span class="hljs-string">&quot;list size is out of valid list indices range, too&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Iterate over a range.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">for</span> (x <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.5</span>) &#123;<br>        print(x)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Or over a progression.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">for</span> (x <span class="hljs-keyword">in</span> <span class="hljs-number">1.</span><span class="hljs-number">.10</span> step <span class="hljs-number">2</span>) &#123;<br>        print(x)<br>    &#125;<br>    println()<br>    <span class="hljs-keyword">for</span> (x <span class="hljs-keyword">in</span> <span class="hljs-number">9</span> downTo <span class="hljs-number">0</span> step <span class="hljs-number">3</span>) &#123;<br>        print(x)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> items = listOf(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    <span class="hljs-keyword">for</span> (item <span class="hljs-keyword">in</span> items) &#123;<br>        println(item)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Check if a collection contains an object using <code>in</code> operator.</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> items = setOf(<span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    <span class="hljs-keyword">when</span> &#123;<br>        <span class="hljs-string">&quot;orange&quot;</span> <span class="hljs-keyword">in</span> items -&gt; println(<span class="hljs-string">&quot;juicy&quot;</span>)<br>        <span class="hljs-string">&quot;apple&quot;</span> <span class="hljs-keyword">in</span> items -&gt; println(<span class="hljs-string">&quot;apple is fine too&quot;</span>)<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><p>Using lambda expressions to filter and map collections:</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-keyword">val</span> fruits = listOf(<span class="hljs-string">&quot;banana&quot;</span>, <span class="hljs-string">&quot;avocado&quot;</span>, <span class="hljs-string">&quot;apple&quot;</span>, <span class="hljs-string">&quot;kiwifruit&quot;</span>)<br>    fruits<br>        .filter &#123; it.startsWith(<span class="hljs-string">&quot;a&quot;</span>) &#125;<br>        .sortedBy &#123; it &#125;<br>        .map &#123; it.uppercase() &#125;<br>        .forEach &#123; println(it) &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Nullable-values-and-null-checks"><a href="#Nullable-values-and-null-checks" class="headerlink" title="Nullable values and null checks"></a>Nullable values and null checks</h1><p>A reference must be explicitly marked as nullable when <code>null</code> value is possible. Nullable type names have <code>?</code> at the end.</p><p>Return <code>null</code> if <code>str</code> does not hold an integer:</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseInt</span><span class="hljs-params">(str: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure><p>Use a function returning nullable value:</p><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseInt</span><span class="hljs-params">(str: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-keyword">return</span> str.toIntOrNull()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printProduct</span><span class="hljs-params">(arg1: <span class="hljs-type">String</span>, arg2: <span class="hljs-type">String</span>)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> x = parseInt(arg1)<br>    <span class="hljs-keyword">val</span> y = parseInt(arg2)<br><br>    <span class="hljs-comment">// Using `x * y` yields error because they may hold nulls.</span><br>    <span class="hljs-keyword">if</span> (x != <span class="hljs-literal">null</span> &amp;&amp; y != <span class="hljs-literal">null</span>) &#123;<br>        <span class="hljs-comment">// x and y are automatically cast to non-nullable after null check</span><br>        println(x * y)<br>    &#125;<br>    <span class="hljs-keyword">else</span> &#123;<br>        println(<span class="hljs-string">&quot;&#x27;<span class="hljs-variable">$arg1</span>&#x27; or &#x27;<span class="hljs-variable">$arg2</span>&#x27; is not a number&quot;</span>)<br>    &#125;    <br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    printProduct(<span class="hljs-string">&quot;6&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>)<br>    printProduct(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>)<br>    printProduct(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">parseInt</span><span class="hljs-params">(str: <span class="hljs-type">String</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-keyword">return</span> str.toIntOrNull()<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printProduct</span><span class="hljs-params">(arg1: <span class="hljs-type">String</span>, arg2: <span class="hljs-type">String</span>)</span></span> &#123;<br>    <span class="hljs-keyword">val</span> x = parseInt(arg1)<br>    <span class="hljs-keyword">val</span> y = parseInt(arg2)<br>    <br>    <span class="hljs-comment">// ...</span><br>    <span class="hljs-keyword">if</span> (x == <span class="hljs-literal">null</span>) &#123;<br>        println(<span class="hljs-string">&quot;Wrong number format in arg1: &#x27;<span class="hljs-variable">$arg1</span>&#x27;&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br>    <span class="hljs-keyword">if</span> (y == <span class="hljs-literal">null</span>) &#123;<br>        println(<span class="hljs-string">&quot;Wrong number format in arg2: &#x27;<span class="hljs-variable">$arg2</span>&#x27;&quot;</span>)<br>        <span class="hljs-keyword">return</span><br>    &#125;<br><br>    <span class="hljs-comment">// x and y are automatically cast to non-nullable after null check</span><br>    println(x * y)<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    printProduct(<span class="hljs-string">&quot;6&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>)<br>    printProduct(<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;7&quot;</span>)<br>    printProduct(<span class="hljs-string">&quot;99&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>)<br>&#125;<br></code></pre></td></tr></table></figure><h1 id="Type-checks-and-automatic-casts"><a href="#Type-checks-and-automatic-casts" class="headerlink" title="Type checks and automatic casts"></a>Type checks and automatic casts</h1><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getStringLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> String) &#123;<br>        <span class="hljs-comment">// `obj` is automatically cast to `String` in this branch</span><br>        <span class="hljs-keyword">return</span> obj.length<br>    &#125;<br><br>    <span class="hljs-comment">// `obj` is still of type `Any` outside of the type-checked branch</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> &#123;<br>        println(<span class="hljs-string">&quot;Getting the length of &#x27;<span class="hljs-variable">$obj</span>&#x27;. Result: <span class="hljs-subst">$&#123;getStringLength(obj) ?: <span class="hljs-string">&quot;Error: The object is not a string&quot;</span>&#125;</span> &quot;</span>)<br>    &#125;<br>    printLength(<span class="hljs-string">&quot;Incomprehensibilities&quot;</span>)<br>    printLength(<span class="hljs-number">1000</span>)<br>    printLength(listOf(Any()))<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getStringLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-keyword">if</span> (obj !<span class="hljs-keyword">is</span> String) <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br><br>    <span class="hljs-comment">// `obj` is automatically cast to `String` in this branch</span><br>    <span class="hljs-keyword">return</span> obj.length<br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> &#123;<br>        println(<span class="hljs-string">&quot;Getting the length of &#x27;<span class="hljs-variable">$obj</span>&#x27;. Result: <span class="hljs-subst">$&#123;getStringLength(obj) ?: <span class="hljs-string">&quot;Error: The object is not a string&quot;</span>&#125;</span> &quot;</span>)<br>    &#125;<br>    printLength(<span class="hljs-string">&quot;Incomprehensibilities&quot;</span>)<br>    printLength(<span class="hljs-number">1000</span>)<br>    printLength(listOf(Any()))<br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight kt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs kt"><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">getStringLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span>: <span class="hljs-built_in">Int</span>? &#123;<br>    <span class="hljs-comment">// `obj` is automatically cast to `String` on the right-hand side of `&amp;&amp;`</span><br>    <span class="hljs-keyword">if</span> (obj <span class="hljs-keyword">is</span> String &amp;&amp; obj.length &gt; <span class="hljs-number">0</span>) &#123;<br>        <span class="hljs-keyword">return</span> obj.length<br>    &#125;<br><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span><br>&#125;<br><br><span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span> &#123;<br>    <span class="hljs-function"><span class="hljs-keyword">fun</span> <span class="hljs-title">printLength</span><span class="hljs-params">(obj: <span class="hljs-type">Any</span>)</span></span> &#123;<br>        println(<span class="hljs-string">&quot;Getting the length of &#x27;<span class="hljs-variable">$obj</span>&#x27;. Result: <span class="hljs-subst">$&#123;getStringLength(obj) ?: <span class="hljs-string">&quot;Error: The object is not a string&quot;</span>&#125;</span> &quot;</span>)<br>    &#125;<br>    printLength(<span class="hljs-string">&quot;Incomprehensibilities&quot;</span>)<br>    printLength(<span class="hljs-string">&quot;&quot;</span>)<br>    printLength(<span class="hljs-number">1000</span>)<br>&#125;<br></code></pre></td></tr></table></figure><p>References:</p><ol><li><a href="https://www.youtube.com/channel/UCKNTZMRHPLXfqlbdOI7mCkg">https://www.youtube.com/channel/UCKNTZMRHPLXfqlbdOI7mCkg</a></li><li><a href="https://kotlinlang.org/docs/basic-syntax.html">https://kotlinlang.org/docs/basic-syntax.html</a></li></ol>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
      <tag>Kotlin</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Android Studio Usage List</title>
    <link href="/2021/12/13/Android-Studio-Usage-List/"/>
    <url>/2021/12/13/Android-Studio-Usage-List/</url>
    
    <content type="html"><![CDATA[<h1 id="Unable-to-access-Android-SDK-add-on-list"><a href="#Unable-to-access-Android-SDK-add-on-list" class="headerlink" title="Unable to access Android SDK add-on list"></a>Unable to access Android SDK add-on list</h1><p>One possible solution to this problem is as follows:</p><p>设置代理为访问外网相关软件的端口，我这里是 Clash for Windows，</p><p><img src="https://i.imgur.com/gu0fZHY.png"></p><p>所以将端口设置成 7890 即可。</p><p>当然，网上还提供一个另外的做法，其实就是另外一个代理啦，但是，相比于直接访问国外的库，国内的镜像还是有一定的延时性的（可能）。这里建议，能够访问外网，尽量访问外网。直接，高效。</p><ol><li>Open Settings </li><li>Click HTTP Proxy, Choose Manual proxy configuration: set Host name as: <code>mirrors.neusoft.edu.cn</code> and set Port number as: 80.</li></ol><h1 id="安卓模拟器的截屏的图片存放在了哪里"><a href="#安卓模拟器的截屏的图片存放在了哪里" class="headerlink" title="安卓模拟器的截屏的图片存放在了哪里"></a>安卓模拟器的截屏的图片存放在了哪里</h1><p>默认是放在桌面的。</p><h1 id="Kotlin-无法直接使用按钮的-id"><a href="#Kotlin-无法直接使用按钮的-id" class="headerlink" title="Kotlin 无法直接使用按钮的 id"></a>Kotlin 无法直接使用按钮的 id</h1><p>解决方法是，在 gradle 文件中引入插件：</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs gradle">id <span class="hljs-string">&#x27;kotlin-android-extensions&#x27;</span><br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/pwzwK5f.png"></p><p><img src="https://i.imgur.com/niLggaN.png"></p>]]></content>
    
    
    <categories>
      
      <category>Android</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Android</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 21 - 25 记录</title>
    <link href="/2021/12/09/LeetCode-21-25-%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/12/09/LeetCode-21-25-%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="21"><a href="#21" class="headerlink" title="21"></a>21</h1><p><a href="https://leetcode.com/problems/merge-two-sorted-lists/submissions/">https://leetcode.com/problems/merge-two-sorted-lists/submissions/</a></p><p><img src="https://i.imgur.com/m8EDkpP.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>, <span class="hljs-type">List</span><br><br><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mergeTwoLists</span>(<span class="hljs-params">self, list1: <span class="hljs-type">Optional</span>[ListNode], list2: <span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        <span class="hljs-keyword">if</span> list1 == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> list2<br>        <span class="hljs-keyword">if</span> list2 == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> list1<br>        res_head = ListNode()<br>        res_head_backup = res_head<br>        <span class="hljs-keyword">while</span> list1 != <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> list2 != <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">if</span> list1.val &lt;= list2.val:<br>                res_head.<span class="hljs-built_in">next</span> = list1<br>                res_head = res_head.<span class="hljs-built_in">next</span><br>                list1 = list1.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">else</span>:<br>                res_head.<span class="hljs-built_in">next</span> = list2<br>                res_head = res_head.<span class="hljs-built_in">next</span><br>                list2 = list2.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">if</span> list1 != <span class="hljs-literal">None</span>:<br>            res_head.<span class="hljs-built_in">next</span> = list1<br>        <span class="hljs-keyword">elif</span> list2 != <span class="hljs-literal">None</span>:<br>            res_head.<span class="hljs-built_in">next</span> = list2<br>        <span class="hljs-keyword">return</span> res_head_backup.<span class="hljs-built_in">next</span><br><br><span class="hljs-comment"># 将一个 List 转换成单向链表</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_linked_list</span>(<span class="hljs-params">data:<span class="hljs-type">List</span></span>):<br>    nodelist = []<br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data:<br>        nodelist.append(ListNode(d))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodelist) - <span class="hljs-number">1</span>):<br>        nodelist[i].<span class="hljs-built_in">next</span> = nodelist[i + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> nodelist[<span class="hljs-number">0</span>]<br><br><span class="hljs-comment"># 打印单向链表</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_linked_list</span>(<span class="hljs-params">head:ListNode</span>):<br>    cursor = head<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Linked List: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(cursor.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        cursor = cursor.<span class="hljs-built_in">next</span><br>    <span class="hljs-comment"># print(&#x27;head: &#x27;, head.val)</span><br>    <span class="hljs-built_in">print</span>()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    list1 = generate_linked_list([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>])<br>    list2 = generate_linked_list([<span class="hljs-number">1</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>])<br>    Output = solu.mergeTwoLists(list1, list2)<br>    print_linked_list(Output)<br></code></pre></td></tr></table></figure><p>简单的题目，和归并排序算法中的合并的那一步比较类似。</p><h1 id="22"><a href="#22" class="headerlink" title="22"></a>22</h1><p><a href="https://leetcode.com/problems/generate-parentheses/">https://leetcode.com/problems/generate-parentheses/</a></p><h2 id="解法一"><a href="#解法一" class="headerlink" title="解法一"></a>解法一</h2><p><img src="https://i.imgur.com/LzgKHsU.png"></p><p>繁琐的解法</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">from</span> leet15_20.leet19 <span class="hljs-keyword">import</span> print_linked_list<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generateParenthesis</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]: <span class="hljs-comment"># temporary modify, then change to str back</span><br>        self.num = n<br>        self.res = []<br>        nodevalue = <span class="hljs-number">1</span><br>        nodesum = <span class="hljs-number">1</span><br>        onePath = [<span class="hljs-number">1</span>]<br>        self.findOnePath(-<span class="hljs-number">1</span>, nodesum, onePath.copy())<br>        <span class="hljs-comment"># print(&#x27;onePath --&gt;&#x27;, onePath)</span><br>        self.findOnePath(<span class="hljs-number">1</span>, nodesum, onePath.copy())<br>        <span class="hljs-comment"># print(&#x27;test&#x27;)</span><br>        result = []<br>        <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> self.res:<br>            tmp_str = <span class="hljs-string">&#x27;&#x27;</span><br>            <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> each:<br>                <span class="hljs-keyword">if</span> _ == <span class="hljs-number">1</span>:<br>                    tmp_str += <span class="hljs-string">&#x27;(&#x27;</span><br>                <span class="hljs-keyword">else</span>:<br>                    tmp_str += <span class="hljs-string">&#x27;)&#x27;</span><br>            result.append(tmp_str)<br>            <span class="hljs-comment"># print(each)</span><br>        <span class="hljs-comment"># print(&#x27;test&#x27;)</span><br>        <span class="hljs-keyword">return</span> result<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">findOnePath</span>(<span class="hljs-params">self, nodevalue: <span class="hljs-built_in">int</span>, nodesum: <span class="hljs-built_in">int</span>, onePath: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(onePath) == self.num * <span class="hljs-number">2</span>:<br>            tmp = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> onePath:<br>                tmp = tmp + i<br>            <span class="hljs-keyword">if</span> tmp == <span class="hljs-number">0</span>:<br>                self.res.append(onePath)<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        nodesum = nodesum + nodevalue<br>        onePath.append(nodevalue)<br>        <span class="hljs-keyword">if</span> nodesum &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nodesum &lt; self.num:<br>            self.findOnePath(<span class="hljs-number">1</span>, nodesum, onePath.copy())<br>            self.findOnePath(-<span class="hljs-number">1</span>, nodesum, onePath.copy())<br>        <span class="hljs-keyword">elif</span> nodesum == <span class="hljs-number">0</span>:<br>            self.findOnePath(<span class="hljs-number">1</span>, nodesum, onePath.copy())<br>        <span class="hljs-keyword">else</span>:<br>            self.findOnePath(-<span class="hljs-number">1</span>, nodesum, onePath.copy())<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    n = <span class="hljs-number">4</span><br>    Output = solu.generateParenthesis(n)<br>    <span class="hljs-built_in">print</span>(Output)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;length of Output:&#x27;</span>, <span class="hljs-built_in">len</span>(Output))<br>    <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> Output:<br>        <span class="hljs-built_in">print</span>(each)<br><br></code></pre></td></tr></table></figure><h2 id="解法二"><a href="#解法二" class="headerlink" title="解法二"></a>解法二</h2><p><img src="https://i.imgur.com/uaEV8YM.png"></p><p>动态规划，如果理解了，就十分简单。</p><p>实现起来，如果手熟的话，就比较简单。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">from</span> leet15_20.leet19 <span class="hljs-keyword">import</span> print_linked_list<br><br><span class="hljs-comment"># 使用动态规划</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">generateParenthesis</span>(<span class="hljs-params">self, n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        <span class="hljs-keyword">if</span> n == <span class="hljs-number">0</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span><br>        parenthesis_list = []<br>        parenthesis_list.append(<span class="hljs-literal">None</span>) <span class="hljs-comment"># 0 --&gt; None</span><br>        parenthesis_list.append([<span class="hljs-string">&#x27;()&#x27;</span>]) <span class="hljs-comment"># 1 --&gt; [&#x27;()&#x27;]</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">2</span>, n + <span class="hljs-number">1</span>):<br>            cur_list = []<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, i + <span class="hljs-number">1</span>):<br>                <span class="hljs-keyword">if</span> j == <span class="hljs-number">1</span>:<br>                    <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> parenthesis_list[i - j]:<br>                        tmp = <span class="hljs-string">&#x27;(&#x27;</span> + <span class="hljs-string">&#x27;)&#x27;</span> + each<br>                        cur_list.append(tmp)<br>                <span class="hljs-keyword">elif</span> j == i:<br>                    <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> parenthesis_list[j - <span class="hljs-number">1</span>]:<br>                        tmp = <span class="hljs-string">&#x27;(&#x27;</span> + each + <span class="hljs-string">&#x27;)&#x27;</span><br>                        cur_list.append(tmp)<br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">for</span> left <span class="hljs-keyword">in</span> parenthesis_list[j - <span class="hljs-number">1</span>]:<br>                        <span class="hljs-keyword">for</span> right <span class="hljs-keyword">in</span> parenthesis_list[i - j]:<br>                            tmp = <span class="hljs-string">&#x27;(&#x27;</span> + left + <span class="hljs-string">&#x27;)&#x27;</span> + right<br>                            cur_list.append(tmp)<br>            parenthesis_list.append(cur_list)<br>        <span class="hljs-keyword">return</span> parenthesis_list[n]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    Input = <span class="hljs-number">4</span><br>    Output = solu.generateParenthesis(Input)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/igurO5n.jpg"></p><h1 id="23"><a href="#23" class="headerlink" title="23"></a>23</h1><p><a href="https://leetcode.com/problems/merge-k-sorted-lists/submissions/">https://leetcode.com/problems/merge-k-sorted-lists/submissions/</a></p><p><img src="https://i.imgur.com/O2ZSJTF.png"></p><p>利用优先队列来解题。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span><br><span class="hljs-keyword">from</span> queue <span class="hljs-keyword">import</span> PriorityQueue<br><br><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">mergeKLists</span>(<span class="hljs-params">self, lists: <span class="hljs-type">List</span>[<span class="hljs-type">Optional</span>[ListNode]]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        n = <span class="hljs-built_in">len</span>(lists)<br>        q = PriorityQueue(n)<br>        res = ListNode()<br>        cursor = res<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-comment"># print(&#x27;test--&gt;&#x27;)</span><br>            <span class="hljs-comment"># print(lists[i].val)</span><br>            <span class="hljs-keyword">if</span> lists[i] != <span class="hljs-literal">None</span>:<br>                q.put((lists[i].val, i, lists[i]))<br>        <span class="hljs-keyword">while</span> q.empty() == <span class="hljs-literal">False</span>:<br>            key, index, value = q.get()<br>            <span class="hljs-comment"># print(key)</span><br>            cursor.<span class="hljs-built_in">next</span> = value<br>            cursor = value<br>            value = value.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">if</span> value != <span class="hljs-literal">None</span>:<br>                q.put((value.val, index, value))<br><br>        <span class="hljs-keyword">return</span> res.<span class="hljs-built_in">next</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_linked_list</span>(<span class="hljs-params">data:<span class="hljs-type">List</span></span>):<br>    nodelist = []<br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data:<br>        nodelist.append(ListNode(d))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodelist) - <span class="hljs-number">1</span>):<br>        nodelist[i].<span class="hljs-built_in">next</span> = nodelist[i + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> nodelist[<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_linked_list</span>(<span class="hljs-params">head:ListNode</span>):<br>    cursor = head<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Linked List: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(cursor.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        cursor = cursor.<span class="hljs-built_in">next</span><br>    <span class="hljs-comment"># print(&#x27;head: &#x27;, head.val)</span><br>    <span class="hljs-built_in">print</span>()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    lists = [[<span class="hljs-number">1</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>],[<span class="hljs-number">1</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>],[<span class="hljs-number">2</span>,<span class="hljs-number">6</span>]]<br>    Input = []<br>    <span class="hljs-keyword">for</span> each_list <span class="hljs-keyword">in</span> lists:<br>        tmp_node = generate_linked_list(each_list)<br>        Input.append(tmp_node)<br>    <span class="hljs-comment"># for each_node in Input:</span><br>    <span class="hljs-comment">#    print_linked_list(each_node)</span><br>    Output = solu.mergeKLists(Input)<br>    print_linked_list(Output)<br></code></pre></td></tr></table></figure><h1 id="24"><a href="#24" class="headerlink" title="24"></a>24</h1><p><a href="https://leetcode.com/problems/swap-nodes-in-pairs/">https://leetcode.com/problems/swap-nodes-in-pairs/</a></p><p><img src="https://i.imgur.com/yBHknB2.png"></p><p>这道题对照着链表的图，写起来的话，思路还是十分清晰的。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">swapPairs</span>(<span class="hljs-params">self, head: <span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        <span class="hljs-keyword">if</span> head == <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> head.<span class="hljs-built_in">next</span> == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> head<br>        cursor = head<br>        new_head = head.<span class="hljs-built_in">next</span><br>        pre_tail_node = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> cursor.<span class="hljs-built_in">next</span> != <span class="hljs-literal">None</span>:<br>            first_node = cursor<br>            second_node = cursor.<span class="hljs-built_in">next</span><br>            third_node = cursor.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>            second_node.<span class="hljs-built_in">next</span> = cursor<br>            cursor.<span class="hljs-built_in">next</span> = third_node<br>            cursor = third_node<br>            <span class="hljs-keyword">if</span> pre_tail_node == <span class="hljs-literal">None</span>:<br>                <span class="hljs-keyword">pass</span><br>            <span class="hljs-keyword">else</span>:<br>                pre_tail_node.<span class="hljs-built_in">next</span> = second_node<br>            pre_tail_node = first_node<br>        <span class="hljs-keyword">return</span> new_head<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-keyword">from</span> singly_list_utils <span class="hljs-keyword">import</span> generate_linked_list, print_linked_list<br>    Input = generate_linked_list([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br>    Output = solu.swapPairs(Input)<br>    print_linked_list(Output)<br></code></pre></td></tr></table></figure><h1 id="25"><a href="#25" class="headerlink" title="25"></a>25</h1><p><a href="https://leetcode.com/problems/reverse-nodes-in-k-group/">https://leetcode.com/problems/reverse-nodes-in-k-group/</a></p><p><img src="https://i.imgur.com/Cv76rxf.png"></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span>, <span class="hljs-type">Optional</span><br><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">reverseKGroup</span>(<span class="hljs-params">self, head: <span class="hljs-type">Optional</span>[ListNode], k: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        <span class="hljs-keyword">if</span> k == <span class="hljs-number">1</span>:<br>            <span class="hljs-keyword">return</span> head<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">reverse_head</span>(<span class="hljs-params">head:<span class="hljs-type">Optional</span>[ListNode]</span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>            cursor = head<br>            pre_node = <span class="hljs-literal">None</span><br>            next_node = <span class="hljs-literal">None</span><br>            <span class="hljs-keyword">while</span> cursor.<span class="hljs-built_in">next</span> != <span class="hljs-literal">None</span>:<br>                next_node = cursor.<span class="hljs-built_in">next</span><br>                cursor.<span class="hljs-built_in">next</span> = pre_node<br>                pre_node = cursor<br>                cursor = next_node<br>            cursor.<span class="hljs-built_in">next</span> = pre_node<br>            <span class="hljs-keyword">return</span> cursor<br>        count = <span class="hljs-number">0</span><br>        part_head = <span class="hljs-literal">None</span><br>        cursor = head<br>        flag = <span class="hljs-number">1</span><br>        new_head = <span class="hljs-literal">None</span><br>        pre_raw_head = <span class="hljs-literal">None</span><br>        <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span>:<br>            <span class="hljs-comment"># print(&#x27;test--&gt;&#x27;, cursor.val)</span><br>            count = count + <span class="hljs-number">1</span><br>            <span class="hljs-keyword">if</span> count == <span class="hljs-number">1</span>:<br>                part_head = cursor<br>            <span class="hljs-keyword">if</span> count == k:<br>                <span class="hljs-keyword">if</span> pre_raw_head != <span class="hljs-literal">None</span>:<br>                    cur_pre_raw_head = pre_raw_head<br>                pre_raw_head = part_head<br>                next_part_head = cursor.<span class="hljs-built_in">next</span> <span class="hljs-comment"># save the next k nodes&#x27;s head</span><br>                cursor.<span class="hljs-built_in">next</span> = <span class="hljs-literal">None</span><br>                cur_reversed_part_head = reverse_head(part_head)<br>                part_head.<span class="hljs-built_in">next</span> = next_part_head<br>                count = <span class="hljs-number">0</span><br>                cursor = next_part_head <span class="hljs-comment"># update cursor</span><br>                <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:<br>                    new_head = cur_reversed_part_head<br>                    flag = <span class="hljs-number">0</span><br>                <span class="hljs-keyword">else</span>:<br>                    cur_pre_raw_head.<span class="hljs-built_in">next</span> = cur_reversed_part_head<br>                <span class="hljs-keyword">continue</span><br>            cursor = cursor.<span class="hljs-built_in">next</span> <span class="hljs-comment"># update cursor</span><br>        <span class="hljs-keyword">return</span> new_head<br><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_linked_list</span>(<span class="hljs-params">data:<span class="hljs-type">List</span></span>):<br>    nodelist = []<br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data:<br>        nodelist.append(ListNode(d))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodelist) - <span class="hljs-number">1</span>):<br>        nodelist[i].<span class="hljs-built_in">next</span> = nodelist[i + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> nodelist[<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_linked_list</span>(<span class="hljs-params">head:ListNode</span>):<br>    cursor = head<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Linked List: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(cursor.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        cursor = cursor.<span class="hljs-built_in">next</span><br>    <span class="hljs-comment"># print(&#x27;head: &#x27;, head.val)</span><br>    <span class="hljs-built_in">print</span>()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    data_list = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>]<br>    Input_head = generate_linked_list(data_list)<br>    Input_k = <span class="hljs-number">3</span><br>    Output = solu.reverseKGroup(Input_head, Input_k)<br>    print_linked_list(Output)<br></code></pre></td></tr></table></figure><p>我这个代码写得真的有点乱啊。思路是清晰的，但是实现起来，总归是不利落。</p><p>也有可能是上课时候偷偷写的缘故，上课写 leetcode，总归是没有在宿舍里面写要更加能够集中精力。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库第三次上机实验报告</title>
    <link href="/2021/12/08/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%B8%89%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <url>/2021/12/08/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%B8%89%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="实验九-数据库的完整性设计"><a href="#实验九-数据库的完整性设计" class="headerlink" title="实验九 数据库的完整性设计"></a>实验九 数据库的完整性设计</h1><h2 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>熟练掌握使用 Navicat 和 Transact-SQL 语言两种方法创建、修改和删除表。掌握管理表的有关系统存储过程。</p><h2 id="二、实验内容"><a href="#二、实验内容" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、利用 Navicat 创建满足以下要求的数据库：① 数据库存在于连接 MySQL 中；② 数据库名称为 xsgl； ③ 字符集选择 utf8–UTF-8 Unicode；排序规则选择 utf8_general_ci。</p><p><img src="https://i.imgur.com/ngvRIPT.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> xsgl<br><span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8<br><span class="hljs-keyword">COLLATE</span> utf8_general_ci;<br></code></pre></td></tr></table></figure><p>2、在数据库 xsgl 中，利用 Navicat 和 SQL 语句创建以下表格：</p><p>1）表格名为 xs（学生基本情况表），表格中各个属性的定义如下：</p><p><img src="https://i.imgur.com/yoQt07s.png"></p><p><img src="https://i.imgur.com/vMuggV6.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `xs` (<br>  `xh` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `xm` <span class="hljs-type">char</span>(<span class="hljs-number">8</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `xb` <span class="hljs-type">char</span>(<span class="hljs-number">2</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `nl` tinyint <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `zy` <span class="hljs-type">char</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `jtzz` <span class="hljs-type">char</span>(<span class="hljs-number">50</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span><br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure><p>2）表格名为 kc（课程情况表），表格中各个属性的定义如下：</p><p><img src="https://i.imgur.com/r9GibC9.png"></p><p><img src="https://i.imgur.com/CuE7xbv.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `kc` (<br>  `xh` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `kch` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `kcm` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `xss` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `xf` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `fs` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span><br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure><p>&lt;1&gt;、在 xs 表中定义 xh 为主键。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xs<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY(xh);<br></code></pre></td></tr></table></figure><p>&lt;2&gt;、在 kc 表中定义 xh 和 kch 联合构成主键。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">PRIMARY</span> KEY(xh, kch);<br></code></pre></td></tr></table></figure><p>&lt;3&gt;、定义 kc 表中的 kcm 列满足唯一性约束。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">UNIQUE</span>(kcm);<br></code></pre></td></tr></table></figure><p>&lt;4&gt;、定义 kc 表中的 fs 列默认值为 0。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc<br><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">COLUMN</span> fs <span class="hljs-keyword">SET</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p>&lt;5&gt;、定义 xs 表中的 xb 列的 CHECK 约束“男”或“女”。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> xs<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span> xb<br><span class="hljs-keyword">CHECK</span>(xb <span class="hljs-keyword">in</span> (<span class="hljs-string">&#x27;男&#x27;</span>, <span class="hljs-string">&#x27;女&#x27;</span>));<br></code></pre></td></tr></table></figure><p>参考：<a href="https://stackoverflow.com/questions/62516860/how-to-create-a-check-constraint-to-allow-certain-strings-in-a-table-mysql-8">stackoverflow</a></p><p>&lt;6&gt;、在 xs 表与 kc 表之间定义外键 xh。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc<br><span class="hljs-keyword">ADD</span> <span class="hljs-keyword">CONSTRAINT</span><br><span class="hljs-keyword">FOREIGN</span> KEY (xh) <br><span class="hljs-keyword">REFERENCES</span> xs(xh);<br></code></pre></td></tr></table></figure><p>&lt;7&gt;、以下将创建一个学生—课程数据库，包括学生关系 Student、课程关系 Course 和选修关系 SC：</p><ul><li><p>① 建立学生-课程数据库 xskc，创建 Student 表，并将 Student 表中的 Sno 属性定义为主键。</p><p>  <img src="https://i.imgur.com/Vi05SP7.png"></p><p>  <img src="https://i.imgur.com/3iUAoj8.png"></p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE IF <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">EXISTS</span> xskc<br><span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8<br><span class="hljs-keyword">COLLATE</span> utf8_general_ci;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `student` (<br>    `Sno` <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Sname` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Ssex` <span class="hljs-type">smallint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>    `Sdept` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`Sno`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure></li><li><p>② 创建 Course 表和 SC 表，并将 SC 表中的 Sno, Cno 联合构成主键。</p><p>  <img src="https://i.imgur.com/aa4Ooj7.png"></p><p>  <img src="https://i.imgur.com/lY5HJRm.png"></p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `course` (<br>    `Cno` <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Cname` <span class="hljs-type">char</span>(<span class="hljs-number">40</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Cpno` <span class="hljs-type">char</span>(<span class="hljs-number">40</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>    `Scredit` <span class="hljs-type">smallint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span><br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sc` (<br>    `Sno` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Cno` <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Grade` <span class="hljs-type">smallint</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (`Sno`,`Cno`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure></li><li><p>③ 定义 SC 表中的参照完整性</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `sc` (<br>    `Sno` <span class="hljs-type">char</span>(<span class="hljs-number">9</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Cno` <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>    `Grade` <span class="hljs-type">smallint</span>,<br>    <span class="hljs-keyword">PRIMARY</span> KEY (Sno,Cno),<br>    <span class="hljs-keyword">FOREIGN</span> KEY(Sno) <span class="hljs-keyword">REFERENCES</span> Student(Sno),<br>    <span class="hljs-keyword">FOREIGN</span> KEY(Cno) <span class="hljs-keyword">REFERENCES</span> Course(Cno)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure></li><li><p>④ 显示说明参照完整性的违约处理示例</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> SC<br>(Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>),<br>Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>),<br>Grade <span class="hljs-type">SMALLINT</span>,<br><span class="hljs-keyword">PRIMARY</span> KEY(Sno, Cno),<br><span class="hljs-keyword">FOREIGN</span> KEY(Sno) <span class="hljs-keyword">REFERENCES</span> Student(Sno)<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> CASCADE,<br><span class="hljs-keyword">FOREIGN</span> KEY(Cno) <span class="hljs-keyword">REFERENCES</span> Course(Cno)<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">NO</span> ACTION<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> CASCADE<br>);<br></code></pre></td></tr></table></figure></li><li><p>⑤ 定义 SC 表 Grade 属性不允许为空</p>  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> SC<br>(Sno <span class="hljs-type">char</span>(<span class="hljs-number">9</span>),<br>Cno <span class="hljs-type">char</span>(<span class="hljs-number">4</span>),<br>Grade <span class="hljs-type">SMALLINT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br><span class="hljs-keyword">PRIMARY</span> KEY(Sno, Cno),<br><span class="hljs-keyword">FOREIGN</span> KEY(Sno) <span class="hljs-keyword">REFERENCES</span> Student(Sno)<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> CASCADE<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> CASCADE,<br><span class="hljs-keyword">FOREIGN</span> KEY(Cno) <span class="hljs-keyword">REFERENCES</span> Course(Cno)<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">NO</span> ACTION<br>        <span class="hljs-keyword">ON</span> <span class="hljs-keyword">UPDATE</span> CASCADE<br>);<br></code></pre></td></tr></table></figure></li></ul><h2 id="三、课后练习题"><a href="#三、课后练习题" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、新建名为 SPJ 的数据库。（其中数据表 S、P、J 和 SPJ 的关系模式及其含义见实验八）</p><p>见实验八。</p><p>2、在数据库 SPJ 中，合理地为库中每一个数据表定义主键和外键。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `spj` (<br>  `SNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `PNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `JNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `QTY` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`SNO`,`PNO`,`JNO`),<br>  KEY `PNO` (`PNO`),<br>  KEY `JNO` (`JNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_1` <span class="hljs-keyword">FOREIGN</span> KEY (`SNO`) <span class="hljs-keyword">REFERENCES</span> `s` (`SNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_2` <span class="hljs-keyword">FOREIGN</span> KEY (`PNO`) <span class="hljs-keyword">REFERENCES</span> `p` (`PNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_3` <span class="hljs-keyword">FOREIGN</span> KEY (`JNO`) <span class="hljs-keyword">REFERENCES</span> `j` (`JNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></table></figure><p>3、适当为各数据表及其字段添加约束（唯一性、默认值等）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `s` (<br>  `SNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `SNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `STATUS` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `CITY` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`SNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `p` (<br>  `PNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `PNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `COLOR` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `WEIGHT` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`PNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `j` (<br>  `JNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `JNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `CITY` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`JNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></table></figure><h2 id="四、思考题"><a href="#四、思考题" class="headerlink" title="四、思考题"></a>四、思考题</h2><p>1、使用参考语句创建好 xs 和 kc 两个表之后，语句中对于 xb 列的 CHECK 约束是否起作用？如果未起作用，思考语句通过却未起作用的原因。</p><p>是。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> xs(xh, xm, xb) <span class="hljs-keyword">VALUES</span>(<span class="hljs-number">2021</span>, <span class="hljs-string">&#x27;张飞&#x27;</span>, <span class="hljs-string">&#x27;N&#x27;</span>);<br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">INSERT INTO xs(xh, xm, xb) VALUES(2021, &#39;张飞&#39;, &#39;N&#39;)&gt; 3819 - Check constraint &#39;xb&#39; is violated.&gt; Time: 0.001s</code></pre><p>2、参考语句中参照完整性的违约处理示例“on delete cascade”和“on update cascade”的含义是什么？“on delete no action”又代表什么？</p><p>“on delete cascade”：当删除 REFERENCE 的表中的元组时，同时删除本表中相应的元组。</p><p>“on update cascade”：当更新 REFERENCE 的表中的元组时，同时更新删除本表中相应的元组。</p><p>“on delete no action”：当删除 REFERENCE 的表中元组造成与本表不一致时，拒绝删除。</p><h1 id="实验五-表数据的维护"><a href="#实验五-表数据的维护" class="headerlink" title="实验五 表数据的维护"></a>实验五 表数据的维护</h1><h2 id="一、实验目的-1"><a href="#一、实验目的-1" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>加深对数据安全性的理解，并掌握 Navicat 中有关用户，角色及操作权限的管理方法。</p><h2 id="二、实验内容-1"><a href="#二、实验内容-1" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、在 Navicat 中，管理建立用户和分配用户权限。</p><p>在这里，我们可以发现 root 是 MySQL 最高级别权限的用户，它拥有查看、修改和删除 MySQL 软件中所有数据库的权限。当需要有多个数据库，并且分配给不同的用户使用，多个用户之间只有查看自己对应数据库的权限，不相互干扰, 需要建立多个数据库和用户，给用户设置管理指定数据库的权限。</p><p>操作方法如下：<br>① 右键点击“MySQL”连接，选择“连接属性”，将“保存密码”取消。<br>② 鼠标右键点击“MySQL”连接，选择“创建数据库”，创建名为 xunmei 的数据库，字符集选择 utf8–UTF-8 Unicode 排序规则选择 utf8_general_ci。<br>③ 打开数据库 xunmei 后，点击界面上方的“用户”—“新建用户”—输入用户名“xmuser”、主机“localhost”、密码“1234”—保存（服务器权限自行定义）。<br>④点选新建的用户 xmuser—编辑用户—权限—添加权限–选择数据库 xunmei，添加相应权限（可不全选），如图1.1所示：<br>⑥设置到此完成。为了验证我们的设置是否正确，我们可以用刚才建立的用户 xmuser 和密码 1234 来连接 localhost 主机地址（方法：关闭连接 MySQL，该连接属于最高权限用户 root。我们用新用户新建一个到 localhost 的连接来模拟不同用户使用数据库的过程）。连上后，可使用用户 xmuser 对数据库 xunmei 或其他数据库进行操作，看是否与自己设置的权限相吻合。（可只添加添加少量权限，然后尝试在 xunmei 里进行操作，看是否能成功）。</p><p><img src="https://i.imgur.com/v4Sq9Gv.png"></p><p>按：这里要注意 <code>Server Privileges</code> 和 <code>Privileges</code> 的使用，<code>Server Privileges</code> 的权限是很大的，一般来说，我们只需要操作 <code>Privileges</code>，不然，可能会出现 <code>Privileges</code> 被 <code>Server Privileges</code> 覆盖的情况。</p><p><img src="https://i.imgur.com/yY32p1R.png"></p><h2 id="三、课后练习题-1"><a href="#三、课后练习题-1" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、使用两个不同的用户通过 Navicat 和查询分析器查看 world 数据库中 country、city 两个表的所有数据。  </p><p><img src="https://i.imgur.com/WhMGVDl.png"></p><p><img src="https://i.imgur.com/E2MEF6t.png"></p><p><img src="https://i.imgur.com/DZ6HEo4.png"></p><p><img src="https://i.imgur.com/hNITSae.png"></p><p>2、删除用户 xmuser，尝试新建另一个用户来管理数据库、表等：<br>添加新用户对数据库 world 的权限，比较在有无相关权限的情况之下进行操作的区别：</p><ul><li>①Create。尝试新建表</li><li>②Update。尝试修改表数据或结构</li><li>③ Select。尝试查询表</li><li>④ Alt。尝试修改表</li><li>⑤Drop。尝试删除表</li></ul><p>新建用户 fanyfull，密码 1234。</p><p>有权限的情况下：</p><p><img src="https://i.imgur.com/m1JeNBk.png"></p><p><img src="https://i.imgur.com/GZFrdbd.png"></p><p><img src="https://i.imgur.com/40NogiF.png"></p><p><img src="https://i.imgur.com/PHmdpdM.png"></p><p><img src="https://i.imgur.com/OQepBmO.png"></p><p>没有权限：</p><p><img src="https://i.imgur.com/nwIXhAE.png"></p><h2 id="四、思考题-1"><a href="#四、思考题-1" class="headerlink" title="四、思考题"></a>四、思考题</h2><p>1、解释 10 个数据库操作权限的含义和影响。</p><p><img src="https://i.imgur.com/RhycC2S.png"></p><p>参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/privileges-provided.html">MySQL 8 docs</a></p>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>面向对象系统分析与设计作业三</title>
    <link href="/2021/12/06/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%B8%89/"/>
    <url>/2021/12/06/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%B8%89/</url>
    
    <content type="html"><![CDATA[<h2 id="用例图及用例开发"><a href="#用例图及用例开发" class="headerlink" title="用例图及用例开发"></a>用例图及用例开发</h2><blockquote><p>考查常用的提供共享存储服务的网盘系统，分析其功能设计。为某个大学班级的同学开发一个专业学习资料的共享文件存储系统——“学霸网盘系统”。该系统包括客户端子系统和服务器端子系统两个部分。每位班级同学可以从客户端上传带有内容标注的本地文件，供本班同学下载使用。上传者应确定文件共享的有效时间，其上传文件及其内容标注需经过服务器端的管理员审查后才能被下载。</p><p>1）列举该网盘系统的 3 类参与者，解释每类参与者与系统的相关性；<br>2）假设一个用例是上传文件，再设计 5 个以上的用例；<br>3）设计该网盘系统的较为完整的用例图，简要说明每个用例的功能；<br>4）为其中 5 个用例编写事件流。</p></blockquote><p>1）三类参与者如下：</p><ul><li>Normal user：普通的用户，可以上传本地文件。</li><li>System administrator：系统管理员，负责审查上传到服务器的文件是否合法。</li><li>Repair technician：系统技术人员，负责维护和修理系统。</li></ul><p>2）设计用例如下：</p><ul><li>下载文件</li><li>审查文件</li><li>删除文件</li><li>隐藏文件</li><li>维护系统</li><li>升级系统</li><li>修理系统</li></ul><p>3）设计系统的用例图如下：</p><p><img src="https://i.imgur.com/RyLshm4.png"></p><ul><li>上传文件：普通用户和系统管理员都可以上传文件</li><li>下载文件：普通用户和系统管理员都可以下载文件，普通用户只能下载其他用户分享的公开的文件以及审核通过的文件，系统管理员可以下载所有被上传的文件</li><li>审查文件：系统管理员审核用户上传的文件</li><li>删除文件：普通用户可以删除自己上传的文件，系统管理员可以删除系统的所有用户上传的文件</li><li>隐藏文件：普通用户可以选择将自己上传的文件设置为公开或者私有，系统管理员可以将所有公开的文件设置为私有或隐藏状态</li><li>维护系统：技术人员定期对系统进行维护</li><li>升级系统：技术人员对系统进行升级</li><li>修理系统：系统出故障时，技术人员对其进行维修</li></ul><p>4）编写事件流如下：</p><p>普通用户上传文件：</p><p><img src="https://i.imgur.com/Xzhp8Kj.png"></p><p>普通用户下载文件：</p><p><img src="https://i.imgur.com/MdC2lFx.png"></p><p>普通用户删除文件：</p><p><img src="https://i.imgur.com/q0lh2ON.png"></p><p>升级系统：</p><p><img src="https://i.imgur.com/VsV97tk.png"></p><p>修理系统：</p><p><img src="https://i.imgur.com/nmMODR4.png"></p>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>作业</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>算法4 阅读手记</title>
    <link href="/2021/12/06/%E7%AE%97%E6%B3%954-%E9%98%85%E8%AF%BB%E6%89%8B%E8%AE%B0/"/>
    <url>/2021/12/06/%E7%AE%97%E6%B3%954-%E9%98%85%E8%AF%BB%E6%89%8B%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h1><h2 id="2-4"><a href="#2-4" class="headerlink" title="2.4"></a>2.4</h2><blockquote><p>大多数在下沉排序期间重新插入堆的元素会被直接加入到堆底。Floyd 在 1964 年观察发现，我们正好可以通过免去检查元素是否到达正确位置来节省时间。在下沉中总是直接提升较大的子结点直至到达堆底，然后再使元素上浮到正确的位置。这个想法几乎可以将比较次数减少一半——接近了归并排序所需的比较次数（随机数组）。这种方法需要额外的空间，因此在实际应用中只有当比较操作代价较高时才有用（例如，当我们在将字符串或者其他键值较长类型的元素进行排序时）。</p></blockquote><p>按：</p><p>这里在阅读的过程中一开始有点理解不清。后来想明白了，先看这一句话“大多数在下沉排序期间重新插入堆的元素会被直接加入到堆底。”，所谓堆底，对应数组中就是最右边界的位置，然后是为什么这句话是对的呢？因为本来我们取的就是上一个状体的堆底的元素，根据堆的性质，这个数据应该比较小，所以，它最终应该在的位置还是应该还是在堆的最底层。</p><p>然后，所以这里的方法就是我们在删除头结点(根结点)之后，不必将堆底的元素给提上来，而是一步一步把下一层的结点中较大的结点给提上来，最后一直这样操作到堆的最后一层，这种方法显然也能够达到最终的目的，并且更加省事儿。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algs4</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>优先队列(Priority Queues)</title>
    <link href="/2021/12/06/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97-Priority-Queues/"/>
    <url>/2021/12/06/%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97-Priority-Queues/</url>
    
    <content type="html"><![CDATA[<h1 id="algs4"><a href="#algs4" class="headerlink" title="algs4"></a>algs4</h1><p>目前已经把 algs4 中的优先队列这一节阅读完毕。我改变以前的看法，以前我认为通过 algs4 这本书我是一个算法都学不会，真要学算法还是得看算法导论，这是一年前在看 KMP 算法时的想法，更早之前阅读前几章时我也是这么想的，之前不管是哪一个时段，我都没有把书中的源码给跑起来，加上那个 KMP 算法它讲得确实有点地方有问题，现在我明白了，可能作者的水平真的是很高，所有很多东西他的脑袋里面是清清楚楚的，但是他水平太高了，所以写出来的时候不免思维有些跳跃，这对于我们想要去钻每一个牛角尖的读者来说就有些难搞了。</p><p>好在这个优先队列的部分写得很好，加上我的编程经验的提升，像编译源码之类的问题，是不可能绊住在这个地方的，因此，可以亲手运行得出正确的结果，这也增大了我学习这个算法的欲望。</p><p>至于其他的算法，用到的时候再来看一看，到时再作评价。</p><p>现在来看，这个代码的质量确实是经过千锤百炼的。很结实。</p><h2 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac TopM.java</span><br><span class="hljs-comment"> *  Execution:    java TopM m &lt; input.txt</span><br><span class="hljs-comment"> *  Dependencies: MinPQ.java Transaction.java StdIn.java StdOut.java</span><br><span class="hljs-comment"> *  Data files:   https://algs4.cs.princeton.edu/24pq/tinyBatch.txt</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *  Given an integer m from the command line and an input stream where</span><br><span class="hljs-comment"> *  each line contains a String and a long value, this MinPQ client</span><br><span class="hljs-comment"> *  prints the m lines whose numbers are the highest.</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *  % java TopM 5 &lt; tinyBatch.txt </span><br><span class="hljs-comment"> *  Thompson    2/27/2000  4747.08</span><br><span class="hljs-comment"> *  vonNeumann  2/12/1994  4732.35</span><br><span class="hljs-comment"> *  vonNeumann  1/11/1999  4409.74</span><br><span class="hljs-comment"> *  Hoare       8/18/1992  4381.21</span><br><span class="hljs-comment"> *  vonNeumann  3/26/2002  4121.85</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> algs4;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  The &#123;<span class="hljs-doctag">@code</span> TopM&#125; class provides a client that reads a sequence of</span><br><span class="hljs-comment"> *  transactions from standard input and prints the &lt;em&gt;m&lt;/em&gt; largest ones</span><br><span class="hljs-comment"> *  to standard output. This implementation uses a &#123;<span class="hljs-doctag">@link</span> MinPQ&#125; of size</span><br><span class="hljs-comment"> *  at most &lt;em&gt;m&lt;/em&gt; + 1 to identify the &lt;em&gt;M&lt;/em&gt; largest transactions</span><br><span class="hljs-comment"> *  and a &#123;<span class="hljs-doctag">@link</span> Stack&#125; to output them in the proper order.</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  For additional documentation, see &lt;a href=&quot;https://algs4.cs.princeton.edu/24pq&quot;&gt;Section 2.4&lt;/a&gt;</span><br><span class="hljs-comment"> *  of &lt;i&gt;Algorithms, 4th Edition&lt;/i&gt; by Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Robert Sedgewick</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Kevin Wayne</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">TopM</span> &#123;   <br><br>    <span class="hljs-comment">// This class should not be instantiated.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">TopM</span><span class="hljs-params">()</span> &#123; &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *  Reads a sequence of transactions from standard input; takes a</span><br><span class="hljs-comment">     *  command-line integer m; prints to standard output the m largest</span><br><span class="hljs-comment">     *  transactions in descending order.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args the command-line arguments</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">m</span> <span class="hljs-operator">=</span> Integer.parseInt(args[<span class="hljs-number">0</span>]); <br>        MinPQ&lt;Transaction&gt; pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MinPQ</span>&lt;Transaction&gt;(m+<span class="hljs-number">1</span>);<br><br>        <span class="hljs-keyword">while</span> (StdIn.hasNextLine()) &#123;<br>            <span class="hljs-comment">// Create an entry from the next line and put on the PQ. </span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> StdIn.readLine();<br>            <span class="hljs-type">Transaction</span> <span class="hljs-variable">transaction</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Transaction</span>(line);<br>            pq.insert(transaction); <br><br>            <span class="hljs-comment">// remove minimum if m+1 entries on the PQ</span><br>            <span class="hljs-keyword">if</span> (pq.size() &gt; m) <br>                pq.delMin();<br>        &#125;   <span class="hljs-comment">// top m entries are on the PQ</span><br><br>        <span class="hljs-comment">// print entries on PQ in reverse order</span><br>        Stack&lt;Transaction&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;Transaction&gt;();<br>        <span class="hljs-keyword">for</span> (Transaction transaction : pq)<br>            stack.push(transaction);<br>        <span class="hljs-keyword">for</span> (Transaction transaction : stack)<br>            StdOut.println(transaction);<br>    &#125; <br>&#125; <br><br><br><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Copyright 2002-2020, Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  This file is part of algs4.jar, which accompanies the textbook</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *      Algorithms, 4th edition by Robert Sedgewick and Kevin Wayne,</span><br><span class="hljs-comment"> *      Addison-Wesley Professional, 2011, ISBN 0-321-57351-X.</span><br><span class="hljs-comment"> *      http://algs4.cs.princeton.edu</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is free software: you can redistribute it and/or modify</span><br><span class="hljs-comment"> *  it under the terms of the GNU General Public License as published by</span><br><span class="hljs-comment"> *  the Free Software Foundation, either version 3 of the License, or</span><br><span class="hljs-comment"> *  (at your option) any later version.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is distributed in the hope that it will be useful,</span><br><span class="hljs-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br><span class="hljs-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><br><span class="hljs-comment"> *  GNU General Public License for more details.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  You should have received a copy of the GNU General Public License</span><br><span class="hljs-comment"> *  along with algs4.jar.  If not, see http://www.gnu.org/licenses.</span><br><span class="hljs-comment"> ******************************************************************************/</span><br></code></pre></td></tr></table></figure><p>注意，我们最好把 alg4 包中的所有代码全部编译出来，然后再执行程序。</p><p>然后，在 powershell 中测试用例：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">Get-Content</span> .\tinyBatch.txt | java algs4.TopM <span class="hljs-number">5</span><br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/4u1mJ4T.png"></p><h2 id="初级实现"><a href="#初级实现" class="headerlink" title="初级实现"></a>初级实现</h2><p>随书代码给了一个优先队列的有序数组实现，这里来测试一下。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac OrderedArrayMaxPQ.java</span><br><span class="hljs-comment"> *  Execution:    java OrderedArrayMaxPQ</span><br><span class="hljs-comment"> *  Dependencies: StdOut.java </span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> *  Priority queue implementation with an ordered array.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  Limitations</span><br><span class="hljs-comment"> *  -----------</span><br><span class="hljs-comment"> *   - no array resizing </span><br><span class="hljs-comment"> *   - does not check for overflow or underflow.</span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> exer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">OrderedArrayMaxPQ</span>&lt;Key <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Comparable</span>&lt;Key&gt;&gt; &#123;<br>    <span class="hljs-keyword">private</span> Key[] pq;          <span class="hljs-comment">// elements</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;             <span class="hljs-comment">// number of elements</span><br><br>    <span class="hljs-comment">// set inititial size of heap to hold size elements</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">OrderedArrayMaxPQ</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        pq = (Key[]) (<span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparable</span>[capacity]);<br>        n = <span class="hljs-number">0</span>;<br>    &#125;<br><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123; <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span>;  &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>        &#123; <span class="hljs-keyword">return</span> n;       &#125; <br>    <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">delMax</span><span class="hljs-params">()</span>      &#123; <span class="hljs-keyword">return</span> pq[--n]; &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Key key)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n-<span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">while</span> (i &gt;= <span class="hljs-number">0</span> &amp;&amp; less(key, pq[i])) &#123;<br>            pq[i+<span class="hljs-number">1</span>] = pq[i];<br>            i--;<br>        &#125;<br>        pq[i+<span class="hljs-number">1</span>] = key;<br>        n++;<br>    &#125;<br><br><br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">less</span><span class="hljs-params">(Key v, Key w)</span> &#123;<br>        <span class="hljs-keyword">return</span> v.compareTo(w) &lt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Test routine.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        OrderedArrayMaxPQ&lt;String&gt; pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">OrderedArrayMaxPQ</span>&lt;String&gt;(<span class="hljs-number">10</span>);<br>        pq.insert(<span class="hljs-string">&quot;this&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;is&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;a&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;test&quot;</span>);<br>        <span class="hljs-keyword">while</span> (!pq.isEmpty())<br>            StdOut.println(pq.delMax());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">PS</span> …\myalgs4\exer&gt; java exer.OrderedArrayMaxPQ<br>this<br>test<br>is<br>a<br></code></pre></td></tr></table></figure><p>无序数组实现：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac UnorderedArrayMaxPQ.java</span><br><span class="hljs-comment"> *  Execution:    java UnorderedArrayMaxPQ</span><br><span class="hljs-comment"> *  Dependencies: StdOut.java </span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> *  Priority queue implementation with an unsorted array.</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *  Limitations</span><br><span class="hljs-comment"> *  -----------</span><br><span class="hljs-comment"> *   - no array resizing</span><br><span class="hljs-comment"> *   - does not check for overflow or underflow.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> exer;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">UnorderedArrayMaxPQ</span>&lt;Key <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Comparable</span>&lt;Key&gt;&gt; &#123;<br>    <span class="hljs-keyword">private</span> Key[] pq;      <span class="hljs-comment">// elements</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;         <span class="hljs-comment">// number of elements</span><br><br>    <span class="hljs-comment">// set inititial size of heap to hold size elements</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">UnorderedArrayMaxPQ</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        pq = (Key[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Comparable</span>[capacity];<br>        n = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span>   &#123; <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span>; &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span>          &#123; <span class="hljs-keyword">return</span> n;      &#125;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Key x)</span>  &#123; pq[n++] = x;   &#125;<br><br>    <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">delMax</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">if</span> (less(max, i)) max = i;<br>        exch(max, n-<span class="hljs-number">1</span>);<br><br>        <span class="hljs-keyword">return</span> pq[--n];<br>    &#125;<br><br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">less</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-keyword">return</span> pq[i].compareTo(pq[j]) &lt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exch</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">Key</span> <span class="hljs-variable">swap</span> <span class="hljs-operator">=</span> pq[i];<br>        pq[i] = pq[j];<br>        pq[j] = swap;<br>    &#125;<br><br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Test routine.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        UnorderedArrayMaxPQ&lt;String&gt; pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnorderedArrayMaxPQ</span>&lt;String&gt;(<span class="hljs-number">10</span>);<br>        pq.insert(<span class="hljs-string">&quot;this&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;is&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;a&quot;</span>);<br>        pq.insert(<span class="hljs-string">&quot;test&quot;</span>);<br>        <span class="hljs-keyword">while</span> (!pq.isEmpty()) <br>            StdOut.println(pq.delMax());<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">PS</span> …\myalgs4\exer&gt; java exer.UnorderedArrayMaxPQ<br>this<br>test<br>is<br>a<br></code></pre></td></tr></table></figure><h2 id="基于堆的优先队列"><a href="#基于堆的优先队列" class="headerlink" title="基于堆的优先队列"></a>基于堆的优先队列</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac MaxPQ.java</span><br><span class="hljs-comment"> *  Execution:    java MaxPQ &lt; input.txt</span><br><span class="hljs-comment"> *  Dependencies: StdIn.java StdOut.java</span><br><span class="hljs-comment"> *  Data files:   https://algs4.cs.princeton.edu/24pq/tinyPQ.txt</span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> *  Generic max priority queue implementation with a binary heap.</span><br><span class="hljs-comment"> *  Can be used with a comparator instead of the natural order,</span><br><span class="hljs-comment"> *  but the generic Key type must still be Comparable.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % java MaxPQ &lt; tinyPQ.txt </span><br><span class="hljs-comment"> *  Q X P (6 left on pq)</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  We use a one-based array to simplify parent and child calculations.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  Can be optimized by replacing full exchanges with half exchanges</span><br><span class="hljs-comment"> *  (ala insertion sort).</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> algs4;<br><br><span class="hljs-keyword">import</span> java.util.Comparator;<br><span class="hljs-keyword">import</span> java.util.Iterator;<br><span class="hljs-keyword">import</span> java.util.NoSuchElementException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  The &#123;<span class="hljs-doctag">@code</span> MaxPQ&#125; class represents a priority queue of generic keys.</span><br><span class="hljs-comment"> *  It supports the usual &lt;em&gt;insert&lt;/em&gt; and &lt;em&gt;delete-the-maximum&lt;/em&gt;</span><br><span class="hljs-comment"> *  operations, along with methods for peeking at the maximum key,</span><br><span class="hljs-comment"> *  testing if the priority queue is empty, and iterating through</span><br><span class="hljs-comment"> *  the keys.</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  This implementation uses a &lt;em&gt;binary heap&lt;/em&gt;.</span><br><span class="hljs-comment"> *  The &lt;em&gt;insert&lt;/em&gt; and &lt;em&gt;delete-the-maximum&lt;/em&gt; operations take</span><br><span class="hljs-comment"> *  &amp;Theta;(log &lt;em&gt;n&lt;/em&gt;) amortized time, where &lt;em&gt;n&lt;/em&gt; is the number</span><br><span class="hljs-comment"> *  of elements in the priority queue. This is an amortized bound </span><br><span class="hljs-comment"> *  (and not a worst-case bound) because of array resizing operations.</span><br><span class="hljs-comment"> *  The &lt;em&gt;min&lt;/em&gt;, &lt;em&gt;size&lt;/em&gt;, and &lt;em&gt;is-empty&lt;/em&gt; operations take </span><br><span class="hljs-comment"> *  &amp;Theta;(1) time in the worst case.</span><br><span class="hljs-comment"> *  Construction takes time proportional to the specified capacity or the</span><br><span class="hljs-comment"> *  number of items used to initialize the data structure.</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  For additional documentation, see</span><br><span class="hljs-comment"> *  &lt;a href=&quot;https://algs4.cs.princeton.edu/24pq&quot;&gt;Section 2.4&lt;/a&gt; of</span><br><span class="hljs-comment"> *  &lt;i&gt;Algorithms, 4th Edition&lt;/i&gt; by Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Robert Sedgewick</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Kevin Wayne</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@param</span> &lt;Key&gt; the generic type of key on this priority queue</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">MaxPQ</span>&lt;Key&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterable</span>&lt;Key&gt; &#123;<br>    <span class="hljs-keyword">private</span> Key[] pq;                    <span class="hljs-comment">// store items at indices 1 to n</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> n;                       <span class="hljs-comment">// number of items on priority queue</span><br>    <span class="hljs-keyword">private</span> Comparator&lt;Key&gt; comparator;  <span class="hljs-comment">// optional comparator</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Initializes an empty priority queue with the given initial capacity.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  initCapacity the initial capacity of this priority queue</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxPQ</span><span class="hljs-params">(<span class="hljs-type">int</span> initCapacity)</span> &#123;<br>        pq = (Key[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[initCapacity + <span class="hljs-number">1</span>];<br>        n = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Initializes an empty priority queue.</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxPQ</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Initializes an empty priority queue with the given initial capacity,</span><br><span class="hljs-comment">     * using the given comparator.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  initCapacity the initial capacity of this priority queue</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  comparator the order in which to compare the keys</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxPQ</span><span class="hljs-params">(<span class="hljs-type">int</span> initCapacity, Comparator&lt;Key&gt; comparator)</span> &#123;<br>        <span class="hljs-built_in">this</span>.comparator = comparator;<br>        pq = (Key[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[initCapacity + <span class="hljs-number">1</span>];<br>        n = <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Initializes an empty priority queue using the given comparator.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  comparator the order in which to compare the keys</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxPQ</span><span class="hljs-params">(Comparator&lt;Key&gt; comparator)</span> &#123;<br>        <span class="hljs-built_in">this</span>(<span class="hljs-number">1</span>, comparator);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Initializes a priority queue from the array of keys.</span><br><span class="hljs-comment">     * Takes time proportional to the number of keys, using sink-based heap construction.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  keys the array of keys</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">MaxPQ</span><span class="hljs-params">(Key[] keys)</span> &#123;<br>        n = keys.length;<br>        pq = (Key[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[keys.length + <span class="hljs-number">1</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            pq[i+<span class="hljs-number">1</span>] = keys[i];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> n/<span class="hljs-number">2</span>; k &gt;= <span class="hljs-number">1</span>; k--)<br>            sink(k);<br>        <span class="hljs-keyword">assert</span> <span class="hljs-title function_">isMaxHeap</span><span class="hljs-params">()</span>;<br>    &#125;<br>      <br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns true if this priority queue is empty.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> &#123;<span class="hljs-doctag">@code</span> true&#125; if this priority queue is empty;</span><br><span class="hljs-comment">     *         &#123;<span class="hljs-doctag">@code</span> false&#125; otherwise</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isEmpty</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns the number of keys on this priority queue.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> the number of keys on this priority queue</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">size</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> n;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns a largest key on this priority queue.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> a largest key on this priority queue</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> NoSuchElementException if this priority queue is empty</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">max</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>(<span class="hljs-string">&quot;Priority queue underflow&quot;</span>);<br>        <span class="hljs-keyword">return</span> pq[<span class="hljs-number">1</span>];<br>    &#125;<br><br>    <span class="hljs-comment">// resize the underlying array to have the given capacity</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">resize</span><span class="hljs-params">(<span class="hljs-type">int</span> capacity)</span> &#123;<br>        <span class="hljs-keyword">assert</span> capacity &gt; n;<br>        Key[] temp = (Key[]) <span class="hljs-keyword">new</span> <span class="hljs-title class_">Object</span>[capacity];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            temp[i] = pq[i];<br>        &#125;<br>        pq = temp;<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Adds a new key to this priority queue.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span>  x the new key to add to this priority queue</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">insert</span><span class="hljs-params">(Key x)</span> &#123;<br><br>        <span class="hljs-comment">// double size of array if necessary</span><br>        <span class="hljs-keyword">if</span> (n == pq.length - <span class="hljs-number">1</span>) resize(<span class="hljs-number">2</span> * pq.length);<br><br>        <span class="hljs-comment">// add x, and percolate it up to maintain heap invariant</span><br>        pq[++n] = x;<br>        swim(n);<br>        <span class="hljs-keyword">assert</span> <span class="hljs-title function_">isMaxHeap</span><span class="hljs-params">()</span>;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Removes and returns a largest key on this priority queue.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> a largest key on this priority queue</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@throws</span> NoSuchElementException if this priority queue is empty</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">delMax</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (isEmpty()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>(<span class="hljs-string">&quot;Priority queue underflow&quot;</span>);<br>        <span class="hljs-type">Key</span> <span class="hljs-variable">max</span> <span class="hljs-operator">=</span> pq[<span class="hljs-number">1</span>];<br>        exch(<span class="hljs-number">1</span>, n--);<br>        sink(<span class="hljs-number">1</span>);<br>        pq[n+<span class="hljs-number">1</span>] = <span class="hljs-literal">null</span>;     <span class="hljs-comment">// to avoid loitering and help with garbage collection</span><br>        <span class="hljs-keyword">if</span> ((n &gt; <span class="hljs-number">0</span>) &amp;&amp; (n == (pq.length - <span class="hljs-number">1</span>) / <span class="hljs-number">4</span>)) resize(pq.length / <span class="hljs-number">2</span>);<br>        <span class="hljs-keyword">assert</span> <span class="hljs-title function_">isMaxHeap</span><span class="hljs-params">()</span>;<br>        <span class="hljs-keyword">return</span> max;<br>    &#125;<br><br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions to restore the heap invariant.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">swim</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">while</span> (k &gt; <span class="hljs-number">1</span> &amp;&amp; less(k/<span class="hljs-number">2</span>, k)) &#123;<br>            exch(k, k/<span class="hljs-number">2</span>);<br>            k = k/<span class="hljs-number">2</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sink</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">2</span>*k &lt;= n) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*k;<br>            <span class="hljs-keyword">if</span> (j &lt; n &amp;&amp; less(j, j+<span class="hljs-number">1</span>)) j++;<br>            <span class="hljs-keyword">if</span> (!less(k, j)) <span class="hljs-keyword">break</span>;<br>            exch(k, j);<br>            k = j;<br>        &#125;<br>    &#125;<br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions for compares and swaps.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">less</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-keyword">if</span> (comparator == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> ((Comparable&lt;Key&gt;) pq[i]).compareTo(pq[j]) &lt; <span class="hljs-number">0</span>;<br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123;<br>            <span class="hljs-keyword">return</span> comparator.compare(pq[i], pq[j]) &lt; <span class="hljs-number">0</span>;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exch</span><span class="hljs-params">(<span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">Key</span> <span class="hljs-variable">swap</span> <span class="hljs-operator">=</span> pq[i];<br>        pq[i] = pq[j];<br>        pq[j] = swap;<br>    &#125;<br><br>    <span class="hljs-comment">// is pq[1..n] a max heap?</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isMaxHeap</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br>            <span class="hljs-keyword">if</span> (pq[i] == <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> n+<span class="hljs-number">1</span>; i &lt; pq.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (pq[i] != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        &#125;<br>        <span class="hljs-keyword">if</span> (pq[<span class="hljs-number">0</span>] != <span class="hljs-literal">null</span>) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> isMaxHeapOrdered(<span class="hljs-number">1</span>);<br>    &#125;<br><br>    <span class="hljs-comment">// is subtree of pq[1..n] rooted at k a max heap?</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isMaxHeapOrdered</span><span class="hljs-params">(<span class="hljs-type">int</span> k)</span> &#123;<br>        <span class="hljs-keyword">if</span> (k &gt; n) <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*k;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*k + <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">if</span> (left  &lt;= n &amp;&amp; less(k, left))  <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">if</span> (right &lt;= n &amp;&amp; less(k, right)) <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>        <span class="hljs-keyword">return</span> isMaxHeapOrdered(left) &amp;&amp; isMaxHeapOrdered(right);<br>    &#125;<br><br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Iterator.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Returns an iterator that iterates over the keys on this priority queue</span><br><span class="hljs-comment">     * in descending order.</span><br><span class="hljs-comment">     * The iterator doesn&#x27;t implement &#123;<span class="hljs-doctag">@code</span> remove()&#125; since it&#x27;s optional.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span> an iterator that iterates over the keys in descending order</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> Iterator&lt;Key&gt; <span class="hljs-title function_">iterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HeapIterator</span>();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">HeapIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span>&lt;Key&gt; &#123;<br><br>        <span class="hljs-comment">// create a new pq</span><br>        <span class="hljs-keyword">private</span> MaxPQ&lt;Key&gt; copy;<br><br>        <span class="hljs-comment">// add all items to copy of heap</span><br>        <span class="hljs-comment">// takes linear time since already in heap order so no keys move</span><br>        <span class="hljs-keyword">public</span> <span class="hljs-title function_">HeapIterator</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">if</span> (comparator == <span class="hljs-literal">null</span>) copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxPQ</span>&lt;Key&gt;(size());<br>            <span class="hljs-keyword">else</span>                    copy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxPQ</span>&lt;Key&gt;(size(), comparator);<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">1</span>; i &lt;= n; i++)<br>                copy.insert(pq[i]);<br>        &#125;<br><br>        <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span>  &#123; <span class="hljs-keyword">return</span> !copy.isEmpty();                     &#125;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">()</span>      &#123; <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">UnsupportedOperationException</span>();  &#125;<br><br>        <span class="hljs-keyword">public</span> Key <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>            <span class="hljs-keyword">if</span> (!hasNext()) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">NoSuchElementException</span>();<br>            <span class="hljs-keyword">return</span> copy.delMax();<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Unit tests the &#123;<span class="hljs-doctag">@code</span> MaxPQ&#125; data type.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args the command-line arguments</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        MaxPQ&lt;String&gt; pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">MaxPQ</span>&lt;String&gt;();<br>        <span class="hljs-keyword">while</span> (!StdIn.isEmpty()) &#123;<br>            <span class="hljs-type">String</span> <span class="hljs-variable">item</span> <span class="hljs-operator">=</span> StdIn.readString();<br>            <span class="hljs-keyword">if</span> (!item.equals(<span class="hljs-string">&quot;-&quot;</span>)) pq.insert(item);<br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!pq.isEmpty()) StdOut.print(pq.delMax() + <span class="hljs-string">&quot; &quot;</span>);<br>        &#125;<br>        StdOut.println(<span class="hljs-string">&quot;(&quot;</span> + pq.size() + <span class="hljs-string">&quot; left on pq)&quot;</span>);<br>    &#125;<br><br>&#125;<br><br><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Copyright 2002-2020, Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  This file is part of algs4.jar, which accompanies the textbook</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *      Algorithms, 4th edition by Robert Sedgewick and Kevin Wayne,</span><br><span class="hljs-comment"> *      Addison-Wesley Professional, 2011, ISBN 0-321-57351-X.</span><br><span class="hljs-comment"> *      http://algs4.cs.princeton.edu</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is free software: you can redistribute it and/or modify</span><br><span class="hljs-comment"> *  it under the terms of the GNU General Public License as published by</span><br><span class="hljs-comment"> *  the Free Software Foundation, either version 3 of the License, or</span><br><span class="hljs-comment"> *  (at your option) any later version.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is distributed in the hope that it will be useful,</span><br><span class="hljs-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br><span class="hljs-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><br><span class="hljs-comment"> *  GNU General Public License for more details.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  You should have received a copy of the GNU General Public License</span><br><span class="hljs-comment"> *  along with algs4.jar.  If not, see http://www.gnu.org/licenses.</span><br><span class="hljs-comment"> ******************************************************************************/</span><br></code></pre></td></tr></table></figure><h2 id="使用优先队列的多项归并"><a href="#使用优先队列的多项归并" class="headerlink" title="使用优先队列的多项归并"></a>使用优先队列的多项归并</h2><p>这里需要重点理解一下，我复习这个优先队列的目的其实就是在做 LeetCode 的第 22 题时，那个题目需要用到这个数据结构，然后，这里的多项归并所用到的思想和解那一道题的思路是一模一样的。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac Multiway.java</span><br><span class="hljs-comment"> *  Execution:    java Multiway input1.txt input2.txt input3.txt ...</span><br><span class="hljs-comment"> *  Dependencies: IndexMinPQ.java In.java StdOut.java</span><br><span class="hljs-comment"> *  Data files:   https://algs4.cs.princeton.edu/24pq/m1.txt</span><br><span class="hljs-comment"> *                https://algs4.cs.princeton.edu/24pq/m2.txt</span><br><span class="hljs-comment"> *                https://algs4.cs.princeton.edu/24pq/m3.txt</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *  Merges together the sorted input stream given as command-line arguments</span><br><span class="hljs-comment"> *  into a single sorted output stream on standard output.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % more m1.txt </span><br><span class="hljs-comment"> *  A B C F G I I Z</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % more m2.txt </span><br><span class="hljs-comment"> *  B D H P Q Q</span><br><span class="hljs-comment"> * </span><br><span class="hljs-comment"> *  % more m3.txt </span><br><span class="hljs-comment"> *  A B E F J N</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % java Multiway m1.txt m2.txt m3.txt </span><br><span class="hljs-comment"> *  A A B B B C D E F F G H I I J N P Q Q Z </span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> algs4;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  The &#123;<span class="hljs-doctag">@code</span> Multiway&#125; class provides a client for reading in several</span><br><span class="hljs-comment"> *  sorted text files and merging them together into a single sorted</span><br><span class="hljs-comment"> *  text stream.</span><br><span class="hljs-comment"> *  This implementation uses a &#123;<span class="hljs-doctag">@link</span> IndexMinPQ&#125; to perform the multiway</span><br><span class="hljs-comment"> *  merge. </span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  For additional documentation, see &lt;a href=&quot;https://algs4.cs.princeton.edu/24pq&quot;&gt;Section 2.4&lt;/a&gt;</span><br><span class="hljs-comment"> *  of &lt;i&gt;Algorithms, 4th Edition&lt;/i&gt; by Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Robert Sedgewick</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Kevin Wayne</span><br><span class="hljs-comment"> */</span><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Multiway</span> &#123; <br><br>    <span class="hljs-comment">// This class should not be instantiated.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Multiway</span><span class="hljs-params">()</span> &#123; &#125;<br><br>    <span class="hljs-comment">// merge together the sorted input streams and write the sorted result to standard output</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">merge</span><span class="hljs-params">(In[] streams)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> streams.length;<br>        IndexMinPQ&lt;String&gt; pq = <span class="hljs-keyword">new</span> <span class="hljs-title class_">IndexMinPQ</span>&lt;String&gt;(n);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            <span class="hljs-keyword">if</span> (!streams[i].isEmpty())<br>                pq.insert(i, streams[i].readString());<br><br>        <span class="hljs-comment">// Extract and print min and read next from its stream. </span><br>        <span class="hljs-keyword">while</span> (!pq.isEmpty()) &#123;<br>            StdOut.print(pq.minKey() + <span class="hljs-string">&quot; &quot;</span>);<br>            <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> pq.delMin();<br>            <span class="hljs-keyword">if</span> (!streams[i].isEmpty())<br>                pq.insert(i, streams[i].readString());<br>        &#125;<br>        StdOut.println();<br>    &#125;<br><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     *  Reads sorted text files specified as command-line arguments;</span><br><span class="hljs-comment">     *  merges them together into a sorted output; and writes</span><br><span class="hljs-comment">     *  the results to standard output.</span><br><span class="hljs-comment">     *  Note: this client does not check that the input files are sorted.</span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args the command-line arguments</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> args.length;<br>        In[] streams = <span class="hljs-keyword">new</span> <span class="hljs-title class_">In</span>[n];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++)<br>            streams[i] = <span class="hljs-keyword">new</span> <span class="hljs-title class_">In</span>(args[i]);<br>        merge(streams);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Copyright 2002-2020, Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  This file is part of algs4.jar, which accompanies the textbook</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *      Algorithms, 4th edition by Robert Sedgewick and Kevin Wayne,</span><br><span class="hljs-comment"> *      Addison-Wesley Professional, 2011, ISBN 0-321-57351-X.</span><br><span class="hljs-comment"> *      http://algs4.cs.princeton.edu</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is free software: you can redistribute it and/or modify</span><br><span class="hljs-comment"> *  it under the terms of the GNU General Public License as published by</span><br><span class="hljs-comment"> *  the Free Software Foundation, either version 3 of the License, or</span><br><span class="hljs-comment"> *  (at your option) any later version.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is distributed in the hope that it will be useful,</span><br><span class="hljs-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br><span class="hljs-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><br><span class="hljs-comment"> *  GNU General Public License for more details.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  You should have received a copy of the GNU General Public License</span><br><span class="hljs-comment"> *  along with algs4.jar.  If not, see http://www.gnu.org/licenses.</span><br><span class="hljs-comment"> ******************************************************************************/</span><br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">java algs4.Multiway .\m1.txt .\m2.txt .\m3.txt<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/yiYnwGf.png"></p><p>这个程序的作用，用这里的 <code>m1.txt</code>、<code>m2.txt</code>、<code>m3.txt</code> 来辅助说明，就是每一次把每一个文件中的最左边的数据取出来，然后从中挑出最小的数据。之后再重复这个过程。最终输出的结果是所有文件中的所有数据得到有序的排列。</p><h2 id="堆排序"><a href="#堆排序" class="headerlink" title="堆排序"></a>堆排序</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Compilation:  javac Heap.java</span><br><span class="hljs-comment"> *  Execution:    java Heap &lt; input.txt</span><br><span class="hljs-comment"> *  Dependencies: StdOut.java StdIn.java</span><br><span class="hljs-comment"> *  Data files:   https://algs4.cs.princeton.edu/24pq/tiny.txt</span><br><span class="hljs-comment"> *                https://algs4.cs.princeton.edu/24pq/words3.txt</span><br><span class="hljs-comment"> *  </span><br><span class="hljs-comment"> *  Sorts a sequence of strings from standard input using heapsort.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % more tiny.txt</span><br><span class="hljs-comment"> *  S O R T E X A M P L E</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % java Heap &lt; tiny.txt</span><br><span class="hljs-comment"> *  A E E L M O P R S T X                 [ one string per line ]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % more words3.txt</span><br><span class="hljs-comment"> *  bed bug dad yes zoo ... all bad yet</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  % java Heap &lt; words3.txt</span><br><span class="hljs-comment"> *  all bad bed bug dad ... yes yet zoo   [ one string per line ]</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> ******************************************************************************/</span><br><br><span class="hljs-keyword">package</span> algs4;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> *  The &#123;<span class="hljs-doctag">@code</span> Heap&#125; class provides a static method to sort an array</span><br><span class="hljs-comment"> *  using &lt;em&gt;heapsort&lt;/em&gt;.</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  This implementation takes &amp;Theta;(&lt;em&gt;n&lt;/em&gt; log &lt;em&gt;n&lt;/em&gt;) time</span><br><span class="hljs-comment"> *  to sort any array of length &lt;em&gt;n&lt;/em&gt; (assuming comparisons</span><br><span class="hljs-comment"> *  take constant time). It makes at most </span><br><span class="hljs-comment"> *  2 &lt;em&gt;n&lt;/em&gt; log&lt;sub&gt;2&lt;/sub&gt; &lt;em&gt;n&lt;/em&gt; compares.</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  This sorting algorithm is not stable.</span><br><span class="hljs-comment"> *  It uses &amp;Theta;(1) extra memory (not including the input array).</span><br><span class="hljs-comment"> *  &lt;p&gt;</span><br><span class="hljs-comment"> *  For additional documentation, see</span><br><span class="hljs-comment"> *  &lt;a href=&quot;https://algs4.cs.princeton.edu/24pq&quot;&gt;Section 2.4&lt;/a&gt; of</span><br><span class="hljs-comment"> *  &lt;i&gt;Algorithms, 4th Edition&lt;/i&gt; by Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Robert Sedgewick</span><br><span class="hljs-comment"> *  <span class="hljs-doctag">@author</span> Kevin Wayne</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Heap</span> &#123;<br><br>    <span class="hljs-comment">// This class should not be instantiated.</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Heap</span><span class="hljs-params">()</span> &#123; &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Rearranges the array in ascending order, using the natural order.</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> pq the array to be sorted</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sort</span><span class="hljs-params">(Comparable[] pq)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">n</span> <span class="hljs-operator">=</span> pq.length;<br><br>        <span class="hljs-comment">// heapify phase</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> n/<span class="hljs-number">2</span>; k &gt;= <span class="hljs-number">1</span>; k--)<br>            sink(pq, k, n);<br><br>        <span class="hljs-comment">// sortdown phase</span><br>        <span class="hljs-type">int</span> <span class="hljs-variable">k</span> <span class="hljs-operator">=</span> n;<br>        <span class="hljs-keyword">while</span> (k &gt; <span class="hljs-number">1</span>) &#123;<br>            exch(pq, <span class="hljs-number">1</span>, k--);<br>            sink(pq, <span class="hljs-number">1</span>, k);<br>        &#125;<br>    &#125;<br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions to restore the heap invariant.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">sink</span><span class="hljs-params">(Comparable[] pq, <span class="hljs-type">int</span> k, <span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-keyword">while</span> (<span class="hljs-number">2</span>*k &lt;= n) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> <span class="hljs-number">2</span>*k;<br>            <span class="hljs-keyword">if</span> (j &lt; n &amp;&amp; less(pq, j, j+<span class="hljs-number">1</span>)) j++;<br>            <span class="hljs-keyword">if</span> (!less(pq, k, j)) <span class="hljs-keyword">break</span>;<br>            exch(pq, k, j);<br>            k = j;<br>        &#125;<br>    &#125;<br><br>   <span class="hljs-comment">/***************************************************************************</span><br><span class="hljs-comment">    * Helper functions for comparisons and swaps.</span><br><span class="hljs-comment">    * Indices are &quot;off-by-one&quot; to support 1-based indexing.</span><br><span class="hljs-comment">    ***************************************************************************/</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">less</span><span class="hljs-params">(Comparable[] pq, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-keyword">return</span> pq[i-<span class="hljs-number">1</span>].compareTo(pq[j-<span class="hljs-number">1</span>]) &lt; <span class="hljs-number">0</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">exch</span><span class="hljs-params">(Object[] pq, <span class="hljs-type">int</span> i, <span class="hljs-type">int</span> j)</span> &#123;<br>        <span class="hljs-type">Object</span> <span class="hljs-variable">swap</span> <span class="hljs-operator">=</span> pq[i-<span class="hljs-number">1</span>];<br>        pq[i-<span class="hljs-number">1</span>] = pq[j-<span class="hljs-number">1</span>];<br>        pq[j-<span class="hljs-number">1</span>] = swap;<br>    &#125;<br><br>    <span class="hljs-comment">// print array to standard output</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">show</span><span class="hljs-params">(Comparable[] a)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; a.length; i++) &#123;<br>            StdOut.println(a[i]);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * Reads in a sequence of strings from standard input; heapsorts them; </span><br><span class="hljs-comment">     * and prints them to standard output in ascending order. </span><br><span class="hljs-comment">     *</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> args the command-line arguments</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        String[] a = StdIn.readAllStrings();<br>        Heap.sort(a);<br>        show(a);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">/******************************************************************************</span><br><span class="hljs-comment"> *  Copyright 2002-2020, Robert Sedgewick and Kevin Wayne.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  This file is part of algs4.jar, which accompanies the textbook</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *      Algorithms, 4th edition by Robert Sedgewick and Kevin Wayne,</span><br><span class="hljs-comment"> *      Addison-Wesley Professional, 2011, ISBN 0-321-57351-X.</span><br><span class="hljs-comment"> *      http://algs4.cs.princeton.edu</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is free software: you can redistribute it and/or modify</span><br><span class="hljs-comment"> *  it under the terms of the GNU General Public License as published by</span><br><span class="hljs-comment"> *  the Free Software Foundation, either version 3 of the License, or</span><br><span class="hljs-comment"> *  (at your option) any later version.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  algs4.jar is distributed in the hope that it will be useful,</span><br><span class="hljs-comment"> *  but WITHOUT ANY WARRANTY; without even the implied warranty of</span><br><span class="hljs-comment"> *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span><br><span class="hljs-comment"> *  GNU General Public License for more details.</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> *  You should have received a copy of the GNU General Public License</span><br><span class="hljs-comment"> *  along with algs4.jar.  If not, see http://www.gnu.org/licenses.</span><br><span class="hljs-comment"> ******************************************************************************/</span><br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/11UrtNw.png"></p><p><img src="https://i.imgur.com/54YwiS5.png"></p><p><img src="https://i.imgur.com/YaVzwJl.png"></p>]]></content>
    
    
    <categories>
      
      <category>数据结构与算法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>algs4</tag>
      
      <tag>数据结构与算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Java 烹饪笔记</title>
    <link href="/2021/12/04/Java-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/12/04/Java-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="小碎点"><a href="#小碎点" class="headerlink" title="小碎点"></a>小碎点</h1><blockquote><p>命令行查看 Java 版本。</p></blockquote><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">java -<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><blockquote><p>更改 PowerShell(或 CMD)中 javac 的输出为英文。</p></blockquote><p>在环境变量中添加这么一行：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf">JAVA_TOOL_OPTIONS<span class="hljs-operator">=</span>-Duser.language<span class="hljs-operator">=</span>en<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/iRR60c0.png"></p><p>效果：</p><p><img src="https://i.imgur.com/znxxOjY.png"></p><p>参考：<a href="https://blog.csdn.net/icyfox_bupt/article/details/109499926">CSDN</a></p><blockquote><p>在 PowerShell 中编译很多个 java 文件。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">javac <span class="hljs-string">&quot;@sources.txt&quot;</span> <span class="hljs-literal">-encoding</span> UTF8<br></code></pre></td></tr></table></figure><blockquote><p><code>error: unmappable character for encoding GBK</code> 问题。</p></blockquote><p>编码问题，解决方法：</p><p>加上 <code>-encoding UTF8</code> 选项即可。</p><h1 id="在-Windows-的-PowerShell-中编译和运行-Java-的代码"><a href="#在-Windows-的-PowerShell-中编译和运行-Java-的代码" class="headerlink" title="在 Windows 的 PowerShell 中编译和运行 Java 的代码"></a>在 Windows 的 PowerShell 中编译和运行 Java 的代码</h1><p>这里以我编译 algs4 源码的经历为例。</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>烹饪</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu 烹饪笔记</title>
    <link href="/2021/12/04/Ubuntu-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/12/04/Ubuntu-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="一些常用的-Linux-命令"><a href="#一些常用的-Linux-命令" class="headerlink" title="一些常用的 Linux 命令"></a>一些常用的 Linux 命令</h1><h2 id="解压缩"><a href="#解压缩" class="headerlink" title="解压缩"></a>解压缩</h2><p>对于 <code>.tar.gz</code> 的解压缩：</p><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs nginx"><span class="hljs-attribute">tar</span> -zxvf filename.tar.gz<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.cnblogs.com/cursorhu/p/5891699.html">https://www.cnblogs.com/cursorhu/p/5891699.html</a></p><h1 id="一些快捷键"><a href="#一些快捷键" class="headerlink" title="一些快捷键"></a>一些快捷键</h1><blockquote><p>截图快捷键。</p></blockquote><ul><li><code>PrtSc</code>：全屏捕捉，截取的图片保存在 Pictures 目录下。</li><li><code>Shift + PrtSc</code>：自由选定区域，截取的图片保存在 Pictures 目录下。</li><li><code>Alt + PtrSc</code>：截图当前窗口，截取的图片保存在 Pictures 目录下。</li><li><code>Ctrl + PrtSc</code>：全屏截图，保存到剪贴板中。</li><li><code>Ctrl + Shift + PrtSc</code>：自由选定区域，截取的图片保存到剪贴板中。</li><li><code>Ctrl + Alt + PrtSc</code>：截取当前窗口，截取的图片保存到剪贴板中。</li></ul><h1 id="一些常用软件的存放位置"><a href="#一些常用软件的存放位置" class="headerlink" title="一些常用软件的存放位置"></a>一些常用软件的存放位置</h1><ol><li>Android Studio: &#x2F;opt</li></ol><h1 id="在后台运行一个命令"><a href="#在后台运行一个命令" class="headerlink" title="在后台运行一个命令"></a>在后台运行一个命令</h1><p>同时，这意味着关掉 shell 那个命令将会继续运行。</p><p>我把它用来运行我的 <code>clash</code>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ setsid ./clash<br></code></pre></td></tr></table></figure><p>参考：<a href="https://askubuntu.com/questions/106351/running-programs-in-the-background-from-terminal">askubuntu</a></p><h1 id="笔记本设置合盖不休眠"><a href="#笔记本设置合盖不休眠" class="headerlink" title="笔记本设置合盖不休眠"></a>笔记本设置合盖不休眠</h1><p>我的笔记本除了一个问题，装的版本是 Ubuntu 21.10，然后每一次合上盖子之后，然后再打开，都会出现无法唤醒的情况，有时候能够唤醒，但是要花费好几分钟，无奈之下，只能设置合上盖子之后也让它不休眠了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo vim /etc/systemd/logind.conf<br></code></pre></td></tr></table></figure><p>然后修改这一行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">HandleLidSwitch=<span class="hljs-built_in">suspend</span></span><br></code></pre></td></tr></table></figure><p>将注释符号去掉，然后修改为：</p><figure class="highlight abnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs abnf"><span class="hljs-attribute">HandleLidSwitch</span><span class="hljs-operator">=</span>ignore<br></code></pre></td></tr></table></figure><p>然后重启系统。</p><p>按：似乎也可以重启服务，但是我没有试过：</p><figure class="highlight nsis"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs nsis">sudo restart <span class="hljs-params">system</span>d-logind  <br><span class="hljs-comment"># 或者</span><br>service <span class="hljs-params">system</span>d-logind restart<br><span class="hljs-comment"># 或者</span><br>sudo shutdown -r now<br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.jianshu.com/p/3fe469fc60c9">jianshu</a></p><h1 id="关闭系统的动画"><a href="#关闭系统的动画" class="headerlink" title="关闭系统的动画"></a>关闭系统的动画</h1><p>由于我这个 Ubuntu 21.10 动画系统出了 Bug，即原生的动画的坐标对准，另一台笔记本上的 Ubuntu 20.04 还是好好的。无奈之下，只好关掉这个动画。</p><p>在 bash 中执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gsettings <span class="hljs-built_in">set</span> org.gnome.desktop.interface enable-animations <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>这样就已经关闭了。</p><p>如果想要重新开启动画，执行如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ gsettings <span class="hljs-built_in">set</span> org.gnome.desktop.interface enable-animations <span class="hljs-literal">true</span><br></code></pre></td></tr></table></figure><p>参考：<a href="https://www.imaegoo.com/2021/disable-ubuntu-animation/">iMaeGoo</a></p><h1 id="安装-java8"><a href="#安装-java8" class="headerlink" title="安装 java8"></a>安装 java8</h1><p>执行命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo apt install openjdk-8-jdk<br></code></pre></td></tr></table></figure><p>安装完后，检查 java 版本：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ java -version<br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">openjdk version &quot;1.8.0_302&quot;OpenJDK Runtime Environment (build 1.8.0_302-8u302-b08-0ubuntu2-b08)OpenJDK 64-Bit Server VM (build 25.302-b08, mixed mode)</code></pre>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL 烹饪笔记</title>
    <link href="/2021/12/04/MySQL-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/12/04/MySQL-%E7%83%B9%E9%A5%AA%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>这里的学习过程主要来自于此网站：<a href="https://www.mysqltutorial.org/">https://www.mysqltutorial.org/</a>，以前读过什么《MySQL 必知必会》，现在在学数据库系统概论这门课，比起这个时新的网站，其时效性还是差了些，更重要的是，目前看来，这个网站的教程质量很好，并且有示例的数据库，这个示例的数据库的质量也很好。</p><p>数据库的脚本我复整了一份 gist：<a href="https://gist.github.com/fanlumaster/128af90a3f35cead9ca7905dfd393bb9">mysqlsampledatabase</a></p><p>这个脚本可以直接复制到 Navicat 中去执行，或者利用 Navicat 导入 sql 脚本。</p><p>我目前的数据库版本是 MySQL 8.0.25，可以把脚本复制到 Navicat 中去执行，没有出现问题。</p><p><img src="https://i.imgur.com/MVO1yaC.png"></p><h1 id="MySQL-SubQuery"><a href="#MySQL-SubQuery" class="headerlink" title="MySQL SubQuery"></a>MySQL SubQuery</h1><p><a href="https://www.mysqltutorial.org/mysql-subquery/">https://www.mysqltutorial.org/mysql-subquery/</a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>lastName, firstName<br><span class="hljs-keyword">FROM</span><br>employees<br><span class="hljs-keyword">WHERE</span><br>officeCode <span class="hljs-keyword">IN</span><br>(<br>    <span class="hljs-keyword">SELECT</span> <br>    officeCode<br>    <span class="hljs-keyword">FROM</span><br>    offices<br>    <span class="hljs-keyword">WHERE</span><br>    country <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;USA&#x27;</span><br>);<br></code></pre></td></tr></table></figure><p>在这个例子中：</p><ul><li>子查询返回所有位于美国的办公室的 <em>office codes</em>。</li><li>外面的查询 select 在子查询中查询到的办公室工作的员工的 lastName 和 firstName。</li></ul><p><img src="https://i.imgur.com/rOIRltd.png"></p><p>然后就是执行一下几个示例。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    customerNumber, <br>    checkNumber, <br>    amount<br><span class="hljs-keyword">FROM</span><br>    payments<br><span class="hljs-keyword">WHERE</span><br>    amount <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(amount) <span class="hljs-keyword">FROM</span> payments);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/8HOMZ6L.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    customerNumber, <br>    checkNumber, <br>    amount<br><span class="hljs-keyword">FROM</span><br>    payments<br><span class="hljs-keyword">WHERE</span><br>    amount <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <br>            <span class="hljs-built_in">AVG</span>(amount)<br>        <span class="hljs-keyword">FROM</span><br>            payments);<br></code></pre></td></tr></table></figure><p>纠正一个错误的认识：我之前看的不认真，以为可以独立的子查询一定是先于外查询执行的，实际上人家并没有这么说，只有当用到 <code>IN</code> 操作符时，才会这样。</p><h1 id="SELECT"><a href="#SELECT" class="headerlink" title="SELECT"></a>SELECT</h1><h1 id="ORDER-BY"><a href="#ORDER-BY" class="headerlink" title="ORDER BY"></a>ORDER BY</h1><h1 id="WHERE"><a href="#WHERE" class="headerlink" title="WHERE"></a>WHERE</h1><h1 id="SELECT-DISTINCT"><a href="#SELECT-DISTINCT" class="headerlink" title="SELECT DISTINCT"></a>SELECT DISTINCT</h1><h1 id="AND"><a href="#AND" class="headerlink" title="AND"></a>AND</h1><h1 id="OR"><a href="#OR" class="headerlink" title="OR"></a>OR</h1><h1 id="IN"><a href="#IN" class="headerlink" title="IN"></a>IN</h1><h1 id="BETWEEN"><a href="#BETWEEN" class="headerlink" title="BETWEEN"></a>BETWEEN</h1><h1 id="LIKE"><a href="#LIKE" class="headerlink" title="LIKE"></a>LIKE</h1><h1 id="LIMIT"><a href="#LIMIT" class="headerlink" title="LIMIT"></a>LIMIT</h1><h1 id="IS-NULL"><a href="#IS-NULL" class="headerlink" title="IS NULL"></a>IS NULL</h1><h1 id="Table-Column-Aliases"><a href="#Table-Column-Aliases" class="headerlink" title="Table &amp; Column Aliases"></a>Table &amp; Column Aliases</h1><h1 id="Joins"><a href="#Joins" class="headerlink" title="Joins"></a>Joins</h1><h1 id="INNER-JOIN"><a href="#INNER-JOIN" class="headerlink" title="INNER JOIN"></a>INNER JOIN</h1><h1 id="LEFT-JOIN"><a href="#LEFT-JOIN" class="headerlink" title="LEFT JOIN"></a>LEFT JOIN</h1><h1 id="RIGHT-JOIN"><a href="#RIGHT-JOIN" class="headerlink" title="RIGHT JOIN"></a>RIGHT JOIN</h1><h1 id="Self-Join"><a href="#Self-Join" class="headerlink" title="Self Join"></a>Self Join</h1><h1 id="CROSS-JOIN"><a href="#CROSS-JOIN" class="headerlink" title="CROSS JOIN"></a>CROSS JOIN</h1><h1 id="GROUP-BY"><a href="#GROUP-BY" class="headerlink" title="GROUP BY"></a>GROUP BY</h1><h1 id="HAVING"><a href="#HAVING" class="headerlink" title="HAVING"></a>HAVING</h1><h1 id="ROLLUP"><a href="#ROLLUP" class="headerlink" title="ROLLUP"></a>ROLLUP</h1><h1 id="Subquery"><a href="#Subquery" class="headerlink" title="Subquery"></a>Subquery</h1><p><a href="https://www.mysqltutorial.org/mysql-subquery/">https://www.mysqltutorial.org/mysql-subquery/</a></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span><br>lastName, firstName<br><span class="hljs-keyword">FROM</span><br>employees<br><span class="hljs-keyword">WHERE</span><br>officeCode <span class="hljs-keyword">IN</span><br>(<br>    <span class="hljs-keyword">SELECT</span> <br>    officeCode<br>    <span class="hljs-keyword">FROM</span><br>    offices<br>    <span class="hljs-keyword">WHERE</span><br>    country <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;USA&#x27;</span><br>);<br></code></pre></td></tr></table></figure><p>在这个例子中：</p><ul><li>子查询返回所有位于美国的办公室的 <em>office codes</em>。</li><li>外面的查询 select 在子查询中查询到的办公室工作的员工的 lastName 和 firstName。</li></ul><p><img src="https://i.imgur.com/rOIRltd.png"></p><p>然后就是执行一下几个示例。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    customerNumber, <br>    checkNumber, <br>    amount<br><span class="hljs-keyword">FROM</span><br>    payments<br><span class="hljs-keyword">WHERE</span><br>    amount <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MAX</span>(amount) <span class="hljs-keyword">FROM</span> payments);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/8HOMZ6L.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <br>    customerNumber, <br>    checkNumber, <br>    amount<br><span class="hljs-keyword">FROM</span><br>    payments<br><span class="hljs-keyword">WHERE</span><br>    amount <span class="hljs-operator">&gt;</span> (<span class="hljs-keyword">SELECT</span> <br>            <span class="hljs-built_in">AVG</span>(amount)<br>        <span class="hljs-keyword">FROM</span><br>            payments);<br></code></pre></td></tr></table></figure><p>纠正一个错误的认识：我之前看的不认真，以为可以独立的子查询一定是先于外查询执行的，实际上人家并没有这么说，只有当用到 <code>IN</code> 操作符时，才会这样。</p><h1 id="Derived-Tables"><a href="#Derived-Tables" class="headerlink" title="Derived Tables"></a>Derived Tables</h1><h1 id="EXISTS"><a href="#EXISTS" class="headerlink" title="EXISTS"></a>EXISTS</h1><h1 id="UNION"><a href="#UNION" class="headerlink" title="UNION"></a>UNION</h1><h1 id="MINUS"><a href="#MINUS" class="headerlink" title="MINUS"></a>MINUS</h1><h1 id="INTERSECT"><a href="#INTERSECT" class="headerlink" title="INTERSECT"></a>INTERSECT</h1><h1 id="INSERT"><a href="#INSERT" class="headerlink" title="INSERT"></a>INSERT</h1><h1 id="Insert-Multiple-Rows"><a href="#Insert-Multiple-Rows" class="headerlink" title="Insert Multiple Rows"></a>Insert Multiple Rows</h1><h1 id="INSERT-INTO-SELECT"><a href="#INSERT-INTO-SELECT" class="headerlink" title="INSERT INTO SELECT"></a>INSERT INTO SELECT</h1><h1 id="Insert-On-Duplicate-Key-Update"><a href="#Insert-On-Duplicate-Key-Update" class="headerlink" title="Insert On Duplicate Key Update"></a>Insert On Duplicate Key Update</h1><h1 id="INSERT-IGNORE"><a href="#INSERT-IGNORE" class="headerlink" title="INSERT IGNORE"></a>INSERT IGNORE</h1><h1 id="UPDATE"><a href="#UPDATE" class="headerlink" title="UPDATE"></a>UPDATE</h1><h1 id="UPDATE-JOIN"><a href="#UPDATE-JOIN" class="headerlink" title="UPDATE JOIN"></a>UPDATE JOIN</h1><h1 id="DELETE"><a href="#DELETE" class="headerlink" title="DELETE"></a>DELETE</h1><h1 id="DELETE-JOIN"><a href="#DELETE-JOIN" class="headerlink" title="DELETE JOIN"></a>DELETE JOIN</h1><h1 id="ON-DELETE-CASCADE"><a href="#ON-DELETE-CASCADE" class="headerlink" title="ON DELETE CASCADE"></a>ON DELETE CASCADE</h1><h1 id="REPLACE"><a href="#REPLACE" class="headerlink" title="REPLACE"></a>REPLACE</h1>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python Some Tricks</title>
    <link href="/2021/12/01/Python-Some-Tricks/"/>
    <url>/2021/12/01/Python-Some-Tricks/</url>
    
    <content type="html"><![CDATA[<h1 id="list-的复制"><a href="#list-的复制" class="headerlink" title="list 的复制"></a>list 的复制</h1><p>一般来说，有三种方法：</p><ul><li>直接使用 <code>=</code> 赋值，这种方式的复制相当于给一个盒子贴上两个不同的标签，因此，如果操作任何一个标签，都会对另外一个标签进行数据同步。</li><li>使用 <code>copy()</code> 方法，这种方式属于浅复制(shallow copy)，对于一般的字面值，如数字，不管是修改源 list 还是复制之后的 list，都不会影响另一个。但是，如果修改的是列表中的对象(Object)，那么，这个修改也会反映到另一个 list 中。</li><li>使用 <code>deepcopy()</code> 方法，这种方式属于深复制(deep copy)，不管是一般的字面值，还是对象，对一个 list 修改都不会影响到另外一个 list。</li></ul><p>按：使用 <code>deepcopy()</code> 需要引入 <code>copy</code> 库。</p><p>一些代码示例：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># working of &#x27;=&#x27; and copy()</span><br>list1 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>]<br>list2 = list1<br>list3 = list1.copy()<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list1 == list2?&#x27;</span>, list1 == list2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list1 == list3?&#x27;</span>, list1 == list3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before modified, the data of list1~list3 are as follows&#x27;</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list1 =&#x27;</span>, list1)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list2 =&#x27;</span>, list2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list3 =&#x27;</span>, list3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;then we modify list1, let&#x27;s see what will happen in list1~list3&quot;</span>)<br>list1.append(<span class="hljs-number">5</span>)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list1 =&#x27;</span>, list1)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list2 =&#x27;</span>, list2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;list3 =&#x27;</span>, list3)<br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">list1 == list2? Truelist1 == list3? Truebefore modified, the data of list1~list3 are as followslist1 = [1, 2, 3, 4]list2 = [1, 2, 3, 4]list3 = [1, 2, 3, 4]then we modify list1, let&#39;s see what will happen in list1~list3list1 = [1, 2, 3, 4, 5]list2 = [1, 2, 3, 4, 5]list3 = [1, 2, 3, 4]</code></pre><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># working of list.copy()</span><br><br><span class="hljs-comment"># Initializing list</span><br>lis1 = [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span> ]<br><br><span class="hljs-comment"># Using copy() to create a shallow copy</span><br>lis2 = lis1.copy()<br><br><span class="hljs-comment"># Printing new list</span><br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;The new list created is : &quot;</span> + <span class="hljs-built_in">str</span>(lis2))<br><br><span class="hljs-comment"># Adding new element to new list</span><br>lis2.append(<span class="hljs-number">5</span>)<br><br><span class="hljs-comment"># Printing lists after adding new element</span><br><span class="hljs-comment"># No change in old list</span><br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;The new list after adding new element : &quot;</span> + <span class="hljs-built_in">str</span>(lis2))<br><span class="hljs-built_in">print</span> (<span class="hljs-string">&quot;The old list after adding new element to new list : &quot;</span> + <span class="hljs-built_in">str</span>(lis1))<br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">The new list created is : [1, 2, 3, 4]The new list after adding new element : [1, 2, 3, 4, 5]The old list after adding new element to new list : [1, 2, 3, 4]</code></pre><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># techniques of deep and shallow copy</span><br><span class="hljs-keyword">import</span> copy<br><br><span class="hljs-comment"># Initializing list</span><br>list1 = [ <span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>] , <span class="hljs-number">4</span> ]<br><br><span class="hljs-comment"># all changes are reflected</span><br>list2 = list1<br><br><span class="hljs-comment"># shallow copy - changes to</span><br><span class="hljs-comment"># nested list is reflected,</span><br><span class="hljs-comment"># same as copy.copy(), slicing</span><br><br>list3 = list1.copy()<br><br><span class="hljs-comment"># deep copy - no change is reflected</span><br>list4 = copy.deepcopy(list1)<br><br>list1.append(<span class="hljs-number">5</span>)<br>list1[<span class="hljs-number">1</span>][<span class="hljs-number">1</span>] = <span class="hljs-number">999</span><br><br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;list 1 after modification:\n&quot;</span>, list1)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;list 2 after modification:\n&quot;</span>, list2)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;list 3 after modification:\n&quot;</span>, list3)<br><span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;list 4 after modification:\n&quot;</span>, list4)<br></code></pre></td></tr></table></figure><pre><code class="hljs">list 1 after modification: [1, [2, 999], 4, 5]list 2 after modification: [1, [2, 999], 4, 5]list 3 after modification: [1, [2, 999], 4]list 4 after modification: [1, [2, 3], 4]</code></pre><p>这里其实还有一种方法，即利用切片进行复制：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">list2 = list1[:]<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>面向对象系统分析与设计作业二</title>
    <link href="/2021/12/01/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%BA%8C/"/>
    <url>/2021/12/01/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<blockquote><p>1. A simple digital watch has a display and two buttons to set it, the A button and the B button. The watch has two modes of operation, display time and set time. In the display time mode, the watch displays hours and minutes, separated by a flashing colon. The set time mode has two sub modes, set hours and set minutes. The A button selects modes. Each time it is pressed, the mode advances in the sequence: display, set hours, set minutes, display, etc. Within the sub modes, the B button advances the hours or minutes once each time it is pressed. Buttons must be released before they can generate another event. Prepare a state diagram of the watch.</p></blockquote><p><img src="https://i.imgur.com/1bwMtIO.png"></p><blockquote><p>2. 考察一台闹钟，有如下关于状态和事件的描述，在此基础上，设计此闹钟的状态图。</p></blockquote><pre><code class="hljs">State: AlamRingingDescription: alarm on watch is ringing to indicate target timeEvent sequence that produces the state:    setAlarm(targetTime);     any sequence not including ClearAlarm;     when(currentTime=targetTime)Condition that characterizes the state:    alarm = on, alarm set to targetTime, targetTime &lt;= currentTime &lt;= targetTime + 20 seconds, and no button has been pushed since targetTimeEvents accepted in the state:Event response next state:    When(currentTime=targetTime+20), resetAlarm, normal;    buttonPushed(any button),resetAlarm, normal.</code></pre><p><img src="https://i.imgur.com/piZCNet.png"></p><p><img src="https://i.imgur.com/ZNkqfzJ.png"></p><blockquote><p>3. 考察你常用的某种中文输入法，分析中文输入的状态有哪些？状态之间是如何切换的？做一个状态图。</p></blockquote><p>我常用的是微软输入法。</p><p>状态有：</p><ul><li>起始模式</li><li>正常模式</li><li>简体模式</li><li>繁体模式</li><li>v 模式</li><li>全角模式</li><li>半角模式</li><li>符号(表情) 输入模式</li></ul><p><img src="https://i.imgur.com/8Xj7QD4.png"></p><blockquote><p>4. 在探索一处古老城堡的时候, 你和一个朋友发现了一个书柜, 你怀疑它是通往秘密通道的入口。在你检查书柜的时候, 你的朋友从烛台上拿开一根蜡烛, 发现烛台是入口的控制开关。书柜转了半圈, 把你推向前去, 你和朋友因而分开。你的朋友把蜡烛放回。这次书柜转了一整圈, 你仍然在书柜后面。<br>你的朋友把蜡烛拿开。书柜又开始要转一圈, 但这次你用身体堵住它, 以防它转一整圈。你的朋友递给你蜡烛, 你们俩设法让书柜转回半圈, 但这使你的朋友转到书柜后面, 而你又在书柜前面。你把蜡烛放回。当书柜开始旋转时, 你拿开蜡烛, 书柜在四分之一圈后停止。你和朋友然后就可以继续前往探索。<br>为书柜的控制过程绘制一个状态图, 要符合前面的场景。你应该先做些什么才能最不费事地进去?</p></blockquote><p><img src="https://i.imgur.com/hlRpVuU.png"></p><p>应该先拿起蜡烛，在书架刚开始旋转的时候就把蜡烛放回。</p><blockquote><p>5. 图1中有一个类图，描述的是两人打一局乒乓球。乒乓球的规则如下。在游戏开始时，两名选手先试打以选择发球（ping for serve）——也就是说，他们击球越网，来回打几次。赢家先发球。试打的赢家要连续发5次球。然后另一名选手发5次球。接下来，试打的赢家再发5次。这种交替发球一直持续到选手赢得比赛为止。如果对方得零分（shutout, 11- 0），或者选手达到21分，并且至少有两分领先，那么该选手获胜。如果比分在20-20持平，选手要开始交替单独发球，直到有选手领先2分并获胜。<br>请给出类Player和类 Volley相对应的状态模型。</p></blockquote><p><img src="https://i.imgur.com/ode12uZ.png"></p><p><img src="https://i.imgur.com/NReoqDD.png"></p>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>作业</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PowerShell 使用笔记</title>
    <link href="/2021/11/30/PowerShell-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/11/30/PowerShell-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="小碎点"><a href="#小碎点" class="headerlink" title="小碎点"></a>小碎点</h1><blockquote><p>在 WT 里面使用 PS 的翻页键。</p></blockquote><p><code>Ctrl + Shift + PageUp/PageDown</code>。</p><blockquote><p>复制多个文件到某一文件夹下。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">Copy-Item</span> .\m1.txt, .\m2.txt, .\m3.txt <span class="hljs-literal">-Destination</span> ..\myalgs4\algs4\<br></code></pre></td></tr></table></figure><p>按：主要是分隔符 <code>,</code> 的使用，以及 <code>-Destination</code> 选项的使用。</p><blockquote><p>PowerShell 中无法执行 <code>javac @sources.txt</code> 命令。</p></blockquote><p>替换成：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">javac <span class="hljs-string">&quot;@sources.txt&quot;</span> <span class="hljs-literal">-encoding</span> UTF8<br></code></pre></td></tr></table></figure><p>即可。</p><blockquote><p>在 PowerShell 中编译很多个 java 文件。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">javac <span class="hljs-string">&quot;@sources.txt&quot;</span> <span class="hljs-literal">-encoding</span> UTF8<br></code></pre></td></tr></table></figure><blockquote><p>移动多个文件。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$</span> <span class="hljs-built_in">Move-Item</span> <span class="hljs-literal">-Path</span> .\main.c, .\main.exe <span class="hljs-literal">-Destination</span> .\ex01\<br></code></pre></td></tr></table></figure><p>按：重要的是这里的分隔符不能像在 Linux 中那样是空格。</p><blockquote><p>统计当前目录下的文件个数。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">(<span class="hljs-built_in">Get-ChildItem</span> | <span class="hljs-built_in">Measure-Object</span>).Count<br></code></pre></td></tr></table></figure><blockquote><p>快速删除一个单词。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell">Ctrl + W<br></code></pre></td></tr></table></figure><blockquote><p>PowerShell 显示当前路径。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PWD</span><br></code></pre></td></tr></table></figure><p>或者</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">Get-Location</span><br></code></pre></td></tr></table></figure><blockquote><p>PowerShell 进入上一次的目录。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">cd</span> -<br></code></pre></td></tr></table></figure><blockquote><p>PowerShell 的安装路径。</p></blockquote><pre><code class="hljs">C:\Program Files\PowerShell</code></pre><blockquote><p>查看 PowerShell 的安装路径。</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-built_in">echo</span> <span class="hljs-variable">$PSHOME</span><br></code></pre></td></tr></table></figure><blockquote><p><code>more</code> 命令是啥？</p></blockquote><p>Linux <code>more</code> 命令类似 cat ，不过会以一页一页的形式显示，更方便使用者逐页阅读，而最基本的指令就是按空白键（space）就往下一页显示，按 b 键就会往回（back）一页显示，而且还有搜寻字串的功能（与 vi 相似）。</p><p>参考：<a href="https://www.runoob.com/linux/linux-comm-more.html">菜鸟教程</a></p><h1 id="如何为-PowerShell-创建一个-profile？"><a href="#如何为-PowerShell-创建一个-profile？" class="headerlink" title="如何为 PowerShell 创建一个 profile？"></a>如何为 PowerShell 创建一个 profile？</h1><p><a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_profiles?view=powershell-7.2">Microsoft Docs</a></p><p>根据文档，然后创建一个 <code>Profile.ps1</code> 文件，我这里是使用 vim 创建的：</p><p><img src="https://i.imgur.com/Y1pAPMG.png"></p><p><img src="https://i.imgur.com/1jr56G0.png"></p><p>然后自己想改变 PowerShell 的什么特性，就直接往这个文件里面写配置即可。</p><p>小知识：<code>$PSHOME</code> 这个是指 PowerShell 的安装路径，可以使用 <code>echo $PSHOME</code> 打印这个路径，然后我们进入这个目录创建这个配置文件即可。</p><h1 id="如何使-PowerShell-的提示路径-Prompt-不要显示那么长？"><a href="#如何使-PowerShell-的提示路径-Prompt-不要显示那么长？" class="headerlink" title="如何使 PowerShell 的提示路径(Prompt)不要显示那么长？"></a>如何使 PowerShell 的提示路径(Prompt)不要显示那么长？</h1><p>在 profile 文件中添加如下配置：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">global</span>:<span class="hljs-title">prompt</span></span> &#123;<br>  <span class="hljs-variable">$dirSep</span> = [<span class="hljs-type">IO.Path</span>]::DirectorySeparatorChar<br>  <span class="hljs-variable">$pathComponents</span> = <span class="hljs-variable">$PWD</span>.Path.Split(<span class="hljs-variable">$dirSep</span>)<br>  <span class="hljs-variable">$displayPath</span> = <span class="hljs-keyword">if</span> (<span class="hljs-variable">$pathComponents</span>.Count <span class="hljs-operator">-le</span> <span class="hljs-number">3</span>) &#123;<br>    <span class="hljs-variable">$PWD</span>.Path<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-string">&#x27;…&#123;0&#125;&#123;1&#125;&#x27;</span> <span class="hljs-operator">-f</span> <span class="hljs-variable">$dirSep</span>, (<span class="hljs-variable">$pathComponents</span>[-<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>] <span class="hljs-operator">-join</span> <span class="hljs-variable">$dirSep</span>)<br>  &#125;<br>  <span class="hljs-string">&quot;PS &#123;0&#125;<span class="hljs-variable">$</span>(&#x27;&gt;&#x27; * (<span class="hljs-variable">$nestedPromptLevel</span> + 1)) &quot;</span> <span class="hljs-operator">-f</span> <span class="hljs-variable">$displayPath</span><br>&#125;<br></code></pre></td></tr></table></figure><p>修改之前：</p><p><img src="https://i.imgur.com/vk11RpS.png"></p><p>之后：</p><p><img src="https://i.imgur.com/VB3foQc.png"></p><p>参考：<a href="https://stackoverflow.com/questions/58574397/how-can-i-change-the-powershell-prompt-to-show-just-the-parent-directory-and-cur">stackoverflow</a></p><h1 id="Powershell-无法正常退出-Python-的虚拟环境？"><a href="#Powershell-无法正常退出-Python-的虚拟环境？" class="headerlink" title="Powershell 无法正常退出 Python 的虚拟环境？"></a>Powershell 无法正常退出 Python 的虚拟环境？</h1><p>参考：<a href="https://github.com/pypa/virtualenv/issues/1756">https://github.com/pypa/virtualenv/issues/1756</a></p><p>直接运行：</p><figure class="highlight ps"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ps">deactivate<br></code></pre></td></tr></table></figure><h1 id="给-Powershell-设置代理"><a href="#给-Powershell-设置代理" class="headerlink" title="给 Powershell 设置代理"></a>给 Powershell 设置代理</h1><p>在 PowerShell 中执行如下命令，这里是以设置本地代理为例：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$env:HTTP_PROXY</span>=<span class="hljs-string">&quot;http://127.0.0.1:7890&quot;</span><br></code></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-variable">$env:HTTPS_PROXY</span>=<span class="hljs-string">&quot;http://127.0.0.1:7890&quot;</span><br></code></pre></td></tr></table></figure><p>上面的命令只是临时设置代理，如果想要永久设置代理，建议使用如下方法：</p><p>1、在 PowerShell 窗口中运行如下指令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs powershell"><span class="hljs-keyword">if</span> (!(<span class="hljs-built_in">Test-Path</span> <span class="hljs-literal">-Path</span> <span class="hljs-variable">$PROFILE</span> )) &#123; <span class="hljs-built_in">New-Item</span> <span class="hljs-literal">-Type</span> File <span class="hljs-literal">-Path</span> <span class="hljs-variable">$PROFILE</span> <span class="hljs-literal">-Force</span> &#125;<br>notepad <span class="hljs-variable">$PROFILE</span><br></code></pre></td></tr></table></figure><p>2、默认会使用记事本打开一个文件，在文件中加入上面设置代理的命令，保存关闭即可。</p><p>上面的配置文件在 <code>此电脑\文档\WindowsPowerShell</code> 下，文件名为：<code>Microsoft.PowerShell_profile.ps1</code>， 这个文件的内容会在 PowerShell 的每次运行时使用。（注意不要修改文件位置，除非你明白这样操作的目的）</p><p>上述的自定义配置方法，便于设置和修改，故为我所推崇，如果你使用网上的永久设置，我想可能会有各种问题，不如这样设置的直观，当然观点仅供参考。</p><p>以上摘自：<a href="https://www.yixuju.cn/other/talking-about-proxy/">https://www.yixuju.cn/other/talking-about-proxy/</a></p><h1 id="设置启动时窗口居中"><a href="#设置启动时窗口居中" class="headerlink" title="设置启动时窗口居中"></a>设置启动时窗口居中</h1><p>实际上是设置 Windows Terminal 窗口启动时居中。</p><p>参考：<a href="https://docs.microsoft.com/zh-cn/windows/terminal/customize-settings/startup#center-on-launch">文档</a></p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gdb 基本使用</title>
    <link href="/2021/11/30/gdb-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <url>/2021/11/30/gdb-%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/</url>
    
    <content type="html"><![CDATA[<p>本篇博客主要是对《LinuxC》相关章节中的学习笔记以及记录。在学习的过程中，为了减缓遗忘，以及将来需要时可以随时查阅自己的知识库，故整理如下。</p><h1 id="单步执行和跟踪函数调用"><a href="#单步执行和跟踪函数调用" class="headerlink" title="单步执行和跟踪函数调用"></a>单步执行和跟踪函数调用</h1><p>首先写一段有问题的测试代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* main.c */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">add_range</span><span class="hljs-params">(<span class="hljs-type">int</span> low, <span class="hljs-type">int</span> high)</span><br>&#123;<br><span class="hljs-type">int</span> i, sum;<br><span class="hljs-keyword">for</span> (i = low; i &lt;= high; i++)<br>sum = sum + i;<br><span class="hljs-keyword">return</span> sum;<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br><span class="hljs-type">int</span> result[<span class="hljs-number">100</span>];<br>result[<span class="hljs-number">0</span>] = add_range(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);<br>result[<span class="hljs-number">1</span>] = add_range(<span class="hljs-number">1</span>, <span class="hljs-number">100</span>);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;result[0]=%d\nresult[1]=%d\n&quot;</span>, result[<span class="hljs-number">0</span>], result[<span class="hljs-number">1</span>]);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>接下来，对于 gdb 的使用，我们主要是以调试这个程序的方式来理解。</p><p><img src="https://i.imgur.com/wFmHgXE.png"></p><p>结果显然错误。</p><p>然后我们来调试，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc -g .\main.c -o main</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">gdb .\main.exe</span><br>GNU gdb (GDB) 8.1<br>Copyright (C) 2018 Free Software Foundation, Inc.<br>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;<br>This is free software: you are free to change and redistribute it.<br>There is NO WARRANTY, to the extent permitted by law.  Type &quot;show copying&quot;<br>and &quot;show warranty&quot; for details.<br>This GDB was configured as &quot;x86_64-w64-mingw32&quot;.<br>Type &quot;show configuration&quot; for configuration details.<br>For bug reporting instructions, please see:<br>&lt;http://www.gnu.org/software/gdb/bugs/&gt;.<br>Find the GDB manual and other documentation resources online at:<br>&lt;http://www.gnu.org/software/gdb/documentation/&gt;.<br>For help, type &quot;help&quot;.<br>Type &quot;apropos word&quot; to search for commands related to &quot;word&quot;...<br>Reading symbols from .\main.exe...done.<br>(gdb)<br></code></pre></td></tr></table></figure><p><code>-g</code> 的作用是在目标文件中加入源代码的信息，比如目标文件的机器指令对应源代码的第几行，但并不是把整个源文件嵌入到目标文件中。所以在调试目标文件时必须保证 gdb 也能找到源文件。</p><blockquote><p><code>help</code> 命令。</p></blockquote><p>查看命令的类别。</p><p><img src="https://i.imgur.com/Kv0TwDJ.png"></p><blockquote><p><code>help files</code>。</p></blockquote><p>查看 files 类别下有那些命令可以用。</p><p><img src="https://i.imgur.com/nMs1Mu3.png"></p><blockquote><p><code>list 1</code>。</p></blockquote><p>从第一行开始列出源代码。一次只列 10 行。</p><p><code>list</code> 命令可以简写成为 <code>l</code>。</p><p><img src="https://i.imgur.com/7uJuFKn.png"></p><blockquote><p><code>list</code>。</p></blockquote><p>接上一条，继续从 11 行列出源代码。</p><p><img src="https://i.imgur.com/JB7cyGb.png"></p><blockquote><p>直接回车。</p></blockquote><p>重复上一条命令。</p><blockquote><p><code>l add_range</code>。</p></blockquote><p><img src="https://i.imgur.com/Lqj9qZo.png"></p><p>列出一个函数的源代码。</p><p><img src="https://i.imgur.com/4DjnuNH.png"></p><blockquote><p><code>quit</code>。</p></blockquote><p>退出 gdb 环境。</p><blockquote><p><code>start</code>。</p></blockquote><p>开始执行命令。</p><p><img src="https://i.imgur.com/ZbJEAvY.png"></p><p>这表示停在 main 函数中变量定义之后的第一条语句处等待我们发命令，gdb 列出这条语句表示它还没执行，并且马上要执行。</p><blockquote><p><code>next</code>(简写为 <code>n</code>)。</p></blockquote><p>接上条。一条一条执行语句。</p><p><img src="https://i.imgur.com/m8n1YD2.png"></p><blockquote><p><code>start</code>。</p></blockquote><p>重新来过。</p><p><img src="https://i.imgur.com/5GLKQNO.png"></p><blockquote><p><code>step</code>(简写为 <code>s</code>)。</p></blockquote><p>进入函数中去执行。</p><p><img src="https://i.imgur.com/2ohvT0p.png"></p><blockquote><p><code>backtrace</code>(简写为 <code>bt</code>)。</p></blockquote><p>在函数中查看函数调用的栈帧。</p><p><img src="https://i.imgur.com/OMFwabH.png"></p><blockquote><p><code>info</code>(简写为 <code>i</code>)。</p></blockquote><p>查看局部变量(locals)的值：</p><p><img src="https://i.imgur.com/URw1VCt.png"></p><blockquote><p><code>frame</code>(简写为 <code>f</code>)。</p></blockquote><p>选择栈帧。</p><p>示例，查看 main 函数当前局部变量的值，先用 <code>frame</code> 命令选择 1 号栈帧然后再查看局部变量：</p><p><img src="https://i.imgur.com/piu3gaU.png"></p><blockquote><p><code>print</code>(简写为 <code>p</code>)。</p></blockquote><p>打印变量的值。</p><p>示例，打印 sum 的值：</p><p><img src="https://i.imgur.com/0zZm821.png"></p><p>这里的 <code>$1</code> 表示 gdb 保存着这些中间结果，<code>$</code> 后面的编号会自动增长，在命令中可以用 <code>$1、$2、$3</code> 等编号代替相应的值。</p><blockquote><p><code>finish</code>。</p></blockquote><p>让程序一直运行到当前函数返回为止。</p><p>按：这里出了一个大问题，我现在的 mingw 中的 gdb 版本是 gdb8.1，在这个版本中，执行 <code>finish</code> 命令会直接退出 gdb！无奈之下，换了 mingw 的版本，现在继续整理。</p><p><img src="https://i.imgur.com/fdgYOO1.png"></p><p><img src="https://i.imgur.com/Tzfhoim.png"></p><p>按：改换了 gdb 版本之后，这个程序的第一个结果变得正确了。但是这不是很重要，我们只是需要理解其背后的逻辑。</p><p>接下来，继续调试：</p><p><img src="https://i.imgur.com/jkseAv2.png"></p><p><img src="https://i.imgur.com/kX34K1l.png"></p><p>然后发现 sum 有问题。</p><p>之后我们就可以退出 gdb 去修改程序了。</p><blockquote><p><code>set</code>。</p></blockquote><p>但是，我们也可以使用 <code>set</code> 命令去立刻把 sum 的值改过来，然后继续执行代码，继续调试，</p><p><img src="https://i.imgur.com/tvbXpo2.png"></p><p>修改变量的值也可以用 <code>print</code> 命令，我们可以用 <code>print</code> 来修改变量的值，或者调用函数：</p><p><img src="https://i.imgur.com/UpEsRGp.png"></p><p><img src="https://i.imgur.com/gr4Fj6w.png"></p><p>按：<code>printf</code> 的返回值表示实际要打印的字符数，同时，这里要明确将 <code>printf</code> 的返回值 cast 成 int 类型。</p><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>backtrace(或 bt)</td><td>查看各级函数调用及参数</td></tr><tr><td>finish</td><td>执行到当前函数返回，然后停下来等待命令</td></tr><tr><td>frame(或 f) 帧编号</td><td>选择栈帧</td></tr><tr><td>info(或 i) locals</td><td>查看当前栈帧局部变量的值</td></tr><tr><td>list(或 l)</td><td>列出源代码，接着上次的位置往下列，每次列 10 行</td></tr><tr><td>list 行号</td><td>列出从第几行开始的源代码</td></tr><tr><td>list 函数名</td><td>列出某个函数的源代码</td></tr><tr><td>next(或 n)</td><td>执行下一行语句</td></tr><tr><td>print(或 p)</td><td>打印表达式的值，通过表达式可以修改变量的值或者调用函数</td></tr><tr><td>set var</td><td>修改变量的值</td></tr><tr><td>start</td><td>开始执行程序，停在 main 函数第一行语句前面等待命令</td></tr><tr><td>step(或 s)</td><td>执行下一行语句，如果有函数调用则进入到函数中</td></tr></tbody></table><h1 id="断点"><a href="#断点" class="headerlink" title="断点"></a>断点</h1><p>测试代码：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-comment">/* main.c */</span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br><span class="hljs-type">int</span> sum = <span class="hljs-number">0</span>, i = <span class="hljs-number">0</span>;<br><span class="hljs-type">char</span> input[<span class="hljs-number">5</span>];<br><br><span class="hljs-keyword">while</span> (<span class="hljs-number">1</span>) &#123;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%s&quot;</span>, input);<br><span class="hljs-keyword">for</span> (i = <span class="hljs-number">0</span>; input[i] != <span class="hljs-string">&#x27;\0&#x27;</span>, i++)<br>sum = sum * <span class="hljs-number">10</span> + input[i] - <span class="hljs-string">&#x27;0&#x27;</span>;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;input=%d\n&quot;</span>, sum);<br>&#125;<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>gcc 常用选项整理</title>
    <link href="/2021/11/29/gcc-%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E6%95%B4%E7%90%86/"/>
    <url>/2021/11/29/gcc-%E5%B8%B8%E7%94%A8%E9%80%89%E9%A1%B9%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<blockquote><p><code>-c</code></p></blockquote><p>编译生成目标文件(Relocatable)。</p><p>举个例子，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc main.c -o main</span><br></code></pre></td></tr></table></figure><p>等价于</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc -S main.c</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc -c main.s</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc main.o</span><br></code></pre></td></tr></table></figure><p>按：<code>-S</code> 选项生成汇编代码，<code>-c</code> 选项生成目标文件，最后一步是链接。</p><p><img src="https://i.imgur.com/Ii0BFUnh.png"></p><blockquote><p><code>-Dmacro[=defn]</code></p></blockquote><p>定义一个宏。</p><p>例如：</p><p><code>-DMACHINE=8086</code>，这个和在 C 语言中使用 <code>#define MACHINE 8086</code> 是一样的。</p><blockquote><p><code>-E</code></p></blockquote><p>只做预处理而不编译，<code>cpp</code> 命令也可以达到同样的效果。</p><blockquote><p><code>-g</code></p></blockquote><p>在生成的目标文件中添加调试信息，所谓调试信息就是源代码和指令之间的对应关系，在 gdb 调试和 objdump 反汇编时要用到这些信息。</p><p>按：在编译时要加上 <code>-g</code> 选项，生成的目标文件才能用 gdb 进行调试。</p><blockquote><p><code>-Idir</code></p></blockquote><p>dir 是头文件所在的目录。</p><p>例如，一个目录：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">tree</span><br>.<br>|-- main.c<br>`-- stack <br>    |-- stack.c <br>    `-- stack.h<br>    <br>1 directory, 3 files<br></code></pre></td></tr></table></figure><p>我们需要使用 <code>gcc -c main.c -Istack</code> 编译。用 <code>-I</code> 选项告诉 gcc 头文件要到子目录 stack 里找。</p><p>按：在 <code>#include</code> 预处理指示中可以使用相对路径，如果我们在代码中使用 <code>#include &quot;stack/stack.h&quot;</code>，那么编译时就不需要加 <code>-Istack</code> 选项了。</p><blockquote><p><code>-Ldir</code></p></blockquote><p>dir 是库文件所在的目录。</p><p>例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">gcc main.c -L. -lstack -Istack -o main</span><br></code></pre></td></tr></table></figure><p><code>-L.</code> 表示在当前目录找。<code>-lstack</code> 告诉编译器要链接 libstack 库。</p><blockquote><p><code>-M</code> 和 <code>-MM</code></p></blockquote><p>输出 <code>&quot;.o文件:.c文件 .h文件&quot;</code> 这种形式的 Makefile 规则，<code>-MM</code> 的输出不包括系统头文件。</p><p>按：暂时不去深究。</p><blockquote><p><code>-o outfile</code></p></blockquote><p>outfile 是输出文件的文件名。</p><blockquote><p><code>-O?</code></p></blockquote><p>各种编译优化的选项。</p><blockquote><p><code>-print-search-dirs</code></p></blockquote><p>打印库文件的默认搜索路径。</p><blockquote><p><code>-S</code></p></blockquote><p>编译生成汇编代码。</p><blockquote><p><code>-v</code></p></blockquote><p>打印详细的编译链接过程。</p><blockquote><p><code>-Wall</code></p></blockquote><p>打印所有的警告信息。</p><blockquote><p><code>-Wl,optinos</code></p></blockquote><p>按：小写字母 <code>l</code>。</p><p>options 是传递给链接器的选项。</p><p>举例：</p><p><img src="https://i.imgur.com/H722W4uh.png"></p><hr><p>参考：</p><p>1、《Linux C》(宋劲杉)</p>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>vim 的搜索和替换</title>
    <link href="/2021/11/28/vim-%E7%9A%84%E6%90%9C%E7%B4%A2%E5%92%8C%E6%9B%BF%E6%8D%A2/"/>
    <url>/2021/11/28/vim-%E7%9A%84%E6%90%9C%E7%B4%A2%E5%92%8C%E6%9B%BF%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<p>原文地址：<a href="https://linuxize.com/post/vim-find-replace/">https://linuxize.com/post/vim-find-replace/</a></p><p>这篇文章描述了如何在 Vim&#x2F;Vi 中查找和替换文本。</p><p>Vim 是最流行的命令行文本编辑器，它在 macOS 和很多 Linux 发行版系统中是预装的软件。在 Vim 中查找和替换文本是比较快速而且容易的。</p><h1 id="基本的查找和替换"><a href="#基本的查找和替换" class="headerlink" title="基本的查找和替换"></a>基本的查找和替换</h1><p>在 Vim 中，你可以使用 <code>:substitute</code> 命令进行查找和替换。</p><p>为了在 Vim 中执行这个指令，你必须使 Vim 处于 normal 模式——即启动 Vim 编辑器时的默认模式。你可以按 ‘Esc’ 键来从其他任何模式返回到 normal 模式。</p><p>替换命令的通用格式如下：</p><pre><code class="hljs">:[range]s/&#123;pattern&#125;/&#123;string&#125;/[flags] [count]</code></pre><p>这个命令在 <code>[range]</code> 中的每一行中查找一个 <code>&#123;pattern&#125;</code>，然后使用一个 <code>&#123;string&#125;</code> 来替换它。<code>[count]</code> 是一个乘以此命令的正整数。</p><p>如果没有提供 <code>[range]</code> 和 <code>[count]</code>，那么，只有在当前行中查找到第一个的 pattern 会被替换掉。当前行是指光标所在的那一行。</p><p>举个例子，来搜索当前行中第一次出现的字符串 <code>&#39;foo&#39;</code> 然后用 <code>&#39;bar&#39;</code> 来替换它，你可以使用</p><pre><code class="hljs">:s/foo/bar/</code></pre><p>如果想替换调当前行中所有的被匹配的 pattern，你需要加上一个 <code>g</code> 标志：</p><pre><code class="hljs">:s/foo/bar/g</code></pre><p>如果你想在整个文件中搜索和替换 pattern，那么可以使用百分号的符号 <code>%</code> 来作为 range。这个符号表示的范围是从第一行到最后一行：</p><pre><code class="hljs">:%s/foo/bar/g</code></pre><p>如果省略 <code>&#123;string&#125;</code> 部分 ，那么，此部分将会被认为是一个空字符串，然后，被匹配的 pattern 就会被删除掉。下面的命令删除了当前行中所有的 <code>&#39;foo&#39;</code> 字符串：</p><pre><code class="hljs">:s/foo/g</code></pre><p><code>/</code> 在除了作为分隔符之外，你还可以使用其他任何非字母和数字的单字节符号来代替斜线符号 <code>/</code>。这个选项在我们的需要搜索的 pattern 中或者替换字符串中含有 <code>/</code> 符号的时候是很有用的。</p><pre><code class="hljs">:s|foo|bar|</code></pre><p>按：实测，使用 <code>|</code> 作为分隔符可以替换，但是替换完之后会报错，但是，像 <code>?</code> 之类的符号作为分隔符就完全没有问题。</p><p>如果要手动确认每一个替换，使用 <code>c</code> 标志：</p><pre><code class="hljs">:s/foo/bar/gc</code></pre><p>output:</p><pre><code class="hljs">replace with bar (y/n/a/q/l/^E/^Y)?</code></pre><p>按 <code>y</code> 来替换匹配到的结果，或者按 <code>l</code> 来替换匹配到的结果并退出。</p><p>按 <code>n</code> 来跳过当前的匹配结果，然后按 <code>q</code> 或 <code>Esc</code> 来退出替换模式。</p><p><code>a</code> 选项是替换当前的匹配到的结果并且替换掉所有剩下的匹配的结果。向下滚动屏幕，使用 <code>CTRL + Y</code>，向上滚动，使用 <code>CTRL + E</code>。</p><p>你也可以使用正则表达式来作为一个搜索 pattern。下面的命令会用 <code>&#39;Vim is the best&#39;</code> 替换掉所有以 <code>&#39;foo&#39;</code> 开头的行。</p><pre><code class="hljs">:%s/^foo.*/Vim is the best/gc</code></pre><p><code>^</code> 符号匹配一行的开头，<code>.*</code> 匹配任何数字或者字符串。</p><h1 id="大小写敏感"><a href="#大小写敏感" class="headerlink" title="大小写敏感"></a>大小写敏感</h1><p>默认情况下，搜索操作时大小写敏感的；搜索 <code>&quot;FOO&quot;</code> 将不会匹配 <code>&quot;Foo&quot;</code>。</p><p>为了让搜索 pattern 忽略大小写，可以使用 <code>i</code> 标志：</p><pre><code class="hljs">:s/Foo/bar/gi</code></pre><p>另外一个强制忽略大小写的方法是在搜索 pattern 后面添加 <code>\c</code>。举个例子，<code>/Linux\c</code> 就是一个忽略大小写的搜索。</p><p>如果你改变了默认的大小写敏感设置(比如在 Vim 的配置文件中)，然后你想在搜索中使用大小写敏感的方式，可以使用 <code>I</code> 标志：</p><pre><code class="hljs">:s/foo/bar/gI</code></pre><p>类似的，在 pattern 后面加上 <code>\C</code> 也可以强制大小写敏感。</p><h1 id="搜索范围"><a href="#搜索范围" class="headerlink" title="搜索范围"></a>搜索范围</h1><p>当在命令中没有给出 <code>range</code> 时，那么，替换命令只会操作当前行。</p><p>这个 <code>range</code> 既可以是一行也可以是两行之间。具体的 line 值使用 <code>,</code> 或者 <code>;</code> 来分隔。这个 <code>range</code> 可以使用绝对的行号或者一些特殊的符号来具体化。</p><p>举个例子，来替换第 3 行到第 10 行之间的所有的 <code>&#39;foo&#39;</code> 为 <code>&#39;bar&#39;</code>，可以使用：</p><pre><code class="hljs">:3,10s/foo/bar/g</code></pre><p>这个范围是闭区间，也就是说，第一行和最后一行也被包括在 <code>range</code> 中。</p><p>点 <code>.</code> 符号表示当前行，美元符号 <code>$</code> 表示最后一行。来替换从当前行到最后一行的 <code>&#39;foo&#39;</code> 为 <code>&#39;bar&#39;</code>，可以使用：</p><pre><code class="hljs">:.,$/foo/bar/g</code></pre><p>按：原文中没有加 <code>g</code>。</p><p>我们也可以使用 <code>+</code> 或者 <code>-</code> 符号来设置具体的行，它的后面跟着具体的数字，这个数字将被当前行数字给加上或者减去。如果 <code>+</code> 或 <code>-</code> 后面的数字被省略，那么，该数字将默认被设置成 1。</p><p>举例，从当前行到接下来的四行(一共是 5 行)中替换每一个 <code>&#39;each&#39;</code> 为 <code>&#39;bar&#39;</code>，可以使用：</p><pre><code class="hljs">:.,+4s/foo/bar/g</code></pre><p><img src="https://i.imgur.com/BCukecO.png"></p><h1 id="替换整个单词"><a href="#替换整个单词" class="headerlink" title="替换整个单词"></a>替换整个单词</h1><p>substitute 命令是以字符串的形式来寻找 pattern 的，而不是一整个单词。如果，举例来说，你想要搜索 <code>&quot;gnu&quot;</code>，那么将会搜索到在更长的单词中所包含的 <code>&quot;gnu&quot;</code>，比如 <code>&quot;cygnus&quot;</code> 或 <code>&quot;magnum&quot;</code>。</p><p>想要搜索一整个单词，键入 <code>\&lt;</code> 来标记一个单词的开始，然后输入搜索的 pattern，然后键入 <code>\&gt;</code> 来标记单词的结尾。</p><p>举例来说，要搜索单词 <code>&quot;foo&quot;</code>，你可以使用 <code>\&lt;foo\&gt;</code>：</p><pre><code class="hljs">:s/\&lt;foo\&gt;/bar/</code></pre><h1 id="替换历史"><a href="#替换历史" class="headerlink" title="替换历史"></a>替换历史</h1><p>Vim 会跟踪你在当前会话中运行的所有命令。要浏览先前替代命令的历史记录，请输入 <code>:s</code> 并使用向上&#x2F;向下箭头键查找先前的替换操作。要运行该命令，只需按 Enter。您也可以在执行操作之前编辑命令。</p><h1 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h1><p>替换从 20 行开始的 3 行(20, 21, 22)中的每一行中的第一个 <code>&#39;foo&#39;</code> 为 <code>&#39;bar&#39;</code>：</p><pre><code class="hljs">:20,20s/foo/bar/ 3</code></pre><p><img src="https://i.imgur.com/IBNV9Xv.png"></p><p><img src="https://i.imgur.com/CRnFNW2.png"></p><p>替换文件中每一行的第一个 <code>&#39;foo&#39;</code> 为 <code>&#39;bar&#39;</code>：</p><pre><code class="hljs">:%s/foo/bar/</code></pre><p><img src="https://i.imgur.com/G5XVEj6.png"></p><p><img src="https://i.imgur.com/WpqW0a7.png"></p><p><img src="https://i.imgur.com/72oT5S4.png"></p><p>注释 5 到 20 行：</p><pre><code class="hljs">:5,20s/^/#/</code></pre><p><img src="https://i.imgur.com/LUzXdNd.png"></p><p>取消 5 到 20 行的注释，恢复先前的更改：</p><pre><code class="hljs">:5,20s/^#//</code></pre><p><img src="https://i.imgur.com/SBsnoXP.png"></p><p>将 <code>&#39;apple&#39;</code>，<code>&#39;orange&#39;</code>，和 <code>&#39;mango&#39;</code> 替换成 <code>&#39;fruit&#39;</code>：</p><pre><code class="hljs">:%s/apple\|orange\|mango/fruit/g</code></pre><p>删除每行末尾的尾随空格：</p><pre><code class="hljs">:%s/\s\+$//e</code></pre><p>按：</p><p>这里似乎不应该用 <code>e</code>，虽然用了也没什么影响。而 <code>e</code> 似乎只有在使用 <code>/</code> 搜索字符串时才有用。</p><p>关于 <code>e</code> 标志，有如下解释：</p><blockquote><p>Where you land</p><p>Searches in Vim put the cursor on the first character of the matched string by default; if you search for Debian, it would put the cursor on the D. That’s usually fine, but Vim has a few options for offsetting the cursor placement from the beginning of the matched string.</p><p>To land on the last character in the matched string, rather than the beginning, add an &#x2F;e to your search:</p><p>&#x2F;Debian&#x2F;e</p><p>That will place the cursor on the n rather than the D. Vim also allows you to specify a cursor offset by line, or from the beginning or end of the string. To have the cursor land two lines above a matched string, for example, use &#x2F;string&#x2F;-2. To place the cursor two lines below the string, use &#x2F;string&#x2F;+2.</p><p>To offset from the beginning of the string, add a &#x2F;b or &#x2F;s with the offset that you want. For example, to move three characters from the beginning of the search, you’d use &#x2F;string&#x2F;s+3 or &#x2F;string&#x2F;b+3 — “s” for “start” or “b” for “begin.” To count from the end of the string, use &#x2F;e instead, so &#x2F;string&#x2F;e-3 will place the cursor on the third character from the last character of the matched string.</p></blockquote><p>来源：<a href="https://www.linux.com/training-tutorials/vim-tips-basics-search-and-replace/">https://www.linux.com/training-tutorials/vim-tips-basics-search-and-replace/</a></p><p><img src="https://i.imgur.com/zjNLndE.png"></p><p><img src="https://i.imgur.com/dSt9pml.png"></p><p>给 38 到 42 行加注释：</p><pre><code class="hljs">:38,42s/p/# /</code></pre><p><img src="https://i.imgur.com/zWlMri6.png"></p><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>搜索和替换是 Vim 的一个很强大的功能，它可以使你快速对你的文本做出改变。</p>]]></content>
    
    
    <categories>
      
      <category>vim</category>
      
    </categories>
    
    
    <tags>
      
      <tag>翻译</tag>
      
      <tag>vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 15 - 20 记录</title>
    <link href="/2021/11/28/LeetCode-15-20-%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/11/28/LeetCode-15-20-%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="15"><a href="#15" class="headerlink" title="15"></a>15</h1><p><img src="https://i.imgur.com/xPZlly6l.png"></p><p><a href="https://leetcode.com/problems/3sum/">https://leetcode.com/problems/3sum/</a></p><p>求所有满足三数之和为 0 的子数组。</p><p>这道题主要是利用双指针来做。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">threeSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]</span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        res = []<br>        leng = <span class="hljs-built_in">len</span>(nums)<br>        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> leng &lt; <span class="hljs-number">3</span>):<br>            <span class="hljs-keyword">return</span> res<br>        nums.sort() <span class="hljs-comment"># sort the nums list</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(leng):<br>            <span class="hljs-keyword">if</span> nums[i] &gt; <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">break</span><br>            <span class="hljs-keyword">if</span> i &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">and</span> nums[i] == nums[i - <span class="hljs-number">1</span>]: <span class="hljs-comment"># remove the dumplicated</span><br>                <span class="hljs-keyword">continue</span><br>            <span class="hljs-comment"># double pointers</span><br>            L = i + <span class="hljs-number">1</span><br>            R = leng - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> L &lt; R:<br>                <span class="hljs-built_in">sum</span> = nums[i] + nums[L] + nums[R]<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span> == <span class="hljs-number">0</span>:<br>                    res.append([nums[i], nums[L], nums[R]])<br>                    <span class="hljs-keyword">while</span> L &lt; R <span class="hljs-keyword">and</span> nums[L] == nums[L + <span class="hljs-number">1</span>]:<br>                        L = L + <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">while</span> L &lt; R <span class="hljs-keyword">and</span> nums[R] == nums[R - <span class="hljs-number">1</span>]:<br>                        R = R - <span class="hljs-number">1</span><br>                    L = L + <span class="hljs-number">1</span><br>                    R = R - <span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span> <span class="hljs-built_in">sum</span> &lt; <span class="hljs-number">0</span>:<br>                    L = L + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    R = R - <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-built_in">input</span> = [-<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,-<span class="hljs-number">1</span>,-<span class="hljs-number">4</span>]<br>    output = solu.threeSum(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><h1 id="16"><a href="#16" class="headerlink" title="16"></a>16</h1><p><a href="https://leetcode.com/problems/3sum-closest/">https://leetcode.com/problems/3sum-closest/</a></p><p><img src="https://i.imgur.com/tIwDDS0l.png"></p><p>求三数之和最接近给定的 <code>target</code> 的情况。返回找到的三个数之和。</p><p>依然是双指针。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">threeSumClosest</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        nums.sort()<br>        res = nums[<span class="hljs-number">0</span>] + nums[<span class="hljs-number">1</span>] + nums[<span class="hljs-number">2</span>]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            start = i + <span class="hljs-number">1</span><br>            end = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>            <span class="hljs-keyword">while</span> start &lt; end:<br>                <span class="hljs-built_in">sum</span> = nums[i] + nums[start] + nums[end]<br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">abs</span>(target - <span class="hljs-built_in">sum</span>) &lt; <span class="hljs-built_in">abs</span>(target - res):<br>                    res = <span class="hljs-built_in">sum</span><br>                <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span> &gt; target:<br>                    end = end - <span class="hljs-number">1</span><br>                <span class="hljs-keyword">elif</span> <span class="hljs-built_in">sum</span> &lt; target:<br>                    start = start + <span class="hljs-number">1</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> res<br>        <span class="hljs-keyword">return</span> res<br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-built_in">input</span> = [-<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>,-<span class="hljs-number">4</span>]<br>    target = <span class="hljs-number">1</span><br>    output = solu.threeSumClosest(<span class="hljs-built_in">input</span>, target)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><h1 id="17"><a href="#17" class="headerlink" title="17"></a>17</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">letterCombinations</span>(<span class="hljs-params">self, digits: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        res = []<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(digits) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> digits == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span>  res<br>        mydict = &#123;<span class="hljs-string">&#x27;2&#x27;</span>:<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>:<span class="hljs-string">&#x27;def&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>:<span class="hljs-string">&#x27;ghi&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>:<span class="hljs-string">&#x27;jkl&#x27;</span>, <span class="hljs-string">&#x27;6&#x27;</span>:<span class="hljs-string">&#x27;mno&#x27;</span>, <span class="hljs-string">&#x27;7&#x27;</span>:<span class="hljs-string">&#x27;pqrs&#x27;</span>, <span class="hljs-string">&#x27;8&#x27;</span>:<span class="hljs-string">&#x27;tuv&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>:<span class="hljs-string">&#x27;wxyz&#x27;</span>&#125;<br>        <span class="hljs-comment"># print(len(digits))</span><br>        res = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(digits))]<br>        <span class="hljs-comment"># print(res)</span><br>        res[<span class="hljs-number">0</span>] = [s <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> mydict[digits[<span class="hljs-number">0</span>]]]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(digits)):<br>            <span class="hljs-keyword">for</span> mystr <span class="hljs-keyword">in</span> res[i - <span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> mydict[digits[i]]:<br>                    res[i].append(mystr + s)<br>        <span class="hljs-keyword">return</span> res[<span class="hljs-built_in">len</span>(digits) - <span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;23&quot;</span> <br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;2&quot;</span><br>    output = solu.letterCombinations(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p>直观的想法是把这个电话号码的组合想象成一棵树，根节点是一个空字符串，然后根据输入的数字，一层一层地向下面生长。但是，这个和那种简单地暴力循环一样，是不容易实现的。注意到，这里的最终的结果字符串是有顺序的，所以，我们可以把上一次的结果暂存起来，然后把接下来一次的所有情况给遍历一下，生成新的一次的情况，直至最后得到想要的结果。上面的代码是把所有的中间结果都存储了起来。但是，实际上，我们只需要 size 为 2 的数组。因此，下面的代码进行了优化：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">letterCombinations</span>(<span class="hljs-params">self, digits: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]:<br>        res = []<br>        <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(digits) == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> digits == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span>  res<br>        mydict = &#123;<span class="hljs-string">&#x27;2&#x27;</span>:<span class="hljs-string">&#x27;abc&#x27;</span>, <span class="hljs-string">&#x27;3&#x27;</span>:<span class="hljs-string">&#x27;def&#x27;</span>, <span class="hljs-string">&#x27;4&#x27;</span>:<span class="hljs-string">&#x27;ghi&#x27;</span>, <span class="hljs-string">&#x27;5&#x27;</span>:<span class="hljs-string">&#x27;jkl&#x27;</span>, <span class="hljs-string">&#x27;6&#x27;</span>:<span class="hljs-string">&#x27;mno&#x27;</span>, <span class="hljs-string">&#x27;7&#x27;</span>:<span class="hljs-string">&#x27;pqrs&#x27;</span>, <span class="hljs-string">&#x27;8&#x27;</span>:<span class="hljs-string">&#x27;tuv&#x27;</span>, <span class="hljs-string">&#x27;9&#x27;</span>:<span class="hljs-string">&#x27;wxyz&#x27;</span>&#125;<br>        <span class="hljs-comment"># print(len(digits))</span><br>        res = [[] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(digits))]<br>        <span class="hljs-comment"># print(res)</span><br>        res[<span class="hljs-number">0</span>] = [s <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> mydict[digits[<span class="hljs-number">0</span>]]]<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(digits)):<br>            <span class="hljs-keyword">for</span> mystr <span class="hljs-keyword">in</span> res[i - <span class="hljs-number">1</span>]:<br>                <span class="hljs-keyword">for</span> s <span class="hljs-keyword">in</span> mydict[digits[i]]:<br>                    res[i].append(mystr + s)<br>        <span class="hljs-keyword">return</span> res[<span class="hljs-built_in">len</span>(digits) - <span class="hljs-number">1</span>]<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;23&quot;</span> <br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;&quot;</span><br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&quot;2&quot;</span><br>    output = solu.letterCombinations(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/UNzV7f8.png"></p><h1 id="18"><a href="#18" class="headerlink" title="18"></a>18</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">fourSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]]:<br>        res = <span class="hljs-built_in">set</span>()<br>        nums.sort()<br>        <span class="hljs-comment"># print(nums)</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">3</span>):<br>            num1 = nums[i]<br>            <span class="hljs-comment"># print(&#x27;num1:&#x27;, num1)</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">2</span>):<br>                num2 = nums[j]<br>                left = j + <span class="hljs-number">1</span><br>                right = <span class="hljs-built_in">len</span>(nums) - <span class="hljs-number">1</span><br>                <span class="hljs-keyword">while</span> left &lt; right:<br>                    num3 = nums[left]<br>                    num4 = nums[right]<br>                    <span class="hljs-built_in">sum</span> = num1 + num2 + num3 + num4<br>                    <span class="hljs-comment"># print(&#x27;sum:&#x27;, sum)</span><br>                    <span class="hljs-keyword">if</span> <span class="hljs-built_in">sum</span> == target:<br>                        res.add((num1, num2, num3, num4))<br>                        left = left + <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">elif</span> <span class="hljs-built_in">sum</span> &gt; target:<br>                        right = right - <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">else</span>:<br>                        left = left + <span class="hljs-number">1</span><br>        res = [<span class="hljs-built_in">list</span>(each) <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> res]<br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    <span class="hljs-built_in">input</span> = [<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, -<span class="hljs-number">2</span>, <span class="hljs-number">2</span>]<br>    <span class="hljs-built_in">input</span> = [<span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]<br>    target = <span class="hljs-number">0</span><br>    target = <span class="hljs-number">8</span><br>    output = solu.fourSum(<span class="hljs-built_in">input</span>, target)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p>一言以蔽之，双指针。</p><p>注意一点，最后要去重。所以我一开始使用了 set，最后再转化成 list。可是，这样似乎有效率问题，而且，本题应该有更好的方法。抽时间研究。</p><p><img src="https://i.imgur.com/mcmn1gs.png"></p><h1 id="19"><a href="#19" class="headerlink" title="19"></a>19</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># use fast and slow pointer</span><br><span class="hljs-comment"># this method can&#x27;t be forgot any more!!</span><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">Optional</span>, <span class="hljs-type">List</span><br><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">removeNthFromEnd</span>(<span class="hljs-params">self, head: <span class="hljs-type">Optional</span>[ListNode], n: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">Optional</span>[ListNode]:<br>        slow = head<br>        fast = head<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            fast = fast.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">if</span> fast == <span class="hljs-literal">None</span>:<br>            <span class="hljs-keyword">return</span> slow.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">while</span> fast.<span class="hljs-built_in">next</span> != <span class="hljs-literal">None</span>:<br>            slow = slow.<span class="hljs-built_in">next</span><br>            fast = fast.<span class="hljs-built_in">next</span><br>        slow.<span class="hljs-built_in">next</span> = slow.<span class="hljs-built_in">next</span>.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">return</span> head<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">generate_linked_list</span>(<span class="hljs-params">data:<span class="hljs-type">List</span></span>):<br>    nodelist = []<br>    <span class="hljs-keyword">for</span> d <span class="hljs-keyword">in</span> data:<br>        nodelist.append(ListNode(d))<br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nodelist) - <span class="hljs-number">1</span>):<br>        nodelist[i].<span class="hljs-built_in">next</span> = nodelist[i + <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> nodelist[<span class="hljs-number">0</span>]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_linked_list</span>(<span class="hljs-params">head:ListNode</span>):<br>    cursor = head<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;Linked List: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    <span class="hljs-keyword">while</span> cursor != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(cursor.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        cursor = cursor.<span class="hljs-built_in">next</span><br>    <span class="hljs-comment"># print(&#x27;head: &#x27;, head.val)</span><br>    <span class="hljs-built_in">print</span>()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    headlist = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>    head = generate_linked_list(headlist)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;before removed:&#x27;</span>)<br>    print_linked_list(head)<br>    <span class="hljs-comment"># print_linked_list(head)</span><br>    solu = Solution()<br>    n = <span class="hljs-number">2</span><br>    res = solu.removeNthFromEnd(head, n)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;after removed:&#x27;</span>)<br>    print_linked_list(res)<br></code></pre></td></tr></table></figure><p>经典快慢指针。</p><p><img src="https://i.imgur.com/cIPB0t8.png"></p><h1 id="20"><a href="#20" class="headerlink" title="20"></a>20</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">isValid</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>        strstack = []<br>        strstack.append(s[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">for</span> ch <span class="hljs-keyword">in</span> s[<span class="hljs-number">1</span>:]:<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strstack) == <span class="hljs-number">0</span>:<br>                strstack.append(ch)<br>                <span class="hljs-keyword">continue</span><br>            ch_lists = [<span class="hljs-string">&#x27;&#123;&#x27;</span>, <span class="hljs-string">&#x27;[&#x27;</span>, <span class="hljs-string">&#x27;(&#x27;</span>]<br>            <span class="hljs-keyword">if</span> strstack[-<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;&#123;&#x27;</span>:<br>                <span class="hljs-keyword">if</span> ch == <span class="hljs-string">&#x27;&#125;&#x27;</span>:<br>                    strstack.pop()<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">elif</span> ch <span class="hljs-keyword">in</span> ch_lists:<br>                    strstack.append(ch)<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span> strstack[-<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;[&#x27;</span>:<br>                <span class="hljs-keyword">if</span> ch == <span class="hljs-string">&#x27;]&#x27;</span>:<br>                    strstack.pop()<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">elif</span> ch <span class="hljs-keyword">in</span> ch_lists:<br>                    strstack.append(ch)<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">if</span> strstack[-<span class="hljs-number">1</span>] == <span class="hljs-string">&#x27;(&#x27;</span>:<br>                <span class="hljs-keyword">if</span> ch == <span class="hljs-string">&#x27;)&#x27;</span>:<br>                    strstack.pop()<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">elif</span> ch <span class="hljs-keyword">in</span> ch_lists:<br>                    strstack.append(ch)<br>                    <span class="hljs-keyword">continue</span><br>                <span class="hljs-keyword">else</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">len</span>(strstack) == <span class="hljs-number">0</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solu = Solution()<br>    Input = <span class="hljs-string">&quot;()&quot;</span><br>    Input = <span class="hljs-string">&quot;()[]&#123;&#125;&quot;</span><br>    Input = <span class="hljs-string">&quot;(]&quot;</span><br>    Input = <span class="hljs-string">&quot;([)]&quot;</span><br>    <span class="hljs-comment"># Input = &quot;&#123;[]&#125;&quot;</span><br>    <span class="hljs-comment"># Input = &quot;([])&quot;</span><br>    Output = solu.isValid(Input)<br>    <span class="hljs-built_in">print</span>(Output)<br></code></pre></td></tr></table></figure><p>经典堆栈问题。</p><p><img src="https://i.imgur.com/fbfdIkJ.png"></p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
      <tag>算法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 库函数学习记录</title>
    <link href="/2021/11/28/Python-%E5%BA%93%E5%87%BD%E6%95%B0%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/11/28/Python-%E5%BA%93%E5%87%BD%E6%95%B0%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<p>当前正在写 leetcode 的题目，所以可能会经常用到 Python 的库函数，因此，在这里作一个记录，好记性不如烂键盘。</p><h1 id="sort-函数"><a href="#sort-函数" class="headerlink" title="sort 函数"></a>sort 函数</h1><p>A simple ascending sort is very easy: just call the sorted() function. It returns a new sorted list:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; sorted([5, 2, 3, 1, 4])</span><br>[1, 2, 3, 4, 5]<br></code></pre></td></tr></table></figure><p>You can also use the list.sort() method. It modifies the list in-place (and returns None to avoid confusion). Usually it’s less convenient than sorted() - but if you don’t need the original list, it’s slightly more efficient.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a = [5, 2, 3, 1, 4]</span><br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a.sort()</span><br><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; a</span><br>[1, 2, 3, 4, 5]<br></code></pre></td></tr></table></figure><p>Another difference is that the list.sort() method is only defined for lists. In contrast, the sorted() function accepts any iterable.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">&gt;</span><span class="language-bash">&gt;&gt; sorted(&#123;1: <span class="hljs-string">&#x27;D&#x27;</span>, 2: <span class="hljs-string">&#x27;B&#x27;</span>, 3: <span class="hljs-string">&#x27;B&#x27;</span>, 4: <span class="hljs-string">&#x27;E&#x27;</span>, 5: <span class="hljs-string">&#x27;A&#x27;</span>&#125;)</span><br>[1, 2, 3, 4, 5]<br></code></pre></td></tr></table></figure><h1 id="abs-函数"><a href="#abs-函数" class="headerlink" title="abs 函数"></a>abs 函数</h1><blockquote><p><code>abs(x)</code></p></blockquote><p>Return the absolute value of a number. The argument may be an integer, a floating point number, or an object implementing <strong>abs</strong>(). If the argument is a complex number, its magnitude is returned.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>傅里叶级数推导过程中的一个问题</title>
    <link href="/2021/11/28/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98/"/>
    <url>/2021/11/28/%E5%82%85%E9%87%8C%E5%8F%B6%E7%BA%A7%E6%95%B0%E6%8E%A8%E5%AF%BC%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E4%B8%AA%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>在看傅里叶级数推导的过程中，有一个地方一开始没有看明白，之后通过查找资料以及再次思考，终于把其中的关节给弄懂，在这里记录一下，防止以后再次遇到的时候会遗忘掉。</p><p><img src="https://i.imgur.com/9T0hXUQ.png"></p><p><img src="https://i.imgur.com/sm91Ys2.png"></p><p>首先，$a_0$ 很容易得到，直接对第一个式子两边同时积分即可。因为 $\text{sin},nx$ 和 $\text{cos},nx$ 在 $[-\pi, \pi]$ 上的积分都为 0。</p><p>然后，两边同时乘以 $\text{cos},mx$，最后得到结果</p><p>$$<br>a_n &#x3D; \frac{1}{\pi} \int_{-\pi}^{\pi} f(x) \text{cos} , nxdx<br>$$</p><p>我的<strong>问题</strong>就出在了这里，明明说自身乘积的积分是 $\pi$，但是这里明显把 $a_n \text{cos} , nx \cdot \text{cos} , nx$</p><p>然后，问题的<strong>解释</strong>是：</p><p>应该理解成 $m$ 而不是单单的 $n$，即，应该是</p><p>$$<br>a_m &#x3D; \frac{1}{\pi} \int_{-\pi}^{\pi} f(x) \text{cos} , mxdx<br>$$</p><p>左边的相加的项中，只要不是 $n$ 的，也都要被归 $0$ 的。</p><p>我们选定一个 $m$，$m$ 是 $1$ 到 $\infty$ 中的任意一个值，然后，用 $\text{cos} , mx$ 同时去乘等号两边的式子，那么，$\displaystyle \frac{a_0}{2} \cdot \text{cos} , mx$ 积分之后是 $0$，$\displaystyle \sum_{n &#x3D; 1}^{\infty} a_n , \text{cos} , nx \cdot \text{cos} , mx$ 的所有项中，除了 $\text{cos} , mx$ 这一项外，其他的项在积分之后全部都变成了 $0$，对于 $\displaystyle \sum_{n &#x3D; 1}^{\infty} b_n , \text{sin} , nx \cdot \text{cos} , mx$，积分以后显然全部变成 $0$。</p><p>这里用到了一个关系，</p><p><img src="https://i.imgur.com/kB7IgZYm.png"></p><p>这个证明暂时从略。</p><p>然后，$a_n$ 自然就可以求出来了，发现，和 PPT 中给的是相符的。</p><p>对于 $b_n$ 的求解，同理。</p>]]></content>
    
    
    <categories>
      
      <category>数学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数学</tag>
      
      <tag>问题</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>函数的连续与间断</title>
    <link href="/2021/11/28/%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%9E%E7%BB%AD%E4%B8%8E%E9%97%B4%E6%96%AD/"/>
    <url>/2021/11/28/%E5%87%BD%E6%95%B0%E7%9A%84%E8%BF%9E%E7%BB%AD%E4%B8%8E%E9%97%B4%E6%96%AD/</url>
    
    <content type="html"><![CDATA[<h1 id="定义-1"><a href="#定义-1" class="headerlink" title="定义 1"></a>定义 1</h1><p>设 $f(x)$ 在点 $x_0$ 的某邻域内有定义. 若</p><p>$$<br>\lim_{x \to x_0}f(x) &#x3D; f(x_0) \qquad \qquad (1)<br>$$</p><p>则说 $f(x)$ 在点 $x_0$ <strong>连续</strong>, 并称 $x_0$ 为 $f(x)$ 的一个<strong>连续点</strong>. 若 $f(x)$ 在某个 $\mathop{N}\limits^{\circ}(x_0)$ 上有定义, 则当 $x_0$ 不是 $f(x)$ 的连续点时,称 $x_0$ 为 $f(x)$ 的<strong>间断点</strong>, 或说 $f(x)$ 在 $x_0$ 间断. 若 $f(x)$ 在区间 $(a, b)$ 内每点连续, 则说 $f(x)$ 在 $(a, b)$ 内连续.</p><p>按:</p><p>$$<br>\mathop{N}\limits^{\circ}(a, r) &#x3D; (a - r, a) \cup (a, a + r): 点 a 的半径为 r 的空心邻域.<br>$$</p><p>再按：$N$ 是 Near 的意思？</p><p>若令 $\Delta x &#x3D; x - x_0$, $\Delta y &#x3D; f(x) - f(x_0)$, 则式 (1) 等价于</p><p>$$<br>\Delta y \rightarrow 0(\Delta x \rightarrow 0).<br>$$</p><p>将式 (1) 与极限定义($\S2.2(5)$)结合起来, 得到”$f(x)$ 在 $x_0$ 连续”的”$\varepsilon \text{-} \delta$刻画”如下:</p><p>$$<br>\forall \varepsilon &gt; 0, \exists \delta &gt; 0, \forall x \in N(x_0, \delta): |f(x) - f(x_0)| &lt; \varepsilon.<br>$$</p><p>按:</p><p>1. 对于 $\S 2.2(5)$:</p><p>设 $l$ 是一常数. 设 $f(x)$ 在 $a$ 的某个去心邻域上有定义. 若</p><p>$$<br>\forall \varepsilon &gt; 0, \exists \delta &gt; 0, \forall x \in N(a, \delta): |f(x) - l| &lt; \varepsilon,<br>$$</p><p>则说当 $x$ 趋于 $a$ 时 $f(x)$ 收敛于(或趋于) $l$, 称 $l$ 为当 $x \rightarrow a$ 时 $f(x)$ 的<strong>极限</strong>, 记作</p><p>$$<br>\lim_{x \rightarrow a} f(x) &#x3D; l \quad \text{or} \quad f(x) \rightarrow l(x \rightarrow a).<br>$$</p><p>2. 对于 $N(a, r)$ 的含义:</p><p>$$<br>N(a, r) &#x3D; (a - r, a + r): 点 a 的半径为 r 的邻域.<br>$$</p><p>一些例子:</p><p><img src="https://i.imgur.com/RTNS6X4.png"></p><h1 id="定义-2"><a href="#定义-2" class="headerlink" title="定义 2"></a>定义 2</h1><p>单侧连续. 略.</p><h1 id="定义-3"><a href="#定义-3" class="headerlink" title="定义 3"></a>定义 3</h1><p>若极限 $l &#x3D; \lim_{x \rightarrow x_0} f(x)$ 存在, 但 $f(x_0) \neq l$ 或 $f(x_0)$ 无定义, 则称 $x_0$ 为 $f(x)$ 的<strong>可去间断点</strong>(重新定义 $f(x_0) &#x3D; l$ 后即消去间断).</p><p>若 $f(x_0^-)$ 与 $f(x_0^+)$ 皆存在但不相等, 则称 $x_0$ 为 $f(x)$ 的<strong>跳跃间断点</strong>, 称 $f(x_0^+) - f(x_0^-)$ 为 $f(x)$ 在 $x_0$ 处的跃度.</p><p>以上两种间断点合称为<strong>第一类间断点</strong>.</p><p>称非第一类的间断点为<strong>第二类间断点</strong>.</p><p>举例: $f(x) &#x3D; 1 &#x2F; x$ 以 $x &#x3D; 0$ 为第二类间断点.</p><hr><p>参考:</p><p>1、华科微积分教材。</p>]]></content>
    
    
    <categories>
      
      <category>高数</category>
      
    </categories>
    
    
    <tags>
      
      <tag>高数</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows 和 Linux 下 clock 函数对 scanf 函数的测量问题</title>
    <link href="/2021/11/27/Windows-%E5%92%8C-Linux-%E4%B8%8B-clock-%E5%87%BD%E6%95%B0%E5%AF%B9-scanf-%E5%87%BD%E6%95%B0%E7%9A%84%E6%B5%8B%E9%87%8F%E9%97%AE%E9%A2%98/"/>
    <url>/2021/11/27/Windows-%E5%92%8C-Linux-%E4%B8%8B-clock-%E5%87%BD%E6%95%B0%E5%AF%B9-scanf-%E5%87%BD%E6%95%B0%E7%9A%84%E6%B5%8B%E9%87%8F%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>这个问题的来由是《算法竞赛入门经典（第 2 版）》P27：</p><blockquote><p>输入 “20”，按 Enter 之后…键盘输入的时间也被计算在内——这确实是程序启动之后才进行的。</p></blockquote><p>所以，作者建议使用 <code>echo</code> 命令来消除键盘输入的影响：</p><blockquote><p>在 Windows 命令行下执行 <code>echo 20|abc</code>，操作系统会自动把 20 输入，其中 abc 是程序名。Linux 下需要输入 <code>echo 20|./abc</code>，因为在默认情况下，当前目录不在可执行文件的搜索路径中。</p></blockquote><p>根据我的猜测，在 Windows 下使用 <code>clock()</code> 函数，<code>scanf</code> 函数的输入时间是要被算进去的，而在 Linux 环境下，<code>scanf</code> 的时间则会被省去。</p><p>下面就来测试一下。</p><p>测试程序如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;stdio.h&gt;</span></span><br><span class="hljs-meta">#<span class="hljs-keyword">include</span><span class="hljs-string">&lt;time.h&gt;</span></span><br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span>)</span><br>&#123;<br><span class="hljs-type">const</span> <span class="hljs-type">int</span> MOD = <span class="hljs-number">1000000</span>;<br><span class="hljs-type">int</span> n, S = <span class="hljs-number">0</span>;<br><span class="hljs-built_in">scanf</span>(<span class="hljs-string">&quot;%d&quot;</span>, &amp;n);<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i = <span class="hljs-number">1</span>; i &lt;= n; i++) &#123;<br><span class="hljs-type">int</span> factorial = <span class="hljs-number">1</span>;<br><span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> j = <span class="hljs-number">1</span>; j &lt;= i; j++)<br>factorial = (factorial * j % MOD);<br>S = (S + factorial) % MOD;<br>&#125;<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%d\n&quot;</span>,  S);<br><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;Time used = %.2f\n&quot;</span>, (<span class="hljs-type">double</span>)clock() / CLOCKS_PER_SEC);<br><span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>在 Windows 下测试如下：</p><p><img src="https://i.imgur.com/9GEaKxx.png"></p><p>在 Ubuntu 20.04 下测试如下：</p><p><img src="https://i.imgur.com/rnFNSpm.png"></p><p>由此，可以知道，前面的猜测是正确的。但是具体原因是为什么，这个就需要去看两个操作系统的具体实现了。暂时没有这个必要。</p><p>然后，我们使用 <code>echo</code> 命令再试一下：</p><p><img src="https://i.imgur.com/Ca92yBN.png"></p><p><img src="https://i.imgur.com/V7B3vDw.png"></p>]]></content>
    
    
    <categories>
      
      <category>C</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>利用 Python 替换字符</title>
    <link href="/2021/11/26/%E5%88%A9%E7%94%A8-Python-%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6/"/>
    <url>/2021/11/26/%E5%88%A9%E7%94%A8-Python-%E6%9B%BF%E6%8D%A2%E5%AD%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<p>之前读《算法竞赛入门经典（第 2 版）》的时候，以为算法没什么用，现在发现其实还挺有用的，简单的题目就很有用，比如替换字符啦，比如整一些加密啦。</p><p>现在就有一个需求，之前用的 Hexo 框架的数学插件写行内数学公式需要在 <code>$</code> 左右再加上一对反引号，现在我用的是另一个数学插件，它不需要加反引号，所以有些之前的文章就需要把反引号给去掉。这里，Python 就派上了用场。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs py">raw_str = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">## 1、图的定义</span><br><span class="hljs-string"></span><br><span class="hljs-string">图（Graph）是由两个集合构成，一个是非空但有限的顶点集合 $V$，另一个是描述顶点之间关系——边的集合 $E$（可以是 $\varnothing$）。因此，图可以表示为 $G = (V, E)$。每条边是一顶点对 $(v, w)$ 且 $v, w \in V$。</span><br><span class="hljs-string"></span><br><span class="hljs-string">通常用 $|V|$ 表示顶点的数量，用 $|E|$ 表示边的数量。</span><br><span class="hljs-string"></span><br><span class="hljs-string">## 2、图的术语</span><br><span class="hljs-string"></span><br><span class="hljs-string">(1)、无向图（Underected Graphs）：无向图中顶点之间的边（Edge）没有方向，即边 $(v, w)$ 等同于 $(w, v)$。用圆括号“()”表示无向边。边的起点 $w$ 和终点 $v$ 次序并不重要。</span><br><span class="hljs-string"></span><br><span class="hljs-string">![图一　　无向图](https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608212819.png)</span><br><span class="hljs-string"></span><br><span class="hljs-string">(2)、有向图（Directed Graphs）：有向图中顶点之间的所有边都有方向，即 $&lt;v, w&gt;$ 不同于 $&lt;w, v&gt;$。用尖括号“&lt;&gt;”表示有向边。有向边也称弧（Are）。弧的“起点（弧头）”和“终点（弧尾）”的次序不能随意颠倒。在不会混淆的场合，有向边和无向边都简称为“边”。</span><br><span class="hljs-string"></span><br><span class="hljs-string">![图二　　有向图](https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608213830.png)</span><br><span class="hljs-string"></span><br><span class="hljs-string">(3)、简单图（Simple Graph）：如果图中出现重边（即边的集合 $E$ 中有相同的重复元素）或者自回路边（即边的起点和终点是同一个顶点），就叫做非简单图。</span><br><span class="hljs-string"></span><br><span class="hljs-string">![图三　　两种非简单图](https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608220507.png)</span><br><span class="hljs-string"></span><br><span class="hljs-string">(4)、邻接点（Adjacent Vertices）：如果 $(v, w)$ 是无向图中任意一条边，那么称 $v$ 和 $w$ 互为邻接点；如果 $&lt;v, w&gt;$ 是有向图中任意一条边，那么称起点 `$v$` “邻接到”（Adjacent to）终点 `$w$`，也称终点 `$w$` “邻接自”（Adjacent from）起点 `$v$`。比如，考察图二这个有向图 `$G_2$`，顶点 2 邻接到顶点 1，或者说顶点 1 邻接自顶点 2。</span><br><span class="hljs-string"></span><br><span class="hljs-string">(5)、路径（Path）、简单路径（Simple Path）、回路（Cycle，也叫做“环”）、无环图（Acyclic Graph）：图中的一条路径是一顶点序列 `$v_1, v_2, ..., v_N$`，序列中任何相邻的两顶点都能在图中找到对应的边，即 `$(v_i, v_&#123;i + 1&#125;) \in E (1 \leqslant i &lt; N)$`。一条路径的长度是这条路径所包含的边数。</span><br><span class="hljs-string"></span><br><span class="hljs-string">一条**简单路径**是指除了路径的首尾顶点外，其余顶点都是不同的。</span><br><span class="hljs-string"></span><br><span class="hljs-string">有向图中的一条回路是指 `$v_1 = v_N$` 的一条路径。路径长度为 1 的回路是一个自回路（属于非简单图）。简单路径形成的回路称为简单回路（Simple Cycle）。</span><br><span class="hljs-string"></span><br><span class="hljs-string">如果在一个有向图中不存在回路，那么这个有向图称为无环图。</span><br><span class="hljs-string"></span><br><span class="hljs-string">对于无向图，由于顶点是无序的，环路的长度要大于等于 3。</span><br><span class="hljs-string"></span><br><span class="hljs-string">按：本文所有术语和定义皆摘自浙江大学《数据结构 第二版》（陈越、何钦铭），且省略了部分我认为不重要的内容。</span><br><span class="hljs-string"></span><br><span class="hljs-string">(12)、连通图（Connected Graph）、连通分量（Connected Component）：在无向图中，如果从一个顶点 `$v_i$` 到另一个顶点 `$v_j(i \leq j)$` 有路径，则称顶点 `$v_i$` 和 `$v_j$` 是连通的（Connected）。如果图中任意两顶点都是连通的，则称该图是连通图。无向图的极大连通子图称为连通分量。连通分量的概念包含以下 4 个要点：</span><br><span class="hljs-string"></span><br><span class="hljs-string">- 子图：连通分量应该是原图的子图；</span><br><span class="hljs-string">- 连通：连通分量本身应该是连通的；</span><br><span class="hljs-string">- 极大顶点数：连通子图含有极大顶点数，即再加入其他顶点将会导致子图不连通；</span><br><span class="hljs-string">- 极大边数：具有极大顶点数的连通子图包含依附于这些顶点的所有边。</span><br><span class="hljs-string"></span><br><span class="hljs-string">因此，连通的无向图只有一个连通分量，这个连通分量就是本图。不连通的无向图有多于一个的连通分量。</span><br><span class="hljs-string"></span><br><span class="hljs-string">(13)、强连通图（Strongly Connected Graph）、强连通分量（Strongly Connected Component）；对于有向图来说，若图中任意一对顶点 `$v_i$` 和 `$v_j(i \leq j)$` 均既有从 `$v_i$` 到 `$v_j$` 的路径，也有从 `$v_j$` 到 `$v_i$` 的路径，则称该有向图是强连通图。有向图的极大强连通子图称为强连通分量。</span><br><span class="hljs-string"></span><br><span class="hljs-string">强连通分量的概念与连通分量类似，也包含 4 个要点。强连通图本身就是一个强连通分量。不是强连通的有向图有多于一个的强连通分量。</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br>reverted_str = <span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><br>count = <span class="hljs-number">0</span><br><br><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> raw_str:<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-string">&#x27;`&#x27;</span>:<br>        <span class="hljs-comment"># print(i)</span><br>        count = count + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">continue</span><br>    reverted_str = reverted_str + i<br><br><span class="hljs-built_in">print</span>(reverted_str)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(raw_str))<br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(reverted_str))<br><span class="hljs-built_in">print</span>(count)<br></code></pre></td></tr></table></figure><p>按：这里只作了简答的替换，以后有需要的时候会更新。</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>VSCode 配置修改记录(settings.json)</title>
    <link href="/2021/11/26/VSCode-%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E8%AE%B0%E5%BD%95-settings-json/"/>
    <url>/2021/11/26/VSCode-%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9%E8%AE%B0%E5%BD%95-settings-json/</url>
    
    <content type="html"><![CDATA[<p>最近发现 VSCode 用来写 Python 其实还蛮不错的，然后就遇到了一些配置的问题，比如控制台默认 Shell(Console) 的设置，比如 Shell 的缓冲区(Buffer) 的行数限制修改，因此，为了以后换环境(例如，重装系统)时能够快速同步配置，就在这里记录一下对于 VSCode 配置的修改。</p><p>首先，给出目前我的 VSCode 的 <code>settings.json</code> 的配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;workbench.startupEditor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;newUntitledFile&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;explorer.confirmDelete&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;markdown-preview-enhanced.mathRenderingOption&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MathJax&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;markdown-preview-enhanced.previewTheme&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;one-dark.css&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.fontFamily&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot; ‘宋体’, Consolas, monospace&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.fontSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;github&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.branch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;master&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.customUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blogs/pictures/&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.repo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;fanlumaster/BlogMaps&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.minimap.enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;explorer.confirmDragAndDrop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.customOutputFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;![]($&#123;url&#125;)&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.mouseWheelZoom&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;security.workspace.trust.untrustedFiles&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;open&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;security.workspace.trust.enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.wordWrap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;on&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;vscode-imgur.client_id&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;vscode-imgur.client_secret&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;vscode-imgur.preferUserUpload&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.imgur.clientId&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.imgur.proxy&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;http://127.0.0.1:7890&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;liveServer.settings.CustomBrowser&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;microsoft-edge&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.uploader&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;github&quot;</span><span class="hljs-punctuation">,</span><br><br>    <span class="hljs-comment">// I want my default to be 4, but JavaScript or HTML to be 2</span><br>    <span class="hljs-attr">&quot;editor.tabSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">4</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;[javascript]&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;editor.tabSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;[html]&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;editor.tabSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">2</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-comment">// This one forces the tab to be **space**</span><br>    <span class="hljs-attr">&quot;editor.insertSpaces&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.largeFileOptimizations&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;terminal.integrated.profiles.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;PowerShell&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PowerShell&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-comment">// &quot;path&quot;: &quot;C:\\Program Files\\PowerShell\\7\\pwsh.exe&quot;,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-powershell&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Command Prompt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>                <span class="hljs-string">&quot;$&#123;env:windir&#125;\\Sysnative\\cmd.exe&quot;</span><span class="hljs-punctuation">,</span><br>                <span class="hljs-string">&quot;$&#123;env:windir&#125;\\System32\\cmd.exe&quot;</span><br>            <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-cmd&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;Git Bash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Git Bash&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;PowerShell7&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>            <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;C:\\Program Files\\PowerShell\\7\\pwsh.exe&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-powershell&quot;</span><br>        <span class="hljs-punctuation">&#125;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;terminal.integrated.defaultProfile.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PowerShell7&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;terminal.integrated.scrollback&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p>按：此配置文件删去了图床的 Token。</p><h1 id="修改控制台缓冲区的大小"><a href="#修改控制台缓冲区的大小" class="headerlink" title="修改控制台缓冲区的大小"></a>修改控制台缓冲区的大小</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;terminal.integrated.scrollback&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">10000</span><br></code></pre></td></tr></table></figure><p>按：默认的大小似乎是 1000，太小了，不够用。</p><h1 id="当系统语言为英文时，设置-VSCode-中文字体为宋体"><a href="#当系统语言为英文时，设置-VSCode-中文字体为宋体" class="headerlink" title="当系统语言为英文时，设置 VSCode 中文字体为宋体"></a>当系统语言为英文时，设置 VSCode 中文字体为宋体</h1><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;editor.fontFamily&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Consolas, &#x27;宋体&#x27;, monospace&quot;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>本来 ‘宋体’ 是排在首位的，现在把它挪到第二个位置，就奏效了。</p>]]></content>
    
    
    <categories>
      
      <category>VSCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>修改 VSCode 默认 Shell 为 Powershell7</title>
    <link href="/2021/11/26/%E4%BF%AE%E6%94%B9-VSCode-%E9%BB%98%E8%AE%A4-Shell-%E4%B8%BA-Powershell7/"/>
    <url>/2021/11/26/%E4%BF%AE%E6%94%B9-VSCode-%E9%BB%98%E8%AE%A4-Shell-%E4%B8%BA-Powershell7/</url>
    
    <content type="html"><![CDATA[<p>首先，我们的 VSCode 默认的 Shell(Terminal) 应该是这个：</p><p><img src="https://i.imgur.com/u7kdIja.png"></p><p>然后，我们访问它给的网址<a href="https://aka.ms/PSWindows">https://aka.ms/PSWindows</a>，去下载最新的 PowerShell，</p><p><img src="https://i.imgur.com/xIkYDjb.png"></p><p><img src="https://i.imgur.com/ysvWqCS.png"></p><p>这里推荐使用 MSI 包来安装，下载好之后，直接双击安装即可。</p><p>然后，<code>Ctrl + Shift + P</code>，输入 <code>open settings</code>，打开 <code>settings.json</code>：</p><p><img src="https://i.imgur.com/Te5EluN.png"></p><p>然后添加如下配置：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;terminal.integrated.profiles.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;PowerShell&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PowerShell&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-powershell&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;Command Prompt&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>            <span class="hljs-string">&quot;$&#123;env:windir&#125;\\Sysnative\\cmd.exe&quot;</span><span class="hljs-punctuation">,</span><br>            <span class="hljs-string">&quot;$&#123;env:windir&#125;\\System32\\cmd.exe&quot;</span><br>        <span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-cmd&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;Git Bash&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;source&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Git Bash&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;PowerShell7&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>        <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;C:\\Program Files\\PowerShell\\7\\pwsh.exe&quot;</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;args&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>        <span class="hljs-attr">&quot;icon&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;terminal-powershell&quot;</span><br>    <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br><span class="hljs-attr">&quot;terminal.integrated.defaultProfile.windows&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;PowerShell7&quot;</span><span class="hljs-punctuation">,</span><br></code></pre></td></tr></table></figure><p>然后，我们新建一个 Terminal 来看一下，</p><p><img src="https://i.imgur.com/Pp12pqi.png"></p><p>发现配置已经生效。</p><hr><p>参考：</p><p>1. <a href="https://stackoverflow.com/questions/65908987/vs-code-how-to-open-settings-json-file">https://stackoverflow.com/questions/65908987/vs-code-how-to-open-settings-json-file</a></p><p>2. <a href="https://stackoverflow.com/questions/67601161/the-new-way-to-configure-default-shell-and-argument-commands-in-vscode">https://stackoverflow.com/questions/67601161/the-new-way-to-configure-default-shell-and-argument-commands-in-vscode</a></p>]]></content>
    
    
    <categories>
      
      <category>VSCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 简单字符替换</title>
    <link href="/2021/11/26/Python-%E7%AE%80%E5%8D%95%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2/"/>
    <url>/2021/11/26/Python-%E7%AE%80%E5%8D%95%E5%AD%97%E7%AC%A6%E6%9B%BF%E6%8D%A2/</url>
    
    <content type="html"><![CDATA[<p>这里仅仅是作了一个简单的操作，即，将一个含有很多汉字的文本中的所有汉字都替换成 unicode 表中对应的下一个字符。然后输出。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><br><span class="hljs-comment"># print all the Chinese characters</span><br><span class="hljs-comment"># for i in range(0x4e00,0x9fa6):</span><br><span class="hljs-comment"># print (chr(i))</span><br><br><span class="hljs-built_in">str</span> = <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">【第一章】道可道，非常道；名可名，非常名。无名天地之始，有名万物之母。故常无欲，以观其妙；常</span><br><span class="hljs-string">有欲，以观其徼（jiào）。此两者同出而异名，同谓之玄，玄之又玄，众妙之门。〖译文〗</span><br><span class="hljs-string">【第二章】天下皆知美之为美，斯恶（è）已；皆知善之为善，斯不善已。故有无相生，难易相成，长短相</span><br><span class="hljs-string">较，高下相倾，音声相和（hè），前后相随。是以圣人处无为之事，行不言之教，万物作焉而不辞，生而</span><br><span class="hljs-string">不有，为而不恃，功成而弗居。夫（fú）唯弗居，是以不去。 〖译文〗</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># judge whether a char is a chinese character</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">is_chinese</span>(<span class="hljs-params">char</span>):<br>    <span class="hljs-keyword">if</span> char &gt;= <span class="hljs-string">u&#x27;\u4e00&#x27;</span> <span class="hljs-keyword">and</span> char &lt;= <span class="hljs-string">u&#x27;\u9fa5&#x27;</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>reverted_str = <span class="hljs-string">&quot;&quot;&quot;&quot;&quot;&quot;</span><br><br><span class="hljs-keyword">for</span> char <span class="hljs-keyword">in</span> <span class="hljs-built_in">str</span>:<br>    <span class="hljs-keyword">if</span> char == <span class="hljs-string">&quot;\n&quot;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">r&quot;\n&quot;</span>, <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-built_in">ord</span>(char), <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-string">r&#x27;\n&#x27;</span>)<br>        reverted_str = reverted_str + char<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">if</span> char == <span class="hljs-string">&#x27; &#x27;</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">r&quot;blank&quot;</span>, <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-built_in">ord</span>(char), <span class="hljs-string">&#x27;\t&#x27;</span>, char)<br>        reverted_str = reverted_str + char<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">if</span> is_chinese(char) == <span class="hljs-literal">False</span>:<br>        <span class="hljs-built_in">print</span>(char, <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-built_in">ord</span>(char), <span class="hljs-string">&#x27;\t&#x27;</span>, char)<br>        reverted_str = reverted_str + char<br>        <span class="hljs-keyword">continue</span><br>    <span class="hljs-built_in">print</span>(char, <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-built_in">ord</span>(char), <span class="hljs-string">&#x27;\t&#x27;</span>, <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">ord</span>(char) + <span class="hljs-number">1</span>))<br>    reverted_str = reverted_str + <span class="hljs-built_in">chr</span>(<span class="hljs-built_in">ord</span>(char) + <span class="hljs-number">1</span>)<br><br><span class="hljs-built_in">print</span>(reverted_str)<br><br><span class="hljs-comment"># print(&#x27;&gt;&#x27;, &#x27;\t&#x27;, ord(&#x27;&gt;&#x27;), &#x27;\t&#x27;, chr(ord(&#x27;&gt;&#x27;) + 1))</span><br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">\n       10      \n【       12304   【第       31532   笭一       19968   丁章       31456   竡】       12305   】道       36947   達可       21487   台道       36947   達，       65292   ，非       38750   靟常       24120   帹道       36947   達；       65307   ；名       21517   后可       21487   台名       21517   后，       65292   ，非       38750   靟常       24120   帹名       21517   后。       12290   。无       26080   旡名       21517   后天       22825   太地       22320   圱之       20043   乌始       22987   姌，       65292   ，有       26377   朊名       21517   后万       19975   丈物       29289   牪之       20043   乌母       27597   毎。       12290   。故       25925   敆常       24120   帹无       26080   旡欲       27442   欳，       65292   ，以       20197   仦观       35266   觃其       20854   具妙       22937   妚；       65307   ；常       24120   帹\n       10      \n有       26377   朊欲       27442   欳，       65292   ，以       20197   仦观       35266   觃其       20854   具徼       24508   徽（       65288   （j        106     ji        105     ià        224     ào        111     o）       65289   ）。       12290   。此       27492   步两       20004   严者       32773   耆同       21516   名出       20986   击而       32780   耍异       24322   弃名       21517   后，       65292   ，同       21516   名谓       35859   谔之       20043   乌玄       29572   玅，       65292   ，玄       29572   玅之       20043   乌又       21448   叉玄       29572   玅，       65292   ，众       20247   优妙       22937   妚之       20043   乌门       38376   闩。       12290   。〖       12310   〖译       35793   诒文       25991   斈〗       12311   〗\n       10      \n【       12304   【第       31532   笭二       20108   亍章       31456   竡】       12305   】天       22825   太下       19979   丌皆       30342   皇知       30693   矦美       32654   羏之       20043   乌为       20026   主美       32654   羏，       65292   ，斯       26031   新恶       24694   恷（       65288   （è        232     è）       65289   ）已       24050   巳；       65307   ；皆       30342   皇知       30693   矦善       21892   喅之       20043   乌为       20026   主善       21892   喅，       65292   ，斯       26031   新不       19981   与善       21892   喅已       24050   巳。       12290   。故       25925   敆有       26377   朊无       26080   旡相       30456   盹生       29983   甠，       65292   ，难       38590   隿易       26131   昔相       30456   盹成       25104   我，       65292   ，长       38271   門短       30701   矮相       30456   盹\n       10      \n较       36739   辄，       65292   ，高       39640   髙下       19979   丌相       30456   盹倾       20542   倿，       65292   ，音       38899   韴声       22768   壱相       30456   盹和       21644   咍（       65288   （h        104     hè        232     è）       65289   ），       65292   ，前       21069   剎后       21518   吏相       30456   盹随       38543   隐。       12290   。是       26159   昰以       20197   仦圣       22307   圤人       20154   亻处       22788   夅无       26080   旡为       20026   主之       20043   乌事       20107   二，       65292   ，行       34892   衍不       19981   与言       35328   訁之       20043   乌教       25945   敚，       65292   ，万       19975   丈物       29289   牪作       20316   佝焉       28937   焊而       32780   耍不       19981   与辞       36766   辟，       65292   ，生       29983   甠而       32780   耍\n       10      \n不       19981   与有       26377   朊，       65292   ，为       20026   主而       32780   耍不       19981   与恃       24643   恄，       65292   ，是       26159   昰以       20197   仦不       19981   与去       21435   厼。       12290   。blank    32〖       12310   〖译       35793   诒文       25991   斈〗       12311   〗\n       10      \n【笭丁竡】達台達，靟帹達；后台后，靟帹后。旡后太圱乌姌，朊后丈牪乌毎。敆帹旡欳，仦觃具妚；帹朊欳，仦觃具徽（jiào）。步严耆名击耍弃后，名谔乌玅，玅乌叉玅，优妚乌闩。〖诒斈〗【笭亍竡】太丌皇矦羏乌主羏，新恷（è）巳；皇矦喅乌主喅，新与喅巳。敆朊旡盹甠，隿昔盹我，門矮盹辄，髙丌盹倿，韴壱盹咍（hè），剎吏盹隐。昰仦圤亻夅旡主乌二，衍与訁乌敚，丈牪佝焊耍与辟，甠耍与朊，主耍与恄，加我耍弘屆。夬（fú）唰弘屆，昰仦与厼。 〖诒斈〗</code></pre>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>小脚本</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>华科软院计算机组成原理实验整理</title>
    <link href="/2021/11/25/%E5%8D%8E%E7%A7%91%E8%BD%AF%E9%99%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%95%B4%E7%90%86/"/>
    <url>/2021/11/25/%E5%8D%8E%E7%A7%91%E8%BD%AF%E9%99%A2%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>一共应该是四次实验，但是最后只检查实验二和实验四。</p><p>关于这些实验的说明，老师给的时间是一个星期，从前一周的星期四晚上开始讲解，到接下来一周的周四就要检查实验成果。而且，由于接下来的那一周的周二还有考试，同样是计算机组成原理的考试，所以老师应该是隐晦地降低了要求，最后只要求检查实验结果，并且要理解实验原理（这个最后检查的时候要问），然而，却不管这个实验是否是独立做出来的，可以讨论，可以从网上找参考。</p><p>基于这些情况，我决定使用计算机学院在慕课上给的实验材料，因为那个材料可以找到的参考资料比较多，而实验助教给的那份材料就先放在一边。毕竟最终的目的是理解实验原理。</p><h1 id="实验一"><a href="#实验一" class="headerlink" title="实验一"></a>实验一</h1><p>暂时按下不表。</p><h1 id="实验二"><a href="#实验二" class="headerlink" title="实验二"></a>实验二</h1><h2 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><ul><li>熟悉 Logisim 软件平台。 </li><li>掌握运算器基本工作原理 </li><li>掌握运算溢出检测的原理和实现方法； </li><li>理解有符号数和无符号数运算的区别； </li><li>理解基于补码的加&#x2F;减运算实现原理； </li><li>熟悉运算器的数据传输通路。</li></ul><h2 id="二、实验环境"><a href="#二、实验环境" class="headerlink" title="二、实验环境"></a>二、实验环境</h2><p>Logisim 是一款数字电路模拟的教育软件，用户都可以通过它来学习如何创建逻辑电路，方便简单。 它是一款基于 Java 的应用程序，可运行在任何支持 JAVA 环境的平台，方便学生来学习设计和模仿数字逻辑电路。Logisim 中的主要组成部分之一就在于设计并以图示来显示 CPU。当然 Logisim 中还有其他多种组合分析模型来对你进行帮助，如转换电路，表达式，布尔型和真值表等等。同时还可以重新利用小规模的电路来作为大型电路的一部分。</p><p><a href="http://www.cburch.com/logisim/docs.html">http://www.cburch.com/logisim/docs.html</a></p><h2 id="三、实验内容"><a href="#三、实验内容" class="headerlink" title="三、实验内容"></a>三、实验内容</h2><h3 id="1-八位串行可控加减法电路设计"><a href="#1-八位串行可控加减法电路设计" class="headerlink" title="1. 八位串行可控加减法电路设计"></a>1. 八位串行可控加减法电路设计</h3><p>利用已经封装好的全加器（封装 1）设计 8 位串行可控加减法电路，其（指八位串行可控加减法器）引脚电路如下图所示</p><p><img src="https://i.imgur.com/y0QhTHh.png" alt="八位串行可控加减法电路引脚定义"></p><p>封装 1 的电路如下图所示：</p><p><img src="https://i.imgur.com/quI7Ovn.png" alt="封装 1"></p><p>初始电路如下：</p><p><img src="https://i.imgur.com/e6jJRNI.png"></p><p>完成电路如下：</p><p><img src="https://i.imgur.com/TrCSihK.png"></p><p>完成之后，可以使用上面的引脚区域进行测试：</p><p><img src="https://i.imgur.com/D0fo21y.png"></p><p>按：这个引脚的 X 和 Y 输入可以一位一位地点击来改变其数值。</p><p>一些测试用例：</p><ul><li>1. x&#x3D;0000 0000，y&#x3D;0000 0001，sub&#x3D;0；s&#x3D;0000 0001，Cout&#x3D;0，OF&#x3D;0</li><li>2. x&#x3D;0000 1000，y&#x3D;0000 0101，sub&#x3D;1；s&#x3D;0000 0011 - Cout&#x3D;1，OF&#x3D;0</li><li>3. x&#x3D;0100 1000，y&#x3D;0100 0001，sub&#x3D;0；s&#x3D;1000 1001 - Cout&#x3D;0，OF&#x3D;1</li><li>4. x&#x3D;0000 0111，y&#x3D;1000 0111，sub&#x3D;1；s&#x3D;1000 0000，Cout&#x3D;0，OF&#x3D;1</li></ul><p><strong>实验原理：</strong></p><p>输入：</p><ul><li>操作数 1 为 $X$，$X$ 的 8 位数据 $X_7 \sim X_0$，操作数 2 为 $Y$，$Y$ 的 8 位数据 $Y_7 \sim Y_0$。</li><li>最低位进位 $Cin$。</li><li>加减法控制项 $Sub$。</li></ul><p>输出：</p><ul><li>运算结果 $S$ 的 8 位数据 $S_7 \sim S_0$。</li><li>最高位进位 $Cout$。</li><li>有符号运算溢出判断 $OF$。</li></ul><p>首先，研究一下预置部件一位全加器 FA。</p><p>对于一位加法，显然有输入：</p><ul><li>操作数 1：x</li><li>操作数 2：y</li></ul><p>有输出：</p><ul><li>本位和：s</li><li>进位产生：Cout</li></ul><p>则有：</p><ul><li>$0 + 0 &#x3D; 0$，进位 $0$</li><li>$0 + 1 &#x3D; 1$，进位 $0$</li><li>$1 + 0 &#x3D; 1$，进位 $0$</li><li>$1 + 1 &#x3D; 0$，进位 $1$</li></ul><p>然而，在实际的运算中，对于一位加法，还有从低位进位引入的进位值，在运算中不可忽略，我们把这个进位值记作 Cin，同样要与 x 和 y 一起参与加法运算。</p><p>那么对于一位加法运算，有 x，y 以及 Cin 三个输入数据，同时有 s 和 Cout 两个输出数据。</p><p>对于这个运算过程，其逻辑表达式为</p><p>$$<br>\begin{split}<br>Cout &amp;&#x3D; X_i \cdot Y_i + Cin \cdot (X_i \oplus Y_i) \<br>S_i &amp;&#x3D; X_i \oplus Y_i \oplus Cin<br>\end{split}<br>$$</p><p>根据一位加法的原理，可以设计出一位全加器 FA：</p><p><img src="https://i.imgur.com/uBMfRMP.png" alt="一位全加器 FA"></p><p>已经封装好的电路可以在其他电路中直接拖拽使用，一位加法器 FA 在其他电路中的效果如图所示：</p><p><img src="https://i.imgur.com/5npCeQK.png"></p><p>将 8 个 FA 的进位链串联即可得到 8 位串行加法器。</p><p><img src="https://i.imgur.com/qXDzOpb.png"></p><p>将 8 个一位全加器 FA 的进位链串联即可得到 n 位加法器，由于补码符号位也可以参与运算，所以此电路既可以用于有符号数运算，也可以用于无符号数运算，但二者在溢出检测上有一定区别，这里 OF 的判定以有符号数加法运算是否溢出为标准。</p><p>按：存疑。为什么要以有符号数加法运算是否溢出为标准。</p><p>教材给出了溢出的定义，即：运算结果超出数据类型所能表示的数据范围的现象称为溢出。有多种方法可以检测溢出，课本上给出了 3 种常用的方法来检测溢出。</p><blockquote><p>溢出检测方法 1. 根据操作数和运算结果的符号位是否一致来进行检测</p></blockquote><p>在有符号运算加法中，只有当两个符号相同的数相加时才有可能产生溢出，因此，可以根据操作数与运算结果的符号位是否一致来进行检测。</p><p>设 $X_f$，$Y_f$ 分别为两个操作数的符号位，$S_f$ 为结果的符号位，$V$ 为溢出标志位，$V &#x3D; 1$ 时即表示溢出，那么有逻辑表达式：</p><p>$$<br>V &#x3D; X_f Y_f \overline{S}_f + \overline{X}_f \overline{Y}_f S_f<br>$$</p><p>这个逻辑表达式表明，有符号加法运算溢出的条件是：两个操作数都是正数结果却为负数，或者两个运算数都是负数结果却是正数。</p><blockquote><p>溢出检测方法 2. 根据运算过程中，最高数据位与符号位的进位位是否一致进行检测（推荐）</p></blockquote><p>设运算时最高数据位产生的进位信号为 $C_d$，符号位产生的进位信号为 $C_f$，那么相应的检测逻辑表达式为：</p><p>$$<br>V &#x3D; C_d \oplus C_f<br>$$</p><p>这个表达式表明，运算过程中最高数据位的进位 $C_d$ 与符号位的进位 $C_f$ 不同步时，就表明有符号运算结果发生了溢出。</p><p>可以用异或门实现。</p><blockquote><p>溢出检测方法 3. 利用变形补码进行检测</p></blockquote><p>略。暂时用不到，而且讲课的时候有讲。</p><p>对于这个封装好的 8 位串行加法器，采用的是上述的方法 2 来实现 OF 的溢出检测。</p><p><img src="https://i.imgur.com/qXDzOpb.png"></p><p>在电路中，我们把最高数据位 $X_6$，$Y_6$ 的运算结果的进位输出 $Cout_6$ 与符号位 $X_7$，$Y_7$ 的运算结果的进位输出 $Cout_7$ 一同送入 XOR gate 进行判定，结果送 OF，实现检测功能。</p><p>然后，我们来研究八位串行可控加减法器的实现。</p><p>再次给一下八位串行可控加减法器的输入输出引脚：</p><p><img src="https://i.imgur.com/y0QhTHh.png"></p><p>输入：</p><ul><li>操作数 1 为 $X$，$X$ 的 8 位数据 $X_7 \sim X_0$，操作数 2 为 $Y$，$Y$ 的 8 位数据 $Y_7 \sim Y_0$。</li><li>最低位进位 $Cin$。</li><li>加减法控制项 $Sub$。</li></ul><p>输出：</p><ul><li>运算结果 $S$ 的 8 位数据 $S_7 \sim S_0$。</li><li>最高位进位 $Cout$。</li><li>有符号运算溢出判断 $OF$。</li></ul><p>之前已经给出了 8 位串行加法器的电路实现，相当于已经有了“加法”功能。根据这个思路，在本实验中，需要完成“减法”功能，以及“加减法控制”功能。</p><p>实验文件中已经给的 8 位串行加法器的实现：</p><p><img src="https://i.imgur.com/88sbir0.png"></p><p>预备知识：补码减法</p><p>对补码加法有：</p><p>$$<br>[x]_补 + [y]_补 &#x3D; [x + y]_补 (mod ; M)<br>$$</p><p>对补码减法有：</p><p>$$<br>[x]_补 + [-y]_补 &#x3D; [x - y]_补<br>$$</p><p>根据以上规则，把补码减法转换为补码加法。这样，我们就可以简单地利用“加法器”来实现减法运算。</p><blockquote><p>“加减法控制”功能与 Sub。</p></blockquote><p>这里建议 Sub 值为 1 时表示减法运算，Sub 为 0 时表示加法运算。</p><blockquote><p>有符号数运算溢出检测 OF？</p></blockquote><p>采用和上述八位串行加法器一样的思路。</p><p>最后再贴一次参考测试用例：</p><ul><li>1. x&#x3D;0000 0000，y&#x3D;0000 0001，sub&#x3D;0；s&#x3D;0000 0001，Cout&#x3D;0，OF&#x3D;0</li><li>2. x&#x3D;0000 1000，y&#x3D;0000 0101，sub&#x3D;1；s&#x3D;0000 0011 - Cout&#x3D;1，OF&#x3D;0</li><li>3. x&#x3D;0100 1000，y&#x3D;0100 0001，sub&#x3D;0；s&#x3D;1000 1001 - Cout&#x3D;0，OF&#x3D;1</li><li>4. x&#x3D;0000 0111，y&#x3D;1000 0111，sub&#x3D;1；s&#x3D;1000 0000，Cout&#x3D;0，OF&#x3D;1</li></ul><p>再贴一次完成电路：</p><p><img src="https://i.imgur.com/TrCSihK.png"></p><h3 id="2-四位先行进位电路"><a href="#2-四位先行进位电路" class="headerlink" title="2. 四位先行进位电路"></a>2. 四位先行进位电路</h3><p>根据下图定义的输入输出引脚完成 4 位先行进位电路。</p><p><img src="https://i.imgur.com/rngpsTs.png" alt="四位先行进位电路引脚定义"></p><p>初始电路：</p><p><img src="https://i.imgur.com/Y8P38CK.png"></p><p>完成电路：</p><p><img src="https://i.imgur.com/lr9jAIo.png"></p><p><strong>实验原理：</strong></p><p>首先研究一下输入输出：</p><p><img src="https://i.imgur.com/rngpsTs.png"></p><ul><li><p>输入序列 $G4 ; P4 ; G3$ $P3 ; G2 ; P2 ; G1 ; P1 ; Cin$</p></li><li><p>输出序列 $C4 ; C3 ; C2$ $C1 ; G^* P^*$</p></li><li><p>1. 输入：0000 0001 1     输出：0001 00</p></li><li><p>2. 输入：0000 0111 0     输出：0011 00</p></li><li><p>3. 输入：1111 0000 0     输出：1100 10</p></li><li><p>4. 输入：1111 1110 0     输出：1111 10</p></li></ul><p>并行进位加法器的进位电路，74181 包含了 74182。</p>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库第二次上机实验报告</title>
    <link href="/2021/11/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <url>/2021/11/24/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%BA%8C%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="实验五-表数据的维护"><a href="#实验五-表数据的维护" class="headerlink" title="实验五 表数据的维护"></a>实验五 表数据的维护</h1><h2 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>熟练掌握使用 Transact-SQL 语言和通过 Navicat 输入表数据、修改表数据和删除表数据的操作。</p><h2 id="二、实验内容"><a href="#二、实验内容" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、在数据库 world 中建立一个名为 newlanguage 的表，其结构与表 countrylanguage 完全一样（注意各字段的默认值、字符集、排序方式等），如图：</p><p><img src="https://i.imgur.com/Adfr5Te.png"></p><p>这里要注意，<code>enum</code> 类型的字段要设置可供选择的值。</p><p>这里其实建议使用建表语句（可以直接使用 <code>SHOW CREATE TABLE countrylanguage;</code> 来拷贝一下 <code>countrylanguage</code> 中的这个表，省去了一个一个设置字符集的麻烦，也解决了 enum 的问题）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `newlanguage` (<br>  `CountryCode` <span class="hljs-type">char</span>(<span class="hljs-number">3</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> latin1 <span class="hljs-keyword">COLLATE</span> latin1_swedish_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span>,<br>  `<span class="hljs-keyword">Language</span>` <span class="hljs-type">char</span>(<span class="hljs-number">30</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> latin1 <span class="hljs-keyword">COLLATE</span> latin1_swedish_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;&#x27;</span>,<br>  `IsOfficial` enum(<span class="hljs-string">&#x27;T&#x27;</span>,<span class="hljs-string">&#x27;F&#x27;</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> latin1 <span class="hljs-keyword">COLLATE</span> latin1_swedish_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;F&#x27;</span>,<br>  `Percentage` <span class="hljs-type">float</span>(<span class="hljs-number">4</span>,<span class="hljs-number">1</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;0.0&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`CountryCode`,`<span class="hljs-keyword">Language</span>`) <span class="hljs-keyword">USING</span> BTREE,<br>  KEY `CountryCode` (`CountryCode`) <span class="hljs-keyword">USING</span> BTREE<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>latin1 ROW_FORMAT<span class="hljs-operator">=</span>COMPACT;<br></code></pre></td></tr></table></figure><p>注：这里在拷贝建表语句时，不能把外键的设置带上。</p><p>2、在表 newlanguage 中插入中国的客家话，其名称为 CountryCode为CHN，language 为 Kejia，isOfficial 为 F，percentage 为 0.3。 </p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> newlanguage (CountryCode, <span class="hljs-keyword">Language</span>, IsOfficial, Percentage)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;CHN&#x27;</span>, <span class="hljs-string">&#x27;Kejia&#x27;</span>, <span class="hljs-string">&#x27;F&#x27;</span>, <span class="hljs-number">0.3</span>);<br></code></pre></td></tr></table></figure><p>注：这里实验指南本身漏掉了第 3 题。</p><p>4、试将表 countrylanguage 中的所有记录插入到表 newlanguage 中去。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> newlanguage <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> countrylanguage;<br></code></pre></td></tr></table></figure><p>5、将表 newlanguage 中 Language 为 “Kejia” 的语言的 Percentage 改为 0.4。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> newlanguage <span class="hljs-keyword">SET</span> Percentage <span class="hljs-operator">=</span> <span class="hljs-number">0.4</span><br><span class="hljs-keyword">WHERE</span> <span class="hljs-keyword">Language</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Kejia&#x27;</span>;<br></code></pre></td></tr></table></figure><p>6、将表 newlanguage 中语言的 Percentage 均减去 0.1。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> newlanguage <span class="hljs-keyword">SET</span> Percentage <span class="hljs-operator">=</span> Percentage <span class="hljs-operator">-</span> <span class="hljs-number">0.1</span>;<br></code></pre></td></tr></table></figure><p>修改前：</p><p><img src="https://i.imgur.com/3C70VDZ.png"></p><p>修改后：</p><p><img src="https://i.imgur.com/bPjeFtS.png"></p><p>7、删除表 newlanguage 中澳大利亚（CountrCode 为“AUS”）的英语记录。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> newlanguage<br><span class="hljs-keyword">WHERE</span> CountryCode <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AUS&#x27;</span> <span class="hljs-keyword">AND</span> <span class="hljs-keyword">Language</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;English&#x27;</span>;<br></code></pre></td></tr></table></figure><p>8、清空表 newlanguage 中的所有数据。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> newlanguage;<br></code></pre></td></tr></table></figure><h2 id="三、课后练习题"><a href="#三、课后练习题" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>以下题目在数据库 world 中完成。</p><p>1、通过 Navicat，在 country、countrylanguage、和 city 三个表中各输入 10 条记录。</p><p><img src="https://i.imgur.com/knRr7eq.png"></p><p>其他两张表的插入略。</p><p>2、将一条新的城市记录（Name：Beijing，CountryCode：AFG，District：Beijing，Population：21148000）插入表 city 中。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> city (Name, CountryCode, District, Population)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;Beijing&#x27;</span>, <span class="hljs-string">&#x27;AFG&#x27;</span>, <span class="hljs-string">&#x27;Beijing&#x27;</span>, <span class="hljs-number">21148000</span>);<br></code></pre></td></tr></table></figure><p>3、插入一条语言记录（“CHN”，“Minnan”，“F”，0.5）到表 countrylanguage。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> countrylanguage (CountryCode, <span class="hljs-keyword">Language</span>, IsOfficial, Percentage)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;CHN&#x27;</span>, <span class="hljs-string">&#x27;Minnan&#x27;</span>, <span class="hljs-string">&#x27;F&#x27;</span>, <span class="hljs-number">0.5</span>);<br></code></pre></td></tr></table></figure><p>4、删除 CountryCode 为“ABW”的语言记录。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> countrylanguage<br><span class="hljs-keyword">WHERE</span><br>CountryCode <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;ABW&#x27;</span>;<br></code></pre></td></tr></table></figure><h1 id="实验六-视图管理"><a href="#实验六-视图管理" class="headerlink" title="实验六 视图管理"></a>实验六 视图管理</h1><h2 id="一、实验目的-1"><a href="#一、实验目的-1" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>掌握视图的定义与维护操作，加深对视图在关系数据库中作用的理解。</p><h2 id="二、实验内容-1"><a href="#二、实验内容-1" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>在数据库 world 中完成以下操作：</p><p>1、建立亚洲国家的视图 asia_country，并要求进行修改和插入操作时仍需保证该视图只有亚洲国家，视图的属性名为 Code，Name，Continent，Population，GNP，GovernmentForm。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE world;<br><br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> asia_country<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> Code, Name, Continent, Population, GNP, GovernmentForm<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Asia&#x27;</span>;<br></code></pre></td></tr></table></figure><p>对于视图的使用，将其当做基本表即可，可用下面语句用来显示 asia_country 表中的所有亚洲国家：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> asia_country;<br></code></pre></td></tr></table></figure><p>或者直接在左侧目录【world】下的【视图】下多出的“asia_country”上点击右键，在弹出选项里选择“Open View”。</p><p><img src="https://i.imgur.com/vVKGqZa.png"></p><p>2、建立国家简称(country.Code)、城市名(city.Name)、语言名(countrylanguage.Language)的视图 cc_language。本视图由三个基本表的连接操作导出。</p><p>结果如图：</p><p><img src="https://i.imgur.com/rQRr7up.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> cc_language<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> country.Code, city.`Name`, countrylanguage.`<span class="hljs-keyword">Language</span>`<br><span class="hljs-keyword">FROM</span> country <span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> city<br><span class="hljs-keyword">ON</span> country.`Code` <span class="hljs-operator">=</span> city.CountryCode<br><span class="hljs-keyword">LEFT</span> <span class="hljs-keyword">JOIN</span> countrylanguage<br><span class="hljs-keyword">on</span> country.`Code` <span class="hljs-operator">=</span> countrylanguage.CountryCode;<br></code></pre></td></tr></table></figure><p>3、定义一个反映国家独立年份的视图 c_indepyear。</p><p>结果如图：</p><p><img src="https://i.imgur.com/dTiVghu.png"></p><p>4、删除视图 c_indepyear。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">VIEW</span> c_indepyear;<br></code></pre></td></tr></table></figure><p>5、在亚洲国家视图 asia_country 中找出国民生产总值 GNP 大于 50000 的国家名称和 GNP。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `Name`, GNP<br><span class="hljs-keyword">FROM</span> asia_country<br><span class="hljs-keyword">WHERE</span> GNP <span class="hljs-operator">&gt;</span> <span class="hljs-number">50000</span>;<br></code></pre></td></tr></table></figure><p>6、在 asia_country 视图中人口多于一千万的国家名称、政体。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> `Name`, GovernmentForm<br><span class="hljs-keyword">FROM</span> asia_country<br><span class="hljs-keyword">WHERE</span> Population <span class="hljs-operator">&gt;</span> <span class="hljs-number">10000000</span>;<br></code></pre></td></tr></table></figure><p>7、将亚洲国家视图 asia_country 中 Code 为“AFG”的政体改为“Republic”。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">UPDATE</span> asia_country<br><span class="hljs-keyword">SET</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span><br><span class="hljs-keyword">WHERE</span> Code <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AFG&#x27;</span>;<br></code></pre></td></tr></table></figure><p>8、向亚洲国家视图 asia_country 中插入一个新的国家记录，其中 Code 为“DMC”、Name 为“Demacia”，Cotinent 为“Asia”，Population 为“10000000”，GNP 为“50000”，GovernmentForm 为“Monarchy”。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> asia_country (Code, Name, Continent, Population, GNP, GovernmentForm)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-string">&#x27;DMC&#x27;</span>, <span class="hljs-string">&#x27;Demacia&#x27;</span>, <span class="hljs-string">&#x27;Asia&#x27;</span>, <span class="hljs-number">10000000</span>, <span class="hljs-number">50000</span>, <span class="hljs-string">&#x27;Monarchy&#x27;</span>);<br></code></pre></td></tr></table></figure><h2 id="三、课后练习题-1"><a href="#三、课后练习题-1" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、建立共和国政体的国家的视图。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> republic_country<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> Code, Name, Continent, Population, GNP, GovernmentForm<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span>;<br></code></pre></td></tr></table></figure><p>2、建立君主立宪制（Constitutional Monarchy）国家的视图，并要求进行修改和插入操作时仍须保证该视图只有君主立宪制国家。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> const_monarchy_country<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> Code, Name, Continent, Population, GNP, GovernmentForm<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Constitutional Monarchy&#x27;</span><br><span class="hljs-keyword">WITH</span> <span class="hljs-keyword">CASCADED</span> <span class="hljs-keyword">CHECK</span> OPTION;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/5ERX5Ap.png"></p><p>3、建立共和国政体且国名生产总值在 10000 以上的国家视图。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">VIEW</span> gnp_republic_country<br><span class="hljs-keyword">AS</span><br><span class="hljs-keyword">SELECT</span> Code, Name, Continent, Population, GNP, GovernmentForm<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span> <span class="hljs-keyword">AND</span> GNP <span class="hljs-operator">&gt;</span> <span class="hljs-number">10000</span>;<br></code></pre></td></tr></table></figure><p>注：这里并没有使用原来的表的全部属性名。</p><h1 id="实验七-数据类型的使用"><a href="#实验七-数据类型的使用" class="headerlink" title="实验七 数据类型的使用"></a>实验七 数据类型的使用</h1><h2 id="一、实验目的-2"><a href="#一、实验目的-2" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>熟练掌握使用 Navicat 和 Transact-SQL 语言两种方法创建、修改和删除表。掌握管理表的有关系统存储过程。</p><h2 id="二、实验内容-2"><a href="#二、实验内容-2" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、了解并尝试使用MySQL的各数据类型，不作实验操作内容上的硬性要求。</p><p>1.1 日期和时间数据类型</p><p>1.2 整型</p><p>1.3 浮点型</p><p>1.4 字符串类型</p><p>1.5 其他类型</p><p>2、了解 MySQL 数据类型属性，并依次实际操作、验证。</p><p>2.1 auto_increment</p><p>2.2 binary</p><p>2.3 default</p><p>2.4 index</p><p>2.5 not null</p><p>2.6 null</p><p>2.7 primary key</p><p>2.8 unique</p><p>2.9 zerofill</p><p>3、如果要设计一个表用来存放商品的基本信息，包括商品编号、商品名称、品牌商标、型号、产地、生产厂商、生产日期、保质期、进货价格、销售价格和商品图片等。请设计出这个表的表结构，包括表名、列名、列的数据类型和长度等等。</p><p>使用 Navicat 建表：</p><p><img src="https://i.imgur.com/QttqPmr.png"></p><p>建表语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `goodsinfo` (<br>  `number` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `name` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `trademark` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `model` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `madein` <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `company` <span class="hljs-type">char</span>(<span class="hljs-number">30</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `madedate` datetime <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `shelflife` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `rawprice` <span class="hljs-type">float</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `saleprice` <span class="hljs-type">float</span>(<span class="hljs-number">10</span>,<span class="hljs-number">2</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `picture` <span class="hljs-type">char</span>(<span class="hljs-number">30</span>) <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> utf8mb4 <span class="hljs-keyword">COLLATE</span> utf8mb4_0900_ai_ci <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`number`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_ai_ci;<br></code></pre></td></tr></table></figure><p>4、将数据库 world 中 country 表的 capital 字段的数据类型改为 varchar(20)。</p><ul><li>① Navicat—Design Table</li><li>② 查询编辑器，输入以下语句：  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE world;<br><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> country modify <span class="hljs-keyword">column</span> Capital <span class="hljs-type">varchar</span>(<span class="hljs-number">20</span>);<br></code></pre></td></tr></table></figure></li></ul><p><img src="https://i.imgur.com/heYOga5.png"></p><h2 id="三、课后练习题-2"><a href="#三、课后练习题-2" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、用 Navicat 和 SQL 语言两种方式将数据库 world 中 Indepyear 字段的数据类型改为 char(5)。</p><p>Navicat:</p><p>右键点击表，Design Table。</p><p>SQL 语句：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">alter</span> <span class="hljs-keyword">table</span> country modify <span class="hljs-keyword">column</span> IndepYear <span class="hljs-type">char</span>(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure><p>2、 在 MySQL 中建立一个表，有一列为 float(5, 3)。做以下试验：</p><ul><li>① 插入 12.345，成功则查询该表得到结果；</li><li>② 插入 12.3456，成功则查询该表得到结果；</li><li>③ 插入 123.456，成功则查询该表得到结果。</li></ul><p>比较三次结果的差异，并分析原因。</p><p>建表：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `drafttable` (<br>  `id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `money` <span class="hljs-type">float</span>(<span class="hljs-number">5</span>,<span class="hljs-number">3</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb4 <span class="hljs-keyword">COLLATE</span><span class="hljs-operator">=</span>utf8mb4_0900_as_ci;<br></code></pre></td></tr></table></figure><p>插入数据：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> drafttable (id, money)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">1</span>, <span class="hljs-number">12.345</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> drafttable (id, money)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">2</span>, <span class="hljs-number">12.3456</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> drafttable (id, money)<br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-number">3</span>, <span class="hljs-number">123.456</span>);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/RaYmIYC.png"></p><p><img src="https://i.imgur.com/y3wZ2yT.png"></p><p>分析：</p><p>第一次数据插入正常。第二次插入数据因为小数部分位数超过了限制，所以 MySQL 进行自动舍入。第三次插入数据因为小数部分和整数部分都超出了范围，所以 MySQL 报了一个 <code>Out of range</code> 的错误。</p><h1 id="实验八-表数据的高级查询"><a href="#实验八-表数据的高级查询" class="headerlink" title="实验八 表数据的高级查询"></a>实验八 表数据的高级查询</h1><h2 id="一、实验目的-3"><a href="#一、实验目的-3" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>本实验的目的是使学生熟练掌握 MySQL 查询分析器的使用方法，加深 SQL 语言查询语句的理解。熟练掌握数据查询中的分组、统计、计算和集合的操作方法。</p><p>二、实验内容</p><p>在数据库 world 中完成以下操作。</p><p>1、查询所有国家名称及相应的城市、语言。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> co.Name CountryName, ci.Name CityName, cl.`<span class="hljs-keyword">Language</span>`<br><span class="hljs-keyword">FROM</span> country co, city ci, countrylanguage cl<br><span class="hljs-keyword">WHERE</span> co.Code <span class="hljs-operator">=</span> ci.CountryCode <span class="hljs-keyword">AND</span> co.`Code` <span class="hljs-operator">=</span> CL.CountryCode;<br></code></pre></td></tr></table></figure><p>2、查询国家政体为共和国且国家人口在一千万以上的城市的名称和城市人口、所属国家。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> ci.Name CityName, ci.Population, co.Name CountryName<br><span class="hljs-keyword">FROM</span> country co, city ci<br><span class="hljs-keyword">WHERE</span><br>co.GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span><br><span class="hljs-keyword">AND</span><br>co.Population <span class="hljs-operator">&gt;</span> <span class="hljs-number">10000000</span><br><span class="hljs-keyword">AND</span><br>co.Code <span class="hljs-operator">=</span> ci.CountryCode;<br></code></pre></td></tr></table></figure><p>3、统计 country 表中共和国政体的国家数。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span>;<br></code></pre></td></tr></table></figure><p>4、统计 country 表中共和国政体国家的平均人口。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">AVG</span>(Population) <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span>;<br></code></pre></td></tr></table></figure><p>按：</p><p>AVG 的使用：</p><p><code>AVG([distinct|all]x)</code></p><ul><li>[功能]：统计数据表选中行x列的平均值。</li><li>[参数]：all表示对所有的值求平均值，distinct 只对不同的值求平均值，默认为 all。</li><li>如果有参数 distinct 或 all，需有空格与 x(列)隔开。</li></ul><p>5、统计 countrylanguage 表中官方语言数。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> countrylanguage<br><span class="hljs-keyword">WHERE</span> IsOfficial <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;T&#x27;</span>;<br></code></pre></td></tr></table></figure><p>6、分组统计 country 表中各政体的国家个数。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> GovernmentForm, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> GovernmentForm;<br></code></pre></td></tr></table></figure><p>7、分组统计各大洲平均每国人口数。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Continent, <span class="hljs-built_in">AVG</span>(Population) <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Continent;<br></code></pre></td></tr></table></figure><p>8、查询有超过两条城市记录的国家的名称。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> co.Name, tmp.num <span class="hljs-keyword">FROM</span><br>country co, (<span class="hljs-keyword">SELECT</span> CountryCode, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> num <span class="hljs-keyword">FROM</span> city<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> CountryCode) tmp<br><span class="hljs-keyword">WHERE</span><br>co.`Code` <span class="hljs-operator">=</span> tmp.CountryCode<br><span class="hljs-keyword">AND</span> tmp.num <span class="hljs-operator">&gt;</span> <span class="hljs-number">2</span>;<br></code></pre></td></tr></table></figure><p>9、查询非共和政体的国家的名称和政体。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, GovernmentForm<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span><br>GovernmentForm <span class="hljs-operator">!=</span> <span class="hljs-string">&#x27;Republic&#x27;</span>;<br></code></pre></td></tr></table></figure><p>10、查询独立年份未知的国家的缩写和名称。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Code, Name<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> IndepYear <span class="hljs-keyword">is</span> <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure><p>11、查询欧洲国民生产总值 GNP 排名前 20 的国家名称及 GNP 值。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, GNP<br><span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Europe&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> GNP <span class="hljs-keyword">DESC</span><br>LIMIT <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure><p>12、查询平均每国人口数高于非洲的大洲名称及该平均数，以平均数的降序排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <br>(<span class="hljs-keyword">SELECT</span> Continent, <span class="hljs-built_in">AVG</span>(Population) <span class="hljs-keyword">AS</span> avgPopulation <span class="hljs-keyword">FROM</span> countryGROUP <span class="hljs-keyword">BY</span> Continent) <span class="hljs-keyword">AS</span> tmp<br><span class="hljs-keyword">WHERE</span> avgPopulation <span class="hljs-operator">&gt;</span> <br>(<br><span class="hljs-keyword">SELECT</span> avgPopulation <span class="hljs-keyword">FROM</span> (<span class="hljs-keyword">SELECT</span> Continent, <span class="hljs-built_in">AVG</span>(Population) <span class="hljs-keyword">AS</span> avgPopulation <span class="hljs-keyword">FROM</span> country <span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> Continent) <span class="hljs-keyword">AS</span> tmp <br><span class="hljs-keyword">WHERE</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Africa&#x27;</span><br>);<br></code></pre></td></tr></table></figure><p>13、查询 city 表中多于 3 个城市记录且缩写以 “A” 开头的国家的名称和城市平均人口，以平均人口的升序排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> tmp2.Name, <span class="hljs-built_in">AVG</span>(ci.Population) <span class="hljs-keyword">AS</span> avgPopulation <span class="hljs-keyword">FROM</span><br>(<span class="hljs-keyword">SELECT</span> co.Name, co.`Code`, tmp.num <span class="hljs-keyword">FROM</span><br>country co, (<span class="hljs-keyword">SELECT</span> CountryCode, <span class="hljs-built_in">COUNT</span>(<span class="hljs-operator">*</span>) <span class="hljs-keyword">as</span> num <span class="hljs-keyword">FROM</span> city<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> CountryCode) tmp<br><span class="hljs-keyword">WHERE</span><br>co.`Code` <span class="hljs-operator">=</span> tmp.CountryCode<br><span class="hljs-keyword">AND</span> tmp.num <span class="hljs-operator">&gt;</span> <span class="hljs-number">3</span><br><span class="hljs-keyword">AND</span> co.`Code` REGEXP <span class="hljs-string">&#x27;^A&#x27;</span>) <span class="hljs-keyword">AS</span> tmp2, city ci<br><span class="hljs-keyword">WHERE</span> tmp2.Code <span class="hljs-operator">=</span> ci.CountryCode<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> tmp2.`Name`<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> avgPopulation;<br></code></pre></td></tr></table></figure><h2 id="三、课后练习题-3"><a href="#三、课后练习题-3" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、建立名为 SPJ 的数据库。它包括 S、P、J、SPJ 4 个关系模式：</p><pre><code class="hljs">S(SNO,SNAME,STATUS,CITY);P(PNO,PNAME,COLOR,WEIGHT);J(JNO,JNAME,CITY);SPJ(SNO,PNO,JNO,QTY)</code></pre><ul><li>供应商表 S 由供应商代码（SNO）、供应商姓名（SNAME）、供应商状态（STATUS）、供应商所在城市（CITY）组成；</li><li>零件表 P 由零件代码(PNO)、零件名(PNAME)、颜色(COLOR)、重量(WEIGHT)组成；</li><li>工程项目表 J 由工程项目代码(JNO)、工程项目名(JNAME)、工程项目所在城市(CITY)组成；</li><li>供应情况表 SPJ 由供应商代码(SNO)、零件代码(PNO)、工程项目代码(JNO)、供应数量(QTY)组成，标识某供应商 供应某种零件 给某工程项目的数量为QTY。</li></ul><p>今有若干数据如下：</p><p><img src="https://i.imgur.com/otJjaxI.png"></p><p><img src="https://i.imgur.com/LKZjkcF.png"></p><p><img src="https://i.imgur.com/5fXPka8.png"></p><p><img src="https://i.imgur.com/lYAPmvc.png"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SET</span> FOREIGN_KEY_CHECKS<span class="hljs-operator">=</span><span class="hljs-number">0</span>;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for `j`</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `j`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `j` (<br>  `JNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `JNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `CITY` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`JNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of j</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;三建&#x27;</span>, <span class="hljs-string">&#x27;北京&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J2&#x27;</span>, <span class="hljs-string">&#x27;一汽&#x27;</span>, <span class="hljs-string">&#x27;长春&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J3&#x27;</span>, <span class="hljs-string">&#x27;弹簧厂&#x27;</span>, <span class="hljs-string">&#x27;天津&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;造船厂&#x27;</span>, <span class="hljs-string">&#x27;天津&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J5&#x27;</span>, <span class="hljs-string">&#x27;机车厂&#x27;</span>, <span class="hljs-string">&#x27;唐山&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J6&#x27;</span>, <span class="hljs-string">&#x27;无线电厂&#x27;</span>, <span class="hljs-string">&#x27;常州&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `j` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;J7&#x27;</span>, <span class="hljs-string">&#x27;半导体厂&#x27;</span>, <span class="hljs-string">&#x27;南京&#x27;</span>);<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for `p`</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `p`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `p` (<br>  `PNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `PNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `COLOR` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `WEIGHT` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`PNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of p</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P1&#x27;</span>, <span class="hljs-string">&#x27;螺母&#x27;</span>, <span class="hljs-string">&#x27;红&#x27;</span>, <span class="hljs-string">&#x27;12&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P2&#x27;</span>, <span class="hljs-string">&#x27;螺栓&#x27;</span>, <span class="hljs-string">&#x27;绿&#x27;</span>, <span class="hljs-string">&#x27;17&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;螺丝刀&#x27;</span>, <span class="hljs-string">&#x27;蓝&#x27;</span>, <span class="hljs-string">&#x27;14&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P4&#x27;</span>, <span class="hljs-string">&#x27;螺丝刀&#x27;</span>, <span class="hljs-string">&#x27;红&#x27;</span>, <span class="hljs-string">&#x27;14&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P5&#x27;</span>, <span class="hljs-string">&#x27;凸轮&#x27;</span>, <span class="hljs-string">&#x27;蓝&#x27;</span>, <span class="hljs-string">&#x27;40&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `p` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;P6&#x27;</span>, <span class="hljs-string">&#x27;齿轮&#x27;</span>, <span class="hljs-string">&#x27;红&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>);<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for `s`</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `s`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `s` (<br>  `SNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `SNAME` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `STATUS` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `CITY` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`SNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of s</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `s` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S1&#x27;</span>, <span class="hljs-string">&#x27;精益&#x27;</span>, <span class="hljs-string">&#x27;20&#x27;</span>, <span class="hljs-string">&#x27;天津&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `s` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;盛锡&#x27;</span>, <span class="hljs-string">&#x27;10&#x27;</span>, <span class="hljs-string">&#x27;北京&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `s` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S3&#x27;</span>, <span class="hljs-string">&#x27;东方红&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>, <span class="hljs-string">&#x27;北京&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `s` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S4&#x27;</span>, <span class="hljs-string">&#x27;丰泰盛&#x27;</span>, <span class="hljs-string">&#x27;20&#x27;</span>, <span class="hljs-string">&#x27;天津&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `s` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S5&#x27;</span>, <span class="hljs-string">&#x27;为民&#x27;</span>, <span class="hljs-string">&#x27;30&#x27;</span>, <span class="hljs-string">&#x27;上海&#x27;</span>);<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Table structure for `spj`</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> IF <span class="hljs-keyword">EXISTS</span> `spj`;<br><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `spj` (<br>  `SNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `PNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `JNO` <span class="hljs-type">char</span>(<span class="hljs-number">10</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `QTY` <span class="hljs-type">int</span>(<span class="hljs-number">11</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`SNO`,`PNO`,`JNO`),<br>  KEY `PNO` (`PNO`),<br>  KEY `JNO` (`JNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_1` <span class="hljs-keyword">FOREIGN</span> KEY (`SNO`) <span class="hljs-keyword">REFERENCES</span> `s` (`SNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_2` <span class="hljs-keyword">FOREIGN</span> KEY (`PNO`) <span class="hljs-keyword">REFERENCES</span> `p` (`PNO`),<br>  <span class="hljs-keyword">CONSTRAINT</span> `spj_ibfk_3` <span class="hljs-keyword">FOREIGN</span> KEY (`JNO`) <span class="hljs-keyword">REFERENCES</span> `j` (`JNO`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-comment">-- Records of spj</span><br><span class="hljs-comment">-- ----------------------------</span><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S1&#x27;</span>, <span class="hljs-string">&#x27;P1&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S1&#x27;</span>, <span class="hljs-string">&#x27;P1&#x27;</span>, <span class="hljs-string">&#x27;J3&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S1&#x27;</span>, <span class="hljs-string">&#x27;P1&#x27;</span>, <span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;700&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J2&#x27;</span>, <span class="hljs-string">&#x27;400&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J3&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;500&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J5&#x27;</span>, <span class="hljs-string">&#x27;400&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P5&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;400&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S2&#x27;</span>, <span class="hljs-string">&#x27;P5&#x27;</span>, <span class="hljs-string">&#x27;J2&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S3&#x27;</span>, <span class="hljs-string">&#x27;P1&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S3&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S4&#x27;</span>, <span class="hljs-string">&#x27;P5&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S4&#x27;</span>, <span class="hljs-string">&#x27;P6&#x27;</span>, <span class="hljs-string">&#x27;J3&#x27;</span>, <span class="hljs-string">&#x27;300&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S4&#x27;</span>, <span class="hljs-string">&#x27;P6&#x27;</span>, <span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S5&#x27;</span>, <span class="hljs-string">&#x27;P2&#x27;</span>, <span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;100&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S5&#x27;</span>, <span class="hljs-string">&#x27;P3&#x27;</span>, <span class="hljs-string">&#x27;J1&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S5&#x27;</span>, <span class="hljs-string">&#x27;P6&#x27;</span>, <span class="hljs-string">&#x27;J2&#x27;</span>, <span class="hljs-string">&#x27;200&#x27;</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> `spj` <span class="hljs-keyword">VALUES</span> (<span class="hljs-string">&#x27;S5&#x27;</span>, <span class="hljs-string">&#x27;P6&#x27;</span>, <span class="hljs-string">&#x27;J4&#x27;</span>, <span class="hljs-string">&#x27;500&#x27;</span>);<br></code></pre></td></tr></table></figure><p>第 2～8 题在数据库 SPJ 中完成。</p><p>2、查询重量最轻的零件的零件代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> PNO <span class="hljs-keyword">FROM</span> p<br><span class="hljs-keyword">WHERE</span> WEIGHT <span class="hljs-operator">=</span> (<span class="hljs-keyword">SELECT</span> <span class="hljs-built_in">MIN</span>(WEIGHT) <span class="hljs-keyword">FROM</span> p);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/iELSDHx.png"></p><p>3、查询由供应商 S1 提供零件的工程项目名。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> JNAME <span class="hljs-keyword">FROM</span><br>spj <span class="hljs-keyword">AS</span> T1, j <span class="hljs-keyword">AS</span> T2<br><span class="hljs-keyword">WHERE</span> T1.SNO <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;S1&#x27;</span><br><span class="hljs-keyword">AND</span> T1.JNO <span class="hljs-operator">=</span> T2.JNO;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/DzH5p20.png"></p><p>4、查询同时为工程 J1 和 J2 提供零件的供应商代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> SNO <span class="hljs-keyword">FROM</span> spj <span class="hljs-keyword">WHERE</span> JNO <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;J1&#x27;</span> <span class="hljs-keyword">AND</span> SNO <span class="hljs-keyword">IN</span> (<span class="hljs-keyword">SELECT</span> SNO <span class="hljs-keyword">FROM</span> spj <span class="hljs-keyword">WHERE</span> JNO <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;J2&#x27;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/MTvWbaZ.png"></p><p>5、查询为位于天津的工程提供零件的供应商代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> SNO <span class="hljs-keyword">FROM</span> spj<br><span class="hljs-keyword">WHERE</span> JNO <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">SELECT</span> JNO <span class="hljs-keyword">FROM</span> j<br><span class="hljs-keyword">WHERE</span> CITY <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;天津&#x27;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/ykaGQhd.png"></p><p>6、查询同时为位于天津或北京的工程提供红色零件的供应商代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> SNO <span class="hljs-keyword">FROM</span> spj<br><span class="hljs-keyword">WHERE</span> JNO <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">SELECT</span> JNO <span class="hljs-keyword">FROM</span> j<br><span class="hljs-keyword">WHERE</span> CITY <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;天津&#x27;</span>)<br><span class="hljs-keyword">AND</span> SNO <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> SNO <span class="hljs-keyword">FROM</span> spj<br><span class="hljs-keyword">WHERE</span> JNO <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">SELECT</span> JNO <span class="hljs-keyword">FROM</span> j<br><span class="hljs-keyword">WHERE</span> CITY <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;北京&#x27;</span>))<br><span class="hljs-keyword">AND</span> PNO <span class="hljs-keyword">IN</span><br>(<span class="hljs-keyword">SELECT</span> PNO <span class="hljs-keyword">FROM</span> p<br><span class="hljs-keyword">WHERE</span> COLOR <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;红&#x27;</span>);<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/5L9iEfE.png"></p><p>7、查询供应商和工程所在城市相同的供应商能提供的零件代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> PNO<br><span class="hljs-keyword">FROM</span> spj<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> J<br><span class="hljs-keyword">ON</span> J.JNO <span class="hljs-operator">=</span> spj.JNO<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> S<br><span class="hljs-keyword">ON</span> S.SNO <span class="hljs-operator">=</span> spj.SNO<br><span class="hljs-keyword">WHERE</span> S.CITY <span class="hljs-operator">=</span> J.CITY<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> spj.PNO;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/VGMk2ko.png"></p><p>8、查询上海供应商不提供任何零件的工程代码。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> spj.JNO<br><span class="hljs-keyword">FROM</span> spj<br><span class="hljs-keyword">INNER</span> <span class="hljs-keyword">JOIN</span> S<br><span class="hljs-keyword">ON</span> S.SNO <span class="hljs-operator">=</span> spj.SNO<br><span class="hljs-keyword">GROUP</span> <span class="hljs-keyword">BY</span> spj.JNO<br><span class="hljs-keyword">HAVING</span> <span class="hljs-built_in">COUNT</span>(<span class="hljs-keyword">CASE</span> <span class="hljs-keyword">WHEN</span> S.CITY <span class="hljs-operator">=</span><span class="hljs-string">&#x27;上海&#x27;</span> <span class="hljs-keyword">THEN</span> <span class="hljs-string">&#x27;1&#x27;</span> <span class="hljs-keyword">END</span>) <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/eDtKOBf.png"></p>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>matplotlib 绘制更加清晰（分辨率更高）的图像</title>
    <link href="/2021/11/24/matplotlib-%E7%BB%98%E5%88%B6%E6%9B%B4%E5%8A%A0%E6%B8%85%E6%99%B0%EF%BC%88%E5%88%86%E8%BE%A8%E7%8E%87%E6%9B%B4%E9%AB%98%EF%BC%89%E7%9A%84%E5%9B%BE%E5%83%8F/"/>
    <url>/2021/11/24/matplotlib-%E7%BB%98%E5%88%B6%E6%9B%B4%E5%8A%A0%E6%B8%85%E6%99%B0%EF%BC%88%E5%88%86%E8%BE%A8%E7%8E%87%E6%9B%B4%E9%AB%98%EF%BC%89%E7%9A%84%E5%9B%BE%E5%83%8F/</url>
    
    <content type="html"><![CDATA[<p>这里主要是采用设置图像 dpi(dots per inch) 的方法，matplot 默认的 dpi 是 100，一般拉私活，我们将 dpi 设置成 300 就差不多了，如果想获得更加清晰的图像，我们也可以设置 600、1200 等这样的大数值。</p><p>下面是一个示例：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt<br><br>x = np.arange(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>)<br>m = <span class="hljs-number">1.5</span><br>c = <span class="hljs-number">2</span><br>y = m*x + c<br><br>plt.plot(x, y)<br>plt.title(<span class="hljs-string">&quot;y=mx+c&quot;</span>)<br>plt.xlabel(<span class="hljs-string">&#x27;x-axis&#x27;</span>)<br>plt.ylabel(<span class="hljs-string">&#x27;y-axis&#x27;</span>)<br>plt.savefig(<span class="hljs-string">&quot;High resoltion.png&quot;</span>,dpi=<span class="hljs-number">1200</span>)<br></code></pre></td></tr></table></figure><p>输出的图像效果如下：</p><p><img src="https://i.imgur.com/80qYOvc.png"></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>三种常见的 Cache 地址映射及地址变换方法</title>
    <link href="/2021/11/23/%E4%B8%89%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84-Cache-%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%8F%8A%E5%9C%B0%E5%9D%80%E5%8F%98%E6%8D%A2%E6%96%B9%E6%B3%95/"/>
    <url>/2021/11/23/%E4%B8%89%E7%A7%8D%E5%B8%B8%E8%A7%81%E7%9A%84-Cache-%E5%9C%B0%E5%9D%80%E6%98%A0%E5%B0%84%E5%8F%8A%E5%9C%B0%E5%9D%80%E5%8F%98%E6%8D%A2%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h1 id="主存与-Cache-之间的映射方式"><a href="#主存与-Cache-之间的映射方式" class="headerlink" title="主存与 Cache 之间的映射方式"></a>主存与 Cache 之间的映射方式</h1><ul><li>地址映射：将主存地址变换成 Cache 地址的方法</li><li>地址映射的作用：<ul><li>CPU 访问主存时，主存地址变换成 Cache 地址，从而查找 Cache。</li></ul></li><li>地址映射的实现：<ul><li>硬件实现，对软件人员（包括程序员和系统程序员）透明</li></ul></li><li>三种地址映射方法：<ul><li>全相联</li><li>直接相联</li><li>组相联</li></ul></li></ul><h1 id="1-全相联映射"><a href="#1-全相联映射" class="headerlink" title="1. 全相联映射"></a>1. 全相联映射</h1><p><img src="https://i.imgur.com/ImD1688.png"></p><ul><li>主存分块，Cache 分行，包含相同数量的字</li><li></li></ul><h1 id="2-直接映射"><a href="#2-直接映射" class="headerlink" title="2. 直接映射"></a>2. 直接映射</h1><p><img src="https://i.imgur.com/W4XSIqo.png"></p>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《算法竞赛入门经典（第 2 版》阅读札记</title>
    <link href="/2021/11/22/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%EF%BC%88%E7%AC%AC-2-%E7%89%88%E3%80%8B%E9%98%85%E8%AF%BB%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/11/22/%E3%80%8A%E7%AE%97%E6%B3%95%E7%AB%9E%E8%B5%9B%E5%85%A5%E9%97%A8%E7%BB%8F%E5%85%B8%EF%BC%88%E7%AC%AC-2-%E7%89%88%E3%80%8B%E9%98%85%E8%AF%BB%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="第-3-章-数组和字符串"><a href="#第-3-章-数组和字符串" class="headerlink" title="第 3 章 数组和字符串"></a>第 3 章 数组和字符串</h1><blockquote><p><code>fgetc(fin)</code>；<code>fgetc(stdin)</code> 等价于 <code>getchar()</code>，即从标准输入读取一个字符。</p></blockquote><p>按：</p><p>这里有一点要说明，从终端设备读有一个特点，用户输入一般字符并不会使 <code>getchar</code> 函数返回，而是仍然阻塞着，只有当用户输入回车或者文件结束标志时 <code>getchar</code> 才返回。这个特性取决于终端的工作模式，终端可以配置成一次输入一行的模式，也可以配置一次输入一个字符的模式，默认是一次输入一行的模式。</p><p>参考：Linux C 25.2.5</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>专业书</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>面向对象系统分析与设计作业一</title>
    <link href="/2021/11/22/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%B8%80/"/>
    <url>/2021/11/22/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%B3%BB%E7%BB%9F%E5%88%86%E6%9E%90%E4%B8%8E%E8%AE%BE%E8%AE%A1%E4%BD%9C%E4%B8%9A%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<blockquote><p>1. 讨论下列 4 类事物, 每类有哪些共同的属性(或描述值)和行为(或操作), 在每个类上添加更多的事物.</p></blockquote><ul><li>a. 显微镜&#x2F;望远镜&#x2F;眼镜&#x2F;瞄准镜&#x2F;</li><li>b. 自行车&#x2F;卡车&#x2F;飞机&#x2F;摩托车&#x2F;马</li><li>c. 帐篷&#x2F;宿舍&#x2F;工棚&#x2F;摩天大楼</li><li>d. 手机&#x2F;服务器&#x2F;台式机&#x2F;便携计算机</li></ul><p>答：</p><ul><li>a. 显微镜&#x2F;望远镜&#x2F;眼镜&#x2F;瞄准镜&#x2F;<ul><li>共同的属性：镜片、镜框</li><li>共同的行为：将景物映射到人的眼中，变换取景效果</li><li>添加：放大镜、护目镜</li></ul></li><li>b. 自行车&#x2F;卡车&#x2F;飞机&#x2F;摩托车&#x2F;马<ul><li>共同的属性：速度、使用年限</li><li>共同的行为：载人、载物</li><li>添加：轮船、电动车</li></ul></li><li>c. 帐篷&#x2F;宿舍&#x2F;工棚&#x2F;摩天大楼<ul><li>共同的属性：面积、位置</li><li>共同的行为：供人居留</li><li>添加：小区楼、茅草屋</li></ul></li><li>d. 手机&#x2F;服务器&#x2F;台式机&#x2F;便携计算机<ul><li>共同的属性：处理器、性能、价格</li><li>共同的行为：提供计算服务</li><li>添加：单片机</li></ul></li></ul><blockquote><p>2. 当几个独立系统要确定同一对象时, 就会出现问题. 例如, 机动车辆管理部门&#x2F;保险公司&#x2F;银行&#x2F;警察可能都需要识别某台机动车. 讨论使用以下识别方法的好处和或不足.</p></blockquote><ul><li>a. 根据车辆的拥有者识别;</li><li>b. 根据厂商&#x2F;模型编号&#x2F;年份等属性确定;</li><li>c. 使用由厂商分配给汽车的车辆识别号(VIN); </li><li>d. 使用有关管理部门内部生成的ID.</li></ul><p>答：</p><ul><li>a. 根据车辆的拥有者识别;<ul><li>好处：查找人物相较于查找车，更加容易</li><li>不足：人物拥有多辆车的时候不好确定</li></ul></li><li>b. 根据厂商&#x2F;模型编号&#x2F;年份等属性确定;<ul><li>好处：能唯一确定一辆车</li><li>不足：这类信息一般没有专门的数据库保存，不易查找</li></ul></li><li>c. 使用由厂商分配给汽车的车辆识别号(VIN); <ul><li>好处：数据易于查找</li><li>不足：所有者可能会偷换车辆识别号</li></ul></li><li>d. 使用有关管理部门内部生成的 ID.<ul><li>好处：数据易于获取和查找</li><li>不足：现实中变数太大，ID 可能没有及时更新而导致 ID 对应不上车辆</li></ul></li></ul><p><strong>参考答案</strong>：</p><p>选择 c。因为是车辆的内在的固有属性，并且具有唯一性。所以应该选择这个。</p><blockquote><p>3. 所有的对象都有标识, 都可以辨别. 考察一张商品的购买发票, 如图所示, 其中对买方和卖方分别采用了哪些标识, 这些标识如何设计的? 例如: 购买方名称:”华中科技大学”字符串, 购买方名称全称.</p></blockquote><p><img src="https://i.imgur.com/sOXQFNc.png"></p><p>答：</p><p>对买方：</p><ul><li>买方：“华中科技大学”，购买方名称全称；</li><li>纳税人识别号：“12100000441626842D”，购买方纳税识别号码；</li><li>地址、电话：空，购买方的地址和电话；</li><li>开户行及账号：空，购买方开户的银行及账号。</li></ul><p>对卖方（销售方）：</p><ul><li>名称：“四川金创越贸易有限公司”，销售方名称全称；</li><li>纳税人识别号：“91510000767291042W”，销售方纳税人识别号码；</li><li>地址、电话：“四川成都市武侯区一环路南二段十五号 028-85482280”，销售方具体地址和电话；</li><li>开户行及账号：“成都银行洗面桥支行03042003219726800016”，销售方的开户银行及账号。</li></ul><blockquote><p>4. 绘制一个类模型来描述无向图. 无向图由一组顶点和边组成. 边连接顶点对. 包括顶点的名称和位置, 边的名称&#x2F;宽度和颜色. 类似的, 绘制一个类模型来描述有向图, 有向图的边是有方向的.</p></blockquote><p>解：</p><p><img src="https://i.imgur.com/k9q2BHQ.png"></p><p><img src="https://i.imgur.com/4b1Nuji.png"></p><blockquote><p>5. 为哲学家就餐问题绘制一个类图. 圆桌周围有 5 位哲学家, 5 把餐叉. 每位哲学家可以使用两把餐叉, 一边一把. 每把餐叉可以被两位哲学家使用. 每把餐叉要么放在桌上, 要么正在被哲学家使用. 哲学家必须用两把餐叉才能吃饭.</p></blockquote><p>解：</p><p><img src="https://i.imgur.com/63y7gjz.png"></p>]]></content>
    
    
    <categories>
      
      <category>作业</category>
      
    </categories>
    
    
    <tags>
      
      <tag>作业</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>十进制小数转二进制小数</title>
    <link href="/2021/11/20/%E5%8D%81%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0%E8%BD%AC%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0/"/>
    <url>/2021/11/20/%E5%8D%81%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0%E8%BD%AC%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%B0%8F%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>转自：<a href="https://www.cnblogs.com/xkfz007/articles/2590472.html">https://www.cnblogs.com/xkfz007/articles/2590472.html</a></p><ul><li>十进制小数转换成二进制小数采用“乘 2 取整，顺序排列”法。</li><li>具体做法是：用 2 乘十进制小数，可以得到积，将积的整数部分取出，再用 2 乘余下的小数部分，又得到一个积，再将积的整数部分取出，如此进行，直到积中的小数部分为零，或者达到所要求的精度为止。</li><li>最后把取出的整数部分按顺序排列起来，先取的整数作为二进制小数的高位有效位，后取的整数作为低位有效位。</li></ul><p>如：0.625 &#x3D; (0.101)B</p><pre><code class="hljs">0.625 * 2 = 1.25 ====== 取出整数部分 1 0.25 * 2 = 0.5 ======== 取出整数部分 0 0.5 * 2 = 1 ========== 取出整数部分 1 </code></pre><p>再如：0.7 &#x3D; (0.1011 0011 0…)B</p><pre><code class="hljs">0.7 * 2 = 1.4 ======== 取出整数部分 1 0.4 * 2 = 0.8 ======== 取出整数部分 0 0.8 * 2 = 1.6 ======== 取出整数部分 1 0.6 * 2 = 1.2 ======== 取出整数部分 1 0.2 * 2 = 0.4 ======== 取出整数部分 0　 0.4 * 2 = 0.8 ======== 取出整数部分 0 0.8 * 2 = 1.6 ======== 取出整数部分 1 0.6 * 2 = 1.2 ======== 取出整数部分 1 0.2 * 2 = 0.4 ======== 取出整数部分 0</code></pre>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
      <tag>转载</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机组成原理考试复习</title>
    <link href="/2021/11/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/"/>
    <url>/2021/11/20/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>考完回忆：那个字位扩展设计芯片的题目，地址范围我给计算错了，希望老师手下留情。另外，RISC 和 CISC 这两个本来考试之前时有打算看的，可是最后给整忘了，只能凭借记忆来写了。</p><h1 id="第一章-计算机系统概论"><a href="#第一章-计算机系统概论" class="headerlink" title="第一章 计算机系统概论"></a>第一章 计算机系统概论</h1><blockquote><p>世界上第一台电子计算机 ENIAC（1946）</p></blockquote><blockquote><p>计算机的分类？</p></blockquote><ol><li>总体分为电子模拟计算机和电子数字计算机。</li><li>电子数字计算机又可以分为通用计算机和专用计算机。</li><li>通用计算机又可以分为：巨型机、大型机、中型机、小型机、微型机和单片机。</li></ol><blockquote><p>冯·诺伊曼认为计算机由哪五部分组成？</p></blockquote><ul><li>运算器</li><li>控制器</li><li>存储器</li><li>输入设备</li><li>输出设备</li></ul><blockquote><p>何为通道？</p></blockquote><p>一种专用部件，负责外部设备与内存之间信息的传输。</p><blockquote><p>何为中断？</p></blockquote><p>主机接到信号（来自 CPU 外部或内部）时，立即中止原  来的工作，转去处理这一事件，处理完后，主机又回到原来工作点继续工作。</p><blockquote><p>多道运行的特征？</p></blockquote><ul><li>多道</li><li>保护</li><li>宏观并行，微观串行</li></ul><blockquote><p>PC 和 IR 寄存器的功能？</p></blockquote><ul><li>PC：存放下一条要执行的指令的地址，具有计数功能 $(PC) + 1 \rightarrow PC$</li><li>存放当前欲执行的指令</li></ul><blockquote><p>何为时钟周期？</p></blockquote><p>又称为节拍周期或 T 周期,是时钟频率的倒数。是处理器操作最基本的时间单位。例如，主频为 1GHz 的 CPU 的时钟周期为 1ns。</p><p>按：</p><ul><li>时钟周期的定义其实应该是一个时钟脉冲所需要的时间。频率就是 1s 内可以产生的时钟脉冲数量。</li><li>时钟频率应该表述为：$f &#x3D; \frac{1}{T}$，分子的 1 表示 1 秒钟。</li><li>从时钟频率转换成时钟周期应该是这样：$T &#x3D; \frac{1}{f} \times 1$，后面乘的 1 表示 1 秒钟，而前面的分子的 1 表示占比。（f 个时钟周期中分出一个然后乘以 1 秒钟）</li></ul><blockquote><p>何为 $CPI$ 和 $CPI_i$？</p></blockquote><ul><li>CPI：表示执行每条指令（一个程序中的所有指令）所需要的平均时钟周期数。</li><li>$CPI_i$：表示执行每条指令（一类指令中的所有指令）所需要的平均时钟周期数。</li></ul><p>$$<br>CPI &#x3D; 一个程序的 CPU 时钟周期数 ÷ 程序指令数量<br>$$</p><p>设程序中每类指令的使用频度为 $P_i$，每类指令的 $CPI$ 为 $CPI_i$，每类指令的条数为 $IC_i$，程序中的总指令条数为 $IC$，则，程序的 $CPI$ 可用下列公式计算：</p><p>$$<br>CPI &#x3D; \sum_{i &#x3D; i}^{n} (CPI_i \times P_i)<br>$$</p><p>$$<br>CPI &#x3D; \sum_{i &#x3D; 1}^{n} (CPI_i \times \frac{IC_i}{IC})<br>$$</p><blockquote><p>何为 CPU 执行时间？</p></blockquote><p>是指 CPU 计算某个任务所花费的时间，不包括 I&#x2F;O 访问时的等待时间等。</p><p>CPU 执行时间 &#x3D; CPU 时钟周期总数 × 时钟周期 &#x3D; (指令条数 × CPI) × 时钟周期</p><p>CPU 执行时间 &#x3D; CPU 时钟周期总数 &#x2F; 时钟频率 &#x3D; (指令条数 × CPI) &#x2F; 时钟频率</p><p>CPI &#x3D; 一个程序的 CPU 时钟周期数 ÷ 程序指令数量</p><p>CPU 执行时间 &#x3D; CPU 时钟周期总数 &#x2F; 时钟频率</p><blockquote><p>何为 MIPS？</p></blockquote><p>是指 CPU 每秒可以执行的百万条机器指令数。</p><p>MIPS &#x3D; 指令数 ÷ (程序执行的时间 $\times$ $10^6$) &#x3D; 时钟频率 ÷ (CPI $\times$ $10^6$)</p><p>推导：</p><p>$$<br>\begin{split}<br>MIPS &amp;&#x3D; \frac{指令数}{CPU 执行时间 \times 10^6 \quad ;} \<br>&amp;&#x3D; \frac{指令数}{(CPU 时钟周期总数 &#x2F; f) \times 10^6 \qquad} \<br>&amp;&#x3D; \frac{f}{CPI \times 10^6}<br>\end{split}<br>$$</p><h1 id="第二章-计算机中的数据表示方法"><a href="#第二章-计算机中的数据表示方法" class="headerlink" title="第二章 计算机中的数据表示方法"></a>第二章 计算机中的数据表示方法</h1><blockquote><p>原码、反码、补码、移码相关？</p></blockquote><ul><li><a href="https://fanlumaster.github.io/2021/09/15/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%A0%81%E3%80%81%E5%8F%8D%E7%A0%81%E5%92%8C%E8%A1%A5%E7%A0%81/">原码、反码、补码</a></li><li><a href="https://fanyfull.github.io/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%BB%E7%A0%81/">补码</a></li></ul><blockquote><p>如何理解定点数？</p></blockquote><p><img src="https://i.imgur.com/u08AVxQ.png"></p><p>这张图其实是有点问题的，小数点不应该被显示出来，因为这会让人误解的。</p><p>所谓定点数，就是指小数的位置是固定的：</p><ul><li>对于小数，小数点的位置是在 $X_1$ 的前面，$X_0$ 表示符号位；</li><li>对于整数，小数点的位置是在 $X_n$ 的后面，$X_0$ 还是表示符号位。</li></ul><p>定点小数表示数的范围：</p><p>$$<br>1 - 2^n \geqslant |x| \geqslant 2^{-n}<br>$$</p><p>定点整数表示数的范围：</p><p>$$<br>2^n - 1 \geqslant |x| \geqslant 1<br>$$</p><blockquote><p>如何理解 IEEE754 标准浮点数？</p></blockquote><ul><li><a href="https://fanyfull.github.io/2021/09/28/%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%8E-IEEE754-%E6%A0%87%E5%87%86%E6%B5%AE%E7%82%B9%E6%95%B0/">IEEE754</a></li></ul><blockquote><p>浮点数的规格化？</p></blockquote><p>在浮点运算过程中，为了保证数据的精度，要求尾数的最高位为非 0 数，即当尾数不为零时，其绝对值应大于或等于 $(1&#x2F;2)_10$。</p><p>以补码表示为例，正数规格化后，尾数的形式为：</p><p>$$<br>0.1xx \cdots x<br>$$</p><p>负数规格化后，尾数的形式为：</p><p>$$<br>1.0xx \cdots 1<br>$$</p><blockquote><p>如何理解码距？</p></blockquote><ul><li>将一组编码中任何两个合法编码之间代码不同的最小位数称为这编码的距离，简称码距或海明距离。</li><li>四位二进制编码 0011 与 0001 的码距为 1；而 0011 与 0000 两组编码的距离为 2。<br>  按：只有两个，所以任何两个合法编码之间代码不同的最小位数就是这两个编码的不同的位数。</li><li>若用四位二进制编码只表示 0000、0011、0101、0110、1111、1001、1010、1100 等八种编码，则码距为 2。此时，这 8 种编码中的任何一位发生改变，如 0000 变成 1000 就从有效编码变成了无效编码，容易检测到这种错误。<br>  按：这里的码距指的是取这一组中任何两个编码之间的最小“距离”。</li></ul><p>这里的码距，有些地方叫做最小码距，而码距则是指两个编码之间的的不同位数。</p><h1 id="第三章-运算方法与运算器"><a href="#第三章-运算方法与运算器" class="headerlink" title="第三章 运算方法与运算器"></a>第三章 运算方法与运算器</h1><blockquote><p>何为变形补码？</p></blockquote><p>$$<br>[X]_{补} &#x3D;<br>\left{\begin{matrix}<br>\begin{aligned}<br>&amp;X &amp; 0 &amp; \leqslant X &lt; 2 \<br>&amp; &amp; &amp; &amp; mod ; 4 \<br>&amp;4 + X &amp; -2 &amp; \leqslant X &lt; 0 \<br>\end{aligned}<br>\end{matrix}\right.<br>$$</p><p>此时，</p><p>$$<br>[X]<em>{补} &#x3D; X</em>{f1} X_{f2}.X_1 X_2 X_3 … X_n<br>$$</p><p>对于变形补码，其溢出的检测为：</p><ul><li>上溢：双符号位为 01</li><li>下溢：双符号位为 10</li><li>溢出的判断：$V &#x3D; X_{f1} \oplus X_{f2}$</li></ul><p>注意，最高符号位（双符号位的第一位）为结果的真实符号。</p><blockquote><p>如何理解上溢和下溢？</p></blockquote><p>所谓上溢，就是指双符号位为 <code>01</code> 时的溢出，上溢也叫正溢出，因为第一位符号位是对的，所以，可以形象理解为两个正数相加得到负数时候的溢出。</p><p>下溢的理解同理。</p><h1 id="第四章-存储系统"><a href="#第四章-存储系统" class="headerlink" title="第四章 存储系统"></a>第四章 存储系统</h1><blockquote><p>何为存储字长？</p></blockquote><p>存储字长：主存的一个存储单元所包含的二进制位数</p><blockquote><p>和为数据字长？</p></blockquote><p>数据字长(字长)：计算机一次能处理的二进制数的位数</p><blockquote><p>何为大端（big-endian）和小端（little-endian）数据存放方式？</p></blockquote><ul><li>big-endian: 最高字节地址(最左边)作为字地址 (正常存放方式)</li><li>little-endian: 最低字节地址(最右边)作为字地址</li></ul><p>68000 采用大端，Intel 采用小端，ARM 两者都支持</p><p><strong>例</strong>：int a &#x3D; 0x12345678，a 在内存中是如何保存的？</p><p>解：a 需要 4 个连续地址，从低地址变化到高地址</p><ul><li>若 a 变量中高字节（0x12）保存在低地址，则是大端模式</li><li>若 a 变量中低字节（0x78）保存在低地址，则是小端模式</li></ul><p>假设起始地址为 0x4000  </p><p>大端模式（Big-endian）：</p><pre><code class="hljs">内存地址   0x4000  0x4001  0x4002  0x4003  存放内容   0x12   0x34   0x56    0x78</code></pre><p>小端模式（Little-endian）：</p><pre><code class="hljs">内存地址    0x4000 0x4001   0x40020x4003存放内容    0x78 0x56     0x34      0x12</code></pre><blockquote><p>三种常见的 Cache 地址映射及地址变换方法？</p></blockquote><h1 id="第五章-指令系统"><a href="#第五章-指令系统" class="headerlink" title="第五章 指令系统"></a>第五章 指令系统</h1><blockquote><p>如何理解操作数的寻址方式？</p></blockquote><p>操作数的来源：</p><p>⑴ 操作数直接来自指令地址字段；<br>⑵ 操作数存放在寄存器中，即寄存器操作数；<br>⑶ 操作数存放在存储器中，即存储器操作数。</p><p>所谓操作数的寻址方式，就是如何从上述三种来源中为指令提供操作数。</p><blockquote><p>何为有效地址？</p></blockquote><p>操作数在内存中的地址，一般用 $E$ 表示，则数据 $S &#x3D; (E)$。</p><blockquote><p>何为隐含寻址？</p></blockquote><p>操作数在寄存器中。</p><p>不明确地给出操作数的地址，而是在指令中隐含地给出。</p><blockquote><p>何为立即数寻址？</p></blockquote><p>操作数在指令中。</p><p>指令的地址字段指出的不是地址，而是操作数本身。</p><p>如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asm">ADD AX, 2038H<br></code></pre></td></tr></table></figure><p>不计算 E，S &#x3D; 2038H。</p><blockquote><p>何为直接寻址？</p></blockquote><p>数据在内存中。</p><p>由指令的地址部分直接给出操作数的有效地址。</p><p>E &#x3D; D， S &#x3D; (D) &#x3D; (E)</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asm">MOV AX, [2038H]<br></code></pre></td></tr></table></figure><blockquote><p>何为间接寻址？</p></blockquote><p>操作数在内存中。</p><p>指令的形式地址部分给出的是操作数地址的地址，即是操作数地址的指示器。</p><p>E &#x3D; (D), S &#x3D; (E) &#x3D; ((D))</p><blockquote><p>何为寄存器寻址和寄存器间接寻址？</p></blockquote><p>数据分别在寄存器和主存中。</p><ul><li>寄存器寻址：<ul><li>操作数不放在内存中，而是放在通用寄存器中，此时，指令的形式地址字段 D 的值表示的是寄存器号。</li><li>不计算 E，$S &#x3D; (R_D)$</li></ul></li><li>寄存器间接寻址：<ul><li>寄存器的内容不是操作数，而是操作数所在内存单元的地址。</li><li>$E &#x3D; (R_D)$，$S &#x3D; (E) &#x3D; ((R_D))$</li></ul></li></ul><blockquote><p>何为相对寻址？</p></blockquote><p>数据在内存中。</p><p>E &#x3D; (PC) + D, S &#x3D; (E) &#x3D; ((PC) + D)</p><p>把 PC 的值和指令中形式地址 D 的内容相加，作为有效地址。PC 的值是下一条指令的地址。</p><blockquote><p>MIPS 的三类指令？</p></blockquote><p><img src="https://i.imgur.com/oEQZ4CJ.png"></p><h1 id="第六章-中央处理器"><a href="#第六章-中央处理器" class="headerlink" title="第六章 中央处理器"></a>第六章 中央处理器</h1><blockquote><p>CPU 的基本功能？</p></blockquote><ul><li>(1). 指令执行顺序的控制</li><li>(2). 指令的操作控制</li><li>(3). 时间控制</li><li>(4). 异常和中断处理</li><li>(5). 数据加工处理</li></ul><blockquote><p>CPU 由运算器和控制器组成。</p></blockquote><blockquote><p>控制器的主要功能部件有哪些，以及它们的作用？</p></blockquote><ul><li>(1). 程序计数器 PC，Program Counter<ul><li>给出并指示下一条指令的地址</li><li>完成顺序控制的功能</li><li>内容在取指完成后即可改变</li><li>转移指令直接修改 PC 值</li></ul></li><li>(2). 指令寄存器 IR，Instruction Register<ul><li>保存当前正执行的指令</li><li>指令的操作码字段和寻址方式送译码<br>  按：第二条存疑。</li></ul></li><li>(3). 指令译码器 ID，Instruction Decoder<ul><li>对指令的 OP 字段和寻址方式译码，指出指令的操作方式</li><li>译码的结果是找到与该指令相关的微程序的入口</li></ul></li><li>(4). 操作控制器 OC，Operator Controller<ul><li>产生指令执行过程中所需要的控制信号</li><li>实现指令的操作控制功能</li></ul></li><li>(5). 时序产生器 TG，Timer Generator<ul><li>对操作控制信号进行同步</li><li>实现控制器的时间控制功能</li></ul></li><li>(6). 数据缓冲寄存器 DR，Data Register<ul><li>保存于主存之间交换的数据</li></ul></li><li>(7). 地址寄存器 AR，Address Register<ul><li>存放 CPU 将要访问的主存单元地址</li></ul></li></ul><blockquote><p>何为指令周期？</p></blockquote><p>一条指令从取出到执行完成所需时间。</p><blockquote><p>指令周期的划分？</p></blockquote><ul><li>(1). 取指令周期</li><li>(2). 译码&#x2F;取操作数周期</li><li>(3). 执行周期</li></ul><blockquote><p>何为 PSW？</p></blockquote><p>Program Status Word，程序状态字。</p><p>在指令周期的执行周期中，用来记录状态信息（如溢出）。</p><blockquote><p>何为数据通路？</p></blockquote><p>数据在 CPU 各功能部件之间传送的路径。</p><blockquote><p>何为 MAR？</p></blockquote><p>Memory Address Register，内存地址寄存器。</p><blockquote><p>何为微命令？</p></blockquote><p>控制部件通过控制线向执行部件发出的各种控制信号（打开和关闭控制门）。</p><blockquote><p>何为微操作？</p></blockquote><p>执行部件接受微命令后所进行的操作。</p><blockquote><p>反馈线的作用？</p></blockquote><p>向控制部件反馈执行的状态信息，以便控制部件进行状态测试。</p><blockquote><p>微程序控制器的组成？</p></blockquote><ul><li>(1). 控制存储器<ul><li>存放用来实现全部指令的所有微程序，只读存储器，微程序固化在其中。</li></ul></li><li>(2). 微指令寄存器($\mu IR$)<ul><li>存放从控存中读出的微指令</li></ul></li><li>(3). 微地址寄存器($\mu AR$)<ul><li>存储访问 CM 的微地址<br>  按：CM 大概就是控制存储器</li></ul></li><li>(4). 微地址产生逻辑<ul><li>用于产生后续微指令地址</li></ul></li></ul><h1 id="结合试题复习知识点"><a href="#结合试题复习知识点" class="headerlink" title="结合试题复习知识点"></a>结合试题复习知识点</h1><blockquote><p>原码表示法中，零有两个编码，即 $0.0…0$ 和 $1.0…0$。</p></blockquote><p>按：</p><p>实际上，原码表示法表示的零要分整数和小数来讨论，而且，不管是小数还是小数，各自都有两种方法来表示零：</p><ul><li><p>小数</p><ul><li>$0.0…0$</li><li>$1.0…0$</li></ul></li><li><p>整数</p><ul><li>$00…0$</li><li>$10…0$</li></ul></li></ul><blockquote><p>设 $X &#x3D; 11001101$，数据采用奇校验时，其校验位 C &#x3D; $0$。</p></blockquote><p>按：</p><p>所谓奇校验，就是通过设置校验位的值，使待传数据中（含有一位校验位）1 的个数为奇数。设校验位为 C，则：</p><p>$$<br>C &#x3D; \overline{X_0 \oplus X_1 \oplus \cdots \oplus X_{n - 1}}<br>$$</p><blockquote><p>浮点表示法中，阶码决定浮点数的<strong>范围</strong>，尾数决定浮点数的<strong>精度</strong>。</p></blockquote><blockquote><p>设 $X &#x3D; -35 &#x2F; 64$，$X$ 的补码为 $1.011101$。</p></blockquote><blockquote><p>微程序控制器中的核心部件是<strong>控制存储器</strong>。</p></blockquote><p>按：</p><p>控制存储器：</p><ul><li>存放用来实现全部指令的所有微程序</li><li>只读存储器</li><li>微程序固化在其中</li></ul><blockquote><p>74181 集成运算芯片能提供快速运算，是因为它内部具有<strong>并行</strong>逻辑。</p></blockquote><p>按：疑。</p><blockquote><p>冯·诺伊曼计算机的设计思想是**指令和数据用二进制表示…**。</p></blockquote><p>冯·诺伊曼计算机的特点（设计思想）：</p><ul><li>1. 计算机由五大部件组成</li><li>2. 指令和数据以同等地位存于存储器（存储程序和程序控制）</li><li>3. 指令和数据用二进制表示</li><li>4. 指令由操作码和地址码组成</li><li>5. 以运算器为中心</li></ul><blockquote><p>EPROM 芯片靠<strong>紫外线</strong>擦除原存信息。</p></blockquote><p>按：</p><p>ROM 的历史：</p><ul><li>MROM：Mask Read-Only Memory，掩模式只读存储器</li><li>PROM：Programmable Read-Only memory，一次可编程只读存储器</li><li>EPROM：Erasable Programmable Read-Only Memory，电写&#x2F;光（紫外线）擦除可编程只读存储器</li><li>EEPROM：Electronically Erasable Programmable Read-Only Memory，电可擦除可编程只读存储器</li></ul><blockquote><p>固件是一种具有<strong>软件</strong>特性的硬件，通常是将程序<strong>固化</strong>在 ROM 中实现。</p></blockquote><blockquote><p>指令寄存器用来保存<strong>正在执行的指令</strong>。指令计数器用来保存<strong>下一条要执行的指令</strong>。</p></blockquote><p>按：</p><p>The program counter (<strong>PC</strong>) holds the address of the next instruction to be executed, while the instruction register (<strong>IR</strong>) holds the encoded instruction. Upon fetching the instruction, the program counter is incremented by one “address value” (to the location of the next instruction). </p><ul><li>PC，存放下一条要执行的指令的地址</li><li>IR，存放当前要执行的指令</li></ul><blockquote><p>半导体 SRAM 存储元靠<strong>电路</strong>存储信息，而 DRAM 存储元靠<strong>电荷</strong>存储信息。</p></blockquote><p>按：存疑。</p><blockquote><p>间接寻址方式中，操作数的有效地址 E 的表达式为 $E &#x3D; (D)$。</p></blockquote><blockquote><p>控制存储器主要用来存放<strong>微程序</strong>。</p></blockquote><blockquote><p>某机字长 32 位，主存容量位 16MB，若按字编址，其寻址范围为 $0 \sim 4M$。</p></blockquote><p>按：</p><p>计算方法如下：</p><p>某计算机字长是 32 位，它的存储容量是 256KB，按字编址，它的寻址范围是 0~64KB。</p><p>计算步骤：</p><p>256KB 字节 &#x3D; $256 \times 1024 \times 8$ 位，</p><p>计算机按 32 位字长单字编址。则单字的位数为 32 位，范围为 ($256 \times 1024 \times 8$ 位) &#x2F; 32 位 &#x3D; 64KB。</p><p>此外若计算机按 32 位字长半字编址，则半字的位数为 16 位，范围为 ($256 \times 1024 \times 8$ 位) &#x2F; 16 位 &#x3D; 128KB。</p><p>存储容量是指存储器可以容纳的二进制信息量，用存储器中存储地址寄存器 MAR 的编址数与存储字位数的乘积表示。</p><pre><code class="hljs">1B = 8bit</code></pre><p>所以寻址范围 &#x3D; 256KB &#x2F; 4B &#x3D; 64K。</p><p>按：所谓寻址范围，就是内存一共可以编址成的数据的数目。</p><p>来源：<a href="https://www.cnblogs.com/claudia529/p/11073779.html">博客园</a></p><blockquote><p>CPU 中，反映指令执行后 CPU 状态的寄存器是<strong>PSW</strong>。</p></blockquote><blockquote><p>某计算机有 100 条指令，采用定长编码指令格式时，其操作码的长度应为<strong>7</strong>位。</p></blockquote><p>按：$2^7 &#x3D; 128$。</p><blockquote><p>计算机主机是指<strong>存储器 + CPU</strong>。</p></blockquote><blockquote><p>中断向量是<strong>中断服务程序入口地址</strong>。</p></blockquote><blockquote><p>设指令中的形式地址为 D，相对寻址时，操作数的有效地址 E &#x3D; <strong>(PC) + D</strong>。</p></blockquote><blockquote><p>DMA 方式下，设备与主存间的数据交换以<strong>数据块</strong>为基本单位进行。</p></blockquote><blockquote><p>补码浮点加法运算步骤？</p></blockquote><ul><li>求补</li><li>对阶</li><li>求和</li><li>规格化</li></ul><blockquote><p>中断处理过程包括哪些步骤？</p></blockquote><ul><li>(1). 中断请求</li><li>(2). 中断响应</li><li>(3). 保护现场</li><li>(4). 中断处理</li><li>(5). 中断返回</li></ul>]]></content>
    
    
    <categories>
      
      <category>考试</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
      <tag>考试</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微机原理考试复习</title>
    <link href="/2021/11/14/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/"/>
    <url>/2021/11/14/%E5%BE%AE%E6%9C%BA%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="2018-年样卷知识点"><a href="#2018-年样卷知识点" class="headerlink" title="2018 年样卷知识点"></a>2018 年样卷知识点</h1><h2 id="一、填空"><a href="#一、填空" class="headerlink" title="一、填空"></a>一、填空</h2><p>1. 字长指计算机一次可以直接处理的二进制（<strong>位数</strong>），字长越长运算精度越高。</p><p>2. -1 用 8 位 2 进制补码表示为（<strong>11111111</strong>）。</p><p>3. 在 8086CPU 中，由于 EU 和 BIU 分开，所以取指令和执行指令可以重叠操作，提高了（<strong>CPU</strong>）的利用率，CPU 中的 EU 部件完成（<strong>指令译码</strong>）和执行指令的工作。</p><p>EU（Execute Unit，执行单元）：负责执行指令或运算。</p><ul><li>从指令队列中取指令代码，译码，在 ALU 中完成数据的运算，结果的特征保存在标志寄存器中。</li></ul><p>BIU（Bus Interface Unit，总线接口单元）：负责读指令和数据。</p><ul><li>具有预取指令的功能</li><li>指令执行顺序</li></ul><p>4. 已知一个数据段长度为 1K 字节，设 DS&#x3D;6000H，数据段的偏移量为 200H，则该数据段的首地址的物理地址为（<strong>60200H</strong>）。</p><p>5. 指令 XOR, AX, AX 的寻址方式为（<strong>寄存器寻址</strong>），指令执行后 ZF 内容为（<strong>1</strong>）。</p><p>ZF - Zero Flag，如果数学&#x2F;逻辑运算的结果为零或者以其他方式重置，则置位。</p><p>6. 8088CPU 在执行 MOV AX, [2000H] 指令时，对存储器进行（<strong>读</strong>）操作。2000H 这个值由 CPU 输出到（<strong>地址</strong>）总线上，2000H 的内容由存储器输出到（<strong>数据</strong>）总线上。</p><p>7. 汇编程序中控制汇编程序应如何工作的命令叫（<strong>伪指令</strong>），或称为汇编控制命令。</p><p>8. 按存储信息的类型不同分类，I&#x2F;O 端口分成（<strong>数据端口</strong>）、（<strong>状态端口</strong>）和控制端口三种。</p><p>9. 中断过程中，CPU 执行的现行程序被中断时的下一条指令的地址被称为（<strong>断点</strong>）；CPU 转去执行中断服务程序前的运行状态被称为（<strong>现场</strong>）。</p><h2 id="三、判断题"><a href="#三、判断题" class="headerlink" title="三、判断题"></a>三、判断题</h2><blockquote><p>10. 经典的冯·诺伊曼结构是咋样的？</p></blockquote><p><img src="https://i.imgur.com/ocuAiuh.png"></p><h1 id="课堂练习复习"><a href="#课堂练习复习" class="headerlink" title="课堂练习复习"></a>课堂练习复习</h1><h2 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h2><p><img src="https://i.imgur.com/bpDfFqN.png"></p><p><img src="https://i.imgur.com/T0ahFaI.png"></p><p><img src="https://i.imgur.com/5tKq2tL.png"></p><p><img src="https://i.imgur.com/u4c4Hq7.png"></p><p><img src="https://i.imgur.com/ezXEN7f.png"></p><p><img src="https://i.imgur.com/2oIWBvH.png"></p><p><img src="https://i.imgur.com/pfT5nI6.png"></p><p><img src="https://i.imgur.com/66Zq6Tb.png"></p><p><img src="https://i.imgur.com/cYYTwUh.png"></p>]]></content>
    
    
    <categories>
      
      <category>考试复习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>考试复习</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>博客待整理内容目录</title>
    <link href="/2021/11/14/%E5%8D%9A%E5%AE%A2%E5%BE%85%E6%95%B4%E7%90%86%E5%86%85%E5%AE%B9%E7%9B%AE%E5%BD%95/"/>
    <url>/2021/11/14/%E5%8D%9A%E5%AE%A2%E5%BE%85%E6%95%B4%E7%90%86%E5%86%85%E5%AE%B9%E7%9B%AE%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="未完成"><a href="#未完成" class="headerlink" title="未完成"></a>未完成</h1><div>            <input type="checkbox" disabled >gcc 编译选项整理          </div><div>            <input type="checkbox" disabled >gdb 调试用法整理          </div><div>            <input type="checkbox" disabled >编译原理作业三最后一题修正          </div><div>            <input type="checkbox" disabled >学习雅思          </div><h1 id="正在做"><a href="#正在做" class="headerlink" title="正在做"></a>正在做</h1><div>            <input type="checkbox" disabled >vim 搜索和替换快捷键          </div><div>            <input type="checkbox" disabled >300 道 LeetCode          </div><h1 id="已完成"><a href="#已完成" class="headerlink" title="已完成"></a>已完成</h1><div>            <input type="checkbox" disabled >C 语言 `clock` 函数现在还会不会把 `scanf` 的时间算进去呢？          </div><div>            <input type="checkbox" disabled >关于傅里叶级数推导的一个小问题          </div>]]></content>
    
    
    <categories>
      
      <category>杂</category>
      
    </categories>
    
    
    <tags>
      
      <tag>杂</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库第一次上机实验报告</title>
    <link href="/2021/11/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/"/>
    <url>/2021/11/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AC%AC%E4%B8%80%E6%AC%A1%E4%B8%8A%E6%9C%BA%E5%AE%9E%E9%AA%8C%E6%8A%A5%E5%91%8A/</url>
    
    <content type="html"><![CDATA[<h1 id="实验二-数据库的创建和管理"><a href="#实验二-数据库的创建和管理" class="headerlink" title="实验二 数据库的创建和管理"></a>实验二 数据库的创建和管理</h1><h2 id="一、实验目的"><a href="#一、实验目的" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>熟练掌握使用 Navicat 和 Transact-SQL 语言两种方法创建、修改和删除数据库。学习在 Navicat 中进行数据库的转储和导入。掌握管理数据库的有关系统存储过程。</p><h2 id="二、实验内容"><a href="#二、实验内容" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、利用Navicat创建满足以下要求的数据库：</p><ul><li>1）数据库存在于连接 MySQL 中；</li><li>2）数据库名称为 mydb； </li><li>3）字符集选择 utf8 – UTF-8 Unicode；</li><li>4）排序规则选择 utf8_general_ci</li></ul><p>具体步骤如下：</p><p>新建连接“MySQL”—单击选择并右键—“新建数据库”—输入数据库名“mydb”、字符集“utf8 – UTF-8 Unicode”、排序规则“utf8_general_ci”—“确定”。如图所示：</p><p><img src="https://i.imgur.com/UIaHpCh.png"></p><p>右键—“Edit Database”，可以看到如下图所示结果：</p><p><img src="https://i.imgur.com/1wl4HUr.png"></p><p>2、利用Transact-SQL语言创建满足以下要求的数据库：</p><ul><li>1）数据库存在于连接 MySQL 中；</li><li>2）数据库名称为 testdb；</li><li>3）字符集选择 utf8 – UTF-8 Unicode；</li><li>4）排序规则选择 utf8_general_ci；</li></ul><p>具体步骤如下：</p><p>点击“新建查询”，在查询编辑器输入以下代码，选中代码后，点击“运行”，完成后，左侧列表中选中连接“MySQL”，点击“刷新”按钮，列表即可见到“testdb”。如图所示：</p><p><img src="https://i.imgur.com/wtRfYJs.png"></p><p><img src="https://i.imgur.com/uQRfOL6.png"></p><p>3、利用 Transact-SQL 语言查看数据库及表的信息。</p><p>① 查看连接中的所有数据库</p><p>步骤：点击“新建查询”，输入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SHOW</span> DATABASES;<br></code></pre></td></tr></table></figure><p>后运行，</p><p><img src="https://i.imgur.com/6G5XEg6.png"></p><p>② 查看数据库 mysql 中所有的表</p><p>步骤：打开查询窗口，输入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">show</span> tables <span class="hljs-keyword">from</span> mysql;<br></code></pre></td></tr></table></figure><p>后运行，</p><p><img src="https://i.imgur.com/qn3QhYM.png"></p><p>③ 查看数据库“mysql”中表“help_keyword”的结构。</p><p>步骤：打开查询窗口，输入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE mysql;<br><span class="hljs-keyword">DESCRIBE</span> help_keyword;<br></code></pre></td></tr></table></figure><p>后运行，</p><p><img src="https://i.imgur.com/WvfZaEj.png"></p><p>4、利用 Navicat 修改数据库 mydb，修改其排序方式为 utf8_bin。<br>步骤：右键单击数据库“mydb”—Edit Database，在排序方式中选择“utf8_bin”—“确定”。</p><p><img src="https://i.imgur.com/bKdz53M.png"></p><p>5、利用 Transact-SQL 语言修改数据库 mydb 的字符集为 Latin1； </p><p>步骤：打开查询窗口，输入以下代码，点击运行</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> DATABASE mydb <span class="hljs-keyword">DEFAULT</span> <span class="hljs-type">CHARACTER</span> <span class="hljs-keyword">SET</span> <span class="hljs-operator">=</span> latin1;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/ynDvj5T.png"></p><p>关闭数据库“mydb”后重新打开，查看数据库属性，可以看到如下图所示结果：</p><p><img src="https://i.imgur.com/k6DhwMI.png"></p><p>6、利用 Navicat 删除数据库 mydb。</p><p>步骤：直接右键点击 mydb 选择删除即可，注意要关闭当前的 SQL 语句编写界面。</p><p>7、利用 Transact-SQL 语言删除数据库 testdb。</p><p>步骤：点击“新建查询”，输入</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> DATABASE testdb;<br></code></pre></td></tr></table></figure><p>后运行，</p><p>刷新连接“MySQL”，查看结果。</p><p>8、转储 MySQL 数据库。</p><p>步骤：打开连接“MySQL”—右键单击数据库“mysql”—选择“转储 SQL 文件”—将文件名改为“sql.sql”后保存在桌面。</p><p><img src="https://i.imgur.com/UBBFOZO.png"></p><p>9、导入MySQL数据库。</p><p>① 在连接“MySQL”中新建数据库“sql”（字符集与排序方式尽量一致）。<br>② 打开数据库“sql”—右键单击—运行 SQL 文件—选择桌面的“sql.sql”文件—点击“确定”。<br>③ 关闭数据库 sql 后重新打开，对比数据库“sql”与最初的数据库“mysql”，看是否完全相同。</p><p>这里实际操作的时候有错误。</p><h2 id="三、课后练习题"><a href="#三、课后练习题" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、分别用以下几种语句查看数据库“mysql”中任意表的结构或数据（先输入：<code>USE mysql;</code>）：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql">① <span class="hljs-keyword">SHOW</span> COLUMNS <span class="hljs-keyword">FROM</span> 表名;<br>② <span class="hljs-keyword">DESCRIBE</span> 表名;<br>③ <span class="hljs-keyword">DESC</span> 表名;<br>④ <span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> 表名;  <br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/jL6k95e.png"></p><p><img src="https://i.imgur.com/sx5ZdCJ.png"></p><p><img src="https://i.imgur.com/xq6rAj6.png"></p><p><img src="https://i.imgur.com/Eqn6dUU.png"></p><p>2、思考以下问题：</p><p>1）mysql 中 utf8 编码的 utf8_bin, utf8_general_cs, utf8_general_ci 三者的区别。<br>2）不同编码方式的数据库之间进行转储和导入会不会出现错误。</p><p>答：</p><p>1）</p><ul><li><p><code>utf8_bin</code> 将字符串中的每一个字符用二进制数据存储，区分大小写。</p></li><li><p><code>utf8_genera_ci</code> 不区分大小写，ci 为 case insensitive 的缩写，即大小写不敏感。</p></li><li><p><code>utf8_general_cs</code> 区分大小写，cs 为 case sensitive 的缩写，即大小写敏感。</p></li></ul><p>2）</p><p>会。</p><h1 id="实验三-表的创建和管理"><a href="#实验三-表的创建和管理" class="headerlink" title="实验三 表的创建和管理"></a>实验三 表的创建和管理</h1><h2 id="一、实验目的-1"><a href="#一、实验目的-1" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>熟练掌握使用 Navicat 和 Transact-SQL 语言两种方法创建、修改和删除表。掌握管理表的有关系统存储过程。</p><h2 id="二、实验内容-1"><a href="#二、实验内容-1" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、利用 Navicat 创建满足以下要求的数据库：</p><p>① 数据库存在于连接 MySQL 中；<br>② 数据库名称为xsgl；<br>③ 字符集选择utf8 – UTF-8 Unicode；排序规则选择 utf8_general_ci。</p><p>2、在数据库 xsgl 中，利用 Navicat 创建以下表格：</p><p>1）表格名为xs（学生基本情况表）；<br>2）表格中各个属性的定义如下：</p><p><img src="https://i.imgur.com/VTlZWP5.png"></p><p>具体步骤如下：打开新建的数据库“xsgl”–右键点击“表”–“新建表”。按照上表内容输入个属性的定义，填写“列名”、“数据类型”，并取消或选择“允许NULL值”前的选项，并右键点击“xh”，选择将其设为主键。</p><p>3、按照以下步骤向表格 xs 中添加如下记录：</p><p><img src="https://i.imgur.com/vH3jv8x.png"></p><p>1）打开 Navicat；<br>2）打开连接 MySQL 找到数据库 xsgl 中的表格 xs；<br>3）在表格 xs 上右击鼠标，选择“打开表”；<br>4）在接着出现的记录录入界面上添加记录。（方向键下增加新纪录）</p><p>添加完后如图所示：</p><p><img src="https://i.imgur.com/PavkGQQ.png"></p><p>4、向表xs中增加“入学时间”属性列，其列名为rxsj，数据类型为datetime型。</p><p>步骤：右键单击 xs 表—设计表—加入列 rxsj，设置数据类型为 datetime。如图所示：</p><p><img src="https://i.imgur.com/IVIWC6M.png"></p><p>5、将表 xs 中 nl（年龄）列的数据类型改为 int 型。</p><p>步骤：与第 4 项类似。</p><p>6、在数据库 xsgl 中，利用 Transact-SQL 语言创建以下表格：</p><p>1）表格名为 kc（课程情况表）；<br>2）表格中各个属性的定义如下：</p><p><img src="https://i.imgur.com/jDRKDgy.png"></p><p>步骤：点击“新建查询”，输入以下代码，点击运行，</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE xsgl;<br><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> kc<br>(<br>    kch <span class="hljs-type">char</span>(<span class="hljs-number">4</span>) <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>,<br>    kcm <span class="hljs-type">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">null</span>,<br>    xss <span class="hljs-type">int</span> <span class="hljs-keyword">null</span>,<br>    xf <span class="hljs-type">int</span> <span class="hljs-keyword">null</span>,<br>    <span class="hljs-keyword">primary</span> key(kch)<br>)engine<span class="hljs-operator">=</span>innodb <span class="hljs-keyword">default</span> charset<span class="hljs-operator">=</span>utf8 auto_increment<span class="hljs-operator">=</span><span class="hljs-number">1</span>;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/sKdaB2t.png"></p><p><img src="https://i.imgur.com/mqop5eW.png"></p><p>7、利用 Transact-SQL 语言修改 kc 表。</p><p>① 增加“成绩”一列 cj，int 型，允许为空值，默认为 0。</p><p>步骤：点击“新建查询”，输入以下代码，点击运行，</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc <span class="hljs-keyword">ADD</span> <span class="hljs-keyword">COLUMN</span> cj <span class="hljs-type">INT</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/o1c5xqG.png"></p><p>② 修改 cj 列的类型为 char。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc MODIFY <span class="hljs-keyword">COLUMN</span> cj <span class="hljs-type">char</span>;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/Ucu2c2z.png"></p><p>③ 修改 cj 列的列名为 mark。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc <br>RENAME <span class="hljs-keyword">COLUMN</span> cj <span class="hljs-keyword">TO</span> mark;<br></code></pre></td></tr></table></figure><p>④ 删除 mark 列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">TABLE</span> kc <span class="hljs-keyword">DROP</span> <span class="hljs-keyword">COLUMN</span> mark;<br></code></pre></td></tr></table></figure><p>8、利用 Navicat 和 Transact-SQL 语言两种方式删除表 kc。</p><p>① 步骤：右键点击表“kc”，选择删除。<br>② 步骤：点击“新建查询”，输入以下代码，点击执行</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> kc;<br></code></pre></td></tr></table></figure><p>9、利用 Transact-SQL 将表 xs 重命名为 Students。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">RENAME <span class="hljs-keyword">TABLE</span> xs <span class="hljs-keyword">TO</span> Students;<br></code></pre></td></tr></table></figure><h2 id="三、课后练习题-1"><a href="#三、课后练习题-1" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>1、创建一个名为 cpxs 的数据库，在该数据库中分别通过 Navicat 和查询分析器创建一个名为 cp 的表（产品表），表格中各个属性的定义如下：</p><p><img src="https://i.imgur.com/FqsbP7t.png"></p><p>答：</p><p>Navicat 建表从略。SQL 语句建表如下：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `cp` (<br>  `cpbh` <span class="hljs-type">char</span>(<span class="hljs-number">6</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> COMMENT <span class="hljs-string">&#x27;主码&#x27;</span>,<br>  `cpmc` <span class="hljs-type">char</span>(<span class="hljs-number">30</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>  `jg` <span class="hljs-type">float</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  `kcl` <span class="hljs-type">int</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-keyword">NULL</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`cpbh`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8mb3;<br></code></pre></td></tr></table></figure><p>2、思考以下问题：</p><p>1）如果要在一个已经存在的表格上删除一列并增加一列，能不能用一个 ALTER TABLE 语句来完成？</p><p>答：可以。</p><h1 id="实验四-表数据的简单查询"><a href="#实验四-表数据的简单查询" class="headerlink" title="实验四 表数据的简单查询"></a>实验四 表数据的简单查询</h1><h2 id="一、实验目的-2"><a href="#一、实验目的-2" class="headerlink" title="一、实验目的"></a>一、实验目的</h2><p>掌握 SELECT 语句的基本用法。掌握计算列的用法。掌握 WHERE 子句中各类查询条件的写法。</p><h2 id="二、实验内容-2"><a href="#二、实验内容-2" class="headerlink" title="二、实验内容"></a>二、实验内容</h2><p>1、在连接“MySQL”中新建数据库“world”，并将数据库文件 newworld.sql 导入到该数据库之中。</p><p>2、查询 world 数据库的 country 表中的国名（Name）、洲名（Continent）和地区（Region）。</p><p>步骤：点击“新建查询”，输入以下代码，点击执行，运行结果如图：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE world;<br><span class="hljs-keyword">SELECT</span> NAME, Continent, Region <span class="hljs-keyword">From</span> country;<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/pM4C27L.png"></p><p>3、从 world 数据库的 city 表中搜索返回前 20 条的数据。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> city LIMIT <span class="hljs-number">0</span>, <span class="hljs-number">10</span>;<br></code></pre></td></tr></table></figure><p>4、使用 WHERE 子句从 world 数据库的 country 表中检索出所有领土面积超过一百万平方公里的国家名称（Name）、洲名（Continent）以及领土面积（SurfaceArea）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Continent, SurfaceArea <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> SurfaceArea <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000000</span>;<br></code></pre></td></tr></table></figure><p>5、查询在 world 数据库的 country 表中 Name 以字母 C 开头的国家的洲名 Continent，地区 Region。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Continent, Region <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Name REGEXP <span class="hljs-string">&#x27;^C&#x27;</span>;<br></code></pre></td></tr></table></figure><p>6、查询 world 数据库 country 表中所有国家的 Name 和 Continent，并按生日 SurfaceArea 从小到大进行排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Continent <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> SurfaceArea <span class="hljs-keyword">ASC</span>;<br></code></pre></td></tr></table></figure><p>练习巩固</p><p>7、查询 country 表中政体（GovernmentForm）属于共和国（Republic）的国家的 Name 和 Population、GovernmentForm。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Population, GovernmentForm <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Republic&#x27;</span>;<br></code></pre></td></tr></table></figure><p>8、country 表中查询前 20 个非洲国家的名称。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Africa&#x27;</span><br>LIMIT <span class="hljs-number">20</span>;<br></code></pre></td></tr></table></figure><p>9、city 表中查询阿富汗（Countrycode 为 AFG）的所有城市的名称和人口，并要求对查询结果按人口的降序排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Population <span class="hljs-keyword">FROM</span> city<br><span class="hljs-keyword">WHERE</span> CountryCode <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;AFG&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Population <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure><p>10、Country 表中查询领土面积介于一百万和五百万平方公里之间的国家的名称和领土面积（领土面积以除以一万的结果显示）。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, SurfaceArea <span class="hljs-operator">/</span> <span class="hljs-number">10000</span> <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> SurfaceArea <span class="hljs-operator">&gt;</span> <span class="hljs-number">1000000</span> <span class="hljs-keyword">AND</span> SurfaceArea <span class="hljs-operator">&lt;</span> <span class="hljs-number">5000000</span>;<br></code></pre></td></tr></table></figure><p>11、查询名称以“C”开头的亚洲国家或非洲国家的名称和洲名。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Continent <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> (Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Asia&#x27;</span> <span class="hljs-keyword">OR</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Africa&#x27;</span>) <span class="hljs-keyword">AND</span> Name REGEXP <span class="hljs-string">&#x27;^C&#x27;</span>;<br></code></pre></td></tr></table></figure><p>12、country 表中查询独立年份为空的国家的名称、国家年份。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, IndepYear <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> IndepYear <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;<br></code></pre></td></tr></table></figure><h2 id="三、课后练习题-2"><a href="#三、课后练习题-2" class="headerlink" title="三、课后练习题"></a>三、课后练习题</h2><p>以下题目在数据库world中完成。</p><p>1、查询 country 表中所有亚洲国家的名称、地区，要求查询结果按人口的升序排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Region <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Continent <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Asia&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Population <span class="hljs-keyword">ASC</span>;<br></code></pre></td></tr></table></figure><p>2、查询 city 表中智利（CHL）或保加利亚（BGR）的城市名称。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name <span class="hljs-keyword">FROM</span> city<br><span class="hljs-keyword">WHERE</span> CountryCode <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;CHL&#x27;</span> <span class="hljs-keyword">OR</span> CountryCode <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;BGR&#x27;</span>;<br></code></pre></td></tr></table></figure><p>3、查询 country 表中 Region 字段包含“Europe”的国家的全部信息。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> Region <span class="hljs-keyword">like</span> <span class="hljs-string">&#x27;%Europe%&#x27;</span>;<br></code></pre></td></tr></table></figure><p>4、查询所有君主立宪制（Constitutional Monarchy）国家的名称和人口，按人口降序排列。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">SELECT</span> Name, Population <span class="hljs-keyword">FROM</span> country<br><span class="hljs-keyword">WHERE</span> GovernmentForm <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;Constitutional Monarchy&#x27;</span><br><span class="hljs-keyword">ORDER</span> <span class="hljs-keyword">BY</span> Population <span class="hljs-keyword">DESC</span>;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理考试复习</title>
    <link href="/2021/11/13/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/"/>
    <url>/2021/11/13/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<p>考完按：考完了，希望老师能给 60 分。最后一题考了代码优化的问题，什么划分代码块啦，什么找出循环啦，没复习到。就这样。</p><blockquote><p>何为 $L(G)$？</p></blockquote><p>文法 $G$ 所产生的语言定义为集合</p><p>$$<br>{ x| S \mathop{\Rightarrow}\limits^* x, 其中 S 为文法识别符号，且 x \in V^*_T}<br>$$</p><p>可用 $L(G)$ 表示该集合。</p><blockquote><p>何为最左推导、最右推导、规范推导、右句型、规范句型？</p></blockquote><p>如果在推导的任何一步 $\alpha \Rightarrow \beta$，其中，$\alpha$、$\beta$ 是句型，都是对 $\alpha$ 中的最左非终结符进行替换，则称这种推导为<strong>最左推导</strong>。</p><p>如果在推导的任何一步 $\alpha \Rightarrow \beta$，其中，$\alpha$、$\beta$ 是句型，都是对 $\alpha$ 中的最右非终结符进行替换，则称这种推导为<strong>最右推导</strong>。</p><p>在形式语言中，最右推导常被称为<strong>规范推导</strong>。</p><p>由规范推导所得的句型称为<strong>右句型</strong>或<strong>规范句型</strong>。</p><blockquote><p>何为短语、直接短语、和句柄？</p></blockquote><p>令 $G$ 是一个文法，$S$ 是文法的开始符号，$\alpha \beta \delta$ 是文法 $G$ 的一个句型。如果有 $S \mathop{\Rightarrow}\limits^* \alpha A \delta$ 且 $A \mathop{\Rightarrow}\limits^+ \beta$，则称 $\beta$ 是句型 $\alpha \beta \delta$ 相对于非终结符 $A$ 的<strong>短语</strong>。</p><p>特别地，如果有 $A \Rightarrow \beta$，则称 $\beta$ 是句型 $\alpha \beta \delta$ 相对于规则 $A \rightarrow \beta$ 的<strong>直接短语</strong>（也称<strong>简单短语</strong>）。</p><p>一个右句型的直接短语称为该句型的<strong>句柄</strong>。句柄的概念只适用于右句型。</p><blockquote><p>关于句柄的其他理解？</p></blockquote><p>在“移入-归约”分析中，每次归约的符号串称为“句柄”。</p><p>又：句柄是句型的最左直接短语。</p><blockquote><p>何为 3 型文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$，若 $P$ 中的每一个产生式的形式都是 $A \rightarrow aB$ 或 $A \rightarrow a$，其中 $A$ 和 $B$ 都是非终结符，$a \in V_T^*$，则 $G$ 是 <strong>3 型文法</strong> 或 <strong>正规文法</strong>。</p><blockquote><p>如何消除文法的直接左递归？</p></blockquote><p>将</p><p>$$<br>A \rightarrow A \alpha | \beta ; (\alpha \neq \varepsilon, \beta ;不以 A 开头)<br>$$</p><p>转换成</p><p>$$<br>\begin{split}<br>A \rightarrow \beta A^{‘} \<br>A^{‘} \rightarrow \alpha A^{‘} | \varepsilon<br>\end{split}<br>$$</p><p><img src="https://i.imgur.com/LobTnUb.png"></p><p><img src="https://i.imgur.com/BTAs20o.png"></p><blockquote><p>如何消除文法的间接子递归？</p></blockquote><p><img src="https://i.imgur.com/ONRU6mw.png"></p><blockquote><p>消除左递归的算法？</p></blockquote><p><img src="https://i.imgur.com/RCSsK8L.png"></p><blockquote><p>何为上下文无关文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$。若 $P$ 中的每一个产生式 $\alpha \rightarrow \beta$ 满足：$\alpha$ 是一个非终结符，$\beta \in (V_N \cup V_T)^*$，则此文法称为 <strong>2 型的</strong> 或 <strong>上下文无关的（context-free）</strong></p><p><strong>上下文无关文法</strong> 即 CFG(Context-Free Grammer))。</p><blockquote><p>对 $\text{FIRST}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/s8YqiDv.png"></p><p><img src="https://i.imgur.com/VmrkYxH.png"></p><p><img src="https://i.imgur.com/hgG2AXE.png"></p><blockquote><p>对 $\text{FOLLOW}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/BWChrVU.png"></p><p><img src="https://i.imgur.com/T9YnsK5.png"></p><blockquote><p>如何理解 $\text{SELECT()}$？</p></blockquote><p>给定上下文无关文法的产生式 $A \rightarrow \alpha$ $, $ $A \in V_N, \alpha \in V^*$，</p><ul><li>若 $\alpha \stackrel{*}{\nRightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $\text{FIRST}(\alpha)$。</li><li>若 $\alpha \stackrel{*}{\Rightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $(\text{FIRST}(\alpha) - {\varepsilon})$ $\cup$ $\text{FOLLOW}(A)$。</li></ul><blockquote><p>一个 $\text{SELECT}$ 的例子。</p></blockquote><p><img src="https://i.imgur.com/OQut1Ok.png"></p><blockquote><p>一张预测分析表。</p></blockquote><p><img src="https://i.imgur.com/rqhlpyx.png"></p><p>按：这张图中上面的那张表中差了一个表达式：$T^{‘} \rightarrow \varepsilon$。</p><blockquote><p>何为 $LL(1)$ 文法？</p></blockquote><p><img src="https://i.imgur.com/SkZeZY1.png"></p><p><img src="https://i.imgur.com/eC9gsif.png"></p><p>一个上下文无关文法是 $\text{LL}(1)$ 的充分必要条件是,</p><p>对每个非终结符 $A$ 的两个不同产生式，$A \rightarrow \alpha$ $,$ $A \rightarrow \beta$，满足</p><p>$$<br>\text{SELECT}(A \rightarrow \alpha) \cap \text{SELECT}(A \rightarrow \beta) &#x3D; \varnothing<br>$$</p><p>其中 $\alpha、\beta$ 不同时能 $\stackrel{*}{\Rightarrow} \epsilon$。</p><p>$\text{LL}(1)$ 的含义是：第 1 个 $\text{L}$ 表明自顶向下分析是从左向右扫描输入串，第 2 个 $\text{L}$ 表明分析过程中将用最左推导，1 表明只需要向右看一个符号便可决定如何推导，即选择哪个产生式（规则）进行推导。</p><blockquote><p>如何判别某文法是否是 $\text{LL}(1)$ 文法？</p></blockquote><p>首先计算 $\text{FIRST}$、$\text{FOLLOW}$、$\text{SELECT}$ 集合，然后根据定义判别文法是否是 $\text{LL}(1)$ 文法。</p><blockquote><p>在基本块范围内进行的优化？</p></blockquote><p>局部优化指的是在一个基本块范围内进行的优化。常见的局部优化有：</p><ul><li>常量传播</li><li>常量合并</li><li>删除公共子表达式</li><li>复写传播</li><li>删除无用代码</li><li>代数化简</li></ul><blockquote><p>循环优化的常见方法？</p></blockquote><ul><li>代码外提</li><li>归纳变量的删除</li></ul><blockquote><p>文法描述的语言是<strong>由文法开始符推导的终结符号串</strong>的集合。</p></blockquote><blockquote><p>何为可归前缀和活前缀？</p></blockquote><p>设文法 $G[S]$，如果 $S \stackrel{*}{\Rightarrow} \alpha A \omega$ $\Rightarrow \alpha \beta \omega$ 是句型 $\alpha \beta \omega$ 的规范推导，则 $\alpha \beta$ 称为<strong>可归前缀</strong>，$\alpha \beta$ 的前缀称为<strong>活前缀</strong>。</p><p>活前缀就是可归前缀的前缀。</p><p>例如文法 $G[S]$，</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow aAcBe \<br>A &amp;\rightarrow b \<br>A &amp;\rightarrow Ab \<br>B &amp;\rightarrow d<br>\end{split}<br>$$</p><p>句型 $aAbcde$ 的句柄为 $Ab$，活前缀有：$\varepsilon$、$a$、$aA$ 和 $aAb$，其中，$aAb$ 为可归前缀。</p><blockquote><p>何为前缀？</p></blockquote><p>将符号串的任意含有头符号的子串称为<strong>前缀</strong>，特别地，空串 $\varepsilon$ 为任意串的前缀。</p><blockquote><p>如何将正则表达式（正规式）转成 $NFA$？</p></blockquote><p><img src="https://i.imgur.com/fOJVdfM.png"></p><p><img src="https://i.imgur.com/RlWv45O.png"></p><p><img src="https://i.imgur.com/Xz4JShv.png"></p><blockquote><p>如何将 $NFA$ 转成 $DFA$？</p></blockquote><p><img src="https://i.imgur.com/7kxQj4T.png"></p><p>按：在这里，像状态 $B$ 遇到 $a$，那么，其到达的状态是看成 $\varnothing$ 的。</p><p><img src="https://i.imgur.com/HwHiVfv.png"></p><blockquote><p>一张预测分析表？</p></blockquote><p><img src="https://i.imgur.com/2kEstjG.png"></p><p>按：此为非递归的预测分析法，也叫表驱动的预测分析法。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《一站式学习 C 编程》阅读手记</title>
    <link href="/2021/11/11/%E3%80%8A%E4%B8%80%E7%AB%99%E5%BC%8F%E5%AD%A6%E4%B9%A0-C-%E7%BC%96%E7%A8%8B%E3%80%8B%E9%98%85%E8%AF%BB%E6%89%8B%E8%AE%B0/"/>
    <url>/2021/11/11/%E3%80%8A%E4%B8%80%E7%AB%99%E5%BC%8F%E5%AD%A6%E4%B9%A0-C-%E7%BC%96%E7%A8%8B%E3%80%8B%E9%98%85%E8%AF%BB%E6%89%8B%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>对于整数中的位的位运算？</p></blockquote><ul><li><code>&amp;</code> 是按位与（Bitwise AND）运算符</li><li><code>|</code> 是按位或（Bitwise OR）运算符</li><li><code>~</code>（Tilde）是按位取反（Bitwise NOT）运算符</li><li><code>^</code>（Caret）是按位异或（Bitwise XOR）运算符</li></ul><blockquote><p>奇偶性的英文？</p></blockquote><p>Parity</p><blockquote><p>不借助额外的存储空间，交换两个变量的值？</p></blockquote><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs c">a = a^b;<br>b = b^a;<br>a = a^b;<br></code></pre></td></tr></table></figure><p>利用的原理是：</p><ul><li><code>x^x^y ==y</code></li><li>异或运算满足交换律和结合律</li></ul><blockquote><p>疑：RAID(Redundant Array of Independent Disks，独立磁盘冗余阵列) 的实现原理？</p></blockquote><blockquote><p>gcc 的 <code>-g</code> option？</p></blockquote><p>在编译时要加上 <code>-g</code> 选项，生成的可执行文件才能用 gdb 进行源码级调试。</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>技术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>软件体系结构考试复习</title>
    <link href="/2021/11/10/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/"/>
    <url>/2021/11/10/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="考完回忆"><a href="#考完回忆" class="headerlink" title="考完回忆"></a>考完回忆</h1><p>华科软院以后如果还在的话，同志们可以参考一下。</p><p>题目的结构和打印店买的卷子的结构是一样的。</p><p>填空题考了一个关于性能的战术好像，总之是一个战术，要求写它的几个方面。</p><p>然后简答题有一题比较深刻，就是问架构师应如何和项目经理相互合作。</p><p>还有一个，为什么说架构师的沟通也很重要？</p><p>大题就是自选项目，然后什么 ADD 啦，ATAM 啦，质量属性效用树啦等等分析。</p><p>最后一题是分析京东或者淘宝等购物网站针对双 11 采取的战术。</p><p>以上。</p><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>参考：<a href="https://blog.csdn.net/yin__ren/article/details/83796176?utm_source=app&app_version=4.18.0&code=app_1562916241&uLinkId=usr1mkqgl919blen">应该是学院某位前辈同志从老师的 PPT 中整理下来的非常详细的知识点提纲，同时也有结合教材</a></p><h1 id="2014-年软件体系结构试卷"><a href="#2014-年软件体系结构试卷" class="headerlink" title="2014 年软件体系结构试卷"></a>2014 年软件体系结构试卷</h1><h2 id="一、填空题"><a href="#一、填空题" class="headerlink" title="一、填空题"></a>一、填空题</h2><h3 id="1-系统的质量属性有多种，请列举其中六种？"><a href="#1-系统的质量属性有多种，请列举其中六种？" class="headerlink" title="1. 系统的质量属性有多种，请列举其中六种？"></a>1. 系统的质量属性有多种，请列举其中六种？</h3><ul><li>运行时可见属性<ul><li>可用性</li><li>性能</li><li>安全性</li><li>易用性</li></ul></li><li>维护时可见属性<ul><li>可修改性</li><li>可扩展性</li><li>可移植性</li><li>可集成性</li></ul></li></ul><h3 id="2-构架战术就是？"><a href="#2-构架战术就是？" class="headerlink" title="2. 构架战术就是？"></a>2. 构架战术就是？</h3><p>战术是对质量属性的控制产生影响的设计决策。</p><h3 id="3-什么称为构架策略？"><a href="#3-什么称为构架策略？" class="headerlink" title="3. 什么称为构架策略？"></a>3. 什么称为构架策略？</h3><p>架构策略是架构中所采用的战术的集合。</p><h3 id="4-构架驱动因素包括？"><a href="#4-构架驱动因素包括？" class="headerlink" title="4. 构架驱动因素包括？"></a>4. 构架驱动因素包括？</h3><ul><li>比较重要的功能</li><li>质量属性</li><li>限制条件构成的某个子集</li></ul><h3 id="5-构架评审的六个优点是？"><a href="#5-构架评审的六个优点是？" class="headerlink" title="5. 构架评审的六个优点是？"></a>5. 构架评审的六个优点是？</h3><p>优点就是收益。</p><ul><li>及早发现现有构架中存在的问题</li><li>构架的改进</li><li>财务收益</li><li>强制为评审做准备</li><li>捕获构架设计的基本思想</li><li>验证需求的有效性</li></ul><h3 id="6-架构结构可以分为-3-组？"><a href="#6-架构结构可以分为-3-组？" class="headerlink" title="6. 架构结构可以分为 3 组？"></a>6. 架构结构可以分为 3 组？</h3><ul><li>静态的角度<ul><li>模块结构</li><li>分析类结构</li><li>类结构</li></ul></li><li>动态的角度<ul><li>进程结构</li><li>数据流</li><li>控制流</li><li>使用结构</li><li>调用结构</li><li>层次结构</li></ul></li><li>部署的角度<ul><li>物理结构</li></ul></li></ul><h3 id="7-构架的商业属性包括？"><a href="#7-构架的商业属性包括？" class="headerlink" title="7. 构架的商业属性包括？"></a>7. 构架的商业属性包括？</h3><p>也叫商业限制。</p><ul><li>投放市场时间</li><li>成本和收益</li><li>预计的系统生命周期的长短</li><li>目标市场</li><li>推出计划</li><li>遗留系统集成</li></ul><h3 id="8-构架样式有多种，其中四种是？"><a href="#8-构架样式有多种，其中四种是？" class="headerlink" title="8. 构架样式有多种，其中四种是？"></a>8. 构架样式有多种，其中四种是？</h3><ul><li>以数据为中心的样式</li><li>数据流样式</li><li>虚拟机样式</li><li>调用-返回样式</li><li>独立组件样式</li><li>事件系统样式</li><li>通讯进程样式</li><li>C&#x2F;S 样式</li><li>C2 样式</li></ul><h2 id="二、名词解释"><a href="#二、名词解释" class="headerlink" title="二、名词解释"></a>二、名词解释</h2><h3 id="1-软件架构"><a href="#1-软件架构" class="headerlink" title="1. 软件架构"></a>1. 软件架构</h3><p>软件架构——在一定的设计原则基础上，从不同角度对组成系统的各部分进行搭配和安排，形成系统的多个结构而组成架构，它包括该系统的各个组件、组件的外部可见属性及组件之间的相互关系。</p><p>组件的外部可见属性是指其它组件可对该组件所做的假设，如该组件提供的服务、具备的质量特征、错误处理、共享资源的使用。</p><p>架构定义可以从下面六个方面来理解：</p><ul><li>架构应建立在一定的设计原则之上，否则很容易失败。</li><li>系统可能由多个结构组成，其中任何一个结构都不能与构架等同。</li><li>每个软件系统都有自己的构架。</li><li>软件架构决定了各个组件。</li><li>只要某个组件的行为可以从其它组件的角度观察到或区别开，这样的行为就是软件架构的内容。</li><li>软件架构是抽象的，它不考虑实现、算法和数据表示的细节，而集中研究“黑盒”组件的行为和交互，是设计第一步。</li></ul><h3 id="2-软件架构商业周期（用画图形式表示）？"><a href="#2-软件架构商业周期（用画图形式表示）？" class="headerlink" title="2. 软件架构商业周期（用画图形式表示）？"></a>2. 软件架构商业周期（用画图形式表示）？</h3><p><img src="https://i.imgur.com/HaidJFv.png"></p><p>该商业周期的运作：</p><ul><li>软件架构<strong>影响开发组织的内部结构和经营目标</strong></li><li>构架<strong>影响开发组织的目标</strong></li><li>软件架构可能会<strong>影响客户对下个系统的需求</strong></li><li>软件架构的过程丰富了整个开发团队的经验，从而<strong>影响设计师对后继系统的设计</strong></li><li>有些系统甚至会<strong>影响并实际改变软件工程的发展，以及开发人员学习和实践的技术环境</strong></li></ul><h2 id="三、对错题"><a href="#三、对错题" class="headerlink" title="三、对错题"></a>三、对错题</h2><p>1. 软件架构可以由几名设计师共同完成。（错）<br>2. 设计师对系统的质量属性应平等看待，在系统设计中全部予以解决。（错）<br>3. 架构的文档应该完备，并使所有风险承担者都能看懂。（对）<br>4. 构架通常可以依靠某一特定产品或工具。（对）<br>5. 应将产生数据的模块和使用数据的模块分离开。（对）</p><h2 id="四、简答题"><a href="#四、简答题" class="headerlink" title="四、简答题"></a>四、简答题</h2><h3 id="1-为什么要分析软件架构？"><a href="#1-为什么要分析软件架构？" class="headerlink" title="1. 为什么要分析软件架构？"></a>1. 为什么要分析软件架构？</h3><p>思想有多远，我们就能走多远。<br>高度决定思路，思路决定出路。</p><p>系统的建立是为了满足组织的需求（包括功能和质量），质量需求决定了系统必须达到的特征，包括性能、可靠性、互操作性以及生命周期等。随着软件系统的日益复杂，涉众对软件的要求已不局限于功能上的满足，而是更加注重质量。</p><p>很少有人注意到组织（开发组织、客户等）在系统设计和系统成败上扮演的角色。</p><p>系统的质量特征受到软件架构的限制，或者说构架设计的选择受到要达到的质量特征的影响。</p><h3 id="2-请说明模块结构和使用结构之间的联系和区别。"><a href="#2-请说明模块结构和使用结构之间的联系和区别。" class="headerlink" title="2. 请说明模块结构和使用结构之间的联系和区别。"></a>2. 请说明模块结构和使用结构之间的联系和区别。</h3><ul><li><p>模块结构——体现了任务的划分，每个模块都有其接口描述、代码和测试计划等，各模块通过父子关系联系起来，在开发和维护阶段用于分配任务和资源。模块结构是从静态的角度来分析的。</p></li><li><p>使用结构——描述过程或模块之间的联系，这种联系是“假设正确存在”的关系，用于设计可轻松扩展的系统。如果过程 A 的运行必须以过程 B 的正确运行为前提，则说过程 A 使用过程 B</p></li></ul><p>然后根据这个定义再分析分析就成。</p><h2 id="五、构架分析与设计"><a href="#五、构架分析与设计" class="headerlink" title="五、构架分析与设计"></a>五、构架分析与设计</h2><p>针对一个网上购物系统或学生选课系统，请完成下面 4 个问题：</p><blockquote><p>1. 说明系统的若干质量属性，并以场景图的形式分别描述一个可用性场景和一个安全性场景。<br>2. 使用 ADD 方法说明系统的初步设计。<br>3. 描述 ATAM 方法的九个步骤。<br>4. 选取两个质量属性以表格形式生成质量属性效用树。</p></blockquote><p>1. 质量属性有以下几种</p><ul><li>运行时可见属性<ul><li>可用性</li><li>性能</li><li>安全性</li><li>易用性</li></ul></li><li>维护时可见属性<ul><li>可修改性</li><li>可扩展性</li><li>可移植性</li><li>可集成性</li></ul></li></ul><p><img src="https://i.imgur.com/IJkLQbq.png"></p><p>2. ADD 方法，</p><p>属性驱动的设计（Attribute Driven Design, ADD）把一组质量属性场景作为输入，利用对质量属性实现与构架设计之间的关系的了解，对构架进行设计。</p><p>ADD 构架设计的步骤如下：</p><ol><li>样本输入。</li><li>选择要分解的模块。</li><li>根据下列步骤对模块进行求精：<br> a. 从具体的质量场景和功能需求集合中选择构架驱动因素。<br> b. 选择满足构架驱动因素的构架模式。<br> c. 实例化模块并根据用例分配功能，使用多个视图进行表示。<br> d. 定义子模块的接口。<br> e. 验证用例和质量场景并对其进行求精，使它们成为子模块的限制。</li><li>对需要进一步分解的每个模块重复上述步骤。</li></ol><p>对于本题，根据定义给出相关分析即可。</p><p>3. 九个步骤如下：</p><p>ATAM(Architecture Tradeoff Analysis Method)——构架权衡分析法。</p><ul><li>1. ATAM 方法的表述</li><li>2. 商业动机的表述</li><li>3. 构架的表述</li><li>4. 对构架方法进行分类</li><li>5. 生成质量属性效用树</li><li>6. 分析架构方法</li><li>7. 集体讨论并确定场景优先级</li><li>8. 再次分析构架方法</li><li>9. 结构的表述</li></ul><p>4. 所谓质量属性效用树，</p><ul><li>效用树的作用是使质量属性需求具体化，从而迫使设计师和客户代表准确地定义出他们的质量需求。</li><li>“效用”是效用树的根节点，表示系统的总体适宜性。</li><li>中间结点是质量属性及其求精。</li><li>叶结点是与质量属性对应的场景。</li></ul><p><img src="https://i.imgur.com/1vj6WZD.png"></p><h1 id="针对-2015-年的卷子补充知识点"><a href="#针对-2015-年的卷子补充知识点" class="headerlink" title="针对 2015 年的卷子补充知识点"></a>针对 2015 年的卷子补充知识点</h1><h2 id="填空题"><a href="#填空题" class="headerlink" title="填空题"></a>填空题</h2><h3 id="何为涉众？"><a href="#何为涉众？" class="headerlink" title="何为涉众？"></a>何为涉众？</h3><p>涉众就是对系统构建感兴趣的人或组织。</p><p>如：客户、最终用户、开发人员、项目经理、维护人员、对系统进行市场营销活动的人。</p><h3 id="安全性的战术有哪些？"><a href="#安全性的战术有哪些？" class="headerlink" title="安全性的战术有哪些？"></a>安全性的战术有哪些？</h3><ul><li>1、<strong>抵抗攻击</strong><ul><li>对用户进行身份验证</li><li>对用户进行授权</li><li>维护数据的机密性</li><li>维护完整性</li><li>限制暴露的信息</li><li>限制访问</li><li>在外部用户和提供服务的系统之间设置认证服务器</li><li>把要保护的系统置于通讯防火墙之后</li><li>在某个可信内核的基础上构建内核，由该内核提供安全</li></ul></li><li>2、<strong>检测攻击</strong><ul><li>误用情况的检测是把通信模式与已知攻击的历史模式进行比较</li><li>异常情况的检测是把通信模式与其本身的历史基线（情况）进行比较</li></ul></li><li>3、<strong>从攻击中恢复</strong><ul><li>恢复状态</li><li>识别攻击者</li></ul></li></ul><h3 id="构架编档的基本原则是什么？"><a href="#构架编档的基本原则是什么？" class="headerlink" title="构架编档的基本原则是什么？"></a>构架编档的基本原则是什么？</h3><p>构架文档写作的基本原则是：从读者的角度出发。</p><h3 id="软件系统的质量属性是指？"><a href="#软件系统的质量属性是指？" class="headerlink" title="软件系统的质量属性是指？"></a>软件系统的质量属性是指？</h3><p>软件系统的质量属性是指系统在整个生命周期中所具有的特征。</p><h3 id="构架本身的质量属性包括？"><a href="#构架本身的质量属性包括？" class="headerlink" title="构架本身的质量属性包括？"></a>构架本身的质量属性包括？</h3><ul><li>一致性（概念完整性）</li><li>正确性和完整性</li><li>可构建性</li></ul><h2 id="对错题"><a href="#对错题" class="headerlink" title="对错题"></a>对错题</h2><blockquote><p>软件构架可以由几名设计师共同完成，每位设计师都可以决策。（）<br>设计师对系统的质量属性应平等看待，在系统设计中全部予以解决。（）<br>构架的文档应该完备，并使所有风险承担者都能看懂。（）<br>构架的设计应有助于增量式实现。（）<br>架构就是系统的总体结构。（）  </p></blockquote><blockquote><p>架构设计应尽量采用已知的设计模式。（）</p></blockquote><h2 id="简答题"><a href="#简答题" class="headerlink" title="简答题"></a>简答题</h2><h3 id="请说明构架、框架和设计模式之间的联系和区别。"><a href="#请说明构架、框架和设计模式之间的联系和区别。" class="headerlink" title="请说明构架、框架和设计模式之间的联系和区别。"></a>请说明构架、框架和设计模式之间的联系和区别。</h3><ul><li>定义：软件框架使提取特定领域软件的共性部分形成的体系结构，不同领域的软件项目有着不同的框架类型</li><li>作用：开发过程中代码不需要从头编写，提高软件的质量，降低成本，缩短开发时间，形成良性循环</li></ul><p>1、框架和平台的关系：</p><ul><li>平台在应用层面主要指提供特定服务的系统软件</li><li>框架更侧重设计和开发过程，框架可通过调用平台提供的服务而起作用</li></ul><p>2、框架和类库的关系：</p><ul><li>框架构成了通用的、具有一般性的系统主体部分</li><li>二次开发人员根据具体业务，完成特定应用系统中与众不同的特殊部分</li></ul><p>3、框架和架构的关系：</p><ul><li>构架确定了系统整体结构、层次划分、不同部分之间的协作等设计考虑</li><li>框架更偏重于技术，确定框架后，其所对应的架构也随之确定，但在一个系统架构中可以集成多种框架</li></ul><p>4、框架和设计模式的关系：</p><ul><li>设计模式研究的是一个设计问题的解决方法，一个模式可应用于不同的框架和被不同的语言所实现</li><li>框架则是一个应用的体系结构，是一种或多种设计模式和代码的混合体</li></ul><p>共性：共同致力于使人们的设计可以被重用（设计模式的思想可以在框架设计中进行应用）</p><p>区别：</p><ul><li>从应用领域上分，框架给出的使整个应用的体系结构，而设计模式则给出了单一设计问题的解决方案</li><li>从内容上分，设计模式仅是一个单纯的设计；而框架则是设计和代码的一个混合体</li><li>设计模式比框架更容易移植</li></ul><h3 id="请说明架构师的主要职责，架构师与项目经理的职责区别。"><a href="#请说明架构师的主要职责，架构师与项目经理的职责区别。" class="headerlink" title="请说明架构师的主要职责，架构师与项目经理的职责区别。"></a>请说明架构师的主要职责，架构师与项目经理的职责区别。</h3><p>架构师的职责如下：</p><ul><li>了解所在组织的业务目标，使架构更好地支持业务目标</li><li>规划产品的开发与演进</li><li>规划和建设架构级的重用，如产品线等</li><li>领导并负责架构设计，定义系统的高层结构和接口</li><li>为项目管理提供支持，如技术可行性、任务划分、人员招聘</li><li>领导和协调项目组的主要技术活动，对主要技术产品负责实际参与架构原型的开发实现</li><li>讲解架构、指导详细设计和开发、协调冲突以实现既定的构架目标</li><li>规划和协助软件架构的评审</li><li>评估新技术并提出采用建议</li></ul><p>项目经理的职责如下：</p><ul><li>具有过程控制能力</li><li>具备文档能力</li><li>总结汇报</li><li>擅长分解任务</li><li>具有时间观念</li><li>具有计划能力</li><li>具有跨界思维</li><li>有亲和力</li><li>组织协调</li></ul><p>然后根据他们的职责分析它们的区别即可。</p><h3 id="请说明架构评审的主要方法。"><a href="#请说明架构评审的主要方法。" class="headerlink" title="请说明架构评审的主要方法。"></a>请说明架构评审的主要方法。</h3><p>评审的一般技巧有：</p><p>1、定性分析</p><p>是指凭分析者的直觉、经验，凭分析对象过去和现在的延续状况及最新的信息资料，对分析对象的性质、特点、发展变化规律作出判断的一种方法。</p><p>定性技巧——提问技巧：</p><ul><li>场景——描述风险承担者和系统之间的具体交互</li><li>评审清单——对同一领域的若干系统进行评估后提出的一组详细的问题</li><li>问卷——适用于所有构架的若干问题的清单</li></ul><p>2、定量分析</p><p>是依据实际统计数据，建立数学模型，并用数学模型计算出分析对象的各项指标及其数值的一种方法。</p><p>定量技巧：</p><ul><li>指标——对构架可观察到的参数的量化解释</li><li>模拟、原型与实验</li></ul><h3 id="请说明以架构为中心的软件过程。"><a href="#请说明以架构为中心的软件过程。" class="headerlink" title="请说明以架构为中心的软件过程。"></a>请说明以架构为中心的软件过程。</h3><p>暂时按下不表。</p><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><p><img src="https://i.imgur.com/0YF8pzz.png"></p>]]></content>
    
    
    <categories>
      
      <category>考试</category>
      
    </categories>
    
    
    <tags>
      
      <tag>考试</tag>
      
      <tag>软件体系结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理实验手记</title>
    <link href="/2021/11/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%89%8B%E8%AE%B0/"/>
    <url>/2021/11/09/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E5%AE%9E%E9%AA%8C%E6%89%8B%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="知识点"><a href="#知识点" class="headerlink" title="知识点"></a>知识点</h1><blockquote><p>如何理解 <code>bison -d</code> 的 <code>-d</code> 选项？</p></blockquote><p>可以在英文版 <em>flex and bison</em> 中的 P13 找到如下解释：</p><blockquote><p>First it runs bison with the -d (for “definitions” file) flag, which creates fb1-5.tab.c and fb1-5.tab.h, and it runs flex to create lex.yy.c.</p></blockquote><blockquote><p><code>%option</code> 怎么用？</p></blockquote><p><em>flex and bison</em> 中解释：</p><blockquote><p>If you set %option yylineno, flex defines yylineno to contain the current line number and automatically updates it each time it reads a \n character.</p></blockquote><blockquote><p>C 语言 <code>atoi()</code> 的作用？</p></blockquote><p>将字符串转换为 int。</p><blockquote><p>如何理解 <code>yytext</code>？</p></blockquote><p>见 <em>flex and bison</em>:</p><blockquote><p>In any flex action, the variable yytext is set to point to the input text that the pattern just matched.</p></blockquote><blockquote><p>如何理解 C 语言 <code>strcpy()</code> 函数？</p></blockquote><p>头文件：<code>#include &lt;string.h&gt;</code></p><p>定义函数：<code>char *strcpy(char *dest, const char *src);</code></p><p>函数说明：<code>strcpy()</code> 会将参数 <code>src</code> 字符串拷贝至参数 <code>dest</code> 所指的地址。</p><p>返回值：返回参数 <code>dest</code> 的字符串起始地址。</p><blockquote><p>如何理解 <code>yywrap()</code>？</p></blockquote><blockquote><p>When a lex scanner reached the end of yyin, it called yywrap(). The idea was that if there was another input file, yywrap could adjust yyin and return 0 to resume scanning. If that was really the end of the input, it returned 1 to the scanner to say that it was done.</p></blockquote><blockquote><p>如何解决 <code>parser.y:1.1-14: warning: deprecated directive: ‘%error-verbose’, use ‘%define parse.error verbose’ [-Wdeprecated]</code>？</p></blockquote><p>使用 <code>%define &quot;parse.error&quot; &quot;verbose&quot;</code> 代替原来的 <code>%define parse.error verbose</code>。</p><p>具体参考：<a href="https://stackoverflow.com/questions/50221650/bison-syntax-error-mac">StackOverflow</a></p><h1 id="Bugs-记录"><a href="#Bugs-记录" class="headerlink" title="Bugs 记录"></a>Bugs 记录</h1><h2 id="问题一"><a href="#问题一" class="headerlink" title="问题一"></a>问题一</h2><p>问题描述：</p><pre><code class="hljs">error: invalid initializer</code></pre><p><img src="https://i.imgur.com/J5OSvMr.png"></p><p><img src="https://i.imgur.com/sSXoVXw.png"></p><p>解决办法，</p><p>将</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">va_list pArgs = <span class="hljs-literal">NULL</span>;<br></code></pre></td></tr></table></figure><p>改成</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c">va_list pArgs;<br></code></pre></td></tr></table></figure><p>这个属于库函数的用法，需要查阅相关文档。</p><h2 id="问题二"><a href="#问题二" class="headerlink" title="问题二"></a>问题二</h2><p>这个问题属于重复定义问题。</p><p><img src="https://i.imgur.com/UD5l0WZ.png"></p><p><img src="https://i.imgur.com/ZWxj3pK.png"></p><p>解决方法：</p><p>在相应头文件中将所有重复定义的变量声明成外部变量。</p><p>如：</p><p>将</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-type">int</span> LEV;<br></code></pre></td></tr></table></figure><p>改成</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">extern</span> <span class="hljs-type">int</span> LEV;<br></code></pre></td></tr></table></figure><p>再如：</p><p>将</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">symboltable</span>&#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">symbol</span> <span class="hljs-title">symbols</span>[<span class="hljs-title">MAXLENGTH</span>];</span><br>    <span class="hljs-type">int</span> index;<br>&#125; symbolTable;<br></code></pre></td></tr></table></figure><p>改成</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">symboltable</span>&#123;</span><br>    <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">symbol</span> <span class="hljs-title">symbols</span>[<span class="hljs-title">MAXLENGTH</span>];</span><br>    <span class="hljs-type">int</span> index;<br>&#125;;<br><br><span class="hljs-keyword">extern</span> <span class="hljs-class"><span class="hljs-keyword">struct</span> <span class="hljs-title">symboltable</span> <span class="hljs-title">symbolTable</span>;</span><br></code></pre></td></tr></table></figure><p>将这两个问题解决后，发现可以正常编译，且编译出来的可执行文件可以正常运行：</p><p><img src="https://i.imgur.com/f3ugW1m.png"></p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数字图像处理考试复习</title>
    <link href="/2021/11/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/"/>
    <url>/2021/11/08/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E8%80%83%E8%AF%95%E5%A4%8D%E4%B9%A0/</url>
    
    <content type="html"><![CDATA[<h1 id="一图像处理的基本概念与术语">一、图像处理的基本概念与术语</h1><blockquote><p>1. 数字图像？数字图像处理？</p></blockquote><p>图像是一个二维亮度函数 <span class="math inline">\(f(x,y)\)</span>。其中，<span class="math inline">\((x, y)\)</span>定义了空间坐标，<span class="math inline">\(f(x, y)\)</span>定义了该点的亮度或灰度。</p><p>数字图像处理是指图像的元素的空间坐标和亮度的数字化。数字图像是由有限的元素组成的，每一个元素都有一个特定的位置和幅值，这些元素称为图像元素或像素。</p><p>数字图像处理是指借用数字计算机处理数字图像。</p><blockquote><p>2. 亮度函数？入射分量？反射分量？</p></blockquote><p>亮度函数：</p><ul><li>二维离散亮度函数 <span class="math inline">\(f(x, y)\)</span></li><li><span class="math inline">\(x, y\)</span>说明图像像素的空间坐标</li><li>函数值 <span class="math inline">\(f\)</span> 代表了点 <spanclass="math inline">\((x, y)\)</span> 处像素的灰度值</li></ul><p>入射分量和反射分量：</p><ul><li>函数 <span class="math inline">\(f(x, y)\)</span> 的两个分量表征：<ul><li>(1). 入射到被观察场景的光源照射量</li><li>(2). 被场景中物体反射的照射量<br />它们称为入射分量和反射分量，并用 <span class="math inline">\(i(x,y)\)</span> 和 <span class="math inline">\(r(x, y)\)</span>表示。这两个函数乘积形成 <span class="math inline">\(f(x,y)\)</span>，即 <span class="math inline">\(f(x, y) = i(x, y)r(x,y)\)</span>，式中 <span class="math inline">\(0 \leqslant i(x, y)\leqslant \infty\)</span>，<span class="math inline">\(0 \leqslant r(x,y) \leqslant 1\)</span>，反射分量限制在 0（全吸收）和1（全反射）之间。</li></ul></li></ul><p>按：</p><p>入射和反射的英文分别为：incident(incidence), reflect。</p><blockquote><p>3. 图像分辨率？采样分辨率？灰度分辨率？图像深度？</p></blockquote><p>图像分辨率：</p><p>图像分辨率指图像中存储的信息量，是每英寸图像内有多少个像素点，分辨率的单位为PPI（Pixels Per Inch），通常叫做像素每英寸。</p><p>采样分辨率：</p><p>单位长度上所包含的采样数。</p><p>灰度分辨率：</p><p>在灰度级中可分辨的最小变化，不像空间分辨率必须以每单位距离作为量化基础，灰度分辨率指的是用于量化灰度的比特数。</p><p>按：何为最小变化。</p><p>图像深度：</p><p>是指存储每个像素所用的位数。它确定了彩色图像的每个像素可能有的颜色数，或者确定了灰度图像的每个像素可能有的灰度级数。</p><blockquote><p>4. 色彩的基本属性？RGB HSI(HSV, HSB, HSL)？</p></blockquote><p>色彩的基本属性：</p><ul><li>色相（H）：即颜色名称，如红色、黄色等，取值范围为 <spanclass="math inline">\([0, 360)\)</span></li><li>饱和度（S）：色彩的纯度，越高色彩越纯，低则逐渐变灰，取值范围为<span class="math inline">\([0, 100\%]\)</span></li><li>明度（V），亮度（L）：像素灰度值的强度，亮度越高则图像越发白，否则图像越黑，取值范围<span class="math inline">\([0, 100\%]\)</span></li></ul><p>RGB：</p><p>基于笛卡尔坐标系，三原色位于三个角度上（其实就是三个维度）。在 RGB空间中，表示像素的比特数称为像素深度。考虑一幅 RGB图像，其中每幅红绿蓝图像都是 8 比特图像，所以每个 RGB 像素有 24比特。</p><p>HSI：</p><p>即色调（hue）、饱和度（saturation）、密度（intensity，对应图像亮度）。</p><p>I 分量与图像的色彩信息无关。</p><p>H 和 S 分量与人感受颜色的方式紧密相连（合成亮度）。</p><p>HSI表示色调、饱和度、亮度混合的模型，该模型符合人描述和解释颜色的方式。其中，</p><ul><li>色调是光波混合中与主波长有关的属性，表示观察者主要感知的颜色，比如某一物体的颜色为红色、蓝色；</li><li>饱和度指的是相对纯净度，或者说一种颜色混合白光的数量，纯谱色全饱和的，如纯红色、纯蓝色是饱和的，而深红色（红加白）和淡紫色（紫加白）是欠饱和的，饱和度与所加白光成反比；</li><li>亮度指的是发光的强度。</li></ul><blockquote><p>5.动态范围？灰度级？</p></blockquote><p>动态范围：</p><p>统计一下每一点的像素灰度值，灰度级的最小和最大这一范围，便是该图像的动态范围。动态范围越大（灰度直方图越宽），那它的对比度就会越高，当然看着越清楚。</p><p>灰度级：</p><p>一幅灰度图像它的像素的强度值的取值范围表示为 <spanclass="math inline">\([0, L - 1]\)</span>,其中。如 8位色的灰度级，由于是 2 进制，灰度有 256个等级，从黑（0）到白（255）。</p><blockquote><p>6. 直方图？累积直方图？连续图像幅度的密度函数？幅度分布函数？</p></blockquote><p>直方图：</p><p>一个灰度级在范围 <span class="math inline">\([0, L - 1]\)</span>的数字图像的直方图是一个离散函数</p><p><span class="math display">\[p(r_k)= \frac{n_k}{n}\]</span></p><p>其中，<span class="math inline">\(n\)</span> 是图像的像素总数，<spanclass="math inline">\(n_k\)</span> 是图像中灰度级为 <spanclass="math inline">\(r_k\)</span> 的像素个数，<spanclass="math inline">\(r_k\)</span> 是第 <spanclass="math inline">\(k\)</span> 个灰度级，<span class="math inline">\(k= 0,1,2, \cdots , L-1\)</span>。</p><p>累积直方图：</p><p>累积直方图反映了图像中灰度级小于或等于某值的像素的个数。灰度累积直方图是一个一维离散函数，可表示为</p><p><span class="math display">\[H(k)= \sum_{i=0}^{k}ni, \;k=0,1,2..,L−1\]</span></p><p>式中，<span class="math inline">\(k\)</span> 为某个灰度级；<spanclass="math inline">\(L\)</span> 为灰度级的数量，最大取 256；<spanclass="math inline">\(ni\)</span> 为具有第 <spanclass="math inline">\(i\)</span> 级灰度值的像素的数目。</p><p>连续图像幅度的密度函数，幅度分布函数：</p><blockquote><p>7. 点运算？代数运算？几何运算？</p></blockquote><p>点运算：</p><p>即灰度级变换，定义为</p><ul><li>像素灰度值变换函数 <span class="math inline">\(g(x, y) = T(f(x,y))\)</span></li><li>灰度值变换函数 <span class="math inline">\(R = T(r)\)</span></li><li>点运算有哪些：<ul><li>线性变换</li><li>对数变换：灰度压缩</li><li>幂次变换：根据情况使图像变亮或变暗</li><li>LUT（Look Up Table）变换</li></ul></li></ul><p>代数运算：</p><ul><li>加、减、乘、除</li><li>异或、或、与</li></ul><p>几何运算：</p><p>对于原图像 <span class="math inline">\(f(x,y)\)</span>，坐标变换函数</p><p><span class="math display">\[x^{&#39;} = T_1(x, y); \; y^{&#39;} = T_2(x, y)\]</span></p><p>唯一确定了几何变换：</p><p><span class="math display">\[g(x^{&#39;}, y^{&#39;}) = f(T_1(x, y), T_2(x, y))\]</span></p><p><span class="math inline">\(g(x, y)\)</span> 是目标图像。</p><p>常用的几何变换如下，</p><ul><li>平移变换</li><li>镜像变换</li><li>旋转变换</li><li>放缩变换</li><li>拉伸变换</li></ul><blockquote><p>8. 双线性插值？最邻近插值？线性插值？</p></blockquote><p>双线性插值：</p><p>通过 4 个邻近点去估计给定位置的灰度值，赋值公式为</p><p>$$</p><p>f(x, y) = ax + by + cxy + d $$</p><p>最邻近插值：</p><p>令输出像素的灰度值等于离它所映射到的位置最近的输入像素的灰度值。</p><p>线性插值：</p><p>通过在同一直线的 2 个点去估计给定点的灰度值。</p><blockquote><p>9. 线性系统？移不变系统？线性移不变系统？</p></blockquote><p>线性系统：</p><p>先看两个原理，</p><ul><li>叠加原理：如果输入信号是两个序列之和，则输出信号也为两个对应的输出信号之和。即，若<span class="math inline">\(y_1 = T[x_1]\)</span>，<spanclass="math inline">\(y_2 = T[x_2]\)</span>，则有 <spanclass="math inline">\(y_1 + y_2 = T[x_1] + T[x_2]\)</span> <spanclass="math inline">\(=\)</span> <span class="math inline">\(T[x_1 +x_2]\)</span>；</li><li>齐次原理：</li></ul><p>所谓线性系统，即对所有的输入信号 <span class="math inline">\(x_1,x_2\)</span> 以及所有复常数 <span class="math inline">\(a,b\)</span>，皆有</p><p><span class="math display">\[ay_1 + by_2 = T[ax_1 + bx_2]\]</span></p><p>线性系统对于输入信号的加权和的响应等于单个输入信号响应的加权和。</p><p>移不变系统：</p><p>所谓移不变系统，是指如果输入序列进行移位，则输出序列进行相应的移位。</p><p>线性移不变系统：</p><p>线性系统、移不变系统是系统的两个独立的特性。我们将具有移不变系统的线性系统称为线性移不变系统。</p><blockquote><p>10. 卷积？</p></blockquote><blockquote><p>11. 图像幅值信息量？信息熵？</p></blockquote><p>图像幅值信息量：</p><p>表征一幅图像含有的信息量有多少。</p><p>信息熵：</p><p>表示图像在被接收之前，信号传输过程中损失的信息量。</p><blockquote><p>12. 积分变换？</p></blockquote><blockquote><p>13. 傅立叶变换对？傅立叶振幅谱？傅立叶相位谱？傅立叶能量谱？</p></blockquote><blockquote><p>14. 图像增强技术？图像复原技术？</p></blockquote><p>图像增强技术：</p><p>图像增强是指按照特定的需要突然感兴趣的信息，同时削弱或去除不感兴趣的信息.处理的结果并不能增加图像的信息，而只能增强对某些信息辨识能力，并且这种处理有可能损失一些其他信息。</p><p>除去图象中的噪声，使边缘清晰，突出图象中的某些性质等。</p><p>图像复原技术：</p><p>图像复原则认为图像在某种情况下退化或恶化了，使得图像品质出现下降，现在需要根据相应的退化模型和知识重建或恢复原始的图像。因此，图像复原的目标是原始的反应真实物体或场景的图像，这是客观存在的，不以主观意志为转移。图像复原通过概率估计或先验知识千方百计地去还原图像的本来面貌。</p><blockquote><p>15. 直方图均衡化？直方图规定化？</p></blockquote><blockquote><p>16. 图像平滑？图像锐化？</p></blockquote><p>图像平滑：</p><p>图像平滑是一种区域增强的算法，平滑算法有邻域平均法、中指滤波、边界保持类滤波等。在图像产生、传输和复制过程中，常常会因为多方面原因而被噪声干扰或出现数据丢失，降低了图像的质量（某一像素，如果它与周围像素点相比有明显的不同，则该点被噪声所感染）。这就需要对图像进行一定的增强处理以减小这些缺陷带来的影响。</p><p>图像锐化：</p><p>图像锐化(imagesharpening)是补偿图像的轮廓，增强图像的边缘及灰度跳变的部分，使图像变得清晰。</p><blockquote><p>17. 空域增强（滤波）？ 频域增强（滤波）？同态增强（滤波）？</p></blockquote><p>空域增强（滤波）：</p><ul><li>空域：指由像素组成的空间</li><li>直接对图像空间中的像素灰度进行处理</li></ul><p>频域增强（滤波）：</p><p>对图像经傅里叶变换后的频谱成分进行操作，然后经傅里叶逆变换获得所需结果。</p><p>同态增强（滤波）：</p><ul><li>同态滤波，作用在频率域中，其作用是对图像灰度范围进行调整，通过消除图像上照明不均匀的问题，增强图像的细节，同时不损失亮区的图像细节。</li><li>能够压缩图像亮度范围、增强图像对比度。</li></ul><blockquote><p>18. 伪彩色？</p></blockquote><p>同灰度图像一样,也是单波段的图像，但是这个单波段图像是有颜色的，不再是灰度图那样的，而是它的每一个灰度值都对应颜色空间中的某一种颜色。</p><h1id="二典型图像处理的基本过程及相关硬件设备">二、典型图像处理的基本过程及相关硬件设备</h1><h1 id="三数字图像处理的主要内容">三、数字图像处理的主要内容</h1><h1id="四数字图像处理所涉及的主要数学工具">四、数字图像处理所涉及的主要数学工具</h1><blockquote><p>1. 直方图 幅度密度函数 概率分布</p></blockquote><blockquote><p>2. 线性移不变系统 卷积</p></blockquote><p>卷积：</p><p><span class="math display">\[\int_{- \infty}^{+\infty} h(t - \iota) f(\iota) {\rm d}\iota\]</span></p><blockquote><p>3. 积分变换（傅立叶变换等）</p></blockquote><h1 id="五图像增强的基本方法">五、图像增强的基本方法</h1><blockquote><p>1. 直方图增强（均衡，规定）</p></blockquote><blockquote><p>2. 平滑：均值滤波 中值滤波 低通滤波 多图像平均法 自适应中值滤波自适应局部降噪滤波器 修正 alpha 均值滤波器</p></blockquote><blockquote><p>3. 锐化：微分锐化（Roberts，Priwitt，Sobel，高斯等） 高通锐化</p></blockquote><h2 id="privitt">Privitt</h2><p><img src="https://i.imgur.com/v66R9PQ.png" /></p><p><img src="" /></p><blockquote><p>4. 同态滤波</p></blockquote><h1 id="六图像恢复">六、图像恢复</h1><blockquote><p>1. 图像退化的基本数学模型及复原中的主要问题。</p></blockquote><blockquote><p>2. 运动模糊图像复原方法。</p></blockquote><h1 id="七形态学图像处理">七、形态学图像处理</h1><blockquote><p>膨胀、腐蚀、闭操作、开操作、填充、边缘提取、击中或击不中</p></blockquote><h2 id="膨胀">膨胀</h2><p><span class="math display">\[A \oplus B = {\{ z | (\mathop{\hat{B}}\limits)_z \cap A \neq \varnothing\}}\]</span></p><p>或</p><p><span class="math display">\[A \oplus B = { \{z | ( \mathop {\hat{B}} \limits  )_ z \cap A ⊆ A \}}\]</span></p><p>其中，<span class="math inline">\(A\)</span> 和 <spanclass="math inline">\(B\)</span> 是 <spanclass="math inline">\(Z^2\)</span> 中的集合。</p><h2 id="腐蚀">腐蚀</h2><p><span class="math inline">\(A\)</span> 被 <spanclass="math inline">\(B\)</span> 腐蚀：</p><p><span class="math display">\[A \ominus B = { \{z | ( B )_z \subseteq A \}}\]</span></p><p>或</p><p><span class="math display">\[A \ominus B = { \{z | ( B )_z \cap A^c = \varnothing \}}\]</span></p><h2 id="开操作">开操作</h2><p>也叫开运算。</p><p><span class="math display">\[A \circ B = (A \ominus B) \oplus B\]</span></p><p>也就是先腐蚀，然后膨胀。</p><h2 id="闭操作">闭操作</h2><p>也叫闭运算</p><p><span class="math display">\[A \bullet B = (A \oplus B) \ominus  B\]</span></p><p>即先膨胀，后腐蚀。</p><h2 id="填充">填充</h2><p><span class="math display">\[X_k = (X_{k - 1} \oplus B) \cap A^c \qquad k = 1,2,3,\cdots\]</span></p><p>填充过程实际上就是从边界上某一点 <spanclass="math inline">\(P\)</span>开始做以下迭代运算，用结构元素对其进行膨胀、求补和求交集的过程。</p><h2 id="边缘提取">边缘提取</h2><p>提取物体的轮廓边缘的形态学变换：</p><p><span class="math display">\[Y = X - (X \ominus B)\]</span></p><h2 id="击中和击不中">击中和击不中</h2><p><span class="math display">\[A \otimes B=(A \ominus X) \cap [A^c \ominus (W−X)]=(A \ominus B_1) \cap[A^c \ominus B_2]=(A \cap B_1)−[A^c \oplus {\mathop {\hat{B}}\limits}_z]\]</span></p><h1 id="八图像分割">八、图像分割</h1><blockquote><p>1. 点检测与线检测     Hough 变换与直线检测</p></blockquote><p>不考。</p><blockquote><p>2. 边缘检测：梯度算子 拉普拉斯算子 高斯拉普拉斯算子</p></blockquote><h2 id="梯度算子">梯度算子</h2><p><img src="https://i.imgur.com/s4ApjT3.png" /></p><h2 id="拉普拉斯算子">拉普拉斯算子</h2><p><img src="https://i.imgur.com/ky6SwlF.png" /></p><p><img src="https://i.imgur.com/5ejHDnm.png" /></p><h2 id="sobel-算子">Sobel 算子</h2><p><img src="https://i.imgur.com/Qeag8ui.png" /></p><p>[]</p><blockquote><p>3. 门限值分割：全局门限 局部门限 自适应门限一种自动确定门限值的方法</p></blockquote><blockquote><p>4. 区域生长 区域分裂与合并</p></blockquote><blockquote><p>5. 分水岭算法</p></blockquote><h1 id="九图像表示">九、图像表示</h1><blockquote><p>1. 表示方法：链码 多边形近似 边界分段 标记图</p></blockquote><h2 id="链码">链码</h2><p>用于表示由顺次连接的具有指定长度和方向的直线段组成的边界。</p><blockquote><p>2. 边界描述方法：周成 直径 形状数 傅里叶描述子 统计矩</p></blockquote><blockquote><p>3. 区域描述方法：面积 统计纹理（均值、标准差、熵、平滑度、一致性）灰度共生矩阵</p></blockquote><hr /><p>几张图：</p><p><img src="https://i.imgur.com/u14Evrz.png" /></p><p><img src="https://i.imgur.com/EqaRowV.png" /></p><p><img src="https://i.imgur.com/XIFrIQw.png" /></p><p><img src="https://i.imgur.com/aSMT8wC.png" /></p><p><img src="https://i.imgur.com/PCwDM3P.png" /></p><p><img src="https://i.imgur.com/tTq9HRD.png" /></p><p><img src="https://i.imgur.com/Pp98im5.png" /></p><p><img src="https://i.imgur.com/ATvJkzk.png" /></p><p><img src="https://i.imgur.com/yIdcXdI.png" alt="直方图均衡化" /></p><p><img src="https://i.imgur.com/WLSdJB5.png" /></p><p><img src="https://i.imgur.com/IoV2kW6.png" alt="卷积" /></p><p><img src="https://i.imgur.com/qWCusA8.png" /></p><p><img src="https://i.imgur.com/AhhMJdA.png" alt="各种算子" /></p><p><img src="https://i.imgur.com/362U0jf.png" /></p><p><img src="https://i.imgur.com/P3mZ9gz.png" /></p>]]></content>
    
    
    <categories>
      
      <category>数字图像处理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数字图像处理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu Linux 升级 node 和 npm</title>
    <link href="/2021/11/07/Ubuntu-Linux-%E5%8D%87%E7%BA%A7-node-%E5%92%8C-npm/"/>
    <url>/2021/11/07/Ubuntu-Linux-%E5%8D%87%E7%BA%A7-node-%E5%92%8C-npm/</url>
    
    <content type="html"><![CDATA[<p>在 Ubuntu 21.10 中，使用 <code>sudo apt install node</code> 安装的 node 和 npm 的版本有点低，因为之后需要安装 Hexo，如果 node 版本过低的话，可能会报一些奇怪的错误，所以，这里就记录一下升级 node 和 npm 的过程。</p><p>按：其实只需要升级 node，因为 npm 是和 node 绑在一起的。</p><p>执行以下命令，用 npm 安装 node 工具包 <code>n</code>，使用该工具将 node 版本升级到最新版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo npm install n -g</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">sudo n stable</span><br></code></pre></td></tr></table></figure><hr><p>参考：</p><p>1、<a href="http://www.guohuawei.com/archives/upgrade-node-for-ubuntu.html">http://www.guohuawei.com/archives/upgrade-node-for-ubuntu.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Ubuntu</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Ubuntu</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Vim 使用笔记(快捷键)</title>
    <link href="/2021/11/05/Vim-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/11/05/Vim-%E4%BD%BF%E7%94%A8%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="Vim-设置相关问题"><a href="#Vim-设置相关问题" class="headerlink" title="Vim 设置相关问题"></a>Vim 设置相关问题</h1><blockquote><p>Vim 中和 IDEA 中的 Shift + Enter 快捷键相当的操作是什么？</p></blockquote><p>Esc 回到 NORMAL 模式，然后按小写的 o，这样就会在当前行下面插入一行，并且光标会来到下一行的开头，模式会自动切换到 INSERT 模式。</p><p>如果是按大写的 O，那么，就会在当前行的上一行插入新的一行，然后光标来到上一行的开头，模式自动切换到 INSERT 模式。</p><blockquote><p>如何设置 Vim 大括号自动补全并且换行对齐？</p></blockquote><p>首先，要有以下的配置：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> smartindent<br><span class="hljs-keyword">set</span> tabstop=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> <span class="hljs-built_in">shiftwidth</span>=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> expandtab<br></code></pre></td></tr></table></figure><p>按：这个配置是用来设置智能缩进的。</p><p>然后，添加映射：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">imap</span> &#123; &#123;&#125;<span class="hljs-symbol">&lt;ESC&gt;</span>i<span class="hljs-symbol">&lt;CR&gt;</span><span class="hljs-symbol">&lt;ESC&gt;</span>V&lt;O<br></code></pre></td></tr></table></figure><p>按：这个自动补全似乎不是一个好主意。之后还是被我取消掉了。</p><p>这个主要是为了写 C 语言时候用。</p><blockquote><p>如何设置 Vim 显示行号？</p></blockquote><p>添加如下配置：</p><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> <span class="hljs-keyword">number</span><br></code></pre></td></tr></table></figure><blockquote><p>Vim 有关 C 语言缩进相关的问题？</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> <span class="hljs-keyword">number</span><br><span class="hljs-keyword">set</span> tabstop=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> softtabstop=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> <span class="hljs-built_in">shiftwidth</span>=<span class="hljs-number">4</span><br><span class="hljs-keyword">set</span> autoindent<br><span class="hljs-keyword">set</span> <span class="hljs-built_in">cindent</span><br><span class="hljs-keyword">set</span> smartindent<br><span class="hljs-keyword">set</span> clipboard^=unnamed,unnamedplus<br><span class="hljs-keyword">source</span> $VIMRUNTIME/vimrc_example.<span class="hljs-keyword">vim</span><br><span class="hljs-keyword">set</span> nobackup<br><span class="hljs-keyword">set</span> noundofile<br></code></pre></td></tr></table></figure><p>对于设置的解释：</p><ul><li>tabstop&#x3D;X  # 一个 TAB 字符占 X 个空格，C&#x2F;C++、python 都建议设置为 4，下同</li><li>softtabstop&#x3D;X  # 前面有 X 个空格时，再按下一次 tab，这 X 个空格就会和上一个 X 个空格组合成一个制表符，也就是方便退格</li><li>shiftwidth&#x3D;X  # 每行缩进 X 个空格</li><li>autoindent  # 自动缩进</li><li>cindent  # C 语言风格的缩进</li><li>smartindent  # 智能缩进，每行都和前一行的缩进量相同，还能识别花括号，遇到 <code>&#123;</code> 则取消缩进。</li><li>expandtab  # expandtab 是把输入的tab转换成空格</li></ul><blockquote><p>设置字符编码相关？</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> fileencoding=utf-<span class="hljs-number">8</span><br><span class="hljs-keyword">set</span> encoding=utf-<span class="hljs-number">8</span><br><span class="hljs-keyword">set</span> termencoding=utf-<span class="hljs-number">8</span><br></code></pre></td></tr></table></figure><blockquote><p>Windows 的 Vim 使其不要创建多余的文件？消除 <code>~</code> 和 <code>.un~</code> 后缀文件生成的操作？</p></blockquote><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs vim"><span class="hljs-keyword">set</span> nobackup<br><span class="hljs-keyword">set</span> noundofile<br></code></pre></td></tr></table></figure><h1 id="Vim-快捷键相关问题"><a href="#Vim-快捷键相关问题" class="headerlink" title="Vim 快捷键相关问题"></a>Vim 快捷键相关问题</h1><blockquote><p>基本操作？</p></blockquote><ul><li><code>ESC</code>：从当前模式转换到 NORMAL 模式；</li><li><code>i</code>：从 NORMAL 模式转到 INSERT 模式；</li><li><code>:</code>：命令行模式。Vim 希望你输入类似于保存该文档命令的地方。</li></ul><h2 id="方向键"><a href="#方向键" class="headerlink" title="方向键"></a>方向键</h2><blockquote><p>光标向左移动一个字符？</p></blockquote><p><code>h</code></p><blockquote><p>光标向下移动一行？</p></blockquote><p><code>j</code> 或 <code>Ctrl + J</code></p><blockquote><p>光标向上移动一行？</p></blockquote><p><code>k</code> 或 <code>Ctrl + P</code></p><blockquote><p>光标向右移动一个字符？</p></blockquote><p><code>l</code></p><p>按：是英文字母 <code>l</code>。</p><blockquote><p>移动光标至本行开头？</p></blockquote><p><code>0</code></p><p>按：是数字 <code>0</code>。</p><blockquote><p>移动光标到本行末尾？</p></blockquote><p><code>$</code></p><blockquote><p>移动光标至本行第一个非空字符处？</p></blockquote><p><code>^</code></p><blockquote><p>向右移动一个词？</p></blockquote><p><code>w</code></p><p>按：上一个字母和数字组成的词之后。</p><blockquote><p>向右移动一个词？</p></blockquote><p><code>W</code></p><p>按：以空格分隔的词。</p><blockquote><p>向右移动 5 个词？</p></blockquote><p><code>5w</code></p><blockquote><p>向左移动一个词？</p></blockquote><p><code>b</code></p><p>按：下一个字母和数字组成的词之后。</p><blockquote><p>向左移动一个词？</p></blockquote><p><code>B</code></p><p>按：以空格分隔的词。</p><blockquote><p>向左移动 5 个词？</p></blockquote><p><code>5b</code></p><blockquote><p>移动至文件末尾？</p></blockquote><p><code>G</code></p><blockquote><p>移动至文件开头？</p></blockquote><p><code>gg</code></p><blockquote><p>设置缓冲区使当前行居中？</p></blockquote><p>zz。</p><h2 id="删除文本"><a href="#删除文本" class="headerlink" title="删除文本"></a>删除文本</h2><blockquote><p>删除光标处字符？</p></blockquote><p><code>x</code></p><blockquote><p>删除一个词？</p></blockquote><p><code>dw</code>：从光标当前的位置开始删除，直到删除到单词的最后。</p><p><code>daw</code>：删除光标所在的一个单词。delete a word。</p><p><code>caw</code>：删除光标所在的一个单词，并且模式转成 INSERT 模式。</p><ul><li>如果该单词是在一段文字的中间部分，即，前面也有单词，后面也有单词，此时，此命令在删除单词的同时，会将此单词后面的空格连带着删除，但是不删除前面的空格。</li><li>如果该单词是最后一个单词，并且后面紧跟着半角句号，那么，此命令会连带着删除原单词前面的空格。</li><li>如果如果该单词是最后一个单词，并且后面没有标点符号，那么，此命令不会删除原单词前面的空格。</li></ul><p><code>bdw</code>：这是一个复合命令。b 可以让光标退回到单词开头的位置，而 dw 上面描述过的命令。</p><blockquote><p>删除光标前面的单词。</p></blockquote><p>在 NORMAL 模式下，键入 <code>Ctrl + W</code>。</p><p>这个和在 bash 以及 PowerShell 中删除一个单词的方法是一样的。</p><blockquote><p>删除至行首？</p></blockquote><p><code>d0</code></p><blockquote><p>删除至行末？</p></blockquote><p><code>d$</code></p><blockquote><p>删除至句末？</p></blockquote><p><code>d)</code></p><p>按：啥叫句末？</p><blockquote><p>删至文件开头？</p></blockquote><p><code>dgg</code></p><blockquote><p>删除至文件末尾？</p></blockquote><p><code>dG</code></p><blockquote><p>删除当前行？</p></blockquote><p><code>dd</code></p><blockquote><p>删除 3 行？</p></blockquote><p><code>3dd</code></p><h2 id="剪切、复制"><a href="#剪切、复制" class="headerlink" title="剪切、复制"></a>剪切、复制</h2><blockquote><p>剪切某一行？</p></blockquote><p>dd。</p><blockquote><p>如何全选复制？</p></blockquote><p>按 ESC 键后，先按 <code>gg</code>，然后按 <code>yG</code>。</p><p>按：<code>gg</code> 是让光标回到文件开头，<code>yG</code> 是从当前行复制到文件结尾。</p><blockquote><p>复制一个单词？</p></blockquote><p><code>yaw</code>：复制光标所在处的单词。</p><p><code>yw</code>：和 <code>dw</code> 类似，只是，这个是复制。从光标所在处复制，直到复制到单词的最后。</p><p>更多见：<a href="https://fanlumaster.github.io/2021/11/26/vim-%E7%9A%84%E5%A4%8D%E5%88%B6%E7%B2%98%E8%B4%B4/">vim 的复制粘贴</a>。</p><h2 id="翻页"><a href="#翻页" class="headerlink" title="翻页"></a>翻页</h2><blockquote><p>翻到下一页？</p></blockquote><p>在 vim 中翻页，同样可以使用 PageUp 和 PageDown，不过，这会使手指移出主键盘区。</p><p>所以，可以使用 <code>Ctrl + B</code> 和 <code>Ctrl + F</code> 来进行翻页，它们的功能等同于 PageUp 和 PageDown。</p><p><code>Ctrl + B</code> 和 <code>Ctrl + F</code> 前也可以加数字，来表示向上或向下翻多少页。</p><blockquote><p>向下翻一行？向上翻一行？</p></blockquote><ul><li>向下：<code>Ctrl + E</code></li><li>向上：<code>Ctrl + Y</code></li></ul><h2 id="搜索"><a href="#搜索" class="headerlink" title="搜索"></a>搜索</h2><p>In Vim, you can find and replace text using the :substitute (:s) command.</p><blockquote><p>搜索一个单词？</p></blockquote><p>按 <code>/</code> 然后输入要搜索的单词</p><p>更多内容，见：</p><h1 id="Some-Tricks"><a href="#Some-Tricks" class="headerlink" title="Some Tricks"></a>Some Tricks</h1><figure class="highlight vim"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs vim">%s/./&amp;/g<br></code></pre></td></tr></table></figure><p>按：<code>&amp;</code> 表示匹配到的内容。这个命令执行完之后，文本不会发生任何变化，但是会有一个 Side Effect，即我们会得到当前这个文本的字符数量。</p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><blockquote><p>如何判断 Vim 是否剪切板？</p></blockquote><p>在 Shell 输入</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">vim --version | grep clipboard</span><br></code></pre></td></tr></table></figure><p>如果输出包含 <code>+clipboard</code> 就表示支持，如果是 <code>-clipboard</code> 就表示不支持。</p><p>如果不支持，Ubuntu 可以先卸载原来的 Vim，然后安装 vim-gtk。</p><blockquote><p>Window 下的 Git Bash 如何配置 Vim？</p></blockquote><p>在 <code>C:\Program Files\Git\etc</code> 目录下找到 vimrc 文件，然后使用 VSCode 打开进行配置（需要管理员权限）。</p><hr><p>参考：</p><p>1、<a href="https://blog.csdn.net/weixin_42037232/article/details/100069365">缩进相关</a></p>]]></content>
    
    
    <categories>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Linux</tag>
      
      <tag>Vim</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理作业四</title>
    <link href="/2021/10/31/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E5%9B%9B/"/>
    <url>/2021/10/31/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E5%9B%9B/</url>
    
    <content type="html"><![CDATA[<blockquote><p>1、已知文法</p></blockquote><p><span class="math display">\[A \rightarrow aAd | aAb | \varepsilon\]</span></p><p>判断该文法是否是 <span class="math inline">\(SLR(1)\)</span>文法，若是，请构造相应分析表，并对输入串 <spanclass="math inline">\(ab\#\)</span> 给出分析过程。</p><p>解：</p><p>文法 <span class="math inline">\(A \rightarrow aAd | aAb |\varepsilon\)</span> 的增广文法为 <spanclass="math inline">\(G^{&#39;}\)</span>，增加产生式 <spanclass="math inline">\(S^{&#39;} \rightarrowA\)</span>，若产生式排序为：</p><p><span class="math display">\[\begin{split}0 \quad &amp;S^{&#39;} \rightarrow A \\1 \quad &amp;A \rightarrow aAd \\2 \quad &amp;A \rightarrow aAb \\3 \quad &amp;A \rightarrow \varepsilon\end{split}\]</span></p><p>由产生式知：</p><p><span class="math display">\[\begin{split}&amp;FIRST(S^{&#39;}) = \{\varepsilon, a\} \\&amp;FIRST(A) = \{\varepsilon, a\} \\&amp;FOLLOW(S^{&#39;}) = \{\#\} \\&amp;FOLLOW(A) = \{d, b, \#\} \\\end{split}\]</span></p><p><span class="math inline">\(G^{&#39;}\)</span> 的 <spanclass="math inline">\(LR(0)\)</span> 项目集族及识别活前缀的 <spanclass="math inline">\(\text{DFA}\)</span> 如下图所示：</p><p><img src="https://i.imgur.com/sTllnN1.png" /></p><p>由图可知，此状态机存在移进-归约冲突，故不是 <spanclass="math inline">\(LR(0)\)</span> 文法。</p><p>在 <span class="math inline">\(I_0\)</span>、<spanclass="math inline">\(I_2\)</span> 中，</p><p><span class="math display">\[FOLLOW(A) \cap \{a\} = \{d, b, \#\} \cap \{a\} = \varnothing\]</span></p><p>所以在 <span class="math inline">\(I_0\)</span>、<spanclass="math inline">\(I_2\)</span> 中的移进-归约冲突可以由 <spanclass="math inline">\(FOLLOW\)</span> 集解决，所以 <spanclass="math inline">\(G\)</span> 是 <spanclass="math inline">\(SLR(1)\)</span> 文法。</p><p>构造 <span class="math inline">\(SLR(1)\)</span> 分析表如下：</p><p><img src="https://i.imgur.com/4uV2L5I.png" /></p><p>对输入串 <span class="math inline">\(ab\#\)</span> 的分析过程如下</p><p><img src="https://i.imgur.com/srINzNh.png" /></p><p>分析成功，说明输入串 <span class="math inline">\(ab\)</span>是文法的句子。</p><blockquote><p>3、考虑文法</p></blockquote><p><span class="math display">\[\begin{split}S \rightarrow AS | b \\A \rightarrow SA | a\end{split}\]</span></p><p>(1) 列出这个文法的所有 <spanclass="math inline">\(\text{LR}(0)\)</span> 项目。<br />(2) 按 (1) 列出的项目构造识别这个文法活前缀的 <spanclass="math inline">\(\text{NFA}\)</span>，把这个 <spanclass="math inline">\(\text{NFA}\)</span> 确定化为 <spanclass="math inline">\(\text{DFA}\)</span>，说明这个 <spanclass="math inline">\(\text{DFA}\)</span> 的所有状态全体构成这个文法的<span class="math inline">\(\text{LR}(0)\)</span> 规范族。<br />(3) 这个文法是 <span class="math inline">\(\text{SLR}(1)\)</span>的吗？若是，构造出它的 <span class="math inline">\(\text{SLR}\)</span>分析表。<br />(4) 这个文法是 <span class="math inline">\(\text{LALR}(1)\)</span> 或<span class="math inline">\(\text{LR}(1)\)</span> 的吗？</p><p>解：</p><p>(1) 令增广文法 <span class="math inline">\(G^{&#39;}\)</span> 为</p><p><span class="math display">\[\begin{split}0 \quad &amp;S^{&#39;} \rightarrow S \\1 \quad &amp;S \rightarrow AS \\2 \quad &amp;S \rightarrow b \\3 \quad &amp;A \rightarrow SA \\4 \quad &amp;A \rightarrow a\end{split}\]</span></p><p>文法所有的 <span class="math inline">\(\text{LR}(0)\)</span>项目如下：</p><p><img src="https://i.imgur.com/c5mHs4b.png" /></p><p>(2) (1) 中构造的增广文法，其 <spanclass="math inline">\(\text{LR}(0)\)</span>项目集规范族及其文法识别活前缀的 <spanclass="math inline">\(\text{DFA}\)</span> 如下：</p><p><img src="https://i.imgur.com/bsPyDgM.png" /></p><p>(3) 不是。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理之自底向上分析学习笔记</title>
    <link href="/2021/10/30/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B9%8B%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/10/30/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%B9%8B%E8%87%AA%E5%BA%95%E5%90%91%E4%B8%8A%E5%88%86%E6%9E%90%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>系哈工大陈鄞慕课笔记。</p><blockquote><p>“句柄”的另一个定义？</p></blockquote><p>在“移入-归约”分析中，每次归约的符号串称为“句柄”。</p><p>又：句柄是句型的最左直接短语。</p><p>按：这个和句柄的最初的定义是一致且吻合的。</p><blockquote><p>一个移入-归约分析的例子。</p></blockquote><p><img src="https://i.imgur.com/HFplruP.png"></p><blockquote><p>在移入-归约分析（可以参见上图）中，对 <code>栈内符号串 + 剩余输入 = “规范句型”</code> 的理解？</p></blockquote><p>可以结合下面的定义来理解：</p><ul><li><p>在形式语言中，最右推导常被称为<strong>规范推导</strong>。</p></li><li><p>由规范推导所得的句型称为<strong>右句型</strong>或<strong>规范句型</strong>。</p></li></ul><p>按：本来这个移入-归约分析采用的就是最左归约方式（反向构造最右推导），所以，从例子的最后一行往上看，那么，显然它就是最右推导嘛，那么，结果就很显然了。</p><blockquote><p>移入-归约分析器可采取的 4 中动作？</p></blockquote><ul><li>移入：将下一个输入符号移到栈的顶端</li><li>归约：被归约的符号串的右端必然处于栈顶。语法分析器在栈中确定这个串的左端，并决定用哪个非终结符来替换这个串</li><li>接收：宣布语法分析过程成功完成</li><li>报错：发现一个语法错误，并调用错误恢复子例程</li></ul><p>按：这个错误恢复子例程的规则应是由写程序的人来定。</p><blockquote><p>移入-归约分析中存在的问题？</p></blockquote><p>在归约的过程中，应该被归约的字符串的左端可能不会被正确识别到，即错误地识别了句柄。</p><blockquote><p>$LR$ 分析的含义？</p></blockquote><ol><li><p>$LR$ 文法是最大的、可以构造出相应移入-归约语法分析器的文法类</p><ul><li>L：对输入进行从左到右的扫描</li><li>R：反向构造出一个最右推导序列</li></ul><p> 按：这和前面那张移入-归约分析图的过程很像啊。</p></li><li><p>$LR(k)$ 分析</p><ul><li>需要向前查看 k 个输入符号的 LR 分析<br> 按：这里的向前在输入符号串中表现为向右。</li></ul></li></ol><blockquote><p>如何用“状态”表示句柄识别的进展程度？</p></blockquote><p><img src="https://i.imgur.com/52H3LGJ.png"></p><p>$$<br>\begin{split}<br>S &amp;\rightarrow \cdot bBB \quad &amp;移进状态\<br>S &amp;\rightarrow b \cdot BB \quad &amp;待约状态\<br>S &amp;\rightarrow bB \cdot B \quad &amp;待约状态 \<br>S &amp;\rightarrow bBB \cdot \quad &amp;归约状态 \<br>\end{split}<br>$$</p><blockquote><p>$LR$ 分析表的结构？</p></blockquote><p><img src="https://i.imgur.com/3uKaGLp.png"></p><p>注意这里的 $sn$ 和 $rn$ 的含义：</p><ul><li>$sn$：将符号 $a$、状态 $n$ 压入栈</li><li>$rn$：用第 $n$ 个产生式进行归约</li></ul><blockquote><p>一个 $LR$ 分析的例子？</p></blockquote><p>文法：</p><p>$$<br>\begin{split}<br>① ; &amp;S \rightarrow BB \<br>② ; &amp;B \rightarrow aB \<br>③ ; &amp;B \rightarrow b<br>\end{split}<br>$$</p><p><img src="https://i.imgur.com/bDn8OPS.png" alt="状态表"></p><p>初始情况：</p><p>输入：$b ; a ; b$</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;0 \qquad &amp;　\<br>&amp;$ \qquad &amp;bab$<br>\end{split}<br>$$</p><p>然后分析过程如下：</p><p>初始状态是 0，遇到输入的符号 b，其操作是 $s4$，即将 $b$、状态 $4$ 压入栈，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;04 \qquad &amp;　\<br>&amp;$b \qquad &amp;ab$<br>\end{split}<br>$$</p><p>然后是状态 4 遇到输入 a，查表，得 $r3$，即用文法中的第 3 个式子进行归约，状态 4 和符号 $b$ 出栈，$B$ 入栈，然后此时状态栈的 0 遇到了刚入栈的 $B$，就会 “GOTO” 到状态 2，这个可以通过查表得到，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;02 \qquad &amp;　\<br>&amp;$B \qquad &amp;ab$<br>\end{split}<br>$$</p><p>然后，状态 2 遇到 a，采取 $s3$ 操作，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;023 \qquad &amp;　\<br>&amp;$Ba \qquad &amp;b$<br>\end{split}<br>$$</p><p>然后，3 遇到 b，$s4$，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;0234 \qquad &amp;　\<br>&amp;$Bab \qquad &amp;$<br>\end{split}<br>$$</p><p>然后，4 遇到 $$$，$r3$，将状态 4 和栈顶符号 $b$ 一起出栈，然后将刚刚的 $b$ 归约成 $B$ 并将其入栈，然后现在的状态栈栈顶的 3 遇到刚刚入栈的 B，就会 “GOTO” 到状态 6，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;0236 \qquad &amp;　\<br>&amp;$BaB \qquad &amp;$<br>\end{split}<br>$$</p><p>然后，6 遇到 $$$，$r2$，将状态 $3$、$6$ 和符号 $a$、$B$ 一起出栈，然后将归约成的 $B$ 入栈，然后现在状态栈栈顶的 2 遇到刚刚入栈的 $B$，会 “GOTO” 到状态 5，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;025 \qquad &amp;　\<br>&amp;$BB \qquad &amp;$<br>\end{split}<br>$$</p><p>然后，5 遇到 $$$，$r1$，</p><p>$$<br>\begin{split}<br>&amp;栈 \qquad &amp;剩余输入 \<br>&amp;01 \qquad &amp;　\<br>&amp;$S \qquad &amp;$<br>\end{split}<br>$$</p><p>然后，1 遇到 $$$，到达状态 “acc”，分析成功，分析到此结束。</p><blockquote><p>何为 $LR(0)$ 项目？</p></blockquote><p>右部某位置标有圆点的产生式称为相应文法的一个 $LR(0)$ 项目（简称为项目）。</p><p>$$<br>A \rightarrow \alpha_{1} \cdot \alpha_{2}<br>$$</p><blockquote><p>何为增广文法？</p></blockquote><p>如果 $G$ 是一个以 $S$ 为开始符号的文法，则 $G$ 的增广文法 $G^{‘}$ 就是在 $G$ 中加上新开始符号 $S^{‘}$ 和产生式 $S^{‘} \rightarrow S$ 而得到的文法。</p><p>引入这个新的开始产生式的目的是使得文法开始符号仅出现在一个产生式的左边，从而使得分析器只有一个接受状态。</p><blockquote><p>何为后继项目（Successive Item）？</p></blockquote><ul><li>同属于一个产生式的项目，但圆点的位置只相差一个符号，则称后者是前者的后继项目；</li><li>$A \rightarrow \alpha \cdot X \beta$ 的后继项目是 $A \rightarrow \alpha X \cdot \beta$。</li></ul><blockquote><p>如何理解某些项目是等价的？</p></blockquote><p><img src="https://i.imgur.com/fofA0QW.png"></p><p>以上面的文法举例。</p><p>项目 <code>(0)</code> 和 项目 <code>(2)</code> 是等价的，理由是：对于项目 <code>(0)</code>，我们在等待 $S$ 的时候，根据产生式②，就相当于我们在等待 $v$，所以 <code>(0)</code> 和 <code>(2)</code> 是等价的。</p><p>同理，其它的等价的项目归类如下：</p><p>$$<br>\begin{split}<br>&amp;(3) ; (7) ; (11) \<br>&amp;(5) ; (13)<br>\end{split}<br>$$</p><p>按：当圆点后面是非终结符时，就存在等价项目。</p><blockquote><p>何为项目集闭包？</p></blockquote><p>可以把等价的项目组成一个项目集($I$)，称为项目集闭包（Closure of Item Sets），每个项目集闭包对应着自动机的一个状态。</p><blockquote><p>如何计算给定项目集 $I$ 的闭包？</p></blockquote><p>$$<br>\text{CLOSURE}(I) &#x3D; I \cup {B \rightarrow \cdot \gamma | A \rightarrow \alpha \cdot B \beta \in \text{CLOSURE}(I), ; B \rightarrow \gamma \in P}<br>$$</p><p>根据这个公式计算即可。</p><p>按：可以从第一个项目依次往下计算，在计算的过程中，如果有已经被加入相应项目集闭包的项目，就跳过。</p><blockquote><p>如何理解和计算 $\text{GOTO()}$ 函数？</p></blockquote><p>此函数返回项目集 $I$ 对应于文法符号 $X$ 的后继项目集闭包</p><p>$$<br>\text{GOTO}(I, X) &#x3D; \text{CLOSURE}({A \rightarrow \alpha X \cdot \beta | A \rightarrow \alpha \cdot X \beta \in I})<br>$$</p><p>按：一个 $I$ 就相当于一个状态，然后，对于 $\text{GOTO}$，简单理解，就是状态 $I$ 接受了一个符号 $X$ 之后就“GOTO”到了另外一个状态。</p><blockquote><p>如何构造 $LR(0)$ 自动机的状态机？</p></blockquote><p>规范 $LR(0)$ 项集族（Canonical $LR(0) Collection$）</p><p>$$<br>C &#x3D; {I_0} \cup {I | \exists J \in C, X \in V_N \cup V_T, I &#x3D; GOTO(J, X)}<br>$$</p><p>按：简单来讲，就是从初始项目集一步一步往下构造。</p><blockquote><p>$LR(0)$ 分析表的构造算法？</p></blockquote><p><img src="https://i.imgur.com/6AVfn7Y.png"></p><blockquote><p>$LR(0)$ 自动机的形式化定义？</p></blockquote><p><img src="https://i.imgur.com/RTQl9dd.png"></p><ul><li>$I_0$ 代表初始状态集合；</li><li>$F$ 代表终止状态集合。</li></ul><blockquote><p>何为移进&#x2F;归约冲突？</p></blockquote><p>简单来讲，就是某个状态遇到某一个输入符号时，不知道该进行移进动作还是归约动作。</p><p><img src="https://i.imgur.com/PTeoz8m.png"></p><p>按：这里的状态 2 在遇到 <code>*</code> 时，不知道是该将 $E \rightarrow T \cdot$ 归约成 $E$，还是针对 $T \rightarrow T \cdot * F$ 将 <code>*</code> 给移进。状态 9 也是同样的问题。但是，就状态 2 而言，如果采取归约动作的话，即，将 $T \cdot$ 归约成 $E$，那么，由于 $E$ 的 $FOLLOW$ 集中没有 $*$，显然，这是不合理的。</p><p><img src="https://i.imgur.com/IbwRzYV.png"></p><blockquote><p>何为归约&#x2F;归约冲突？</p></blockquote><p>理解的方法同上面的移进&#x2F;归约冲突。</p><blockquote><p>如何判定一个文法是否是 $LR(0)$ 文法？</p></blockquote><p>如果 $LR(0)$ 分析表中没有语法分析动作冲突，那么给定的文法就称为 $LR(0)$ 文法。</p><blockquote><p>何为 $CFG$？</p></blockquote><p>所谓 $CFG$，就是指上下文无关文法（Context-Free Grammar, CFG），也即 2 型文法（Type-2 Grammar）。</p><blockquote><p>何为 $SLR$ 分析法？</p></blockquote><p>这里的 $S$ 代表 Simple 的意思，$SLR$ 就表示简单的 $LR$ 分析法，要注意这里的 $SLR$ 是省略的写法，完整的写法是 $SLR(1)$。</p><blockquote><p>$SLR$ 分析的基本思想？</p></blockquote><p><img src="https://i.imgur.com/DvhquUd.png"></p><blockquote><p>何为 $\text{SLR}$ 文法？</p></blockquote><p>如果给定文法的 SLR 分析表中不存在有冲突的动作，那么该文法称为 SLR 文法。</p><blockquote><p>$\text{SLR}$ 分析的冲突举例？</p></blockquote><p><img src="https://i.imgur.com/nR0MSyS.png"></p><p>所谓 $\text{SLR}$ 分析的冲突，如状态 2，如果选择归约动作，即，将 $L \cdot$ 归约成 $R$，由于 $R$ 的 $FOLLOW$ 中有 <code>=</code> 这个符号，所以这个动作是可以；但是显然在这里采取移进动作也是可行的，所以就产生了冲突。</p><blockquote><p>$SLR$ 分析存在的问题？</p></blockquote><p>$SLR$ 只是简单地考察下一个输入符号 $b$ 是否属于归约项目 $A \rightarrow \alpha$ 相关联的 $FOLLOW(A)$。</p><p>按：$FOLLOW$ 集可以帮助我们排除一些不合理的归约，但是不能确保正确的归约。</p><p><img src="https://i.imgur.com/bJPhHk4.png"></p><p>按；</p><ul><li>注意，图中的树状图并不是语法树，而是该文法的一个句型对应的分析树，这个要结合文法来看。</li><li>对于图中红色的式子，拿最右边的 $R \rightarrow L \cdot, $$ 来举例，它表示的含义是只有当下一个输入符号是 $$$ 时才能够将 $L \cdot, $$ 归约成 $R$。</li></ul><blockquote><p>何为规范 $LR(1)$ 项目？</p></blockquote><p><img src="https://i.imgur.com/1rgfjao.png"></p><blockquote><p>如何理解等价 $LR(1)$ 项目？</p></blockquote><p><img src="https://i.imgur.com/Rq8ABfL.png"></p><p>按：这个概念的理解可以类比等价的 $LR(0)$ 项目。</p><blockquote><p>一个 $LR(1)$ 自动机的例子？</p></blockquote><p><img src="https://i.imgur.com/DwQbGYR.png"></p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
      <tag>网课笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 配置 OpenCV 环境</title>
    <link href="/2021/10/30/Python-%E9%85%8D%E7%BD%AE-OpenCV-%E7%8E%AF%E5%A2%83/"/>
    <url>/2021/10/30/Python-%E9%85%8D%E7%BD%AE-OpenCV-%E7%8E%AF%E5%A2%83/</url>
    
    <content type="html"><![CDATA[<p>在安装好了 Python 环境之后，直接使用 <code>pip</code> 命令安装即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install opencv-python<br></code></pre></td></tr></table></figure><p><img src="https://i.imgur.com/iQVX15Y.png"></p><p>我这里是使用 PyCharm 这个 IDE，并且使用了虚拟的 Python 环境，所以就在 PyCharm 提供的 Terminal 中进行安装。</p>]]></content>
    
    
    <categories>
      
      <category>OpenCV</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>OpenCV</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《OpenCV 4 计算机视觉：Python 语言实现（原书第 3 版）》阅读札记</title>
    <link href="/2021/10/30/%E3%80%8AOpenCV-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%EF%BC%9APython-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%8E%9F%E4%B9%A6%E7%AC%AC-3-%E7%89%88%EF%BC%89%E3%80%8B%E9%98%85%E8%AF%BB%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/30/%E3%80%8AOpenCV-4-%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%EF%BC%9APython-%E8%AF%AD%E8%A8%80%E5%AE%9E%E7%8E%B0%EF%BC%88%E5%8E%9F%E4%B9%A6%E7%AC%AC-3-%E7%89%88%EF%BC%89%E3%80%8B%E9%98%85%E8%AF%BB%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="第-1-章-安装-OpenCV"><a href="#第-1-章-安装-OpenCV" class="headerlink" title="第 1 章 安装 OpenCV"></a>第 1 章 安装 OpenCV</h1><blockquote><p>为何 OpenCV 的 Python 模块命名为 cv2？</p></blockquote><p>在 cv2 中的 2 与 OpenCV 的版本号无关，我们使用的是 OpenCV 4。历史上，有一个名为 cv 的 Python 模块封装了 OpenCV 的一个已经过时的 C 版本。在 OpenCV 4 中已经不存在任何 cv 模块。但是 OpenCV 文档有时会错误地将模块命名为 cv（而不是 cv2）。请记住，在 OpenCV 4 中，正确的 Python 模块名称始终是 cv2。</p><h1 id="第-2-章-处理文件、摄像头和-GUI"><a href="#第-2-章-处理文件、摄像头和-GUI" class="headerlink" title="第 2 章 处理文件、摄像头和 GUI"></a>第 2 章 处理文件、摄像头和 GUI</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">img = numpy.zeros((<span class="hljs-number">3</span>, <span class="hljs-number">3</span>), dtype=numpy.uint8)<br></code></pre></td></tr></table></figure><p>按：</p><p><code>(3, 3)</code> 中前一个 3 表示 3 行，后一个 3 表示 3 列（如果把它想象成矩阵的话）；<code>uint8</code> 表示无符号整数，范围是 <code>0~255</code>。<br>这里，使用 8 位整数来表示像素，所以像素的值的范围是 <code>0~255</code>，其中 0 表示 黑色，255 表示白色，中间的值表示灰色。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">img = cv2.cvtColor(img, cv2.COLOR_GRAY2BGR)<br></code></pre></td></tr></table></figure><p>按：使用 <code>cv2.cvtColor</code> 函数将上面的图像转换成蓝-绿-红（Blue-Green-Red，BGR）格式。</p><p>图像的变化过程如下：</p><pre><code class="hljs">array([[0, 0, 0],       [0, 0, 0],       [0, 0, 0]], dtype=uint8)</code></pre><p>&#x3D;&#x3D;&gt;</p><pre><code class="hljs">array([[[0, 0, 0],        [0, 0, 0],        [0, 0, 0]],       [[0, 0, 0],        [0, 0, 0],        [0, 0, 0]],       [[0, 0, 0],        [0, 0, 0],        [0, 0, 0]]], dtype=uint8)</code></pre><p>按：转换后的图像每个像素都用一个三元数组表示，每个整数分别表示三个颜色通道（B、G 和 R）中的一个。</p><blockquote><p>shape 属性返回行、列和通道数（如果有多个通道的话）。</p></blockquote><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs py">img = numpy.zeros((<span class="hljs-number">5</span>, <span class="hljs-number">3</span>), dtype=numpy.uint8)<br><span class="hljs-built_in">print</span>(img.shape)<br></code></pre></td></tr></table></figure><p>output:</p><pre><code class="hljs">(5, 3)</code></pre><p>按：输出 <code>(5, 3)</code>，表示我们有一幅 5 行 3 列的灰度图像，如果将该图像转换成 BGR 格式，shape 将是 <code>(5, 3, 3)</code>，表示每个像素有 3 个通道。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> cv2<br><br>image = cv2.imread(<span class="hljs-string">&#x27;MyPic.png&#x27;</span>)<br>cv2.imwrite(<span class="hljs-string">&#x27;MyPic.jpg&#x27;</span>, image)<br></code></pre></td></tr></table></figure><p>按：从 <code>png</code> 格式加载并保存为 <code>jpg</code> 格式。</p><blockquote><p>默认情况下，<code>imread</code> 返回 BGR 格式的图像，即使该文件使用的是灰度格式。<br>BGR 表示与红-绿-蓝（Red-Green-Blue，RGB）相同的颜色模型，只是字节顺序相反。</p></blockquote><blockquote><p><code>imread</code> 支持的模式选项有哪些？</p></blockquote><ul><li>cv2.IMREAD_COLOR：该模式是默认选项，提供 3 通道的 BGR 图像，每个通道一个 8 位值（0～255）。</li><li>cv2.IMREAD_GRAYSCALE：该模式提供 8 位灰度图像。</li><li>cv2.IMREAD_ANYCOLOR：该模式提供每个通道 8 位的 BGR 图像或者 8 位灰度图像，具体取决于文件中的元数据。</li><li>cv2.IMREAD_UNCHANGED：该模式读取所有的图像数据，包括作为第 4 通道的 α 或透明度通道（如果有的话）。</li><li>cv2.IMREAD_ANYDEPTH：该模式加载原始位深度的灰度图像。例如，如果文件以这种格式表示一幅图像，那么它提供每个通道 16 位的一幅灰度图像。</li><li>cv2.IMREAD_ANYDEPTH｜cv2.IMREAD_COLOR：该组合模式加载原始位深度的 BGR 彩色图像。</li><li>cv2.IMREAD_REDUCED_GRAYSCALE_2：该模式加载的灰度图像的分辨率是原始分辨率的 1&#x2F;2。例如，如果文件包括一幅 640×480 的图像，那么它加载的是一幅 320×240 的图像。</li><li>cv2.IMREAD_REDUCED_COLOR_2：该模式加载每个通道 8 位的 BGR 彩色图像，分辨率是原始图像的 1&#x2F;2。</li><li>cv2.IMREAD_REDUCED_GRAYSCALE_4：该模式加载灰度图像，分辨率是原始图像的 1&#x2F;4。</li><li>cv2.IMREAD_REDUCED_COLOR_4：该模式加载每个通道 8 位的彩色图像，分辨率是原始图像的 1&#x2F;4。</li><li>cv2.IMREAD_REDUCED_GRAYSCALE_8：该模式加载灰度图像，分辨率是原始图像的 1&#x2F;8。</li><li>cv2.IMREAD_REDUCED_COLOR_8：该模式加载每个通道 8 位的彩色图像，分辨率为原始图像的 1&#x2F;8。</li></ul><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> cv2<br><br>grayImage = cv2.imread(<span class="hljs-string">&#x27;MyPic.png&#x27;</span>, cv2.IMREAD_GRAYSCALE)<br>cv2.imwrite(<span class="hljs-string">&#x27;MyPicGray.png&#x27;</span>, grayImage)<br></code></pre></td></tr></table></figure><p>按：将一个 PNG 文件加载为灰度图像（在此过程中会丢失所有的颜色信息），再将其保存为一个灰度 PNG 图像。</p><blockquote><p><code>imread</code> 和 <code>imwrite</code> 操作文件时，对文件的路径有什么要求？</p></blockquote><ul><li>如果希望直接使用文件名来读取文件，那么，图片文件必须和当前的 Python 脚本位于同一目录。这时用的是相对路径；</li><li>使用绝对路径。</li></ul><blockquote><p><code>imwrite</code> 函数对图像有什么要求？</p></blockquote><p>imwrite() 函数要求图像为 BGR 格式或者灰度格式，每个通道具有输出格式可以支持的特定位数。例如，BMP 文件格式要求每个通道 8 位，而 PNG 允许每个通道 8 位或 16 位。</p><blockquote><p>我们可以通过使用类似于 <code>image[0, 0]</code> 或者 <code>image[0, 0, 0]</code> 的表达式来访问 numpy.array 类型的数据中的值。第一个索引是像素的 y 坐标或者行，第二个索引是像素的 x 坐标或列，第三个索引（如果有的话）表示一个颜色通道。</p></blockquote><blockquote><p>一个例子？</p></blockquote><p>在左上角为白色像素的 8 位灰度图像中，<code>image[0,0]</code> 是 255。在左上角为蓝色像素的 24 位（每个通道 8 位）BGR 图像中，<code>image[0,0]</code> 是 <code>[255,0,0]</code>。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs py">byteArray = <span class="hljs-built_in">bytearray</span>(image)<br></code></pre></td></tr></table></figure><p>按：假设图像的每个通道有 8 位，我们可以将其强制转换为标准的 Python bytearray 对象（一维的）。</p>]]></content>
    
    
    <categories>
      
      <category>数字图像处理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>数字图像处理</tag>
      
      <tag>OpenCV</tag>
      
      <tag>读书</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Plugin org.springframework.boot:spring-boot-maven-plugin: not found 问题解决</title>
    <link href="/2021/10/27/Plugin-org-springframework-boot-spring-boot-maven-plugin-not-found-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/"/>
    <url>/2021/10/27/Plugin-org-springframework-boot-spring-boot-maven-plugin-not-found-%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h1><p>IDEA 报了一个 <code>Plugin org.springframework.boot:spring-boot-maven-plugin: not found</code> 问题，</p><p><img src="https://i.imgur.com/Y7apJYP.png"></p><h1 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h1><p>在报红的地方加上版本描述：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.5<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br></code></pre></td></tr></table></figure><p>这个具体的版本号可以看这个 <code>pom.xml</code> 文件的 <code>spring-boot</code> 版本信息。</p><p><img src="https://i.imgur.com/lnGYmhL.png"></p><p><img src="https://i.imgur.com/aHIoeJ8.png"></p><p>然后刷新一下 maven 即可。</p><h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>出现这个问题的原因，我猜测是当前项目所用 spring boot 的版本和 maven 仓库中的插件版本不匹配，所有没有办法使用默认的版本号，比如，我这个项目用的 spring boot 版本是 <code>2.5.5</code>，而之前用的版本是 <code>2.3.3</code>，所以本地 maven 仓库中只有 <code>2.3.3</code> 版本的插件，这就导致了 <code>2.3.3</code> 和 <code>2.5.5</code> 版本的项目都不会默认匹配本地仓库中的插件，而必须明确给出版本号的说明。</p>]]></content>
    
    
    <categories>
      
      <category>Spring</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Spring boot</tag>
      
      <tag>Bugs</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数字图像处理期中测试作业</title>
    <link href="/2021/10/26/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E6%9C%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E4%BD%9C%E4%B8%9A/"/>
    <url>/2021/10/26/%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E6%9C%9F%E4%B8%AD%E6%B5%8B%E8%AF%95%E4%BD%9C%E4%B8%9A/</url>
    
    <content type="html"><![CDATA[<h1 id="一、简答题（共5题-50分）"><a href="#一、简答题（共5题-50分）" class="headerlink" title="一、简答题（共5题,50分）"></a>一、简答题（共5题,50分）</h1><p>1、简答什么是图像颜色 HSI 模型。</p><p>解：HSI 是这样一个彩色模型，该模型用色调、饱和度和亮度来描述一个彩色物体。色调是描述一种纯色（纯黄色、纯橙色或纯红色）的颜色属性；饱和度是一种纯色被白光稀释的程度的度量。亮度则用灰度级来描述。</p><p>2、简答什么是图像的动态范围？</p><p>解：有时灰度级的取值范围称为图像的动态范围。把占有灰度级全部有效段的图像叫做高动态范围图像。当相当可观数目的像素呈现这样的特征时，图像就有较高的对比度。相反，低动态范围的图像看上去似乎是冲淡了的灰暗格调。</p><p>3、简答马赫带效应并解释原因。</p><p>解：马赫带效应就是，对于连续的均匀的灰度带（见教材），每一条带上的亮度是均匀的，但是在不同带的交界处，我们会看到，亮的那一侧会出现更亮的一条线，暗的那一侧会出现更暗的一条线。简单来讲，这就是马赫带效应。</p><p>原因：视觉系统对亮度的感知不是简单的强度函数。</p><p>4、请给出一种通过卷积对图像进行平滑的方法，并解释该平滑方法与消除噪声的关系。</p><p>解：平滑模板（template）。</p><p>与消除噪声的关系：从信号处理理论来解释，这种做法实现的是一种简单的低通滤波器。平滑模板通过将某点周围 8 个点的平均值代替该点原值，从而去除突然变化的点，滤掉噪声，其代价是图像具有一定程度的模糊。</p><p>5、什么是傅里叶变换的相位谱与振幅谱？</p><p>解：傅里叶变换 $F(\omega)$ 是一个复数：$F(\omega) &#x3D; R(\omega) + j I(\omega)$，其相位谱与振幅谱分别如下：</p><p>$$<br>\begin{split}<br>&amp;相位谱 \qquad \phi(\omega) &#x3D; arctan \frac{I(\omega)}{R(\omega)} \<br>&amp;振幅谱 \qquad |F(\omega)| &#x3D; \sqrt{R^2(\omega) + I^2(\omega)}<br>\end{split}<br>$$</p><h1 id="二、论述题（共3题-30分）"><a href="#二、论述题（共3题-30分）" class="headerlink" title="二、论述题（共3题,30分）"></a>二、论述题（共3题,30分）</h1><p>1、请解释什么是自适应中值滤波器？该滤波器与中值滤波相比较，有何优势？</p><p>解：</p><p>(1) 解释：</p><p>下面是自适应中值滤波器的详细描述：</p><p>预先定义好以下符号：</p><ul><li>$S_{xy}$：滤波器的作用区域，滤波器窗口所覆盖的区域，该区域中心点为图像中第 y 行第 x 列个像素点；</li><li>$Z_{min}$：$S_{xy}$ 中最小的灰度值；</li><li>$Z_{max}$：$S_{xy}$ 中最大的灰度值；</li><li>$Z_{med}$：$S_{xy}$ 中所有灰度值的中值；</li><li>$Z_{xy}$：表示图像中第 y 行第 x 列个像素点的灰度值；</li><li>$S_{max}$：$S_{xy}$ 所允许的最大窗口尺寸；</li></ul><p>自适应中值滤波器分为以下两个过程，A和B：</p><p><strong>A:</strong></p><ol><li>A1 &#x3D; $Z_{med} - Z_{min}$</li><li>A2 &#x3D; $Z_{med} - Z_{max}$</li><li>如果 $A1&gt;0$ 且 $A2&lt;0$，则跳转到 <strong>B</strong></li><li>否则，增大窗口的尺寸</li><li>如果增大后的尺寸 $\leq S_{max}$，则重复 <strong>A</strong></li><li>否则，直接输出 $Z_{med}$</li></ol><p><strong>B:</strong></p><ol><li>B1 &#x3D; $Z_{xy} - Z_{min}$</li><li>B2 &#x3D; $Z_{xy} - Z_{max}$</li><li>如果 $B1&gt;0$ 且 $B2&lt;0$，则输出 $Z_{xy}$</li><li>否则输出 $Z_{med}$</li></ol><p>直观解释：</p><p>在自适应中值滤波算法中，<strong>A</strong> 步骤里面会先判断是否满足 $Z_{min} &lt; Z_{med} &lt; Z_{max}$。这一步骤实质是判断当前区域的中值点是否是噪声点，通常来说是满足 $Z_{min} &lt; Z_{med} &lt; Z_{max}$ 这个条件的，此时中值点不是噪声点，跳转到 <strong>B</strong>；考虑一些特殊情况，如果 $Z_{med} &#x3D; Z_{min}$ 或者 $Z_{med} &#x3D; Z_{max}$，则认为是噪声点，应该扩大窗口尺寸，在一个更大的范围内寻找一个合适的非噪声点，随后再跳转到 <strong>B</strong>，否则输出的中值点是噪声点；<br>接下来考虑跳转到B之后的情况：判断中心点的像素值是否是噪声点，判断条件为 $Z_{min} &lt; Z_{xy} &lt; Z_{max}$，原理同上，因为如果 $Z_{xy} &#x3D; Z_{min}$ 或者 $Z_{xy} &#x3D; Z_{max}$，则认为是噪声点。如果不是噪声点，我们可以保留当前像素点的灰度值；如果是噪声点，则使用中值替代原始灰度值，滤去噪声。</p><p>(2) 优势：</p><p>在噪声密度不是很大的情况下（根据经验，噪声的出现的概率小于 0.2），使用中值滤波的效果不错。但是当噪声出现的概率比较高时，原来的中值滤波算法就不是很有效了。只有增大滤波器窗口尺寸，尽管会使图像变得模糊。<br>使用自适应中值滤波器的目的就是，根据预设好的条件，动态地改变中值滤波器的窗口尺寸，以同时兼顾去噪声作用和保护细节的效果。</p><p>2、请给出一种通过傅里叶变换对运动模糊图像进行恢复方法。</p><p>解：空间滤波方法。</p><p>3、请给出一种通过形态学方法提取二值图像轮廓的方法。</p><p>解：我们可以用边界提取算法来提取二值图像轮廓。</p><p>集合 A 的边界表示为 $\beta (A)$，它可以通过先由结构元素 B 对 A 的腐蚀，然后用腐蚀减去得到，即：</p><p>$$<br>\beta(A) &#x3D; A - (A (-) B)<br>$$</p><h1 id="三、计算题（共1题-20分）"><a href="#三、计算题（共1题-20分）" class="headerlink" title="三、计算题（共1题,20分）"></a>三、计算题（共1题,20分）</h1><p>1、某分辨率为 40×25 的 3bit 图像，灰度级从 0 到 7 各出现了 200，100，100，50，250，100，100，100 次，请采用直方图均规定化的方法进行灰度映射变换，使变换后的 0 到 7 的 8 个灰度级近似服从 0，0.0，0.1，0.2，0.3，0.2，0.1，0.1 的分布。</p><p>解：</p><p><img src="https://i.imgur.com/poU7tyY.png"></p><p><img src="https://i.imgur.com/wxGbBo6.png"></p><p><img src="https://i.imgur.com/1ASVCV7.png"></p>]]></content>
    
    
    <categories>
      
      <category>数字图像处理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数字图像处理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《编译原理第三版》（张素琴）第六章学习札记</title>
    <link href="/2021/10/25/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/25/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E5%85%AD%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>LR 分析表中像 s2 和 r3 这样的符号串的第一个字符 s 和 r 分别代表什么含义？</p></blockquote><ul><li>s 表示 shift，即“移进”。</li><li>r 表示 reduce，即“归约”。</li></ul>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理作业三</title>
    <link href="/2021/10/24/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%B8%89/"/>
    <url>/2021/10/24/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%B8%89/</url>
    
    <content type="html"><![CDATA[<p>系第四章课后作业（部分）。</p><p>1、对文法 $G[S]$</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow a | \wedge | (T) \<br>T &amp;\rightarrow T, S | S<br>\end{split}<br>$$</p><p>(1) 给出 $(a, (a, a))$ 和 $(((a, a), \wedge, (a)), a)$ 的最左推导。<br>(2) 对文法 $G$ 进行改写，然后对每个非终结符写出不带回溯的递归子程序。<br>(3) 经改写后的文法是否是 $LL(1)$ 的？给出它的预测分析表。<br>(4) 给出输入串 $(a, a)＃$ 的分析过程，并说明该串是否为 $G$ 的句子。</p><p>解：</p><p>(1) 对 $(a, (a, a))$ 的最左推导为：</p><p>$$<br>\begin{split}<br>S &amp;\Rightarrow (T) \<br>&amp;\Rightarrow (T, S) \<br>&amp;\Rightarrow (S, S) \<br>&amp;\Rightarrow (a, S) \<br>&amp;\Rightarrow (a, (T)) \<br>&amp;\Rightarrow (a, (T, S)) \<br>&amp;\Rightarrow (a, (S, S)) \<br>&amp;\Rightarrow (a, (a, S)) \<br>&amp;\Rightarrow (a, (a, a))<br>&amp;\end{split}<br>$$</p><p>对 $(((a, a), \wedge, (a)), a)$ 的最左推导如下：</p><p>$$<br>\begin{split}<br>S &amp;\Rightarrow (T) \<br>&amp;\Rightarrow (T, S) \<br>&amp;\Rightarrow (S, S) \<br>&amp;\Rightarrow ((T), S) \<br>&amp;\Rightarrow ((T, S), S) \<br>&amp;\Rightarrow ((T, S, S), S) \<br>&amp;\Rightarrow (((S, S), S, S), S) \<br>&amp;\Rightarrow (((a, S), S, S), S) \<br>&amp;\Rightarrow (((a, a), S, S), S) \<br>&amp;\Rightarrow (((a, a), \wedge, S), S) \<br>&amp;\Rightarrow (((a, a), \wedge, (T)), S) \<br>&amp;\Rightarrow (((a, a), \wedge, (S)), S) \<br>&amp;\Rightarrow (((a, a), \wedge, (a)), S) \<br>&amp;\Rightarrow (((a, a), \wedge, (a)), a) \<br>\end{split}<br>$$</p><p>(2) 改写文法为：</p><p>$$<br>\begin{split}<br>(0) &amp;S \rightarrow a \<br>(1) &amp;S \rightarrow \wedge \<br>(2) &amp;S \rightarrow (T) \<br>(3) &amp;T \rightarrow SN \<br>(4) &amp;N \rightarrow ,S N \<br>(5) &amp;N \rightarrow \varepsilon<br>\end{split}<br>$$</p><p>对每个非终结符，其不带回溯的递归子程序如下：</p><figure class="highlight delphi"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs delphi"><span class="hljs-function"><span class="hljs-keyword">PROCEDURE</span> <span class="hljs-title">S</span><span class="hljs-params">(TOKEN)</span>;</span><br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">IF</span> TOKEN != <span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">AND</span> TOKEN != <span class="hljs-string">&#x27;∧&#x27;</span> <span class="hljs-keyword">THEN</span><br>        <span class="hljs-keyword">BEGIN</span><br>            <span class="hljs-keyword">IF</span> TOKEN = <span class="hljs-string">&#x27;(&#x27;</span> <span class="hljs-keyword">THEN</span><br>                <span class="hljs-keyword">BEGIN</span><br>                    GETNEXT(TOKEN);<br>                    T(TOKEN);<br>                    GETNEXT(TOKEN);<br>                    <span class="hljs-keyword">IF</span> TOKEN != <span class="hljs-string">&#x27;)&#x27;</span> <span class="hljs-keyword">THEN</span> ERROR<br>                <span class="hljs-keyword">END</span><br>            <span class="hljs-keyword">ELSE</span> ERROR<br>        <span class="hljs-keyword">END</span><br><span class="hljs-keyword">END</span><br><br><span class="hljs-function"><span class="hljs-keyword">PROCEDURE</span> <span class="hljs-title">T</span><span class="hljs-params">(TOKEN)</span>;</span><br><span class="hljs-keyword">BEGIN</span><br>    S(TOKEN);<br>    N(TOKEN);<br><span class="hljs-keyword">END</span><br><br><span class="hljs-function"><span class="hljs-keyword">PROCEDURE</span> <span class="hljs-title">N</span><span class="hljs-params">(TOKEN)</span>;</span><br><span class="hljs-keyword">BEGIN</span><br>    <span class="hljs-keyword">IF</span> TOKEN = <span class="hljs-string">&#x27;,&#x27;</span> <span class="hljs-keyword">THEN</span><br>        <span class="hljs-keyword">BEGIN</span><br>            GETNEXT(TOKEN);<br>            S(TOKEN);<br>            N(TOKEN);<br>        <span class="hljs-keyword">END</span><br><span class="hljs-keyword">END</span><br></code></pre></td></tr></table></figure><p>(3) 经改写后的文法是 $LL(1)$ 文法，</p><p>对改写后的文法，求其 $FIRST$ 集、$FOLLOW$ 集、$SELECT$ 集如下：</p><table><thead><tr><th>符号</th><th>$FIRST$</th><th>$FOLLOW$</th></tr></thead><tbody><tr><td>$S$</td><td>${A, \wedge, (}$</td><td>$#, , , )$</td></tr><tr><td>$T$</td><td>${a, \wedge, (}$</td><td>${ ) }$</td></tr><tr><td>$N$</td><td>${, , \varepsilon}$</td><td>${ ) }$</td></tr></tbody></table><p>$$<br>\begin{split}<br>&amp;SELECT(0) &#x3D; { a } \<br>&amp;SELECT(1) &#x3D; { \wedge } \<br>&amp;SELECT(2) &#x3D; { ( } \<br>&amp;SELECT(3) &#x3D; { a, \wedge, ( } \<br>&amp;SELECT(4) &#x3D; { , } \<br>&amp;SELECT(5) &#x3D; { ) } \<br>\end{split}<br>$$</p><p>它的预测分析表如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211024173212.png"></p><p>(4) 对输入串 $(a, a)＃$ 的分析过程如下：</p><table><thead><tr><th>栈</th><th>当前输入符</th><th>剩余输入符</th><th>所用产生式</th></tr></thead><tbody><tr><td>#S</td><td>(</td><td>a,a)#</td><td>S $\rightarrow$ (T)</td></tr><tr><td>#)T(</td><td>(</td><td>a,a)#</td><td></td></tr><tr><td>#)T</td><td>a</td><td>,a)#</td><td>T $\rightarrow$ SN, S $\rightarrow$ a</td></tr><tr><td>#)NS</td><td>a</td><td>,a)#</td><td></td></tr><tr><td>#)Na</td><td>a</td><td>,a)#</td><td></td></tr><tr><td>#)N</td><td>,</td><td>a)#</td><td>N $\rightarrow$,SN</td></tr><tr><td>#)NS,</td><td>,</td><td>a)#</td><td></td></tr><tr><td>#)NS</td><td>a</td><td>)#</td><td>S $\rightarrow$ a</td></tr><tr><td>#)Na</td><td>a</td><td>)#</td><td></td></tr><tr><td>#)N</td><td>)</td><td>#</td><td>N $\rightarrow \varepsilon$</td></tr><tr><td>#)</td><td>)</td><td>#</td><td></td></tr><tr><td>#</td><td>#</td><td></td><td></td></tr></tbody></table><p>可见输入串 $(a, a)＃$ 是文法的句子。</p><p>4、证明下述文法不是 $LL(1)$ 的。</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow C$ \<br>C &amp;\rightarrow bA | aB \<br>A &amp;\rightarrow a | aC | bAA \<br>B &amp;\rightarrow b | bC | aBB<br>\end{split}<br>$$</p><p>能否构造一等价的文法，使其是 $LL(1)$ 的？并给出判断过程。</p><p>解：</p><p>题中文法的 SELECT 集如下：</p><p>$$<br>\begin{split}<br>&amp;SELECT(S \rightarrow C$) &#x3D; {b, a} \<br>&amp;SELECT(A \rightarrow a) &#x3D; {a} \<br>&amp;SELECT(A \rightarrow aC) &#x3D; {a} \<br>&amp;SELECT(A \rightarrow bAA) &#x3D; {b} \<br>&amp;SELECT(C \rightarrow bA) &#x3D; {b} \<br>&amp;SELECT(C \rightarrow aB) &#x3D; {a} \<br>&amp;SELECT(B \rightarrow b) &#x3D; {b} \<br>&amp;SELECT(B \rightarrow bc) &#x3D; {b} \<br>&amp;SELECT(B \rightarrow aBB) &#x3D; {a} \<br>\end{split}<br>$$</p><p>由于</p><p>$$<br>SELECT(A \rightarrow a) \cap SELECT(A \rightarrow ac) \cap SELECT(A \rightarrow bAA) \neq \varnothing<br>$$</p><p>所以该文法不是 $LL(1)$ 文法。</p><p>构造等价文法如下：</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow C$ \<br>C &amp;\rightarrow bA | aB \<br>A &amp;\rightarrow aN | bAA \<br>B &amp;\rightarrow bN | aBB \<br>N &amp;\rightarrow C | \varepsilon<br>\end{split}<br>$$</p><p>计算 $SELECT$ 集如下：</p><p>$$<br>\begin{split}<br>&amp;SELECT(S \rightarrow C$) &#x3D; {b, a} \<br>&amp;SELECT(C \rightarrow bA) &#x3D; {b} \<br>&amp;SELECT(C \rightarrow aB) &#x3D; {a} \<br>&amp;SELECT(A \rightarrow aN) &#x3D; {a} \<br>&amp;SELECT(A \rightarrow bAA) &#x3D; {b} \<br>&amp;SELECT(B \rightarrow bN) &#x3D; {b} \<br>&amp;SELECT(B \rightarrow aBB) &#x3D; {a} \<br>&amp;SELECT(N \rightarrow C) &#x3D; {b, a} \<br>&amp;SELECT(N \rightarrow \varepsilon) &#x3D; {a, b} \<br>\end{split}<br>$$</p><p>由于</p><p>$$<br>SELECT(N \rightarrow C) \cap SELECT(N \rightarrow \varepsilon) \neq \varnothing<br>$$</p><p>所以改写后的文法不是 $LL(1)$ 文法。</p><p>7、对于一个文法若消除了左递归，提取了左公共因子后是否一定为 $LL(1)$ 文法？试对下面的文法进行改写，并对改写后的文法进行判断。</p><p>$$<br>\begin{split}<br>(4) S &amp;\rightarrow AS | b \<br>A &amp;\rightarrow SA | a<br>\end{split}<br>$$</p><p>解：对文法进行改写如下：</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow AS | b \<br>A &amp;\rightarrow baA^{‘} | aA^{‘} \<br>A^{‘} &amp;\rightarrow SAA^{‘} | \varepsilon<br>\end{split}<br>$$</p><p>首先，消除左递归，</p><p>$$<br>\begin{split}<br>&amp;(0) ; S \rightarrow AS \<br>&amp;(1) ;S \rightarrow b \<br>&amp;(2) ;A \rightarrow baA^{‘}\<br>&amp;(3) ;A \rightarrow aA^{‘} \<br>&amp;(4) ;A^{‘} \rightarrow SAA^{‘} \<br>&amp;(5) ;A^{‘} \rightarrow \varepsilon<br>\end{split}<br>$$</p><p>然后，提取隐式公共因子，</p><p>然后计算各个符号的 $FIRST$ 集、$FOLLOW$ 集 以及文法的 $SELECT$ 集：</p><table><thead><tr><th>符号</th><th>$FIRST$</th><th>$FOLLOW$</th></tr></thead><tbody><tr><td>$S$</td><td>${a, b}$</td><td>${a, b}$</td></tr><tr><td>$A$</td><td>${a, b}$</td><td>${a, b}$</td></tr><tr><td>$A^{‘}$</td><td>${a, b, \varepsilon}$</td><td>${a, b}$</td></tr></tbody></table><p>$$<br>\begin{split}<br>&amp;SELECT(0) &#x3D; { a, b } \<br>&amp;SELECT(1) &#x3D; { b } \<br>&amp;SELECT(2) &#x3D; { b } \<br>&amp;SELECT(3) &#x3D; { a } \<br>&amp;SELECT(4) &#x3D; { a, b } \<br>&amp;SELECT(5) &#x3D; { a, b } \<br>\end{split}<br>$$</p><p>由于</p><p>$$<br>SELECT(0) \cap SELECT(1) \neq \varnothing<br>$$</p><p>所以改写后的文法不是 $LL(1)$ 文法。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库系统概论作业二</title>
    <link href="/2021/10/21/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E4%BD%9C%E4%B8%9A%E4%BA%8C/"/>
    <url>/2021/10/21/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E4%BD%9C%E4%B8%9A%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<blockquote><p>1、试述数据模型的概念、作用及数据模型的三个重要方面。</p></blockquote><p>解：</p><ul><li>概念：数据模型（data model）是一种模型，它是对现实世界数据特征的一种抽象。</li><li>作用：数据模型是用来描述数据、组织数据和对数据进行操作的。</li><li>三个重要方面：<ul><li>一是能比较真实地模拟现实世界</li><li>二是容易为人所理解</li><li>三是便于在计算机上实现</li></ul></li></ul><blockquote><p>2、试述层次数据库、网状数据库和关系数据库的优缺点。</p></blockquote><p>解：</p><ul><li>层次数据库：<ul><li>优点：<ul><li>数据结构比较简单清晰。</li><li>查询效率高。</li><li>提供了良好的完整性支持。</li></ul></li><li>缺点：<ul><li>现实世界中很多联系是非层次性的，这些联系不适合用层次模型表示</li><li>如果一个结点具有多个双亲结点等，用层次模型表示这类联系就很笨拙，只能通过引入冗余数据（易产生不一致性）或创建非自然的数据结构（引入虚拟结点）来解决。对插入和删除操作的限制比较多，因此应用程序的编写比较复杂。</li><li>查询子女结点必须通过双亲结点。</li><li>由于结构严密，层次命令趋于程序化。</li></ul></li></ul></li><li>网状数据库：<ul><li>优点：<ul><li>能够更为直观地描述现实世界。</li><li>具有良好的性能，存取效率较高。</li></ul></li><li>缺点：<ul><li>结构比较复杂。</li><li>DDL、DML 复杂，并且要嵌入某一种高级语言中。</li><li>用户必须了解系统结构的细节，加重了应用程序的负担。</li></ul></li></ul></li><li>关系数据库：<ul><li>优点：<ul><li>建立在严格的数学概念的基础上。</li><li>概念单一。</li><li>具有更高的数据独立性、更好的安全保密性。</li></ul></li><li>缺点：<ul><li>查询效率不高。</li></ul></li></ul></li></ul><blockquote><p>3、试述数据库模式的概念，说明子模式、概念模式和内模式之间的联系与区别，以及它们与数据独立性之间的联系。</p></blockquote><p>解：</p><p>数据库模式（schema）是数据库中全体数据的逻辑结构和特征的描述，它仅仅涉及型（type）的描述，不涉及具体的值（value）。</p><ul><li>子模式（外模式）<ul><li>是各个具体用户看到的数据视图，是用户与 DB 的接口。</li><li>可以有多个外模式</li><li>每个用户只关心与它有关的模式，屏蔽大量无关的信息，有利于数据保护</li><li>面向应用程序或最终用户</li></ul></li><li>概念模式<ul><li>是所有用户的公共数据视图</li><li>只有一个模式</li><li>数据库模式以某一种数据模型为基础，统一综合考虑所有用户的需求，并将这些需求有机结合成一个逻辑整体</li><li>有 DBA 定义</li></ul></li><li>内模式<ul><li>数据在数据库内部的表示方式</li><li>只有一个内模式</li><li>以前由 DBA 定义，现在基本由 DBMS 定义</li></ul></li></ul><p>这三个模式是数据的三个抽象级别，它把数据的具体组织留给数据库管理系统，保证了数据库系统中的数据能够具有较高的逻辑独立性和物理独立性。</p>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
      <tag>数据库系统概论</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《全唐诗》札记</title>
    <link href="/2021/10/18/%E3%80%8A%E5%85%A8%E5%94%90%E8%AF%97%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/18/%E3%80%8A%E5%85%A8%E5%94%90%E8%AF%97%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>找这本书来读的缘由是在《李清照词集》中遇到了“公孙大娘舞剑”的注释，我想了一下，公孙大娘算是老朋友了，这下总该要把杜甫的那首诗拿过来读一读吧，遂搜罗来《全唐诗》。令我惊讶的是，这是很大的一部大部头。不急，带着慢慢看吧。</p><blockquote><p>观公孙大娘弟子舞剑器行</p></blockquote><center>《观公孙大娘弟子舞剑器行》</center><br><center>昔有佳人公孙氏，一舞剑气动四方。</center><center>观者如山色沮丧，天地为之久低昂。</center><center>㸌如羿射九日落，矫如群帝骖龙翔。</center><center>来如雷霆收震怒，罢如江海凝清光。</center><center>绛唇珠袖两寂寞，况有弟子传芬芳。</center><center>临颍美人在白帝，妙舞此曲神扬扬。</center><center>与余问答既有以，感时抚事增惋伤。</center><center>先帝侍女八千人，公孙剑器初第一。</center><center>五十年间似反掌，风尘倾动昏王室。</center><center>梨园子弟散如烟，女乐馀姿映寒日。</center><center>金粟堆南木已拱，瞿唐石城草萧瑟。</center><center>玳筵急管曲复终，乐极哀来月东出。</center><center>老夫不知其所往，足茧荒山转愁疾。</center>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>文学</tag>
      
      <tag>古文</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《李清照词集（词系列）》札记</title>
    <link href="/2021/10/18/%E3%80%8A%E6%9D%8E%E6%B8%85%E7%85%A7%E8%AF%8D%E9%9B%86%EF%BC%88%E8%AF%8D%E7%B3%BB%E5%88%97%EF%BC%89%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/18/%E3%80%8A%E6%9D%8E%E6%B8%85%E7%85%A7%E8%AF%8D%E9%9B%86%EF%BC%88%E8%AF%8D%E7%B3%BB%E5%88%97%EF%BC%89%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211018000724.png"></p><p>上海古籍出版社。读这本书的缘由是某一天迎着秋风，回忆起李清照的《声声慢》，只记得“寻寻觅觅，冷冷清清，凄凄惨惨戚戚”这句，实在是惭愧。遂到 zlibrary 搜罗来这本集子，读一读，补一补记忆，加上现在也一直在读古文，说不定读来别有一番滋味。上一次遇到，是在高中的语文课本上，阔别多年，有点想念，当年摇头晃脑背来背去，结果还是给背忘了，没有办法呀，当年的早读课，除了唱歌解解困，还真没有啥剩下来的了。太困了。</p><p>近几天秋风正起，读一读李清照的词，亦不失为一种美事儿。</p><p>◆ 声声慢</p><center>《声声慢》</center><br><center>寻寻觅觅，冷冷清清，</center><center>凄凄惨惨戚戚。</center><center>乍暖还寒时候，</center><center>最难将息。</center><center>三杯两盏淡酒，</center><center>怎敌他、晚来风急？</center><center>雁过也，</center><center>正伤心，却是旧时相识。</center><br><center>满地黄花堆积，</center><center>憔悴损，如今有谁堪摘？</center><center>守著窗儿，</center><center>独自怎生得黑？</center><center>梧桐更兼细雨，</center><center>到黄昏、点点滴滴。</center><center>这次第，</center><center>怎一个愁字了得！</center><p>按：</p><ul><li>“乍暖还寒”，这个“还”字，我查阅了国语辞典和汉语大辞典，我觉得国语辞典要严谨一些。根据我个人的理解，我觉得在秋天，“还”应该读“huán”，在春天应该读“hái”。在春天，“乍”应作“突然，急促”来解释，而在秋天，则应作“刚刚”来解释。这里，“乍暖还寒”，意思大概就是刚刚还是很暖的天气，转瞬之间就变作寒天了。汉语大辞典中，“乍暖还寒”也作“乍暖乍寒”，这个的意思就很明显了。  </li><li>“守著窗儿”似又作“守定窗儿”，我是觉得“守定”这个词儿有点意思，在《繁花》里面似乎多有用“定”这个字儿在某一个动词单字后面，比如“看定”。  </li><li>“独自怎生得黑”，这是我最疑惑的一句，看来，果然如友人所说，诗词不能过分讲究合理性，那么，我就将“怎生”解释为“如何”，“得黑”，按字面意思就是得到天黑，解释为“挨到天黑”似乎比较合适，加上苏北有方言，“dēi 到”有等到的意思，恐怕，“得”解释为“等到”的意思亦无不可。  </li><li>“次第”，一个接一个，况状之辞。  </li><li>“了得”，济南章丘方言，意为了结。（徐培均《李清照集笺注》）</li></ul>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>文学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 数字图像处理实验一</title>
    <link href="/2021/10/17/Python-%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%AE%9E%E9%AA%8C%E4%B8%80/"/>
    <url>/2021/10/17/Python-%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%AE%9E%E9%AA%8C%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<h1 id="一、安装环境"><a href="#一、安装环境" class="headerlink" title="一、安装环境"></a>一、安装环境</h1><p>这个比较简单，直接一个 <code>pip</code> 命令安装即可：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install opencv-python<br></code></pre></td></tr></table></figure><p>然后，实验手册上建议的是使用 Python 虚拟环境，这个也比较简单，但是，我的笔记本上的 Python 物理环境暂时不需要作其他用途，所以，就直接用这个 Python 来做实验了。</p><p>关于写 Python 的 IDE，这里推荐使用 PyCharm。</p><h1 id="二、实验内容"><a href="#二、实验内容" class="headerlink" title="二、实验内容"></a>二、实验内容</h1><h2 id="2-1-图像的读取和保存"><a href="#2-1-图像的读取和保存" class="headerlink" title="2.1 图像的读取和保存"></a>2.1 图像的读取和保存</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : test01.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/10/15</span><br><br><span class="hljs-comment"># 读取图片</span><br><span class="hljs-comment"># 可以选择简单退出</span><br><span class="hljs-comment"># 或者选择保存到另一张图片之后再退出</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br><br>img = cv2.imread(<span class="hljs-string">&#x27;./pictures/test.png&#x27;</span>, <span class="hljs-number">0</span>) <span class="hljs-comment"># 试着修改 0 为 1</span><br>cv2.imshow(<span class="hljs-string">&#x27;image&#x27;</span>, img)<br>k = cv2.waitKey(<span class="hljs-number">0</span>)<br><span class="hljs-keyword">if</span> k == <span class="hljs-number">27</span>:<br>    cv2.destroyAllWindows() <span class="hljs-comment"># wait for ESC key to exit</span><br><span class="hljs-keyword">elif</span> k == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;s&#x27;</span>): <span class="hljs-comment"># wait for &#x27;s&#x27; key to save and exit</span><br>    cv2.imwrite(<span class="hljs-string">&#x27;./pictures/test2.jpg&#x27;</span>, img)<br>    cv2.destroyAllWindows()<br></code></pre></td></tr></table></figure><h2 id="2-2-读取视频文件，显示视频，保存视频文件"><a href="#2-2-读取视频文件，显示视频，保存视频文件" class="headerlink" title="2.2 读取视频文件，显示视频，保存视频文件"></a>2.2 读取视频文件，显示视频，保存视频文件</h2><h3 id="2-2-1-读取并显示视频"><a href="#2-2-1-读取并显示视频" class="headerlink" title="2.2.1 读取并显示视频"></a>2.2.1 读取并显示视频</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : test02.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/10/15</span><br><br><span class="hljs-comment"># 读取视频内容</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br><br>cap = cv2.VideoCapture(<span class="hljs-string">&#x27;./pictures/vtest.avi&#x27;</span>)<br><span class="hljs-keyword">while</span>(cap.isOpened()): <span class="hljs-comment"># 当上面的 VideoCapture 类初始化完毕之后，isOpened() 就会返回 true</span><br>    ret, frame = cap.read() <span class="hljs-comment"># read() --&gt; Grabs, decodes and returns the next video frame.</span><br>    <span class="hljs-keyword">if</span> ret: <span class="hljs-comment"># 如果还有下一帧</span><br>        gray = cv2.cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)<br>        cv2.imshow(<span class="hljs-string">&#x27;frame&#x27;</span>, gray)<br>    <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>): <span class="hljs-comment"># 按 q 退出</span><br>        <span class="hljs-keyword">break</span><br>cap.release()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></table></figure><h3 id="2-2-2-从摄像头获取图像并保存为视频文件"><a href="#2-2-2-从摄像头获取图像并保存为视频文件" class="headerlink" title="2.2.2 从摄像头获取图像并保存为视频文件"></a>2.2.2 从摄像头获取图像并保存为视频文件</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : test03.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/10/15</span><br><br><span class="hljs-comment"># 注意，这里似乎有点问题，这个摄像头捕获的文件是怎么确认的？</span><br><br><span class="hljs-comment"># 从摄像头中捕获视频，沿水平方向旋转每一帧并保存它</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br><br>cap = cv2.VideoCapture(<span class="hljs-number">0</span>) <span class="hljs-comment"># 摄像头编号</span><br><br><span class="hljs-comment"># Define the codec and create VideoWriter object</span><br>fourcc = cv2.VideoWriter_fourcc(*<span class="hljs-string">&#x27;XVID&#x27;</span>) <span class="hljs-comment"># 注意编码器，这里是指定 FourCC 编码</span><br>out = cv2.VideoWriter(<span class="hljs-string">&#x27;./pictures/output.avi&#x27;</span>, fourcc, <span class="hljs-number">20.0</span>, (<span class="hljs-number">640</span>, <span class="hljs-number">480</span>)) <span class="hljs-comment"># 第三个参数是帧数</span><br><br><span class="hljs-keyword">while</span>(cap.isOpened()):<br>    ret, frame = cap.read()<br>    <span class="hljs-keyword">if</span> ret == <span class="hljs-literal">True</span>:<br>        frame = cv2.flip(frame, <span class="hljs-number">0</span>) <span class="hljs-comment"># 翻转图像，垂直翻转</span><br>        <span class="hljs-comment"># write the flipped frame</span><br>        out.write(frame)<br>        cv2.imshow(<span class="hljs-string">&#x27;frame&#x27;</span>, frame)<br>    <span class="hljs-keyword">if</span> cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span> == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;q&#x27;</span>):<br>        <span class="hljs-keyword">break</span><br><br><span class="hljs-comment"># Release everything if job is finished</span><br>cap.release()<br>out.release()<br>cv2.destroyAllWindows()<br></code></pre></td></tr></table></figure><h2 id="2-3-opencv-画图"><a href="#2-3-opencv-画图" class="headerlink" title="2.3 opencv 画图"></a>2.3 opencv 画图</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : test04.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/10/15</span><br><br><span class="hljs-comment"># OpenCV 绘制图形</span><br><br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><span class="hljs-keyword">import</span> cv2<br><br><span class="hljs-comment"># Create a black image</span><br>img = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8) <span class="hljs-comment"># np.uint8 是数据类型</span><br><br><span class="hljs-comment"># Draw a diagonal blue line with thickness of 5 px</span><br><span class="hljs-comment"># 绘制直线</span><br>cv2.line(img, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">511</span>, <span class="hljs-number">511</span>), (<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>), <span class="hljs-number">5</span>)<br><span class="hljs-comment"># 绘制矩形</span><br>cv2.rectangle(img, (<span class="hljs-number">384</span>, <span class="hljs-number">0</span>), (<span class="hljs-number">510</span>, <span class="hljs-number">128</span>), (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), <span class="hljs-number">3</span>)<br><span class="hljs-comment"># 绘制圆</span><br>cv2.circle(img, (<span class="hljs-number">447</span>, <span class="hljs-number">63</span>), <span class="hljs-number">63</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), -<span class="hljs-number">1</span>)<br><span class="hljs-comment"># 绘制椭圆</span><br>cv2.ellipse(img, (<span class="hljs-number">256</span>, <span class="hljs-number">256</span>), (<span class="hljs-number">100</span>, <span class="hljs-number">50</span>), <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">180</span>, <span class="hljs-number">255</span>, -<span class="hljs-number">1</span>)<br><span class="hljs-comment"># 绘制多边形</span><br>pts = np.array([[<span class="hljs-number">10</span>, <span class="hljs-number">5</span>], [<span class="hljs-number">20</span>, <span class="hljs-number">30</span>], [<span class="hljs-number">70</span>, <span class="hljs-number">20</span>], [<span class="hljs-number">50</span>, <span class="hljs-number">10</span>]], np.int32)<br>pts = pts.reshape((-<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>))<br>cv2.polylines(img, [pts], <span class="hljs-literal">True</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>))<br><span class="hljs-comment"># 绘制文字</span><br>linetype = cv2.LINE_AA<br>font = cv2.FONT_HERSHEY_SIMPLEX<br>cv2.putText(img, <span class="hljs-string">&#x27;OpenCV&#x27;</span>, (<span class="hljs-number">10</span>, <span class="hljs-number">500</span>), font, <span class="hljs-number">4</span>, (<span class="hljs-number">255</span>, <span class="hljs-number">255</span>, <span class="hljs-number">255</span>), <span class="hljs-number">2</span>)<br>cv2.imshow(<span class="hljs-string">&#x27;image&#x27;</span>, img) <span class="hljs-comment"># 显示直线</span><br>cv2.waitKey (<span class="hljs-number">1000</span>) <span class="hljs-comment"># 显示 1000 ms 即 1s 后消失</span><br>cv2.destroyAllWindows()<br></code></pre></td></tr></table></figure><p>运行结果：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211017201636.png"></p><h2 id="2-4-opencv-处理鼠标事件"><a href="#2-4-opencv-处理鼠标事件" class="headerlink" title="2.4 opencv 处理鼠标事件"></a>2.4 opencv 处理鼠标事件</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : test05.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/10/15</span><br><br><span class="hljs-comment"># 处理鼠标事件</span><br><br><span class="hljs-keyword">import</span> cv2<br><span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np<br><br><span class="hljs-comment"># 当鼠标按下时变为 True</span><br>drawing = <span class="hljs-literal">False</span><br><span class="hljs-comment"># 如果 mode 为 True 绘制矩形，按下 &#x27;m&#x27; 变成绘制曲线</span><br>mode = <span class="hljs-literal">True</span><br>ix, iy = -<span class="hljs-number">1</span>, -<span class="hljs-number">1</span><br><span class="hljs-comment"># 创建回调函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">draw_circle</span>(<span class="hljs-params">event, x, y, flags, param</span>):<br>    <span class="hljs-keyword">global</span> ix, iy, drawing, mode<br>    <span class="hljs-comment"># 当按下左键时返回起始位置坐标</span><br>    <span class="hljs-keyword">if</span> event == cv2.EVENT_LBUTTONDOWN:<br>        drawing = <span class="hljs-literal">True</span><br>        ix, iy = x, y<br>    <span class="hljs-comment"># 当鼠标左键按下并移动时绘制图形，event 可以查看移动，flag 查看是否按下</span><br>    <span class="hljs-keyword">elif</span> event == cv2.EVENT_MOUSEMOVE <span class="hljs-keyword">and</span> flags == cv2.EVENT_FLAG_LBUTTON:<br>        <span class="hljs-keyword">if</span> drawing == <span class="hljs-literal">True</span>:<br>            <span class="hljs-keyword">if</span> mode == <span class="hljs-literal">True</span>:<br>                cv2.rectangle(img, (ix, iy), (x, y), (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), -<span class="hljs-number">1</span>)<br>            <span class="hljs-keyword">else</span>:<br>                r = <span class="hljs-built_in">int</span>(np.sqrt((x - ix) ** <span class="hljs-number">2</span> + (y - iy) ** <span class="hljs-number">2</span>))<br>                cv2.circle(img, (x, y), r, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), -<span class="hljs-number">1</span>)<br>    <span class="hljs-comment"># 当鼠标松开时停止绘画</span><br>    <span class="hljs-keyword">elif</span> event == cv2.EVENT_LBUTTONUP:<br>        <span class="hljs-keyword">if</span> mode == <span class="hljs-literal">True</span>:<br>            cv2.rectangle(img, (ix, iy), (x, y), (<span class="hljs-number">0</span>, <span class="hljs-number">255</span>, <span class="hljs-number">0</span>), -<span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">else</span>:<br>            cv2.circle(img, (x, y), <span class="hljs-number">5</span>, (<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>), -<span class="hljs-number">1</span>)<br><br>img = np.zeros((<span class="hljs-number">512</span>, <span class="hljs-number">512</span>, <span class="hljs-number">3</span>), np.uint8)<br>cv2.namedWindow(<span class="hljs-string">&#x27;image&#x27;</span>)<br>cv2.setMouseCallback(<span class="hljs-string">&#x27;image&#x27;</span>, draw_circle)<br><span class="hljs-keyword">while</span>(<span class="hljs-number">1</span>):<br>    cv2.imshow(<span class="hljs-string">&#x27;image&#x27;</span>, img)<br>    k = cv2.waitKey(<span class="hljs-number">1</span>) &amp; <span class="hljs-number">0xFF</span><br>    <span class="hljs-keyword">if</span> k == <span class="hljs-built_in">ord</span>(<span class="hljs-string">&#x27;m&#x27;</span>):<br>        mode = <span class="hljs-keyword">not</span> mode<br>    <span class="hljs-keyword">elif</span> k == <span class="hljs-number">27</span>:<br>        <span class="hljs-keyword">break</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211017202439.png"></p>]]></content>
    
    
    <categories>
      
      <category>数字图像处理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>数字图像处理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>博客问题簿子</title>
    <link href="/2021/10/17/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E7%B0%BF%E5%AD%90/"/>
    <url>/2021/10/17/%E5%8D%9A%E5%AE%A2%E9%97%AE%E9%A2%98%E7%B0%BF%E5%AD%90/</url>
    
    <content type="html"><![CDATA[<blockquote><p>井号 ＃ 渲染的问题</p></blockquote><p>在 LaTex 语句块中，不能够使用 <code>\text&#123;&#125;</code> 命令然后直接在花括号中加上＃。<br>可以使用的方法是使用反斜杠然后加键盘上自带的＃。<br>现在，我发现更好的写法是全角的＃。</p>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hexo 配置 fluid 主题</title>
    <link href="/2021/10/16/Hexo-%E9%85%8D%E7%BD%AE-fluid-%E4%B8%BB%E9%A2%98/"/>
    <url>/2021/10/16/Hexo-%E9%85%8D%E7%BD%AE-fluid-%E4%B8%BB%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>关于这个主题的使用，<a href="https://fluid-dev.github.io/hexo-fluid-docs">官方文档</a> 写得非常详细，十分推荐使用。</p><p>关于安装这个主题，我个人推荐直接使用文档中的方式一：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016175914.png"></p><p>然后，基本上所有的操作按照官方文档来就可以了。</p><p>这里给出我个人的配置，供参考：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># Hexo Theme Fluid</span><br><span class="hljs-comment"># Author: Fluid-dev</span><br><span class="hljs-comment"># Github: https://github.com/fluid-dev/hexo-theme-fluid</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 配置指南: https://hexo.fluid-dev.com/docs/guide/</span><br><span class="hljs-comment"># 你可以从指南中获得更详细的说明</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Guide: https://hexo.fluid-dev.com/docs/en/guide/</span><br><span class="hljs-comment"># You can get more detailed help from the guide</span><br><span class="hljs-comment">#---------------------------</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 全局</span><br><span class="hljs-comment"># Global</span><br><span class="hljs-comment">#---------------------------</span><br><br><span class="hljs-comment"># 用于浏览器标签的图标</span><br><span class="hljs-comment"># Icon for browser tab</span><br><span class="hljs-attr">favicon:</span> <span class="hljs-string">/img/myfavicon.png</span><br><br><span class="hljs-comment"># 用于苹果设备的图标</span><br><span class="hljs-comment"># Icon for Apple touch</span><br><span class="hljs-attr">apple_touch_icon:</span> <span class="hljs-string">/img/favicon.ico</span><br><br><span class="hljs-comment"># 浏览器标签页中的标题分隔符，效果： 文章名 - 站点名</span><br><span class="hljs-comment"># Title separator in browser tab, eg: article - site</span><br><span class="hljs-attr">tab_title_separator:</span> <span class="hljs-string">&quot; - &quot;</span><br><br><span class="hljs-comment"># 强制所有链接升级为 HTTPS（适用于图片等资源出现 HTTP 混入报错）</span><br><span class="hljs-comment"># Force all links to be HTTPS (applicable to HTTP mixed error)</span><br><span class="hljs-attr">force_https:</span> <span class="hljs-literal">false</span><br><br><span class="hljs-comment"># 代码块的增强配置</span><br><span class="hljs-comment"># Enhancements to code blocks</span><br><span class="hljs-attr">code:</span><br>  <span class="hljs-comment"># 是否开启复制代码的按钮</span><br>  <span class="hljs-comment"># Enable copy code button</span><br>  <span class="hljs-attr">copy_btn:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 代码高亮</span><br>  <span class="hljs-comment"># Code highlight</span><br>  <span class="hljs-attr">highlight:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 代码块是否显示行号</span><br>    <span class="hljs-comment"># If true, the code block display line numbers</span><br>    <span class="hljs-attr">line_number:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 实现高亮的库，对应下面的设置</span><br>    <span class="hljs-comment"># Highlight library</span><br>    <span class="hljs-comment"># Options: highlightjs | prismjs</span><br>    <span class="hljs-attr">lib:</span> <span class="hljs-string">&quot;highlightjs&quot;</span><br><br>    <span class="hljs-attr">highlightjs:</span><br>      <span class="hljs-comment"># 在链接中挑选 style 填入</span><br>      <span class="hljs-comment"># Select a style in the link</span><br>      <span class="hljs-comment"># See: https://highlightjs.org/static/demo/</span><br>      <span class="hljs-attr">style:</span> <span class="hljs-string">&quot;Atom One Dark&quot;</span><br><br>      <span class="hljs-comment"># 是否根据 style 改变代码背景色（如果 style 是深色背景别忘了开启此项）</span><br>      <span class="hljs-comment"># If true, the code background will change color based on the style (If style has a dark background, don&#x27;t forget to true)</span><br>      <span class="hljs-attr">bg_color:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-attr">prismjs:</span><br>      <span class="hljs-comment"># 在下方链接页面右侧的圆形按钮挑选 style 填入，也可以直接填入 css 链接</span><br>      <span class="hljs-comment"># Select the style button on the right side of the link page, you can also set the CSS link</span><br>      <span class="hljs-comment"># See: https://prismjs.com/</span><br>      <span class="hljs-attr">style:</span> <span class="hljs-string">&quot;default&quot;</span><br><br>      <span class="hljs-comment"># 设为 true 高亮将本地静态生成（并只支持部分 prismjs 插件），设为 false 高亮将在浏览器通过 js 生成</span><br>      <span class="hljs-comment"># If true, it will be generated locally (but some prismjs plugins are not supported). If false, it will be generated via JS in the browser</span><br>      <span class="hljs-attr">preprocess:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># 一些好玩的功能</span><br><span class="hljs-comment"># Some fun features</span><br><span class="hljs-attr">fun_features:</span><br>  <span class="hljs-comment"># 为 subtitle 添加打字机效果</span><br>  <span class="hljs-comment"># Typing animation for subtitle</span><br>  <span class="hljs-attr">typing:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 打印速度，数字越大越慢</span><br>    <span class="hljs-comment"># Typing speed, the larger the number, the slower</span><br>    <span class="hljs-attr">typeSpeed:</span> <span class="hljs-number">70</span><br><br>    <span class="hljs-comment"># 游标字符</span><br>    <span class="hljs-comment"># Cursor character</span><br>    <span class="hljs-attr">cursorChar:</span> <span class="hljs-string">&quot;_&quot;</span><br><br>    <span class="hljs-comment"># 是否循环播放效果</span><br>    <span class="hljs-comment"># If true, loop animation</span><br>    <span class="hljs-attr">loop:</span> <span class="hljs-literal">false</span><br><br>  <span class="hljs-comment"># 为文章内容中的标题添加锚图标</span><br>  <span class="hljs-comment"># Add an anchor icon to the title on the post page</span><br>  <span class="hljs-attr">anchorjs:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">element:</span> <span class="hljs-string">h1,h2,h3,h4,h5,h6</span><br>    <span class="hljs-attr">placement:</span> <span class="hljs-string">right</span><br>    <span class="hljs-comment"># Options: hover | always | touch</span><br>    <span class="hljs-attr">visible:</span> <span class="hljs-string">hover</span><br>    <span class="hljs-comment"># Option：§ | # | ❡</span><br>    <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;&quot;</span><br><br>  <span class="hljs-comment"># 加载进度条</span><br>  <span class="hljs-comment"># Progress bar when loading</span><br>  <span class="hljs-attr">progressbar:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">height_px:</span> <span class="hljs-number">3</span><br>    <span class="hljs-attr">color:</span> <span class="hljs-string">&quot;#29d&quot;</span><br>    <span class="hljs-comment"># See: https://github.com/rstacruz/nprogress</span><br>    <span class="hljs-attr">options:</span> &#123; <span class="hljs-attr">showSpinner:</span> <span class="hljs-literal">false</span>, <span class="hljs-attr">trickleSpeed:</span> <span class="hljs-number">100</span> &#125;<br><br><span class="hljs-comment"># 主题暗色模式，开启后菜单中会出现切换按钮，用户浏览器会存储切换选项，并且会遵循 prefers-color-scheme 自动切换</span><br><span class="hljs-comment"># Theme dark mode. If enable, a switch button will appear on the menu, each of the visitor&#x27;s browser will store his switch option</span><br><span class="hljs-attr">dark_mode:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-comment"># 默认的选项（当用户手动切换后则不再按照默认模式），选择 `auto` 会优先遵循 prefers-color-scheme，其次按用户本地时间 18 点到次日 6 点之间进入暗色模式</span><br>  <span class="hljs-comment"># Default option (when the visitor switches manually, the default mode is no longer followed), choosing `auto` will give priority to prefers-color-scheme, and then enter the dark mode from 18:00 to 6:00 in the visitor’s local time</span><br>  <span class="hljs-comment"># Options: auto | light | dark</span><br>  <span class="hljs-attr">default:</span> <span class="hljs-string">dark</span><br><br><span class="hljs-comment"># 主题颜色配置，其他不生效的地方请使用自定义 css 解决，配色可以在下方链接中获得启发</span><br><span class="hljs-comment"># Theme color, please use custom CSS to solve other colors, color schema can be inspired by the links below</span><br><span class="hljs-comment"># See: https://www.webdesignrankings.com/resources/lolcolors/</span><br><span class="hljs-attr">color:</span><br>  <span class="hljs-comment"># body 背景色</span><br>  <span class="hljs-comment"># Color of body background</span><br>  <span class="hljs-attr">body_bg_color:</span> <span class="hljs-string">&quot;#eee&quot;</span><br>  <span class="hljs-comment"># 暗色模式下的 body 背景色，下同</span><br>  <span class="hljs-comment"># Color in dark mode, the same below</span><br>  <span class="hljs-attr">body_bg_color_dark:</span> <span class="hljs-string">&quot;#181c27&quot;</span><br><br>  <span class="hljs-comment"># 顶部菜单背景色</span><br>  <span class="hljs-comment"># Color of navigation bar background</span><br>  <span class="hljs-attr">navbar_bg_color:</span> <span class="hljs-string">&quot;#2f4154&quot;</span><br>  <span class="hljs-attr">navbar_bg_color_dark:</span> <span class="hljs-string">&quot;#1f3144&quot;</span><br><br>  <span class="hljs-comment"># 顶部菜单字体色</span><br>  <span class="hljs-comment"># Color of navigation bar text</span><br>  <span class="hljs-attr">navbar_text_color:</span> <span class="hljs-string">&quot;#fff&quot;</span><br>  <span class="hljs-attr">navbar_text_color_dark:</span> <span class="hljs-string">&quot;#d0d0d0&quot;</span><br><br>  <span class="hljs-comment"># 全局字体色</span><br>  <span class="hljs-comment"># Color of global text</span><br>  <span class="hljs-attr">text_color:</span> <span class="hljs-string">&quot;#3c4858&quot;</span><br>  <span class="hljs-attr">text_color_dark:</span> <span class="hljs-string">&quot;#c4c6c9&quot;</span><br><br>  <span class="hljs-comment"># 全局次级字体色（摘要、简介等位置）</span><br>  <span class="hljs-comment"># Color of global secondary text (excerpt, introduction, etc.)</span><br>  <span class="hljs-attr">sec_text_color:</span> <span class="hljs-string">&quot;#718096&quot;</span><br>  <span class="hljs-attr">sec_text_color_dark:</span> <span class="hljs-string">&quot;#a7a9ad&quot;</span><br><br>  <span class="hljs-comment"># 文章正文字体色</span><br>  <span class="hljs-comment"># Color of post text</span><br>  <span class="hljs-attr">post_text_color:</span> <span class="hljs-string">&quot;#2c3e50&quot;</span><br>  <span class="hljs-attr">post_text_color_dark:</span> <span class="hljs-string">&quot;#c4c6c9&quot;</span><br><br>  <span class="hljs-comment"># 文章正文字体色（h1 h2 h3...）</span><br>  <span class="hljs-comment"># Color of Article heading (h1 h2 h3...)</span><br>  <span class="hljs-attr">post_heading_color:</span> <span class="hljs-string">&quot;#1a202c&quot;</span><br>  <span class="hljs-attr">post_heading_color_dark:</span> <span class="hljs-string">&quot;#c4c6c9&quot;</span><br><br>  <span class="hljs-comment"># 文章超链接字体色</span><br>  <span class="hljs-comment"># Color of post link</span><br>  <span class="hljs-attr">post_link_color:</span> <span class="hljs-string">&quot;#0366d6&quot;</span><br>  <span class="hljs-attr">post_link_color_dark:</span> <span class="hljs-string">&quot;#1589e9&quot;</span><br><br>  <span class="hljs-comment"># 超链接悬浮时字体色</span><br>  <span class="hljs-comment"># Color of link when hovering</span><br>  <span class="hljs-attr">link_hover_color:</span> <span class="hljs-string">&quot;#30a9de&quot;</span><br>  <span class="hljs-attr">link_hover_color_dark:</span> <span class="hljs-string">&quot;#30a9de&quot;</span><br><br>  <span class="hljs-comment"># 超链接悬浮背景色</span><br>  <span class="hljs-comment"># Color of link background when hovering</span><br>  <span class="hljs-attr">link_hover_bg_color:</span> <span class="hljs-string">&quot;#f8f9fa&quot;</span><br>  <span class="hljs-attr">link_hover_bg_color_dark:</span> <span class="hljs-string">&quot;#364151&quot;</span><br><br>  <span class="hljs-comment"># 主面板背景色</span><br>  <span class="hljs-comment"># Color of main board</span><br>  <span class="hljs-attr">board_color:</span> <span class="hljs-string">&quot;#fff&quot;</span><br>  <span class="hljs-attr">board_color_dark:</span> <span class="hljs-string">&quot;#252d38&quot;</span><br><br><span class="hljs-comment"># 主题字体配置</span><br><span class="hljs-comment"># Font</span><br><span class="hljs-attr">font:</span><br>  <span class="hljs-attr">font_size:</span> <span class="hljs-string">16px</span><br>  <span class="hljs-attr">font_family:</span><br>  <span class="hljs-attr">code_font_size:</span> <span class="hljs-number">85</span><span class="hljs-string">%</span><br><br><span class="hljs-comment"># 指定自定义 .js 文件路径，支持列表；路径是相对 source 目录，如 /js/custom.js 对应存放目录 source/js/custom.js</span><br><span class="hljs-comment"># Specify the path of your custom js file, support list. The path is relative to the source directory, such as `/js/custom.js` corresponding to the directory `source/js/custom.js`</span><br><span class="hljs-attr">custom_js:</span><br><br><span class="hljs-comment"># 指定自定义 .css 文件路径，用法和 custom_js 相同</span><br><span class="hljs-comment"># The usage is the same as custom_js</span><br><span class="hljs-attr">custom_css:</span> <span class="hljs-string">/css/custom.css</span><br><br><span class="hljs-comment"># 自定义 &lt;head&gt; 节点中的 HTML 内容</span><br><span class="hljs-comment"># Customize &lt;head&gt; HTML content</span><br><span class="hljs-attr">custom_head:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># 自定义底部 HTML 内容（位于 footer 上方），注意不要和 `post: custom` 配置冲突</span><br><span class="hljs-comment"># Customize the HTML content at the bottom (located above the footer), be careful not to conflict with `post: custom`</span><br><span class="hljs-attr">custom_html:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># 网页访问统计</span><br><span class="hljs-comment"># Analysis of website visitors</span><br><span class="hljs-attr">web_analytics:</span>  <span class="hljs-comment"># 网页访问统计</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>  <span class="hljs-comment"># 百度统计的 Key，值需要获取下方链接中 `hm.js?` 后边的字符串</span><br>  <span class="hljs-comment"># Baidu analytics, get the string behind `hm.js?`</span><br>  <span class="hljs-comment"># See: https://tongji.baidu.com/sc-web/10000033910/home/site/getjs?siteId=13751376</span><br>  <span class="hljs-attr">baidu:</span><br><br>  <span class="hljs-comment"># Google 统计的 Tracking ID</span><br>  <span class="hljs-comment"># Google analytics, set Tracking ID</span><br>  <span class="hljs-comment"># See: https://developers.google.com/analytics/devguides/collection/analyticsjs</span><br>  <span class="hljs-attr">google:</span><br><br>  <span class="hljs-comment"># Google gtag.js 的媒体资源 ID</span><br>  <span class="hljs-comment"># Google gtag.js GA_MEASUREMENT_ID</span><br>  <span class="hljs-comment"># See: https://developers.google.com/analytics/devguides/collection/gtagjs/</span><br>  <span class="hljs-attr">gtag:</span><br><br>  <span class="hljs-comment"># 腾讯统计的 H5 App ID，开启高级功能才有cid</span><br>  <span class="hljs-comment"># Tencent analytics, set APP ID</span><br>  <span class="hljs-comment"># See: https://mta.qq.com/h5/manage/ctr_app_manage</span><br>  <span class="hljs-attr">tencent:</span><br>    <span class="hljs-attr">sid:</span><br>    <span class="hljs-attr">cid:</span><br><br>  <span class="hljs-comment"># 51.la 站点统计 ID</span><br>  <span class="hljs-comment"># 51.la analytics</span><br>  <span class="hljs-comment"># See: https://www.51.la/user/site/index</span><br>  <span class="hljs-attr">woyaola:</span>  <span class="hljs-comment"># 51.la 站点统计 ID，参见</span><br><br>  <span class="hljs-comment"># 友盟/cnzz 站点统计 web_id</span><br>  <span class="hljs-comment"># cnzz analytics</span><br>  <span class="hljs-comment"># See: https://web.umeng.com/main.php?c=site&amp;a=show</span><br>  <span class="hljs-attr">cnzz:</span><br><br>  <span class="hljs-comment"># LeanCloud 计数统计，可用于 PV UV 展示，如果 `web_analytics: enable` 没有开启，PV UV 展示只会查询不会增加</span><br>  <span class="hljs-comment"># LeanCloud count statistics, which can be used for PV UV display. If `web_analytics: enable` is false, PV UV display will only query and not increase</span><br>  <span class="hljs-attr">leancloud:</span><br>    <span class="hljs-attr">app_id:</span><br>    <span class="hljs-attr">app_key:</span><br>    <span class="hljs-comment"># REST API 服务器地址，国际版不填</span><br>    <span class="hljs-comment"># Only the Chinese mainland users need to set</span><br>    <span class="hljs-attr">server_url:</span><br><br><span class="hljs-comment"># 对页面中的图片和评论插件进行懒加载处理，可见范围外的元素不会提前加载</span><br><span class="hljs-comment"># Lazy loading of images and comment plugin on the page</span><br><span class="hljs-attr">lazyload:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 加载时的占位图片</span><br>  <span class="hljs-comment"># The placeholder image when loading</span><br>  <span class="hljs-attr">loading_img:</span> <span class="hljs-string">/img/loading.gif</span><br><br>  <span class="hljs-comment"># 开启后懒加载仅在文章页生效，如果自定义页面需要使用，可以在 Front-matter 里指定 `lazyload: true`</span><br>  <span class="hljs-comment"># If true, only enable lazyload on the post page. For custom pages, you can set &#x27;lazyload: true&#x27; in front-matter</span><br>  <span class="hljs-attr">onlypost:</span> <span class="hljs-literal">false</span><br><br>  <span class="hljs-comment"># 触发加载的偏移倍数，基数是视窗高度，可根据部署环境的请求速度调节</span><br>  <span class="hljs-comment"># The factor of viewport height that triggers loading</span><br>  <span class="hljs-attr">offset_factor:</span> <span class="hljs-number">2</span><br><br><span class="hljs-comment"># 图标库，包含了大量社交类图标，主题依赖的不包含在内，因此可自行修改，详见 https://hexo.fluid-dev.com/docs/icon/</span><br><span class="hljs-comment"># Icon library, which includes many social icons, does not include those theme dependent, so your can modify link by yourself. See: https://hexo.fluid-dev.com/docs/en/icon/</span><br><span class="hljs-attr">iconfont:</span> <span class="hljs-string">//at.alicdn.com/t/font_1736178_kmeydafke9r.css</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 页头</span><br><span class="hljs-comment"># Header</span><br><span class="hljs-comment">#---------------------------</span><br><br><span class="hljs-comment"># 导航栏的相关配置</span><br><span class="hljs-comment"># Navigation bar</span><br><span class="hljs-attr">navbar:</span><br>  <span class="hljs-comment"># 导航栏左侧的标题，为空则按 hexo config 中 `title` 显示</span><br>  <span class="hljs-comment"># The title on the left side of the navigation bar. If empty, it is based on `title` in hexo config</span><br>  <span class="hljs-attr">blog_title:</span> <span class="hljs-string">&quot;Fany Full&#x27;s Blog&quot;</span><br><br>  <span class="hljs-comment"># 导航栏毛玻璃特效，实验性功能，可能会造成页面滚动掉帧和抖动，部分浏览器不支持会自动不生效</span><br>  <span class="hljs-comment"># Navigation bar frosted glass special animation. It is an experimental feature</span><br>  <span class="hljs-attr">ground_glass:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 模糊像素，只能为数字，数字越大模糊度越高</span><br>    <span class="hljs-comment"># Number of blurred pixel. the larger the number, the higher the blur</span><br>    <span class="hljs-attr">px:</span> <span class="hljs-number">3</span><br><br>    <span class="hljs-comment"># 不透明度，数字越大透明度越低，注意透明过度可能看不清菜单字体</span><br>    <span class="hljs-comment"># Ratio of opacity, 1.0 is completely opaque</span><br>    <span class="hljs-comment"># available: 0 - 1.0</span><br>    <span class="hljs-attr">alpha:</span> <span class="hljs-number">0.7</span><br><br>  <span class="hljs-comment"># 导航栏菜单，可自行增减，key 用来关联 languages/*.yml，如不存在关联则显示 key 本身的值；icon 是 css class，可以省略；增加 name 可以强制显示指定名称</span><br>  <span class="hljs-comment"># Navigation bar menu. `key` is used to associate languages/*.yml. If there is no association, the value of `key` itself will be displayed; if `icon` is a css class, it can be omitted; adding `name` can force the display of the specified name</span><br>  <span class="hljs-attr">menu:</span><br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;home&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-home-fill&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;archive&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/archives/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-archive-fill&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;category&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/categories/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-category-fill&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;tag&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/tags/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-tags-fill&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">key:</span> <span class="hljs-string">&quot;about&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;/about/&quot;</span>, <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-user-fill&quot;</span> &#125;<br>    <span class="hljs-comment">#- &#123; key: &quot;links&quot;, link: &quot;/links/&quot;, icon: &quot;iconfont icon-link-fill&quot; &#125;</span><br><br><span class="hljs-comment"># 搜索功能，基于 hexo-generator-search 插件，若已安装其他搜索插件请关闭此功能，以避免生成多余的索引文件</span><br><span class="hljs-comment"># Search feature, based on hexo-generator-search. If you have installed other search plugins, please disable this feature to avoid generating redundant index files</span><br><span class="hljs-attr">search:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 搜索索引文件的路径，可以是相对路径或外站的绝对路径</span><br>  <span class="hljs-comment"># Path for search index file, it can be a relative path or an absolute path</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">/local-search.xml</span><br><br>  <span class="hljs-comment"># 文件生成在本地的位置，必须是相对路径</span><br>  <span class="hljs-comment"># The location where the index file is generated locally, it must be a relative location</span><br>  <span class="hljs-attr">generate_path:</span> <span class="hljs-string">/local-search.xml</span><br><br>  <span class="hljs-comment"># 搜索的范围</span><br>  <span class="hljs-comment"># Search field</span><br>  <span class="hljs-comment"># Options: post | page | all</span><br>  <span class="hljs-attr">field:</span> <span class="hljs-string">post</span><br><br>  <span class="hljs-comment"># 搜索是否扫描正文</span><br>  <span class="hljs-comment"># If true, search will scan the post content</span><br>  <span class="hljs-attr">content:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># 首屏图片的相关配置</span><br><span class="hljs-comment"># Config of the big image on the first screen</span><br><span class="hljs-attr">banner:</span><br>  <span class="hljs-comment"># 视差滚动，图片与板块会随着屏幕滚动产生视差效果</span><br>  <span class="hljs-comment"># Scrolling parallax</span><br>  <span class="hljs-attr">parallax:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 图片最小的宽高比，以免图片两边被过度裁剪，适用于移动端竖屏时，如需关闭设为 0</span><br>  <span class="hljs-comment"># Minimum ratio of width to height, applicable to the vertical screen of mobile device, if you need to close it, set it to 0</span><br>  <span class="hljs-attr">width_height_ratio:</span> <span class="hljs-number">1.0</span><br><br><span class="hljs-comment"># 向下滚动的箭头</span><br><span class="hljs-comment"># Scroll down arrow</span><br><span class="hljs-attr">scroll_down_arrow:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 头图高度不小于指定比例，才显示箭头</span><br>  <span class="hljs-comment"># Only the height of the banner image is greater than the ratio, the arrow is displayed</span><br>  <span class="hljs-comment"># Available: 0 - 100</span><br>  <span class="hljs-attr">banner_height_limit:</span> <span class="hljs-number">80</span><br><br>  <span class="hljs-comment"># 翻页后自动滚动</span><br>  <span class="hljs-comment"># Auto scroll after page turning</span><br>  <span class="hljs-attr">scroll_after_turning_page:</span> <span class="hljs-literal">true</span><br><br><span class="hljs-comment"># 向顶部滚动的箭头</span><br><span class="hljs-comment"># Scroll top arrow</span><br><span class="hljs-attr">scroll_top_arrow:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 页脚</span><br><span class="hljs-comment"># Footer</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">footer:</span><br>  <span class="hljs-comment"># 页脚第一行文字的 HTML，建议保留 Fluid 的链接，用于向更多人推广本主题</span><br>  <span class="hljs-comment"># HTML of the first line of the footer, it is recommended to keep the Fluid link to promote this theme to more people</span><br>  <span class="hljs-attr">content:</span> <span class="hljs-string">&#x27;</span><br><span class="hljs-string">    &lt;a href=&quot;https://hexo.io&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span&gt;Hexo&lt;/span&gt;&lt;/a&gt;</span><br><span class="hljs-string">    &lt;i class=&quot;iconfont icon-love&quot;&gt;&lt;/i&gt;</span><br><span class="hljs-string">    &lt;a href=&quot;https://github.com/fluid-dev/hexo-theme-fluid&quot; target=&quot;_blank&quot; rel=&quot;nofollow noopener&quot;&gt;&lt;span&gt;Fluid&lt;/span&gt;&lt;/a&gt;</span><br><span class="hljs-string">  &#x27;</span><br><br>  <span class="hljs-comment"># 展示网站的 PV、UV 统计数</span><br>  <span class="hljs-comment"># Display website PV and UV statistics</span><br>  <span class="hljs-attr">statistics:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># 统计数据来源，使用 leancloud 需要设置 `web_analytics: leancloud` 中的参数；使用 busuanzi 不需要额外设置，但是有时不稳定，另外本地运行时 busuanzi 显示统计数据很大属于正常现象，部署后会正常</span><br>    <span class="hljs-comment"># Data source. If use leancloud, you need to set the parameter in `web_analytics: leancloud`</span><br>    <span class="hljs-comment"># Options: busuanzi | leancloud</span><br>    <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;busuanzi&quot;</span><br><br>    <span class="hljs-comment"># 页面显示的文本，&#123;&#125;是数字的占位符（必须包含)，下同</span><br>    <span class="hljs-comment"># Displayed text, &#123;&#125; is a placeholder for numbers (must be included), the same below</span><br>    <span class="hljs-attr">pv_format:</span> <span class="hljs-string">&quot;总访问量 &#123;&#125; 次&quot;</span><br>    <span class="hljs-attr">uv_format:</span> <span class="hljs-string">&quot;总访客数 &#123;&#125; 人&quot;</span><br><br>  <span class="hljs-comment"># 国内大陆服务器的备案信息</span><br>  <span class="hljs-comment"># For Chinese mainland website policy, other areas keep disable</span><br>  <span class="hljs-attr">beian:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># ICP证号</span><br>    <span class="hljs-attr">icp_text:</span> <span class="hljs-string">京ICP证123456号</span><br>    <span class="hljs-comment"># 公安备案号，不填则只显示ICP</span><br>    <span class="hljs-attr">police_text:</span> <span class="hljs-string">京公网安备12345678号</span><br>    <span class="hljs-comment"># 公安备案的编号，用于URL跳转查询</span><br>    <span class="hljs-attr">police_code:</span> <span class="hljs-number">12345678</span><br>    <span class="hljs-comment"># 公安备案的图片. 为空时不显示备案图片</span><br>    <span class="hljs-attr">police_icon:</span> <span class="hljs-string">/img/police_beian.png</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 首页</span><br><span class="hljs-comment"># Home Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">index:</span><br>  <span class="hljs-comment"># 首页 Banner 头图，可以是相对路径或绝对路径，以下相同</span><br>  <span class="hljs-comment"># Path of Banner image, can be a relative path or an absolute path, the same on other pages</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br><br>  <span class="hljs-comment"># 头图高度，屏幕百分比</span><br>  <span class="hljs-comment"># Height ratio of banner image</span><br>  <span class="hljs-comment"># Available: 0 - 100</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">100</span><br><br>  <span class="hljs-comment"># 头图黑色蒙版的不透明度，available: 0 - 1.0， 1 是完全不透明</span><br>  <span class="hljs-comment"># Opacity of the banner mask, 1.0 is completely opaque</span><br>  <span class="hljs-comment"># Available: 0 - 1.0</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br>  <span class="hljs-comment"># 首页副标题的独立设置</span><br>  <span class="hljs-comment"># Independent config of home page subtitle</span><br>  <span class="hljs-attr">slogan:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 为空则按 hexo config.subtitle 显示</span><br>    <span class="hljs-comment"># If empty, text based on `subtitle` in hexo config</span><br>    <span class="hljs-attr">text:</span> <span class="hljs-string">&quot;我欲穿花寻路，直入白云深处，浩气展虹霓。&quot;</span><br><br>    <span class="hljs-comment"># 通过 API 接口作为首页副标题的内容，必须返回的是 JSON 格式，如果请求失败则按 text 字段显示，该功能必须先开启 typing 打字机功能</span><br>    <span class="hljs-comment"># Subtitle of the homepage through the API, must be returned a JSON. If the request fails, it will be displayed in `text` value. This feature must first enable the typing animation</span><br>    <span class="hljs-attr">api:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>      <span class="hljs-comment"># 请求地址</span><br>      <span class="hljs-comment"># Request url</span><br>      <span class="hljs-attr">url:</span> <span class="hljs-string">&quot;&quot;</span><br><br>      <span class="hljs-comment"># 请求方法</span><br>      <span class="hljs-comment"># Request method</span><br>      <span class="hljs-comment"># Available: GET | POST | PUT</span><br>      <span class="hljs-attr">method:</span> <span class="hljs-string">&quot;GET&quot;</span><br><br>      <span class="hljs-comment"># 请求头</span><br>      <span class="hljs-comment"># Request headers</span><br>      <span class="hljs-attr">headers:</span> &#123;&#125;<br><br>      <span class="hljs-comment"># 从请求结果获取字符串的取值字段，最终必须是一个字符串，例如返回结果为 &#123;&quot;data&quot;: &#123;&quot;author&quot;: &quot;fluid&quot;, &quot;content&quot;: &quot;An elegant theme&quot;&#125;&#125;, 则取值字段为 [&#x27;data&#x27;, &#x27;content&#x27;]；如果返回是列表则自动选择第一项</span><br>      <span class="hljs-comment"># The value field of the string obtained from the response. For example, the response content is &#123;&quot;data&quot;: &#123;&quot;author&quot;: &quot;fluid&quot;, &quot;content&quot;: &quot;An elegant theme&quot;&#125;&#125;, the expected `keys: [&#x27;data&#x27;,&#x27;content&#x27;]`; if the return is a list, the first item is automatically selected</span><br>      <span class="hljs-attr">keys:</span> []<br><br>  <span class="hljs-comment"># 自动截取文章摘要</span><br>  <span class="hljs-comment"># Auto extract post</span><br>  <span class="hljs-attr">auto_excerpt:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 打开文章的标签方式</span><br>  <span class="hljs-comment"># The browser tag to open the post</span><br>  <span class="hljs-comment"># Available: _blank | _self</span><br>  <span class="hljs-attr">post_url_target:</span> <span class="hljs-string">_self</span><br><br>  <span class="hljs-comment"># 是否显示文章信息（时间、分类、标签）</span><br>  <span class="hljs-comment"># Meta information of post</span><br>  <span class="hljs-attr">post_meta:</span><br>    <span class="hljs-attr">date:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">category:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">tag:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 文章通过 sticky 排序后，在首页文章标题前显示图标</span><br>  <span class="hljs-comment"># If the posts are sorted by `sticky`, an icon is displayed in front of the post title</span><br>  <span class="hljs-attr">post_sticky:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">icon:</span> <span class="hljs-string">&quot;iconfont icon-top&quot;</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 文章页</span><br><span class="hljs-comment"># Post Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">post:</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">/img/karigurashi022.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">70</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br>  <span class="hljs-comment"># 文章在首页的默认封面图，当没有指定 index_img 时会使用该图片，若两者都为空则不显示任何图片</span><br>  <span class="hljs-comment"># Path of the default post cover when `index_img` is not set. If both are empty, no image will be displayed</span><br>  <span class="hljs-attr">default_index_img:</span> <span class="hljs-string">/img/karigurashi022.jpg</span><br><br>  <span class="hljs-comment"># 文章标题下方的元信息</span><br>  <span class="hljs-comment"># Meta information below title</span><br>  <span class="hljs-attr">meta:</span><br>    <span class="hljs-comment"># 作者，优先根据 front-matter 里 author 字段，其次是 hexo 配置中 author 值</span><br>    <span class="hljs-comment"># Author, based on `author` field in front-matter, if not set, based on `author` value in hexo config</span><br>    <span class="hljs-attr">author:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># 文章日期，优先根据 front-matter 里 date 字段，其次是 md 文件日期</span><br>    <span class="hljs-comment"># Post date, based on `date` field in front-matter, if not set, based on create date of .md file</span><br>    <span class="hljs-attr">date:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-comment"># 格式参照 ISO-8601 日期格式化</span><br>      <span class="hljs-comment"># ISO-8601 date format</span><br>      <span class="hljs-comment"># See: http://momentjs.cn/docs/#/parsing/string-format/</span><br>      <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;LL a&quot;</span><br><br>    <span class="hljs-comment"># 字数统计</span><br>    <span class="hljs-comment"># Word count</span><br>    <span class="hljs-attr">wordcount:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-comment"># 显示的文本，&#123;&#125;是数字的占位符（必须包含)，下同</span><br>      <span class="hljs-comment"># Displayed text, &#123;&#125; is a placeholder for numbers (must be included), the same below</span><br>      <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;&#123;&#125; 字&quot;</span><br><br>    <span class="hljs-comment"># 估计阅读全文需要的时长</span><br>    <span class="hljs-comment"># Estimate the time required to read the full text</span><br>    <span class="hljs-attr">min2read:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>      <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;&#123;&#125; 分钟&quot;</span><br>      <span class="hljs-comment"># 每分钟阅读多少字，如果是技术文章，建议降低</span><br>      <span class="hljs-comment"># Words read per minute</span><br>      <span class="hljs-attr">words:</span> <span class="hljs-number">100</span><br><br>    <span class="hljs-comment"># 浏览量计数</span><br>    <span class="hljs-comment"># Number of visits</span><br>    <span class="hljs-attr">views:</span><br>      <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>      <span class="hljs-comment"># 统计数据来源</span><br>      <span class="hljs-comment"># Data Source</span><br>      <span class="hljs-comment"># Options: busuanzi | leancloud</span><br>      <span class="hljs-attr">source:</span> <span class="hljs-string">&quot;busuanzi&quot;</span><br>      <span class="hljs-attr">format:</span> <span class="hljs-string">&quot;&#123;&#125; 次&quot;</span><br><br>  <span class="hljs-comment"># 在文章开头显示文章更新时间，该时间默认是 md 文件更新时间，可通过 front-matter 中 `updated` 手动指定（和 date 一样格式）</span><br>  <span class="hljs-comment"># Update date is displayed at the beginning of the post. The default date is the update date of the md file, which can be manually specified by `updated` in front-matter (same format as date)</span><br>  <span class="hljs-attr">updated:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># 描述文字</span><br>    <span class="hljs-comment"># Descriptive text before date</span><br>    <span class="hljs-attr">content:</span> <span class="hljs-string">本文最后更新于：</span><br><br>    <span class="hljs-comment"># 是否使用相对时间表示，比如：&quot;3 天前&quot;</span><br>    <span class="hljs-comment"># If true, it will be a relative time, such as: &quot;3 days ago&quot;</span><br>    <span class="hljs-attr">relative:</span> <span class="hljs-literal">false</span><br><br>  <span class="hljs-comment"># 文章右侧目录</span><br>  <span class="hljs-comment"># Table of contents (TOC)</span><br>  <span class="hljs-attr">toc:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment"># 目录会选择这些节点作为标题</span><br>    <span class="hljs-comment"># TOC will select these nodes as headings</span><br>    <span class="hljs-attr">headingSelector:</span> <span class="hljs-string">&quot;h1,h2,h3,h4,h5,h6&quot;</span><br>    <span class="hljs-comment"># 层级的折叠深度，0 是全部折叠，大于 0 后如果存在下级标题则默认展开</span><br>    <span class="hljs-comment"># Collapse depth. If 0, all headings collapsed. If greater than 0, it will be expanded by default if there are sub headings</span><br>    <span class="hljs-attr">collapseDepth:</span> <span class="hljs-number">0</span><br><br>  <span class="hljs-comment"># 版权声明，会显示在每篇文章的结尾</span><br>  <span class="hljs-comment"># Copyright, will be displayed at the end of each post</span><br>  <span class="hljs-attr">copyright:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-attr">content:</span> <span class="hljs-string">&#x27;&lt;b&gt;版权声明：&lt;/b&gt; 本博客所有文章除特别声明外，均采用 &lt;a href=&quot;https://creativecommons.org/licenses/by-sa/4.0/deed.zh&quot; rel=&quot;nofollow noopener&quot;&gt;CC BY-SA 4.0 协议&lt;/a&gt; ，转载请注明出处！&#x27;</span><br><br>  <span class="hljs-comment"># 文章底部上一篇下一篇功能</span><br>  <span class="hljs-comment"># Link to previous/next post</span><br>  <span class="hljs-attr">prev_next:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>  <span class="hljs-comment"># 文章底部自定义区域（位于 footer 上方），支持 HTML，可插入赞赏码、公众号这类内容内容</span><br>  <span class="hljs-comment"># Custom content at the bottom of the post page (located above the footer)</span><br>  <span class="hljs-attr">custom:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">content:</span> <span class="hljs-string">&#x27;&lt;img src=&quot;https://octodex.github.com/images/jetpacktocat.png&quot; class=&quot;rounded mx-auto d-block mt-5&quot; style=&quot;width:150px; height:150px;&quot;&gt;&#x27;</span><br><br>  <span class="hljs-comment"># 文章图片可点击放大</span><br>  <span class="hljs-comment"># Zoom feature of images</span><br>  <span class="hljs-attr">image_zoom:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment"># 放大后图片链接替换规则，可用于将压缩图片链接替换为原图片链接，如 [&#x27;-slim&#x27;, &#x27;&#x27;] 是将链接中 `-slim` 移除；如果想使用正则请使用 `re:` 前缀，如 [&#x27;re:\\d&#123;3,4&#125;\\/\\d&#123;3,4&#125;\\/&#x27;, &#x27;&#x27;]</span><br>    <span class="hljs-comment"># The image url replacement when zooming, the feature can be used to replace the compressed image to the original image, eg: [&#x27;-slim&#x27;, &#x27;&#x27;] removes `-slim` from the image url when zooming; if you want to use regular, use prefix `re:`, eg: [&#x27;re:\\d&#123;3,4&#125;\\/\\d&#123;3,4&#125;\\/&#x27;,&#x27;&#x27;]</span><br>    <span class="hljs-attr">img_url_replace:</span> [<span class="hljs-string">&#x27;&#x27;</span>, <span class="hljs-string">&#x27;&#x27;</span>]<br><br>  <span class="hljs-comment"># 脚注语法，会在文章底部生成脚注，如果 Markdown 渲染器本身支持，则建议关闭，否则可能会冲突</span><br>  <span class="hljs-comment"># Support footnote syntax, footnotes will be generated at the bottom of the post page. If the Markdown renderer itself supports it, please disable it, otherwise it may conflict</span><br>  <span class="hljs-attr">footnote:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>    <span class="hljs-comment"># 脚注的节标题，也可以在 front-matter 中通过 `foot<span class="hljs-doctag">note:</span> &lt;h2&gt;Reference&lt;/h2&gt;` 这种形式修改单独页面的 header</span><br>    <span class="hljs-comment"># The section title of the footnote, you can also modify the header of a single page in the form of `foot<span class="hljs-doctag">note:</span> &lt;h2&gt;Reference&lt;/h2&gt;` in front-matter</span><br>    <span class="hljs-attr">header:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br>  <span class="hljs-comment"># 数学公式，开启之前需要更换 Markdown 渲染器，否则复杂公式会有兼容问题，具体请见：https://hexo.fluid-dev.com/docs/guide/##latex-数学公式</span><br>  <span class="hljs-comment"># Mathematical formula. If enable, you need to change the Markdown renderer, see: https://hexo.fluid-dev.com/docs/en/guide/#math</span><br>  <span class="hljs-attr">math:</span><br>    <span class="hljs-comment"># 开启后文章默认可用，自定义页面如需使用，需在 Front-matter 中指定 `math: true`</span><br>    <span class="hljs-comment"># If you want to use math on the custom page, you need to set `math: true` in Front-matter</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br><br>    <span class="hljs-comment"># 开启后，只有在文章 Front-matter 里指定 `math: true` 才会在文章页启动公式转换，以便在页面不包含公式时提高加载速度</span><br>    <span class="hljs-comment"># If true, only set `math: true` in Front-matter will enable math, to load faster when the page does not contain math</span><br>    <span class="hljs-attr">specific:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># Options: mathjax | katex</span><br>    <span class="hljs-attr">engine:</span> <span class="hljs-string">mathjax</span><br><br>  <span class="hljs-comment"># 流程图，基于 mermaid-js，具体请见：https://hexo.fluid-dev.com/docs/guide/#mermaid-流程图</span><br>  <span class="hljs-comment"># Flow chart, based on mermaid-js, see: https://hexo.fluid-dev.com/docs/en/guide/#mermaid</span><br>  <span class="hljs-attr">mermaid:</span><br>    <span class="hljs-comment"># 开启后文章默认可用，自定义页面如需使用，需在 Front-matter 中指定 `mermaid: true`</span><br>    <span class="hljs-comment"># If you want to use mermaid on the custom page, you need to set `mermaid: true` in Front-matter</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># 开启后，只有在文章 Front-matter 里指定 `mermaid: true` 才会在文章页启动公式转换，以便在页面不包含公式时提高加载速度</span><br>    <span class="hljs-comment"># If true, only set `mermaid: true` in Front-matter will enable mermaid, to load faster when the page does not contain mermaid</span><br>    <span class="hljs-attr">specific:</span> <span class="hljs-literal">false</span><br><br>    <span class="hljs-comment"># See: http://mermaid-js.github.io/mermaid/</span><br>    <span class="hljs-attr">options:</span> &#123; <span class="hljs-attr">theme:</span> <span class="hljs-string">&#x27;default&#x27;</span> &#125;<br><br>  <span class="hljs-comment"># 评论插件</span><br>  <span class="hljs-comment"># Comment plugin</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># 指定的插件，需要同时设置对应插件的必要参数</span><br>    <span class="hljs-comment"># The specified plugin needs to set the necessary parameters at the same time</span><br>    <span class="hljs-comment"># Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">gitalk</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 评论插件</span><br><span class="hljs-comment"># Comment plugins</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 开启评论需要先设置上方 `post: comments: enable: true`，然后根据 `type` 设置下方对应的评论插件参数</span><br><span class="hljs-comment"># Enable comments need to be set `post: comments: enable: true`, then set the corresponding comment plugin parameters below according to `type`</span><br><span class="hljs-comment">#---------------------------</span><br><br><span class="hljs-comment"># Utterances</span><br><span class="hljs-comment"># 基于 GitHub Issues</span><br><span class="hljs-comment"># Based on GitHub Issues</span><br><span class="hljs-comment"># See: https://utteranc.es</span><br><span class="hljs-attr">utterances:</span><br>  <span class="hljs-attr">repo:</span><br>  <span class="hljs-attr">issue_term:</span> <span class="hljs-string">pathname</span><br>  <span class="hljs-attr">label:</span> <span class="hljs-string">utterances</span><br>  <span class="hljs-attr">theme:</span> <span class="hljs-string">github-light</span><br>  <span class="hljs-attr">theme_dark:</span> <span class="hljs-string">github-dark</span><br>  <span class="hljs-attr">crossorigin:</span> <span class="hljs-string">anonymous</span><br><br><span class="hljs-comment"># Disqus</span><br><span class="hljs-comment"># 基于第三方的服务，国内用户直接使用容易被墙，建议配合 Disqusjs</span><br><span class="hljs-comment"># Based on third-party service</span><br><span class="hljs-comment"># See: https://disqus.com</span><br><span class="hljs-attr">disqus:</span><br>  <span class="hljs-attr">shortname:</span><br>  <span class="hljs-comment"># 以下为 Disqusjs 支持, 国内用户如果想使用 Disqus 建议配合使用</span><br>  <span class="hljs-comment"># The following are Disqusjs configurations, please ignore if DisqusJS is not required</span><br>  <span class="hljs-comment"># See: https://github.com/SukkaW/DisqusJS</span><br>  <span class="hljs-attr">disqusjs:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">apikey:</span><br><br><span class="hljs-comment"># Gitalk</span><br><span class="hljs-comment"># 基于 GitHub Issues</span><br><span class="hljs-comment"># Based on GitHub Issues</span><br><span class="hljs-comment"># See: https://github.com/gitalk/gitalk#options</span><br><span class="hljs-attr">gitalk:</span><br>  <span class="hljs-attr">clientID:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">clientSecret:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">&#x27;CommentsBed&#x27;</span><br>  <span class="hljs-attr">owner:</span> <span class="hljs-string">&#x27;fanyfull&#x27;</span><br>  <span class="hljs-attr">admin:</span> [<span class="hljs-string">&#x27;fanyfull&#x27;</span>]<br>  <span class="hljs-attr">language:</span> <span class="hljs-string">zh-CN</span><br>  <span class="hljs-attr">labels:</span> [<span class="hljs-string">&#x27;Gitalk&#x27;</span>]<br>  <span class="hljs-attr">perPage:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">pagerDirection:</span> <span class="hljs-string">last</span><br>  <span class="hljs-attr">distractionFreeMode:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">createIssueManually:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-comment"># 默认 proxy 已失效，解决方法请见下方链接</span><br>  <span class="hljs-comment"># The default proxy is invalid, please see the links for the solution</span><br>  <span class="hljs-comment"># https://github.com/gitalk/gitalk/issues/429</span><br>  <span class="hljs-comment"># https://github.com/Zibri/cloudflare-cors-anywhere</span><br>  <span class="hljs-comment"># proxy: &lt;your own proxy&gt;/https://github.com/login/oauth/access_token</span><br>  <span class="hljs-attr">proxy:</span> <span class="hljs-string">&#x27;https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token&#x27;</span><br><br><span class="hljs-comment"># Valine</span><br><span class="hljs-comment"># 基于 LeanCloud</span><br><span class="hljs-comment"># Based on LeanCloud</span><br><span class="hljs-comment"># See: https://valine.js.org/configuration.html</span><br><span class="hljs-attr">valine:</span><br>  <span class="hljs-attr">appid:</span><br>  <span class="hljs-attr">appkey:</span><br>  <span class="hljs-attr">placeholder:</span> <span class="hljs-string">说点什么</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">window.location.pathname</span><br>  <span class="hljs-attr">avatar:</span> <span class="hljs-string">retro</span><br>  <span class="hljs-attr">meta:</span> [<span class="hljs-string">&#x27;nick&#x27;</span>, <span class="hljs-string">&#x27;mail&#x27;</span>, <span class="hljs-string">&#x27;link&#x27;</span>]<br>  <span class="hljs-attr">pageSize:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">lang:</span> <span class="hljs-string">zh-CN</span><br>  <span class="hljs-attr">highlight:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">recordIP:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">serverURLs:</span><br><br><span class="hljs-comment"># Waline</span><br><span class="hljs-comment"># 从 Valine 衍生而来，额外增加了服务端和多种功能</span><br><span class="hljs-comment"># Derived from Valine, with self-hosted service and new features</span><br><span class="hljs-comment"># See: https://waline.js.org/</span><br><span class="hljs-attr">waline:</span><br>  <span class="hljs-attr">serverURL:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">placeholder:</span> <span class="hljs-string">说点什么</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">window.location.pathname</span><br>  <span class="hljs-attr">avatar:</span> <span class="hljs-string">retro</span><br>  <span class="hljs-attr">meta:</span> [<span class="hljs-string">&#x27;nick&#x27;</span>, <span class="hljs-string">&#x27;mail&#x27;</span>, <span class="hljs-string">&#x27;link&#x27;</span>]<br>  <span class="hljs-attr">pageSize:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">lang:</span> <span class="hljs-string">zh-CN</span><br>  <span class="hljs-attr">highlight:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">avatarCDN:</span><br>  <span class="hljs-attr">avatarForce:</span> <span class="hljs-literal">false</span><br>  <span class="hljs-attr">requiredFields:</span> []<br>  <span class="hljs-attr">emojiCDN:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">emojiMaps:</span> &#123;&#125;<br>  <span class="hljs-attr">anonymous:</span><br><br><span class="hljs-comment"># 畅言 Changyan</span><br><span class="hljs-comment"># 基于第三方的服务</span><br><span class="hljs-comment"># Based on third-party service, insufficient support for regions outside China</span><br><span class="hljs-comment"># http://changyan.kuaizhan.com</span><br><span class="hljs-attr">changyan:</span><br>  <span class="hljs-attr">appid:</span> <span class="hljs-string">&#x27;&#x27;</span><br>  <span class="hljs-attr">appkey:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># 来必力 Livere</span><br><span class="hljs-comment"># 基于第三方的服务</span><br><span class="hljs-comment"># Based on third-party service</span><br><span class="hljs-comment"># See: https://www.livere.com</span><br><span class="hljs-attr">livere:</span><br>  <span class="hljs-attr">uid:</span> <span class="hljs-string">&#x27;&#x27;</span><br><br><span class="hljs-comment"># Remark42</span><br><span class="hljs-comment"># 需要自托管服务端</span><br><span class="hljs-comment"># Based on self-hosted service</span><br><span class="hljs-comment"># See: https://remark42.com</span><br><span class="hljs-attr">remark42:</span><br>  <span class="hljs-attr">host:</span><br>  <span class="hljs-attr">site_id:</span><br>  <span class="hljs-attr">max_shown_comments:</span> <span class="hljs-number">10</span><br>  <span class="hljs-attr">locale:</span> <span class="hljs-string">zh</span><br><br><span class="hljs-comment"># Twikoo</span><br><span class="hljs-comment"># 基于腾讯云开发</span><br><span class="hljs-comment"># Based on Tencent CloudBase</span><br><span class="hljs-comment"># See: https://twikoo.js.org</span><br><span class="hljs-attr">twikoo:</span><br>  <span class="hljs-attr">envId:</span><br>  <span class="hljs-attr">region:</span> <span class="hljs-string">ap-shanghai</span><br>  <span class="hljs-attr">path:</span> <span class="hljs-string">window.location.pathname</span><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 归档页</span><br><span class="hljs-comment"># Archive Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">archive:</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 分类页</span><br><span class="hljs-comment"># Category Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">category:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span><br><br>  <span class="hljs-comment"># 分类的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for categories, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: length | name</span><br>  <span class="hljs-attr">order_by:</span> <span class="hljs-string">&quot;-length&quot;</span><br><br>  <span class="hljs-comment"># 层级的折叠深度，0 是全部折叠，大于 0 后如果存在子分类则默认展开</span><br>  <span class="hljs-comment"># Collapse depth. If 0, all posts collapsed. If greater than 0, it will be expanded by default if there are subcategories</span><br>  <span class="hljs-attr">collapse_depth:</span> <span class="hljs-number">0</span><br><br>  <span class="hljs-comment"># 文章的排序字段，前面带减号是倒序，不带减号是正序</span><br>  <span class="hljs-comment"># Sort field for posts, with a minus sign is reverse order</span><br>  <span class="hljs-comment"># Options: date | title | or other field of front-matter</span><br>  <span class="hljs-attr">post_order_by:</span> <span class="hljs-string">&quot;-date&quot;</span><br><br>  <span class="hljs-comment"># 单个分类中折叠展示文章数的最大值，超过限制会显示 More，0 则不限制</span><br>  <span class="hljs-comment"># The maximum number of posts in a single category. If the limit is exceeded, it will be displayed More. If 0 no limit</span><br>  <span class="hljs-attr">post_limit:</span> <span class="hljs-number">10</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 标签页</span><br><span class="hljs-comment"># Tag Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">tag:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">80</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span><br>  <span class="hljs-attr">tagcloud:</span><br>    <span class="hljs-attr">min_font:</span> <span class="hljs-number">15</span><br>    <span class="hljs-attr">max_font:</span> <span class="hljs-number">30</span><br>    <span class="hljs-attr">unit:</span> <span class="hljs-string">px</span><br>    <span class="hljs-attr">start_color:</span> <span class="hljs-string">&quot;#BBBBEE&quot;</span><br>    <span class="hljs-attr">end_color:</span> <span class="hljs-string">&quot;#337ab7&quot;</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 关于页</span><br><span class="hljs-comment"># About Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">about:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span><br>  <span class="hljs-attr">avatar:</span> <span class="hljs-string">/img/avatar.png</span><br>  <span class="hljs-attr">name:</span> <span class="hljs-string">&quot;Fan&#x27;s Blog&quot;</span><br>  <span class="hljs-attr">intro:</span> <span class="hljs-string">&quot;我欲穿花寻路，直入白云深处，浩气展虹霓。&quot;</span><br>  <span class="hljs-comment"># 更多图标可从 https://hexo.fluid-dev.com/docs/icon/ 查找，`class` 代表图标的 css class，添加 `qrcode` 后，图标不再是链接而是悬浮二维码</span><br>  <span class="hljs-comment"># More icons can be found from https://hexo.fluid-dev.com/docs/en/icon/  `class` is the css class of the icon. If adding `qrcode`, The icon is no longer a link, but a hovering QR code</span><br>  <span class="hljs-attr">icons:</span><br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">class:</span> <span class="hljs-string">&quot;iconfont icon-github-fill&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;https://github.com&quot;</span>, <span class="hljs-attr">tip:</span> <span class="hljs-string">&quot;GitHub&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">class:</span> <span class="hljs-string">&quot;iconfont icon-douban-fill&quot;</span>, <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;https://douban.com&quot;</span>, <span class="hljs-attr">tip:</span> <span class="hljs-string">&quot;豆瓣&quot;</span> &#125;<br>    <span class="hljs-bullet">-</span> &#123; <span class="hljs-attr">class:</span> <span class="hljs-string">&quot;iconfont icon-wechat-fill&quot;</span>, <span class="hljs-attr">qrcode:</span> <span class="hljs-string">&quot;/img/favicon.ico&quot;</span> &#125;<br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 自定义页</span><br><span class="hljs-comment"># Custom Page</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># 通过 hexo new page 命令创建的页面</span><br><span class="hljs-comment"># Custom Page through `hexo new page`</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">page:</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">/img/default.png</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 404页</span><br><span class="hljs-comment"># 404 Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">page404:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">/img/default.png</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">85</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span> <span class="hljs-string">&quot;Page not found&quot;</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 友链页</span><br><span class="hljs-comment"># Links Page</span><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-attr">links:</span><br>  <span class="hljs-attr">enable:</span> <span class="hljs-literal">true</span><br>  <span class="hljs-attr">banner_img:</span> <span class="hljs-string">https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/78316639_p02.jpg</span><br>  <span class="hljs-attr">banner_img_height:</span> <span class="hljs-number">60</span><br>  <span class="hljs-attr">banner_mask_alpha:</span> <span class="hljs-number">0.3</span><br>  <span class="hljs-attr">subtitle:</span><br>  <span class="hljs-comment"># 友链的成员项</span><br>  <span class="hljs-comment"># Member item of page</span><br>  <span class="hljs-attr">items:</span><br>    <span class="hljs-bullet">-</span> &#123;<br>      <span class="hljs-attr">title:</span> <span class="hljs-string">&quot;Fluid Blog&quot;</span>,<br>      <span class="hljs-attr">intro:</span> <span class="hljs-string">&quot;主题博客&quot;</span>,<br>      <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;https://hexo.fluid-dev.com/&quot;</span>,<br>      <span class="hljs-attr">avatar:</span> <span class="hljs-string">&quot;/img/favicon.ico&quot;</span><br>    &#125;<br>    <span class="hljs-bullet">-</span> &#123;<br>      <span class="hljs-attr">title:</span> <span class="hljs-string">&quot;Fluid Docs&quot;</span>,<br>      <span class="hljs-attr">intro:</span> <span class="hljs-string">&quot;主题使用指南&quot;</span>,<br>      <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;https://hexo.fluid-dev.com/docs/&quot;</span>,<br>      <span class="hljs-attr">avatar:</span> <span class="hljs-string">&quot;/img/favicon.ico&quot;</span><br>    &#125;<br>    <span class="hljs-bullet">-</span> &#123;<br>      <span class="hljs-attr">title:</span> <span class="hljs-string">&quot;Fluid Repo&quot;</span>,<br>      <span class="hljs-attr">intro:</span> <span class="hljs-string">&quot;主题 GitHub 仓库&quot;</span>,<br>      <span class="hljs-attr">link:</span> <span class="hljs-string">&quot;https://github.com/fluid-dev/hexo-theme-fluid&quot;</span>,<br>      <span class="hljs-attr">avatar:</span> <span class="hljs-string">&quot;/img/favicon.ico&quot;</span><br>    &#125;<br><br>  <span class="hljs-comment"># 当成员头像加载失败时，替换为指定图片</span><br>  <span class="hljs-comment"># When the member avatar fails to load, replace the specified image</span><br>  <span class="hljs-attr">onerror_avatar:</span> <span class="hljs-string">/img/avatar.png</span><br><br>  <span class="hljs-comment"># 友链下方自定义区域，支持 HTML，可插入例如申请友链的文字</span><br>  <span class="hljs-comment"># Custom content at the bottom of the links</span><br>  <span class="hljs-attr">custom:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-attr">content:</span> <span class="hljs-string">&#x27;&lt;hr&gt;&lt;p&gt;在下方留言申请加入我的友链，按如下格式提供信息：&lt;/p&gt;&lt;ul&gt;&lt;li&gt;博客名：Fluid&lt;/li&gt;&lt;li&gt;简介：Fluid 主题官方博客&lt;/li&gt;&lt;li&gt;链接：https://hexo.fluid-dev.com&lt;/li&gt;&lt;li&gt;图片：https://hexo.fluid-dev.com/img/favicon.ico&lt;/li&gt;&lt;/ul&gt;&#x27;</span><br><br>  <span class="hljs-comment"># 评论插件</span><br>  <span class="hljs-comment"># Comment plugin</span><br>  <span class="hljs-attr">comments:</span><br>    <span class="hljs-attr">enable:</span> <span class="hljs-literal">false</span><br>    <span class="hljs-comment"># 指定的插件，需要同时设置对应插件的必要参数</span><br>    <span class="hljs-comment"># The specified plugin needs to set the necessary parameters at the same time</span><br>    <span class="hljs-comment"># Options: utterances | disqus | gitalk | valine | waline | changyan | livere | remark42 | twikoo</span><br>    <span class="hljs-attr">type:</span> <span class="hljs-string">disqus</span><br><br><br><span class="hljs-comment">#---------------------------</span><br><span class="hljs-comment"># 以下是配置 JS CSS 等静态资源的 URL 前缀，可以自定义成 CDN 地址，</span><br><span class="hljs-comment"># 默认的 jsDelivr CDN 可能在部分地区无法访问，如果需要修改，最好使用与默认配置相同的版本，以避免潜在的问题，</span><br><span class="hljs-comment"># ** 如果你不知道如何设置，请不要做任何改动 **</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment"># Here is the url prefix to configure the static assets. Set CDN addresses you want to customize.</span><br><span class="hljs-comment"># Be aware that you would better use the same version as default ones to avoid potential problems.</span><br><span class="hljs-comment"># DO NOT EDIT THE FOLLOWING SETTINGS UNLESS YOU KNOW WHAT YOU ARE DOING</span><br><span class="hljs-comment">#---------------------------</span><br><br><span class="hljs-attr">static_prefix:</span><br>  <span class="hljs-comment"># 内部静态</span><br>  <span class="hljs-comment"># Internal static</span><br>  <span class="hljs-attr">internal_js:</span> <span class="hljs-string">/js</span><br>  <span class="hljs-attr">internal_css:</span> <span class="hljs-string">/css</span><br>  <span class="hljs-attr">internal_img:</span> <span class="hljs-string">/img</span><br><br>  <span class="hljs-attr">anchor:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/</span><br><br>  <span class="hljs-attr">github_markdown:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/</span><br><br>  <span class="hljs-attr">jquery:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/</span><br><br>  <span class="hljs-attr">bootstrap:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/</span><br><br>  <span class="hljs-attr">highlightjs:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/highlight.js@10.6.0/</span><br><br>  <span class="hljs-attr">prismjs:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/prismjs@1.23.0/</span><br><br>  <span class="hljs-attr">tocbot:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/tocbot@4.12.2/dist/</span><br><br>  <span class="hljs-attr">typed:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/</span><br><br>  <span class="hljs-attr">fancybox:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/</span><br><br>  <span class="hljs-attr">nprogress:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/nprogress@0.2.0/</span><br><br>  <span class="hljs-attr">mathjax:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/</span><br><br>  <span class="hljs-attr">katex:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/katex@0.13.0/dist/</span><br><br>  <span class="hljs-attr">busuanzi:</span> <span class="hljs-string">https://busuanzi.ibruce.info/busuanzi/2.3/</span><br><br>  <span class="hljs-attr">clipboard:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/clipboard@2.0.8/dist/</span><br><br>  <span class="hljs-attr">mermaid:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/</span><br><br>  <span class="hljs-attr">valine:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/</span><br><br>  <span class="hljs-attr">waline:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/@waline/client@0.14.8/dist/</span><br><br>  <span class="hljs-attr">gitalk:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/gitalk@1.7.2/dist/</span><br><br>  <span class="hljs-attr">disqusjs:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/disqusjs@1.3.0/dist/</span><br><br>  <span class="hljs-attr">twikoo:</span> <span class="hljs-string">https://cdn.jsdelivr.net/npm/twikoo@1.3.0/dist/</span><br><br>  <span class="hljs-attr">hint:</span> <span class="hljs-string">/lib/hint/</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GiHub + Hexo 真·从零开始搭建个人博客</title>
    <link href="/2021/10/16/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA-GitHub-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/"/>
    <url>/2021/10/16/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA-GitHub-%E9%9D%99%E6%80%81%E5%8D%9A%E5%AE%A2/</url>
    
    <content type="html"><![CDATA[<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>首先要感谢<a href="https://mumaxu.github.io/2018/12/09/GitHub-Hexo-%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/">这篇博客</a>，我这篇博客多有借鉴（copy），当时我搭建成功这个 GitHub Pages 的博客也离不开这篇博客的帮助。</p><p>然后，简单介绍一下利用 GitHub + Hexo 搭建的原理。</p><p>GitHub 是有名的代码托管网站，而它提供了一项服务 GitHub Pages，这个 GitHub Pages 可以将我们托管在 GitHub 上的一个仓库中的 html、css 和 js 代码渲染成静态页面。当然，这个仓库是特殊的，所以每一个 GitHub 账户只能够育一个这样的仓库。将相应的博客内容上传到 GitHub 上之后，我们就可以通过 <code>https://www.username.github.io</code> 来访问自己的博客，这里的 <code>username</code> 要换成自己的用户名。比如，我的用户名是 <code>fanyfull</code>，那么就可以通过 <code>https://www.fanyfull.github.io</code> 来访问我的博客。</p><p>Hexo 是使用 nodejs 开发的一个快速、简洁、高效的静态博客生成器。Hexo 使用 Markdown 语法解析文章，然后渲染成相应的网页，然后我们将渲染好的网页代码上传到 GitHub 上就可以了。简单来讲，利用 Hexo，我们只需要使用 Markdown 语法写文章，剩下的事情全部交给 Hexo 去做，我们就可以看到想要的博客效果了。</p><h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>注意，下面的所有的操作最好在科学上网的环境下完成。并且，如果电脑中某一个条件已经满足，那么，直接跳过该步骤即可。</p><h2 id="注册一个-GitHub-账号"><a href="#注册一个-GitHub-账号" class="headerlink" title="注册一个 GitHub 账号"></a>注册一个 GitHub 账号</h2><p>前往 <a href="https://github.com/">GitHub 官网</a>，进行新用户注册。</p><p>注册完之后要记住注册的用户名和邮箱，后面会用到。</p><h2 id="安装-nodejs"><a href="#安装-nodejs" class="headerlink" title="安装 nodejs"></a>安装 nodejs</h2><p>进入 <a href="https://nodejs.org/en/">Node 官网</a> 下载相应版本，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016163651.png"></p><p>然后安装的时候建议直接全部点击下一步（如果 C 盘不吃紧的话），然后勾选所有组件，并勾选 <code>Add to Path</code> 将其添加到系统环境变量。</p><p>安装 Node.js 会包含环境变量以及 npm 的安装，安装后，可以在命令行输入如下命令检测 Node.js 是否安装成功：</p><p>第一个命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">node -v<br></code></pre></td></tr></table></figure><p>这个命令，在 nodejs 安装成功的情况下会显示 nodejs 的版本号。</p><p>第二个命令：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">npm -v<br></code></pre></td></tr></table></figure><p>这个命令，在 nodejs 安装成功的情况下会显示 npm 的版本号。</p><h2 id="安装-Git-for-Windows"><a href="#安装-Git-for-Windows" class="headerlink" title="安装 Git for Windows"></a>安装 Git for Windows</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>到 <a href="https://git-scm.com/">Git 官网</a> 下载最新版本，所有安装步骤建议直接下一步。</p><p>然后打开安装好的 Git Bash，这里可以直接鼠标右键唤出菜单：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016164817.png"></p><p>然后点击 Git Bash Here，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016164912.png"></p><h3 id="设置用户名和邮箱"><a href="#设置用户名和邮箱" class="headerlink" title="设置用户名和邮箱"></a>设置用户名和邮箱</h3><p>因为 Git 是分布式版本控制系统，所以需要设置用户名和邮箱作为一个标识，在命令行输入如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global user.name <span class="hljs-string">&quot;user_name&quot;</span> <span class="hljs-comment"># user_name 填入 GitHub 用户名</span><br></code></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global user.email <span class="hljs-string">&quot;user_email&quot;</span> <span class="hljs-comment"># user_email 填入 GitHub 注册的邮箱</span><br></code></pre></td></tr></table></figure><p>这里还有一个额外步骤，建议执行，就是给 Git 设置代理，详情参考我的另一篇博客：<a href="https://fanlumaster.github.io/2021/03/23/Git-%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86-VPN/">Git 命令行使用代理</a></p><h2 id="安装-VSCode"><a href="#安装-VSCode" class="headerlink" title="安装 VSCode"></a>安装 VSCode</h2><p>VSCode 是一个非常好用的文本编辑器，之后编辑博客的相关配置文件以及后面的写博客都需要用到这个编辑器。</p><p>安装过程很简单，直接进入 <a href="https://code.visualstudio.com/">VSCode 官网</a>，然后安装的时候建议所有步骤都直接点下一步。</p><h1 id="搭建-GiHub-博客"><a href="#搭建-GiHub-博客" class="headerlink" title="搭建 GiHub 博客"></a>搭建 GiHub 博客</h1><h2 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h2><p>登录 GitHub 账号，新建一个名为 <code>username.github.io</code>（这里的 username 要替换成自己的实际的用户名） 的仓库，如下图</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016165332.png"></p><h2 id="配置-SSH-key"><a href="#配置-SSH-key" class="headerlink" title="配置 SSH key"></a>配置 SSH key</h2><p>打开 Git Bash，输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ssh-keygen -t rsa -C <span class="hljs-string">&quot;user.email&quot;</span> <span class="hljs-comment"># user.email 为GitHub 上注册的邮箱</span><br></code></pre></td></tr></table></figure><p>然后直接三个回车即可，默认不需要设置密码。查看是否已经有 ssh 密钥。打开用户主目录 <code>C:\Users\username\.ssh</code>，.ssh文件夹一定存放在C:\Users\目录下，至于后面的路径lenovo这个不一定每台电脑都相同。找到.ssh文件夹，打开如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016172151.png"></p><p>然后找到生成的 <code>.ssh</code> 的文件夹中的 <code>id_rsa.pub</code> 密钥，将内容全部复制。其中 <code>id_rsa</code> 是私钥不能泄露，<code>id_rsa.pub</code> 是公钥可以放心告诉他人。</p><p>打开 <a href="https://github.com/settings/ssh/new">GitHub SSH and GPG keys</a> 页面，新建一个 ssh key：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016172518.png"></p><p><code>Title</code> 为标题，任意填即可，将刚刚复制的 <code>id_rsa.pub</code> 内容粘贴进去，最后点击 <code>Add SSH key</code>。在 <code>Git Bash</code> 中检测 <code>GitHub</code> 公钥设置是否成功，输入如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ ssh -T git@github.com<br></code></pre></td></tr></table></figure><p>验证是否连接成功，连接成功的话，显示如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016172942.png"></p><h1 id="使用-Hexo-博客框架"><a href="#使用-Hexo-博客框架" class="headerlink" title="使用 Hexo 博客框架"></a>使用 Hexo 博客框架</h1><p>Hexo 官方文档：<a href="https://hexo.io/docs/">https://hexo.io/docs/</a></p><h2 id="Hexo-简介"><a href="#Hexo-简介" class="headerlink" title="Hexo 简介"></a>Hexo 简介</h2><h3 id="Hexo-是什么"><a href="#Hexo-是什么" class="headerlink" title="Hexo 是什么"></a>Hexo 是什么</h3><p><code>Hexo</code> 是一个简单、快速、强大的基于 <code>Github Pages</code> 的博客框架，支持 <code>Markdown</code> 格式，有众多优秀插件和主题。</p><h3 id="Hexo-原理"><a href="#Hexo-原理" class="headerlink" title="Hexo 原理"></a>Hexo 原理</h3><p>由于 <code>Github Pages</code> 存放的都是静态文件，博客存放的不只是文章内容，还有文章列表、分类、标签、翻页等动态内容，假如每次写完一篇文章都要手动更新博文目录和相关链接信息，相信谁都会疯掉，所以 <code>Hexo</code> 所做的就是将这些 <code>md</code> 文件都放在本地，每次写完文章后调用写好的命令来批量完成相关页面的生成，然后再将有改动的页面提交到 <code>GitHub</code> 。</p><h3 id="安装与初始化"><a href="#安装与初始化" class="headerlink" title="安装与初始化"></a>安装与初始化</h3><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install -g hexo-cli <span class="hljs-comment"># 此命令完成对 hexo 的安装</span><br></code></pre></td></tr></table></figure><p>安装完成后，在电脑的某个地方新建一个文件夹（名字可以随便取）专门用于存放博客代码，比如我的是 <code>D:\Blogs</code>，由于这个文件夹将来存放博客的所有内容和素材，以及所有的博客操作都会在其中完成，所以最好不要随便放。</p><p>进入新建的博客目录，输入如下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo init <span class="hljs-comment"># 该命令完成 hexo 在本地博客目录的初始化</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211016174011.png"></p><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo g <span class="hljs-comment"># 生成静态文件</span><br></code></pre></td></tr></table></figure><p>执行以上命令后，Hexo 就会在 <code>public</code> 文件夹中生成相关的 <code>html</code> 文件，这些文件将来都是要提交到 <code>GitHub</code> 上的 <code>username.github.io</code> 的仓库中去的。</p><h3 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h3><p>在 <code>Git Bash</code> 输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo s <span class="hljs-comment"># 开启本地预览</span><br></code></pre></td></tr></table></figure><p><code>hexo s</code> 是开启本地预览服务，打开浏览器访问 <code>http://localhost:4000</code> 即可看到内容，<code>Ctrl+C</code> 停止本地预览。本地预览可以实时查看博客的编辑情况，待博客写完后一起部署到 <code>GitHub</code> 上。</p><p>第一次初始化的时候 <code>hexo</code> 已经帮我们写了一篇名为 Hello World 的文章，默认的主题比较丑。</p><h3 id="上传到-GitHub"><a href="#上传到-GitHub" class="headerlink" title="上传到 GitHub"></a>上传到 GitHub</h3><h4 id="配置站点配置文件"><a href="#配置站点配置文件" class="headerlink" title="配置站点配置文件"></a>配置站点配置文件</h4><p><code>hexo</code> 有 2 种 <code>_config.yml</code> 文件，一个是根目录下的全局的 <code>_config.yml</code>，一个是各个主体 <code>theme</code> 下的 <code>_config.yml</code>。将前者称为站点配置文件， 后者称为主题配置文件。</p><p>打开根目录下站点配置文件 <code>_config.yml</code>，配置有关 <code>deploy</code> 的部分：</p><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs yml"><span class="hljs-comment"># Deployment</span><br><span class="hljs-comment">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:fanlumaster/fanyfull.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install hexo-deployer-git --save <span class="hljs-comment"># 安装部署插件</span><br></code></pre></td></tr></table></figure><p>如果不进行上述操作，直接使用 <code>hexo d</code> 部署到 <code>GitHub</code>，将会报错。</p><h4 id="部署到-GitHub"><a href="#部署到-GitHub" class="headerlink" title="部署到 GitHub"></a>部署到 GitHub</h4><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo d<br></code></pre></td></tr></table></figure><p>部署成功后，打开对应的网址 <code>https://www.username.github.io</code>，如果出现了和本地预览一样的效果，那么，表明部署成功。</p><h1 id="一些问题及优化"><a href="#一些问题及优化" class="headerlink" title="一些问题及优化"></a>一些问题及优化</h1><h2 id="LF-will-be-replaced-by-CRLF"><a href="#LF-will-be-replaced-by-CRLF" class="headerlink" title="LF will be replaced by CRLF"></a>LF will be replaced by CRLF</h2><p>如果这里出现了下面这样的情况：</p><pre><code class="hljs">warning: LF will be replaced by CRLF in</code></pre><p><img src="https://i.imgur.com/LDMt68d.png"></p><p>直接执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">git config --global core.safecrlf <span class="hljs-literal">false</span><br></code></pre></td></tr></table></figure><p>参考：<a href="https://stackoverflow.com/questions/5834014/lf-will-be-replaced-by-crlf-in-git-what-is-that-and-is-it-important">stackoverflow</a></p><p>到这里，基本的博客就搭建完成了。下一篇博客介绍更换主题以及主题的相关配置。</p><h2 id="将-fluid-主题的滚动条设置为无圆角"><a href="#将-fluid-主题的滚动条设置为无圆角" class="headerlink" title="将 fluid 主题的滚动条设置为无圆角"></a>将 fluid 主题的滚动条设置为无圆角</h2><p>在 <code>source/css/custom.css</code> 中添加如下样式代码：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs css"><span class="hljs-comment">/* 将进度条的圆角去掉 */</span><br>::-webkit-scrollbar-thumb &#123;<br>    <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>博客</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《浮生六记》札记</title>
    <link href="/2021/10/16/%E3%80%8A%E6%B5%AE%E7%94%9F%E5%85%AD%E8%AE%B0%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/16/%E3%80%8A%E6%B5%AE%E7%94%9F%E5%85%AD%E8%AE%B0%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>◆ 卷一　闺房记乐</p><blockquote><p>东坡云：“事如春梦了无痕。”</p></blockquote><p>按：不能说完全是了无痕的。万一梦遗了呢？万一醒来还记得很清楚呢？只是，不管是哪样，都是徒增惆怅罢了。</p><blockquote><p>刺绣之暇，渐通吟咏，有“秋侵人影瘦，霜染菊花肥”之句。</p></blockquote><p>按：此中诗趣，有趣。</p><blockquote><p>其形削肩长项，瘦不露骨，眉弯目秀，顾盼神飞，唯两齿微露，似非佳相。一种缠绵之态，令人之意也消。</p></blockquote><p>按：又见“顾盼神飞”，好多人都喜欢用这个词语形容女子，好。顾盼之间见光采。《红与黑》中是这样用的：明眸善睐，顾盼神飞。这两个词语在一起真是再合适不过了。  </p><p>疑：“令人之意也消”这句话该作何解释？这里翻译的是“让人萌生爱恋之意”，我觉得不够好，有的地方是翻译成“让人销魂失魄”，也不好。我个人琢磨了一下，“令”字在汉语大辞典中有“善；美好”的意思，“消”字我更愿意作“销”字来解释，因此这句话连同上一句话就可以合在一起意译为：这一种缠绵娇美的仪态，这如此美妙的人儿的神意都是如此地使人销魂失魄。</p><blockquote><p>余戏题其签曰“锦囊佳句”，不知夭寿之机，此已伏矣。</p></blockquote><p>按：一语成谶，令人扼腕。</p><blockquote><p>芸暗牵余袖，随至其室，见藏有暖粥并小菜焉。</p></blockquote><blockquote><p>合卺</p></blockquote><blockquote><p>暗计吃斋之初，正余出痘之期，因笑谓曰：“今我光鲜无恙，姊可从此开戒否？”芸笑之以目，点之以首。</p></blockquote><blockquote><p>芸回眸微笑，便觉一缕情丝摇人魂魄。拥之入帐，不知东方之既白。</p></blockquote><blockquote><p>自此耳鬓相磨，亲同形影，爱恋之情，有不可以言语形容者。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>文学</tag>
      
      <tag>文言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据库系统概论作业一</title>
    <link href="/2021/10/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E4%BD%9C%E4%B8%9A%E4%B8%80/"/>
    <url>/2021/10/14/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA%E4%BD%9C%E4%B8%9A%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<p>这几个概念要求用自己的话来描述，有够烦人哦。</p><blockquote><p>1、试述数据、数据库、数据库管理系统和数据库系统的概念。</p></blockquote><p>解：</p><ul><li><p>数据，描述事物的符号记录称为数据。所谓描述事物的符号，举例来说，数字、文字、图像、视频等可以用计算机来表示的都是符号。</p></li><li><p>数据库，英文名 database，就是存储数据的仓库。数据库是长期储存在计算机内、有组织的大量数据的集合。</p></li><li><p>数据库管理系统，英文名 database management system，就是进行科学地组织和存储、获取和维护数据的系统。</p></li><li><p>数据库系统，英文名 database system，就是由数据库、数据库管理系统、应用程序和数据库管理员组成的存储、管理处理和维护数据的系统。</p></li></ul><blockquote><p>3、试述文件系统和数据库管理系统的区别和联系。</p></blockquote><p>解：</p><p>(1) 文件系统与数据库系统的区别是：文件系统面向某一应用程序，共享性差，冗余度大，数据独立性差，记录内有结构，整体无结构，由应用程序自己控制。数据库系统面向现实世界，共享性高，冗余度小，具有较高的物理独立性和一定的逻辑独立性，整体结构化，用数据模型描述，由数据库系统提供数据安全性，完整性，并发控制和恢复力。</p><p>(2) 文件系统与数据库系统的联系是：文件系统于数据库系统都是计算机系统中管理数据库的软件。解析文件系统是操作系统的重要组成部分。而DBMS是独立于操作系统的软件。到时DBMS狮子啊操作系统的基础上实现的。数据库系统的组织和存储是通过操作系统中的文件系统来实现的。</p><blockquote><p>5、试述数据库系统的特点。</p></blockquote><p>解：</p><p>(1) 数据结构化；<br>(2) 数据的共享性高、冗余度低且易扩充；<br>(3) 数据独立性高；<br>(4) 数据由数据库管理系统统一管理和控制；</p><blockquote><p>6、数据库管理系统的主要功能主要有哪些？</p></blockquote><p>解：</p><p>(1) 数据定义功能；<br>(2) 数据组织、存储和管理；<br>(3) 数据操纵功能；<br>(4) 数据库的事务管理和运行管理；<br>(5) 数据库的建立和维护功能。<br>(6) 其他功能，包括数据库管理系统与网络中其他软件系统的通信功能，一个数据库管理系统与另一个数据库管理系统或文件系统的数据转换功能，异构数据库之间的互访和互操作功能等。</p><blockquote><p>练习题：给出一个病人就诊情况的 E-R 模型图，并分析 E-R 模型是否满足概念模型的两个基本特征。</p></blockquote><p>解：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211015103959.png"></p><p>E-R 模型满足概念模型的两个基本特征。</p><p>说明几点：</p><p>病人与病床的关系：一名病人在一次住院期间对应一张病床，而一张病床可以有多名病人曾经住过。</p>]]></content>
    
    
    <categories>
      
      <category>数据库</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据库</tag>
      
      <tag>数据库系统概论</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《编译原理第三版》（张素琴）第四章学习札记</title>
    <link href="/2021/10/13/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/13/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E5%9B%9B%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>何为确定的自顶向下分析方法？</p></blockquote><p>确定的自顶向下分析方法，是从文法的开始符号出发，考虑如何根据当前的输入符号（单词符号）唯一地确定选用哪个产生式替换相应非终结符以往下推导，或如何构造一棵相应的语法树。</p><blockquote><p>如何理解 $\text{FIRST()}$？</p></blockquote><p>设 $G &#x3D; (V_T, V_N, P, S)$ 是上下文无关文法。</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; {a|\alpha \stackrel{<em>}{\Rightarrow} \alpha \beta, \quad a \in V_T, \alpha, \beta \in V^</em>}<br>$$</p><p>若 $\alpha \stackrel{*}{\Rightarrow} \epsilon$，则规定 $\epsilon \in \text{FIRST}(\alpha)$。称 $\text{FIRST}(\alpha)$ 为 $\alpha$ 的<strong>开始符号集</strong>或<strong>首符号集</strong>。</p><blockquote><p>如何理解 $\text{FOLLOW()}$？</p></blockquote><p>设 $G &#x3D; (V_T, V_N, P, S)$ 是上下文无关文法，$A \in V_N$，$S$ 是开始符号。</p><p>$$<br>\text{FOLLOW}(A) &#x3D; {a|S \stackrel{<em>}{\Rightarrow} \mu A \beta ; 且 ; a \in V_T, a \in \text{FIRST}(\beta), \mu \in V_T^</em>, \beta \in V^{+}}<br>$$</p><p>若 $S \stackrel{<em>}{\Rightarrow} \mu A \beta$，且 $\beta \stackrel{</em>}{\Rightarrow} \epsilon$，则 $＃ \in \text{FOLLOW}(A)$。</p><p>$$<br>\text{FOLLOW}(A) &#x3D; {a|S \stackrel{*}{\Rightarrow} \cdots Aa \cdots, ; a \in V_T}<br>$$</p><p>若有 $S \stackrel{*}{\Rightarrow} \cdots A$，则规定 $＃ \in \text{FOLLOW}(A)$。</p><p>这里用 $＃$ 作为输入串的结束符，也称为输入串符号。</p><p>因此当文法中含有形如</p><p>$$<br>\begin{split}<br>A \rightarrow \alpha \<br>A \rightarrow \beta<br>\end{split}<br>$$</p><p>的产生式时，其中 $A \in V_N, \alpha、\beta \in V^*$，若 $\alpha$ 和 $\beta$ 不能同时推导出空，假定 $\alpha \stackrel{<em>}{\nRightarrow} \epsilon$ $, \beta \stackrel{</em>}{\Rightarrow} \epsilon$，则当 $\text{FIRST}(\alpha)$ $\cap$ $(\text{FIRST}(\beta)$ $\cup$ $\text{FOLLOW}(A)) &#x3D; \varnothing$ 时，对于非终结符 $A$ 的替换仍可唯一地确定候选。</p><blockquote><p>如何理解 $\text{SELECT()}$？</p></blockquote><p>给定上下文无关文法的产生式 $A \rightarrow \alpha$ $, $ $A \in V_N, \alpha \in V^*$，</p><ul><li>若 $\alpha \stackrel{*}{\nRightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $\text{FIRST}(\alpha)$。</li><li>若 $\alpha \stackrel{*}{\Rightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $(\text{FIRST}(\alpha) - {\varepsilon})$ $\cup$ $\text{FOLLOW}(A)$。</li></ul><blockquote><p>何为 $\text{LL}(1)$ 文法？</p></blockquote><p>一个上下文无关文法是 $\text{LL}(1)$ 的充分必要条件是,</p><p>对每个非终结符 $A$ 的两个不同产生式，$A \rightarrow \alpha$ $,$ $A \rightarrow \beta$，满足</p><p>$$<br>\text{SELECT}(A \rightarrow \alpha) \cap \text{SELECT}(A \rightarrow \beta) &#x3D; \varnothing<br>$$</p><p>其中 $\alpha、\beta$ 不同时能 $\stackrel{*}{\Rightarrow} \epsilon$。</p><p>$\text{LL}(1)$ 的含义是：第 1 个 $\text{L}$ 表明自顶向下分析是从左向右扫描输入串，第 2 个 $\text{L}$ 表明分析过程中将用最左推导，1 表明只需要向右看一个符号便可决定如何推导，即选择哪个产生式（规则）进行推导。</p><blockquote><p>如何判别某文法是否是 $\text{LL}(1)$ 文法？</p></blockquote><p>首先计算 $\text{FIRST}$、$\text{FOLLOW}$、$\text{SELECT}$ 集合，然后根据定义判别文法是否是 $\text{LL}(1)$ 文法。</p><blockquote><p>如何计算一个文法符号 $X \in V$ 的 $\text{FIRST}$ 集 $\text{FIRST}(X)$？</p></blockquote><p>① 若 $X \in V_T$，则 $\text{FIRST}(X) &#x3D; {X}$。<br>② 若 $X \in V_N$，且有产生式 $X \rightarrow a \cdots$ $,$ $a \in V_T$，则 $a \in \text{FIRST}(X)$。<br>③ 若 $X \in V_N$，$X \rightarrow \varepsilon$，则 $\varepsilon \in \text{FIRST}(X)$。<br>④ 若 $X, Y_1, Y_2,$ $\cdots$ $, Y_n \in V_N$，而有产生式 $X \rightarrow Y_1Y_2 \cdots Y_n$。当 $Y_1, Y_2, \cdots, Y_{i - 1}$ $\stackrel{*}{\Rightarrow} \varepsilon$ 时（其中 $1 \leqslant i \leqslant n$），则 $\text{FIRST}(Y_1) - {\varepsilon},$ $\text{FIRST}(Y_2) - {\varepsilon},$ $\cdots$ $, \text{FIRST}(Y_{i - 1}) - {\varepsilon},$ $\text{FIRST}(Y_i)$ 都包含在 $\text{FIRST}(X)$ 中，即</p><p>$$<br>\text{FIRST}(X) &#x3D; (\text{FIRST}(Y_1) \cup \text{FIRST}(Y_2) \cdots \cup \text{FIRST}(Y_i)) - {\varepsilon}<br>$$</p><p>⑤ 当 ④ 中所有 $Y_i \stackrel{*}{\Rightarrow} \varepsilon$ $,$ $(i &#x3D; 1, 2, \cdots, n)$，则 </p><p>$$<br>\text{FIRST}(X) &#x3D; (\text{FIRST}(Y_1) \cup \text{FIRST}(Y_2) \cdots \cup \text{FIRST}(Y_n)) \cup {\varepsilon}<br>$$</p><p>反复使用上述 ②~⑤ 步，直到每个符号的 $\text{FIRST}$ 集合不再增大为止。</p><blockquote><p>如何计算一个符号串的 $\text{FIRST}$ 集合？</p></blockquote><p>若符号串 $\alpha \in V^*$ $,$ $\alpha &#x3D; X_1 X_2 \cdots X_n$，当 $X_1$ 不能 $\stackrel{*}{\Rightarrow} \varepsilon$，则置 $\text{FIRST}(\alpha) &#x3D; \text{FIRST}(X_1)$。</p><p>若对任何 $j(1 \leqslant j \leqslant i - 1,$ $2 \leqslant i \leqslant n)$ $,$ $\varepsilon \in \text{FIRST}(X_j)$ $,$ $\varepsilon \notin \text{FIRST}(X_i)$，则</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; \bigcup_{j &#x3D; 1}^{i - 1}(\text{FIRST}(X_j) - {\varepsilon}) \cup \text{FIRST}(X_i)<br>$$</p><p>当对任何 $j(1 \leqslant j \leqslant n)$，$\text{FIRST}(X_j)$ 都含有 $\varepsilon$ 时，则</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; \bigcup_{j &#x3D; 1}^{n}(\text{FIRST}(X_j) - {\varepsilon}) \cup {\varepsilon}<br>$$</p><p>按：这里最后一个公式书上的写法似乎有点问题。</p><blockquote><p>如何计算 $\text{FOLLOW}$ 集？</p></blockquote><p>对文法中的每一个 $A \in V_N$，根据定义计算 $\text{FOLLOW}(A)$。</p><p>① 设 $S$ 为文法的开始符号，把 ${＃}$ 加入 $\text{FOLLOW}(S)$ 中（这里＃为句子括号）。</p><p>按：＃似为句子结束符号。</p><p>② 若 $A \rightarrow \alpha B \beta$ 是一个产生式，则把 $\text{FIRST}(\beta)$ 的非空元素加入 $\text{FOLLOW}(B)$ 中。<br>如果 $\beta \stackrel{*}{\Rightarrow} \varepsilon$，则把 $\text{FOLLOW}(A)$ 也加入 $\text{FOLLOW}(B)$ 中，因为当有形如</p><p>$$<br>\begin{split}<br>D &amp;\rightarrow \alpha_{1} A \beta_{1} \<br>A &amp;\rightarrow \alpha B \beta<br>\end{split}<br>$$</p><p>的产生式时，$A, B, D \in V_N$，$\alpha, \alpha_{1}, \beta, \beta_{1} \in V^*$，在推导过程中可能出现如下的句型序列：</p><p>$$<br>S \stackrel{*}{\Rightarrow} \cdots \alpha_{1} A \beta_{1} \cdots \Rightarrow \alpha_{1} \alpha B \beta \beta{1} \cdots \Rightarrow \cdots \alpha_{1} \alpha B \beta_{1} \cdots<br>$$</p><p>因此，有 $\text{FOLLOW}(A)$ $\subseteq$ $\text{FOLLOW}(B)$。</p><p>③ 反复使用 ② 直到每个非终结符的 $\text{FOLLOW}$ 集不再增大为止。</p><blockquote><p>如何计算某一文法中的每一个产生式的 $\text{SELECT}$ 集？</p></blockquote><p>直接根据定义来判断：</p><p>给定上下文无关文法的产生式 $A \rightarrow \alpha$ $, $ $A \in V_N, \alpha \in V^*$，</p><ul><li>若 $\alpha \stackrel{*}{\nRightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $\text{FIRST}(\alpha)$。</li><li>若 $\alpha \stackrel{*}{\Rightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $(\text{FIRST}(\alpha) - {\varepsilon})$ $\cup$ $\text{FOLLOW}(A)$。</li></ul><blockquote><p>如何消除文法的直接左递归？</p></blockquote><p>将</p><p>$$<br>A \rightarrow A \alpha | \beta ; (\alpha \neq \varepsilon, \beta ;不以 A 开头)<br>$$</p><p>转换成</p><p>$$<br>\begin{split}<br>A \rightarrow \beta A^{‘} \<br>A^{‘} \rightarrow \alpha A^{‘} | \varepsilon<br>\end{split}<br>$$</p><p><img src="https://i.imgur.com/LobTnUb.png"></p><p><img src="https://i.imgur.com/BTAs20o.png"></p><blockquote><p>如何消除文法的间接子递归？</p></blockquote><p><img src="https://i.imgur.com/ONRU6mw.png"></p><blockquote><p>消除左递归的算法？</p></blockquote><p><img src="https://i.imgur.com/RCSsK8L.png"></p><hr><p>附：哈工大慕课陈鄞老师对于 $\text{FIRST}$、$\text{FOLLOW}$ 和 $\text{SELECT}$ 的理解。</p><blockquote><p>对 $\text{FIRST}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/s8YqiDv.png"></p><p><img src="https://i.imgur.com/VmrkYxH.png"></p><p><img src="https://i.imgur.com/hgG2AXE.png"></p><blockquote><p>对 $\text{FOLLOW}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/BWChrVU.png"></p><p>按；这里有一点，“如果 A 是某个句型的最右符号，则将结束符 <code>$</code> 添加到 FOLLOW(A) 中”，拿下面的 $FOLLOW(E)$ 来看，$E \rightarrow E$ 右面的 $E$ 是其本身，同时也是 $E$ 这个句型的最右符号，所以要把 <code>$</code> 加入到该符号的 FOLLOW 集中。</p><p>另按：$FOLLOW$ 集中没有 $\varepsilon$。</p><p><img src="https://i.imgur.com/T9YnsK5.png"></p><blockquote><p>一个 $\text{SELECT}$ 的例子。</p></blockquote><p><img src="https://i.imgur.com/OQut1Ok.png"></p><blockquote><p>一张预测分析表。</p></blockquote><p><img src="https://i.imgur.com/rqhlpyx.png"></p><p>按：这张图中上面的那张表中差了一个表达式：$T^{‘} \rightarrow \varepsilon$。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《深入解析 CSS》札记</title>
    <link href="/2021/10/13/%E3%80%8A%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-CSS%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/13/%E3%80%8A%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90-CSS%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>前端</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《红与黑》札记</title>
    <link href="/2021/10/12/%E3%80%8A%E7%BA%A2%E4%B8%8E%E9%BB%91%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/12/%E3%80%8A%E7%BA%A2%E4%B8%8E%E9%BB%91%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>◆ 19 多思则多忧</p><blockquote><p>或许天主会矜怜我拳拳之忱，而饶了我儿子！只要你指得出还有更凶的惩罚，我马上扑上去。</p></blockquote><blockquote><p>她的生活，摆动于天堂与地狱之间：看不到于连，就像掉进了地狱；匍匐于他脚边，无异于进了天堂！</p></blockquote><p>◆ 20 匿名信</p><blockquote><p>我什么恶人都不怕；于我，世上只有一种不幸：那就是看到唯一使我对人生有所依恋的人——变心。</p></blockquote><p>◆ 21 与主人的谈话</p><blockquote><p>“我永远不会下作到吹嘘自己的勇气，”于连冷冷说道，“那才是低能呢。事实是事实，让人家去说吧。不过，”</p></blockquote><p>◆ 22 一八三〇年的作风</p><blockquote><p>于连曾立意逢人只以假话搪塞，但面对葛罗先生，他对自己这一戒律产生了怀疑。</p></blockquote><blockquote><p>“我明白了，”斯丹尼说，“就是乌鸦发傻，让衔在嘴里的干酪掉在地上，给狐狸叼走了，狐狸专会拍马屁。”</p></blockquote><blockquote><p>有这么一种传说，瓦勒诺对当地的杂货商说：“把你们之中最蠢的两个人交给我”；对吃法律饭的说：“把你们之中最无能的两个人指给我”；对行医的说：“把你们之中最会招摇撞骗的两个人举出来”；他把各行各业的渣滓结集拢来，对他们说：“这天下是我们的了！”</p></blockquote><blockquote><p>两人款款行，轻轻谈，</p></blockquote><p>◆ 23 长官的苦恼</p><blockquote><p>美人慧黠心常变，痴汉意诚情自专。</p></blockquote><p>◆ 25 神学院</p><blockquote><p>扫了一眼，推测他只有一种情感：所说的事，凡与天国无涉的，都表示极度的蔑视。</p></blockquote><blockquote><p>世相浮华虚妄，切不可太动心。</p></blockquote><p>◆ 26 世界之大或富人所缺</p><blockquote><p>琐琐小事。</p></blockquote><p>◆ 27 涉世之初</p><blockquote><p>神学院的学生，和其他行业的年轻人一样，热衷于这类事出非常、异想天开的小算盘儿，而且大大夸大了略施小计的效用。</p></blockquote><p>◆ 29 初次提升</p><blockquote><p>不幸的是，这样一来，使原来十分高贵的侧影，竟与狐狸的尊容有着不可救药的相似。</p></blockquote><blockquote><p>为学如此，至矣极矣。</p></blockquote><p>◆ 下卷</p><blockquote><p>搽脂抹粉</p></blockquote><p>◆ 1 乡村情趣</p><blockquote><p>哓哓</p></blockquote><blockquote><p>在你性格里，至少依我看，有某种不可捉摸的东西，你不发迹，就会发霉，没有折中的余地。</p></blockquote><blockquote><p>因为北方，文明多而不义少。</p></blockquote><blockquote><p>在贝藏松，你还情出格外，提议愿对我有所馈赠。幸亏我那时还有五百二十法郎，如果一文不名，那就得靠你接济了。</p></blockquote><p>◆ 2 初见世面</p><blockquote><p>真是可笑而又动人的回忆：我年方十八，初次进入沙龙，觉得那么孤单无靠！哪个女人瞟我一眼，就会觉得手足无措。越想取悦于人，便越是笨手笨脚。对一切的一切，都形成最错误的看法。要么无缘无故地倾心相与，要么把那个端详我的人认作死敌。不过那时，生性羞怯虽带给我不少苦痛，但是，一个美好的日子，终究是美好的！<br>——康德</p></blockquote><blockquote><p>不甚了了</p></blockquote><blockquote><p>淫逸不雅</p></blockquote><blockquote><p>从顶楼下来，侯爵唤来一名老仆：“阿三，这位索雷尔先生以后归你侍候。”</p></blockquote><blockquote><p>“Cela只有一个l, ”侯爵对他说，“以后凡是抄件，拼写没把握的字，最好查查字典。”</p></blockquote><blockquote><p>巴黎人说话声音都低低的，也不把一点点小事情夸大得野豁豁。</p></blockquote><blockquote><p>不过，仔细打量之下，于连私心承认，这么美的眼睛倒还从没看到过。这双眼睛，透露出一颗非常冷漠的灵魂。后来，发现这眼神里有一种厌倦的表情。在察言观色的同时，时时不忘要显得威严逼人。</p></blockquote><blockquote><p>顾盼见光彩。</p></blockquote><blockquote><p>别看这年轻教士外表笨拙，内里或许腹笥甚宽。</p></blockquote><p>◆ 3 第一步</p><blockquote><p>于连听出“咱们”两字的含义，更觉其人可亲了。</p></blockquote><blockquote><p>不才我摔了个大马趴。</p></blockquote><blockquote><p>一个内地人，在这种场合，还能保持本色！以前没见过，以后也不会见到；而且，是向太太们讲他的倒霉事儿！</p></blockquote><blockquote><p>你马上得进骑马学校。这样，过几个礼拜，能与阁下一起走马，不亦快哉！</p></blockquote><blockquote><p>于连如果是株脆弱的芦苇，就任其枯萎吧。要是个有作为的人，那自会脱颖而出。</p></blockquote><p>◆ 4 拉穆尔府</p><blockquote><p>他在这儿做什么？他会喜欢这儿吗？他想讨这儿的人喜欢吗？</p></blockquote><blockquote><p>“这个人倒不是生来下跪的，不像那老神甫，”她心里想，“天哪！那老头儿长得多丑呀！”</p></blockquote><blockquote><p>这天晚上，不管是否有意做作，她把这批老厌物刻薄得可以。</p></blockquote><p>按：刻薄：取笑，奚落。（《国语辞典》）原来果然是有这样动词的用法的。这个版本的翻译，很多小地方，可见译者的慧心。</p><blockquote><p>听这小团体里人的说笑，他常为之绝倒。他觉得，类似的妙语，自己一句也想不出。就像一种外国语，听是听得懂，说却说不出。</p></blockquote><blockquote><p>他没戴假发，难道想凭他的绝顶聪明，登上省长的宝座？脱帽露顶王公前，准是想表明他脑瓜儿里的想法高明透顶！</p></blockquote><blockquote><p>我真不懂他为什么跑到这儿来受家父的呲，有时还很叫人下不了台。那天，家父从饭桌的这一头向那一头的他喊话：‘亲爱的戴柯立，卖友求荣的事，你客串过几回啦？’</p></blockquote><blockquote><p>付之丙丁</p></blockquote><blockquote><p>看她明眸善睐，顾盼神飞，大有瑞那夫人的风采。</p></blockquote><blockquote><p>噱</p></blockquote><blockquote><p>如此这般，我算看到了自己处境的另一极端。想我一年没二十金币进款，却和每小时有二十金币进账的人平起平坐，而此人还受尽众人奚落……这类见闻，倒是医治贪欲的良药。</p></blockquote><p>◆ 5 敏感的心灵与虔诚的贵妇</p><blockquote><p>侯爵曾赏他一匹马。于连担心骑马出去给人撞见，对外便说，他是遵医嘱，才做骑马运动的。</p></blockquote><blockquote><p>谨饬</p></blockquote><p>◆ 6 说话的腔调</p><blockquote><p>他恨不得立刻就决斗。但碰到了个难题：偌大一个巴黎城，哪里去找证人？他没有一个朋友，相识倒有几个，通常交往了五六个礼拜，就各自西东了。</p></blockquote><blockquote><p>比如说，骑士说话，有点格格不吐，那是因为他有幸见到的一位权贵说话也有这种贵恙之故。</p></blockquote><p>◆ 7 风湿痛</p><blockquote><p>彼拉神甫不像侯爵那样温文尔雅，只“唏溜”吹了一声口哨作为回答，接着乱以他语。</p></blockquote><p>◆ 8 抬高身价的荣耀是什么</p><blockquote><p>诺尔拜的语调堪称客气，甚至关切，并无可訾之处，于连只好借感恩戴德的答话，来发发自己的坏脾气。</p></blockquote><blockquote><p>逸兴遄飞</p></blockquote><blockquote><p>沐猴而冠</p></blockquote><blockquote><p>“我看只有死刑才能抬高一个人的身价，”玛娣儿特自忖，“天下只有这桩事，是有钱买不来的！”</p></blockquote><p>◆ 9 舞会上</p><blockquote><p>玛娣儿特犟头倔脑地答道</p></blockquote><p>按：“犟头倔脑”用在这里实在可爱，玛娣尔特可爱，译者也好玩。</p><blockquote><p>凡老家伙和好说丧气话的人，历来是连看都不看一眼的。</p></blockquote><blockquote><p>顾盼之间更显得高傲了。</p></blockquote><blockquote><p>谀死的诔词</p></blockquote><blockquote><p>说话有创见的人，不免口角俏俐，只要有一两句冒失话，主人就觉得受了轻慢。</p></blockquote><blockquote><p>真有霄壤之别</p></blockquote><blockquote><p>正当他强打精神，刚看第一封信，就听到近旁绸衫窸窣，他陡然转过脸去，见拉穆尔小姐站在离书桌二步远处，嫣然一笑。她再次闯入，于连不免有气。</p></blockquote><blockquote><p>怎么！词卑言甘，乞求起一个下属来？窘状有增无已，便用轻快的口吻说：“您平时冷冷的，是什么把您变得那么灵醒，像米开朗基罗雕塑的先知那样？”</p></blockquote><blockquote><p>“丹东盗用，做得对吗？”他冲口而出，神色越来越凶，“皮埃蒙特的革命党、西班牙的过激派，他们图谋不轨，把老百姓也牵连进去，应该不应该？把军职、勋章，送给毫无军功的人，应该不应该？佩戴勋章的人，难道就不怕国王卷土重来？都灵的金库给洗劫一空，该当不该当？总之一句话，小姐，”他逼近一步，样子很可怕，“一个想扫除愚昧和罪恶的人，必须像暴风雨一样摧枯拉朽，不分青红皂白地施虐作恶吗？”</p></blockquote><p>◆ 10 玛葛丽特皇后</p><blockquote><p>总之，把院士拍得一五一十。</p></blockquote><blockquote><p>嬖近</p></blockquote><blockquote><p>“这就是他们比我优越的地方。他们先人的业绩，使后代能超越卑俗的感情，不用为日常衣食操心！”</p></blockquote><blockquote><p>“真是生而不幸！纵论天下大事，我配吗？组成我生活的，不过是一连串的伪诈，就因为缺少借以糊口的一千法郎。”</p></blockquote><blockquote><p>向阔千金叹穷身世，他为之脸红，便肆力用雄豪的口气，表明自己无求于人。</p></blockquote><blockquote><p>“她会爱我吗？”</p></blockquote><p>◆ 11 少女的王国</p><blockquote><p>唉！有趣点的人，还能找到个把吗？</p></blockquote><blockquote><p>他缺的是什么？名望和财产。名望，他日后自会造就；财产，也不难挣得。<br>“反观匡泽诺，他什么都不缺，终其一生也不过是个公爵，半拉保王党半拉自由党，中不溜儿的，永远不走极端，因此无论到哪里都是次要角色。<br>“哪一桩大事，开头的时候，不认为是走极端？只有事成之后，芸芸众生才觉得似乎是可行的。是的，爱情，以及一切爱的奇迹，将占据我整个心灵；爱情像团烈火，给人活力，我已感到爱的火焰。只有这个恩典，上天还没给我。天地钟灵毓秀之德，不会无端把所有胜长萃于我一身的。我就该享有幸福。</p></blockquote><blockquote><p>半拉保王党半拉自由党，中不溜儿的，永远不走极端，因此无论到哪里都是次要角色。</p></blockquote><p>◆ 12 难道是个丹东</p><blockquote><p>你们看到的不是狼，只是狼的影子。</p></blockquote><blockquote><p>不错，他一贫彻骨，用功读书是为当教士；而他们呢？已是骑兵上尉，无需再读书了——这条路当然要容易得多。</p></blockquote><blockquote><p>鹰扬</p></blockquote><blockquote><p>你有病没病，我的阿哥？</p></blockquote><blockquote><p>在他这个年纪，身为下贱，而心雄万丈，当然会觉得命苦，需要有个女友。这个女友或许就是我，但未见他有什么爱的表示。他的性格以大胆著称，如若有情，自会向我诉说的。”</p></blockquote><blockquote><p>大家使她相信，由于家世、财产等优越条件，她理应比旁人更幸福。</p></blockquote><blockquote><p>十六到二十，是人生的黄金时代；没有伟大的激情，才一直百无聊赖，虚度美好的年华。</p></blockquote><blockquote><p>正当玛娣儿特心绪纷扰、惶惶不可终日的阶段，于连不解为什么她的目光久久凝视自己，停睇不转。</p></blockquote><blockquote><p>他一出现，顿时百喙俱寂，这冷场恁样也打不破。</p></blockquote><p>◆ 13 焉知不是阴谋</p><blockquote><p>目之所见，无非就是外貌。</p></blockquote><blockquote><p>每次拿走一册，就把两旁的书松松开，</p></blockquote><p>疑：书松是一个名词，还是“松松开”是一个动词？</p><blockquote><p>于连对拉穆尔小姐的倩影常绮思菲菲：其体态之绰约，服饰之高雅，纤手之白，玉臂之美，举止之disinvoltura（娴雅），直觉得爱之不胜。</p></blockquote><blockquote><p>（此辈巧于伪诈，才足欺世）</p></blockquote><blockquote><p>她的身材婀娜多姿，脚的样子也娇美无比，跑起来身轻如燕，把于连看呆了。</p></blockquote><blockquote><p>原来她说“不许”两字的命令口气，大大冒犯了他！</p></blockquote><blockquote><p>您将远行，这就非说不可……不获面觌，情何以堪！</p></blockquote><blockquote><p>而我呢，老天像个后娘，把我扔到社会的最底层，赐予我一颗高贵的心，却偏偏没给我千把法郎的财，就是说，没给我面包，确确实实是没给我面包。</p></blockquote><blockquote><p>他记起拉穆尔侯爵夫人，尤其是她那些身为命妇的女友，向他投来的充满蔑视的目光。</p></blockquote><blockquote><p>这些言辞只能看作是种诡计，我才不信胡话，哪怕其甜如蜜，除非是对我所企盼的那恩情，真有实惠给我，才能使我确信。</p></blockquote><p>◆ 14 少女的心思</p><blockquote><p>一天才清晨七点，她就跑进母亲卧房，请求许可她暂时退居微矶邺韬光晦迹。</p></blockquote><blockquote><p>事有可为而不可着笔者！</p></blockquote><blockquote><p>要是我情不由己，对这金发娃娃发生兴味，那就傻得可以了。</p></blockquote><blockquote><p>他们拿我寻开心，我就跟他们打哈哈。万一她对我真有几分情，那我对她就百倍地好。</p></blockquote><blockquote><p>他喜滋滋地写了两页，捉弄捉弄捉弄他的人。</p></blockquote><p>◆ 15 莫非是个圈套</p><blockquote><p>很明显，他们要我自蹈祸机，至少是想愚弄我。</p></blockquote><blockquote><p>这样，在她眼里，我成了十足的胆小鬼。我没有高贵的出身可恃，就得靠伟大的品格，这种品格不是凭好心的猜度，而要能兑现，用响亮的行动……</p></blockquote><blockquote><p>事态严重起来了，我的孩子，</p></blockquote><blockquote><p>事关荣誉。从来没有一个穷鬼，像我这样被命运抛到底层，又复得这样大好的机会。我会有别的艳遇，但层次不会这么高……</p></blockquote><blockquote><p>既然他已决定赴汤蹈火，暂时耽于这种怯弱的情绪，又有什么可不好意思的。</p></blockquote><blockquote><p>我命中就注定要用这种攀登工具，”于连苦笑了一下，“这里是梯子，维璃叶也是梯子。但此一时，彼一时，多么不同啊！”</p></blockquote><p>◆ 16 半夜一点钟</p><blockquote><p>夜色清朗如许，令人无可奈何。</p></blockquote><blockquote><p>他把大梯子搬来，等了五分钟——此刻还容许幡然变计。</p></blockquote><blockquote><p>她别有凄苦：骄矜与娇羞，在贵族小姐身上本是极自然的情绪，此刻袭上心头，搅乱她心曲。</p></blockquote><blockquote><p>咂摸</p></blockquote><blockquote><p>依违不决</p></blockquote><p>◆ 17 古剑</p><blockquote><p>生做蛮来</p></blockquote><blockquote><p>这一发现，在心底掀起极大的波澜：好恶爱憎全乱了套了。</p></blockquote><blockquote><p>“碰到阿狗阿猫，就委身于他，我都恨死自己了。”她气恼得哭了出来。</p></blockquote><blockquote><p>“碰到阿狗阿猫！”于连冲口而出，同时扑向一把中世纪的古剑，那是当作古董挂在藏书室的。</p></blockquote><blockquote><p>他的痛苦，在跟拉穆尔小姐说话时已达于极点，及至看她流出羞愧的眼泪，顿时陡增百倍。一剑毙命，把她杀了，当是天下最痛快的事了。</p></blockquote><p>◆ 18 伤心时刻</p><blockquote><p>重门深锁</p></blockquote><blockquote><p>即使胸膛里灌满了熔化的铅水，也不会像现在这么难受。</p></blockquote><blockquote><p>他刚才这句话，太坦诚，也太愚蠢。顷刻之间，风云突变：玛娣儿特确信自己仍为他所不弃，反倒鄙其为人，彻底看他不起了。</p></blockquote><p>◆ 19 滑稽剧场</p><blockquote><p>镜子照出污泥，你们却责怪镜子！</p></blockquote><blockquote><p>她会发火，骂我，管她呢！我给她一吻，最后的一吻，然后回房自杀……好歹临死之前，我的嘴唇亲了她的粉颊香腮！</p></blockquote><blockquote><p>蜜爱幽欢，神魂颠倒。此中情形，不写为妙。</p></blockquote><p>按：等着，自有人会写个几万字，你看妙不妙。</p><p>◆ 20 日本花瓶</p><blockquote><p>拉穆尔小姐可说是再敦兄妹之情，重践礼秩之防。</p></blockquote><blockquote><p>看来她只爱了我八九天，而我，会爱她一辈子。</p></blockquote><p>◆ 21 秘密记录</p><blockquote><p>“要知道，”拉穆尔先生接着说，“一个人做了什么蠢事，永远会推说是出于好心。”</p></blockquote><p>◆ 22 争论</p><blockquote><p>不成其为</p></blockquote><p>疑：至今仍是不理解应该如何使用。不会用。</p><blockquote><p>我不作如是想。</p></blockquote><blockquote><p>等扰扰之声平息下来，侯爵又重复了一遍。</p></blockquote><blockquote><p>到那时，就只见‘候选人’去讨好狗屎不如的‘大多数’了。</p></blockquote><blockquote><p>别谈这些令人不快的事了，归结到一点，就是：假如一个人有条烂腿要锯掉，他却对外科医生说：‘我这条病腿是好端端的。’——这就很不中听。我借这个说法，用意在于：我们的外科医生，就是那位高贵的大公。</p></blockquote><p>◆ 23 教士 林产 自由</p><blockquote><p>胪陈大端</p></blockquote><p>按：这个胪陈的“胪”，因为偏旁是月，多少与肉有关，而作动词解释成陈列，那么，其含义的渊源是从哪里来呢？想了一下，似乎应该与古代的祭祀有关，古代祭祀应该就是把各种动物的肉体一排一排地陈列在祭祀席上，因而可能就有了“陈列”这一个含义。</p><blockquote><p>于连在雷兹公爵府的舞会上，跟他曾有过一面之雅。</p></blockquote><blockquote><p>恋栈</p></blockquote><blockquote><p>——而这一点，诸位，我奈某一定办到。</p></blockquote><blockquote><p>“我敢打赌，”背心先生说，“将军月下追首相去了。必定是向首相道歉，说自己不该莅会；不过，他会声称，我们是给他牵着鼻子走的。”</p></blockquote><blockquote><p>于连是因缘际会，才得叨陪末座。</p></blockquote><blockquote><p>这份照会，结尾欠明达。</p></blockquote><p>◆ 24 斯特拉斯堡</p><blockquote><p>三天前，他会痛快淋漓，手刃卡斯塔奈德神甫；但此刻，在斯特拉斯堡，哪怕是小孩子跟他吵，他都会觉得竖子有理。回想生平所遇到的对手仇敌，都觉得是他于连自己理亏！</p></blockquote><blockquote><p>第一，每天去拜望她；第二，另起一题，追求她社交圈里的一位女子，但表面上不要显得很热衷，懂吗？不瞒你说，这角色很难演。当然，这是粉墨登场，但是，别让人看出你在演戏；不然，就白费了。</p></blockquote><blockquote><p>何至于此。你只是眷恋太深，比我想象的还厉害。戴慕桃夫人的心思，全用在自己身上，像所有得天独厚的女人一样，上天给了她们太多的尊荣，或太多的钱财。她眼睛里看到的只是她自己，而不是你，所以，她对你并不了解。即使对你有过两三次感情冲动，那是因为想入非非，把你当作梦想中的英雄，而不是真实的你……“唉，见鬼，这些都是常识了，亲爱的索雷尔，你难道还是小学生？……“得！进这家铺子里去吧！瞧这条黑领带呱呱叫，简直像百灵顿街约翰·安徒生名匠的出品。请赏脸收下，把你缠在脖子上这根难看的黑绳子扔得远远去。”</p></blockquote><blockquote><p>柯拉索夫眉飞色舞，从来还没有一个法国人，听他这么讲老半天的。亲王不禁窃喜：法国人是俄国人的师父，我今日里开课，居然开导起师父来！</p></blockquote><p>◆ 25 洁妇的操守</p><blockquote><p>只是有点儿假惺惺，说话有点野豁豁。有些日子，她用的字，我个个都懂，就是不知道全句说的是什么意思。</p></blockquote><blockquote><p>“但愿天助人愿！”</p></blockquote><blockquote><p>必须摆脱这种情绪，不然会叫我出乖露丑的。</p></blockquote><blockquote><p>“我得专门记一本攻城日记。不然，攻到什么程度，自己也会忘的。</p></blockquote><blockquote><p>柯拉索夫亲王要是此刻身在巴黎，一定会大感得意：这晚会的情况，与他所预期的，毫厘不爽。</p></blockquote><blockquote><p>这类好事，在他想念里，都模模糊糊，甚至是远哉遥遥的。</p></blockquote><p>按：远哉遥遥，“遥遥”这个叠词似乎是译者自己造的，但是效果不错。</p><p>◆ 26 精神之恋</p><blockquote><p>后来，靠了这个想法，才平静下来：“我瞧不起的东西，在元帅夫人眼里，居然还是盖世英才哩！”</p></blockquote><blockquote><p>吕宋皮</p></blockquote><blockquote><p>此信应亲自送去：骑高头马，打黑领带，穿蓝礼服。交门房时，面带愁容，目露阴郁。若遇内室女仆，做悄悄拭泪状。宜与侍女套近乎。</p></blockquote><p>◆ 27 教会里的美差</p><blockquote><p>此刻，与失恋无关的事，跟他八竿子也打不着。</p></blockquote><blockquote><p>这文体就像风力琴。谈虚无，谈死亡，谈无穷，都是要言妙道，但究其实，只是一种怕人耻笑的恐惧心理而已。</p></blockquote><blockquote><p>高自标榜</p></blockquote><p>◆ 28 《曼侬·莱斯戈》</p><blockquote><p>这种波谲云诡的手段，她为之愕然。</p></blockquote><p>◆ 29 闲愁万种</p><blockquote><p>这位畏惧流言的女性，破天荒第一次心扉为开，而她关切的事，跟她高自标置的身份、地位，不无抵触。</p></blockquote><blockquote><p>这类鬼蜮行径</p></blockquote><blockquote><p>说到这里，她骇然发觉自己失态，骄纵的性格一受抑勒，眼泪顿时涌了上来，气得连气都要透不过来。</p></blockquote><blockquote><p>这玉软花柔的娇躯，我不该贴在自己心口，否则她又会鄙薄我、欺凌我。这种性格真可怕！</p></blockquote><blockquote><p>您这一文不值的东西，竟敢戏弄元帅夫人！</p></blockquote><p>◆ 30 滑稽剧场的包厢</p><blockquote><p>一阵阴郁的沉默，便是于连的全部答复。</p></blockquote><blockquote><p>如果我贪图此刻的卿卿我我，”于连暗想，“转瞬之间，她的目光就会现出冷冷的轻蔑。”</p></blockquote><blockquote><p>玛娣儿特急忙转过脸来，聆听他的声音，对她几乎已是一种不存想望的幸福。</p></blockquote><blockquote><p>他感到爱丝情缕一直渗进他内心的边边角角。</p></blockquote><p>◆ 31 教她有所畏惧</p><blockquote><p>钟头</p></blockquote><blockquote><p>教她有所畏惧！</p></blockquote><blockquote><p>他心里飘飘然，在斗室里来回蹀躞。</p></blockquote><blockquote><p>现在要镇住的，是一个妖姬，而且，非镇住不可。</p></blockquote><blockquote><p>人家对您飞短流长，在我只是多了一桩倒霉事儿。</p></blockquote><blockquote><p>他软弱已极。</p></blockquote><blockquote><p>吁</p></blockquote><p>◆ 32 老虎</p><blockquote><p>一位英国旅行家讲过他与老虎相处之道：老虎是他喂大的，也常抚摸抚摸，但总不忘在桌上放一把子弹上膛的手枪。</p></blockquote><blockquote><p>生活对她一向慢如龟爬，现在却其快若飞了。</p></blockquote><p>◆ 34 工于心计的老人</p><blockquote><p>气恼之下，便给家严去一函。</p></blockquote><blockquote><p>侯爵想把一块采邑的地名给于连做姓氏；再说，为什么不能让他承袭我的爵位呢？</p></blockquote><p>◆ 36 可悲的细节</p><blockquote><p>别指望我会有软弱的表现。我仇已报恨已消。我身当死罪，谨此恭候。请为我的灵魂祈祷吧！</p></blockquote><p>◆ 37 在塔楼里</p><blockquote><p>委顿</p></blockquote><blockquote><p>现在是正当英年，引刀一快，不是正可以免去悲怆的老境？</p></blockquote><blockquote><p>不管怎么譬解，于连总觉得自己像胆小鬼，触绪伤怀。</p></blockquote><blockquote><p>死亡显得嵬然巍然，好像非易于为事。</p></blockquote><blockquote><p>傅凯用语的毛病，粗俗的手势，都不见了，于连扑进他怀里。</p></blockquote><p>◆ 38 权势人物</p><blockquote><p>那位院士会说，侯爵用胸口窝暖了一条冻僵的蛇。</p></blockquote><p>◆ 42</p><blockquote><p>“尼罗河的源头大家都不知道，”于连心里想，“因为，其始也，从一条普普通通的小溪里，看不出这是河中之王；</p></blockquote><blockquote><p>他跟着每一滴眼泪，沿着这迷人的粉颊蜿蜒而下……</p></blockquote><p>◆ 43</p><blockquote><p>鹄立街头</p></blockquote><p>按：这里我倒是觉得有一点点刻意买弄文字的嫌疑了。</p><blockquote><p>“啊！可恶的内地人！在巴黎，就不会受这种闷气。那里的人，搞招摇撞骗，要高明得多。”</p></blockquote><p>◆ 44</p><blockquote><p>但，不才我，有的是高尚的心灵！</p></blockquote><blockquote><p>但对早晨九点生，傍晚五点死的蜉蝣，在日长夜短的夏季，怎么能懂得黑夜这词儿呢？（译按：庄子言，朝菌不知晦朔，蟪蛄不知春秋。）</p></blockquote><p>◆ 45</p><blockquote><p>你幡然改宗赢得的眼泪，足可抵消十版伏尔泰反宗教著作所产生的腐蚀作用。</p></blockquote><blockquote><p>傅凯悲痛已极，几欲发狂。</p></blockquote><p>按：又是“已极”。这个“已极”在我手头的几本汉语词典里面查不到，但是日语词典里面似有解释为“非常，很”的意思，这个和语境以及我的猜想是一致的。不过，有趣的一点是，汉语词典里可以查到“极已”这个词语，是“窮盡，終止”的意思，其意思也是相近的，倒是合理。</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书</tag>
      
      <tag>文学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理作业二</title>
    <link href="/2021/10/07/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%BA%8C/"/>
    <url>/2021/10/07/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%BA%8C/</url>
    
    <content type="html"><![CDATA[<p>系第三章课后作业（仅限布置作业的部分）。</p><p>1、构造下列正规式相应的 $\text{DFA}$。</p><p>(1) $1(0|1)^*101$</p><p>解：先构造 $\text{NFA}$</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007110712.png"></p><p>然后，用子集法将 $\text{NFA}$ 确定化</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007111222.png"></p><p>除 X, A 外，重新命名其他状态，令 AB 为 B、AC 为 C、ABY 为 D，因为 D 含有 Y（NFA 的终态），所以 D 为终态。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007112535.png"></p><p>DFA 的状态图：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010171555.png"></p><p>3、将下图的 NFA 确定化。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010172519.png" alt="NFA"></p><p>解：用子集法将 NFA 确定化：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010173809.png"></p><p>重新命名状态子集，令 VQ 为 A、QU 为 B、VZ 为 C、V 为 D、QUZ 为 E、Z 为 F。</p><p>DFA 的状态图：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010174435.png"></p><p>7、为正规文法 $G[S]$</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow aA|bQ \<br>A &amp;\rightarrow aA|bB|b \<br>B &amp;\rightarrow bD|aQ \<br>Q &amp;\rightarrow aQ|bD|b \<br>D &amp;\rightarrow bB|aA \<br>E &amp;\rightarrow aB|bF \<br>F &amp;\rightarrow bD|aE|b<br>\end{split}<br>$$</p><p>构造相应的最小的 $\text{DFA}$。</p><p>解：先构造其 NFA：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010192630.png"></p><p>用子集法将 NFA 确定化：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010193039.png"></p><p>将 S、A、Q、BZ、DZ、D、B 重新命名，分别用 0、1、2、3、4、5、6 表示。因为 3、4 中含有 z，所以它们为终态。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010205302.png"></p><p>DFA 的状态图如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010210306.png"></p><p>令 $P_0 &#x3D; ({0, 1, 2, 5, 6}, {3, 4})$ 用 b 进行分割；<br>$P_1 &#x3D; ({0, 5, 6}, {1, 2}, {3, 4})$ 再用 b 进行分割；<br>$P_2 &#x3D; ({0}, {5, 6}, {1, 2}, {3, 4})$ 再用 a、b 进行分割，仍不变。</p><p>再令 ${0}$ 为 A，${1, 2}$ 为 B，${3, 4}$ 为 C，${5, 6}$ 为 D。</p><p>最小化为：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211010211301.png"></p><p>11、有一种用以证明两个正规表达式等价的方法，那就是构造它们的最小 DFA，表明这两个 DFA 是一样的（除了状态名不同外）。使用此方法。证明下面的正规表达式是等价的。</p><p>$$<br>\begin{split}<br>(1)&amp; ; (a|b)^* \<br>(2)&amp; ; (a^* | b^*)^* \<br>\end{split}<br>$$</p><p>解：</p><p>(1) 的 NFA 图如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211011130938.png"></p><p>根据 NFA 构造最小的 DFA 如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211011130441.png"></p><p>(2) 的 NFA 图如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211011130914.png"></p><p>根据 NFA 构造最小的 DFA 如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211011130441.png"></p><p>所以，由此可以证明 (1) 和 (2) 式正规式是等价的。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>日语五十音</title>
    <link href="/2021/10/06/%E6%97%A5%E8%AF%AD%E4%BA%94%E5%8D%81%E9%9F%B3/"/>
    <url>/2021/10/06/%E6%97%A5%E8%AF%AD%E4%BA%94%E5%8D%81%E9%9F%B3/</url>
    
    <content type="html"><![CDATA[<h1 id="一、清音"><a href="#一、清音" class="headerlink" title="一、清音"></a>一、清音</h1><h2 id="1-1-平假名"><a href="#1-1-平假名" class="headerlink" title="1.1 平假名"></a>1.1 平假名</h2><p>あ(a)　い(i)　う(u)　え(e)　お(o)</p><p>か(ka)　き(ki)　く(ku)　け(ke)　こ(ko)</p><p>さ(sa)　し(si)　す(su)　せ(se)　そ(so)</p><p>た(ta)　ち(ti)　つ(tu)　て(te)　と(to)</p><p>な(na)　に(ni)　ぬ(nu)　ね(ne)　の(no)</p><p>な(na)　に(ni)　ぬ(nu)　ね(ne)　の(no)</p><p>ま(ma)　み(mi)　む(mu)　め(me)　も(mo)</p><p>や(ya)　ゆ(yu)　よ(yo)</p><p>ら(ra)　り(ri)　る(ru)　れ(re)　ろ(ro)</p><p>わ(wa)　を(wo)</p><p>ん(n)</p><h2 id="1-2-片假名"><a href="#1-2-片假名" class="headerlink" title="1.2 片假名"></a>1.2 片假名</h2><p>ア　イ　ウ　エ　オ</p><p>カ　キ　ク　ケ　コ</p><p>サ　シ　ス　セ　ソ</p><p>タ　チ　ツ　テ　ト</p><p>ナ　ニ　ヌ　ネ　ノ</p><p>ハ　ヒ　フ　ヘ　ホ</p><p>マ　ミ　ム　メ　モ</p><p>ヤ　ユ　ヨ</p><p>ラ　リ　ル　レ　ロ</p><p>ワ　ヲ</p><p>ン</p><h1 id="二、浊音-半浊音"><a href="#二、浊音-半浊音" class="headerlink" title="二、浊音&#x2F;半浊音"></a>二、浊音&#x2F;半浊音</h1><h2 id="2-1-平假名"><a href="#2-1-平假名" class="headerlink" title="2.1 平假名"></a>2.1 平假名</h2><p>が(ga)　ぎ(gi)　ぐ(gu)　げ(ge)　ご(go)</p><p>ざ(za)　じ(ji)　ず(zu)　ぜ(ze)　ぞ(zo)</p><p>だ(da)　ぢ(ji)　づ(zu)　で(de)　ど(do)</p><p>ば(ba)　び(bi)　ぶ(bu)　べ(be)　ぼ(bo)</p><p>ぱ(pa)　ぴ(pi)　ぷ(pu)　ぺ(pe)　ぽ(po)</p><p>注意，じ　ず　ぢ　づ 在使用微软输入法输入的时候，我们按照下面的来<br>じ(zi)　ず(zu)　ぢ(di)　づ(du)</p><h2 id="2-2-片假名"><a href="#2-2-片假名" class="headerlink" title="2.2 片假名"></a>2.2 片假名</h2><h1 id="三、拗音"><a href="#三、拗音" class="headerlink" title="三、拗音"></a>三、拗音</h1><h2 id="3-1-平假名"><a href="#3-1-平假名" class="headerlink" title="3.1 平假名"></a>3.1 平假名</h2><p>きゃ(kya)　きゅ(kyu)　きょ(kyo)</p><p>しゃ(sha)　しゅ(shu)　しょ(sho)</p><p>ちゃ(cha)　ちゅ(chu)　ちょ(cho)</p><p>にゃ(nya)　にゅ(nyu)　にょ(nyo)</p><p>ひゃ(hya)　ひゅ(hyu)　ひょ(hyo)</p><p>みゃ(mya)　みゅ(myu)　みょ(myo)</p><p>りゃ(rya)　りゅ(ryu)　りょ(ryo)</p><p>ぎゃ(gya)　ぎう(gyu)　ぎょ(ryo)</p><p>じゃ(ja)　じゅ(ju)　じょ(jo)</p><p>びゃ(bya)　びゅ(byu)　びょ(byo)</p><p>ぴゃ(pya)　ぴう(pyu)　ぴょ(pyo)</p><h2 id="3-2-片假名"><a href="#3-2-片假名" class="headerlink" title="3.2 片假名"></a>3.2 片假名</h2><h1 id="四、图片对照"><a href="#四、图片对照" class="headerlink" title="四、图片对照"></a>四、图片对照</h1><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211006102956.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211006103007.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211006103017.png"></p>]]></content>
    
    
    <categories>
      
      <category>日语</category>
      
    </categories>
    
    
    <tags>
      
      <tag>日语</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《数字图像处理 第三版》札记</title>
    <link href="/2021/10/06/%E3%80%8A%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/10/06/%E3%80%8A%E6%95%B0%E5%AD%97%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86-%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h1 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h1><blockquote><p>何为强度或灰度？</p></blockquote><p>一幅图像可定义为一个二维函数 $f(x, y)$，其中 $x$ 和 $y$ 是空间（平面）坐标，而在任何一对空间坐标 $(x, y)$ 处的幅值（amplitude，振幅）$f$ 称为图像在该点处的<strong>强度</strong>或<strong>灰度</strong>。</p><p>关于灰度的更通俗的解释如下：</p><blockquote><p>The grey level or grey value indicates the brightness of a pixel.<br>The minimum grey level is 0. The maximum grey level depends on the digitisation depth of the image. For an 8-bit-deep image it is 255. In a binary image a pixel can only take on either the value 0 or the value 255. In contrast, in a greyscale or colour image a pixel can take on any value between 0 and 255.</p></blockquote><p>引用自：<a href="https://www.stemmer-imaging.com/en-ie/knowledge-base/grey-level-grey-value/">https://www.stemmer-imaging.com/en-ie/knowledge-base/grey-level-grey-value/</a></p><blockquote><p>何为数字图像？</p></blockquote><p>接上一条，当 $x, y$ 和灰度值 $f$ 是有限的离散数值时，我们称该图像为<strong>数字图像</strong>。</p><h1 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h1><blockquote><p>如何理解人眼的结构？</p></blockquote><p>眼睛的形状近似为一个球体，其平均直径约为 20 mm。有三层薄膜包围着眼睛：<strong>角膜</strong>与<strong>巩膜</strong>外壳、<strong>脉络膜</strong>和<strong>视网膜</strong>。</p><ul><li>角膜是一种硬而透明的组织，覆盖着眼睛的前表面。与角膜相连的巩膜是一层包围着眼球其余部分的不透明的膜。</li><li>脉络膜位于巩膜的正下方。脉络膜包含有血管网，它是眼睛的重要滋养源。即使是对脉络膜表面并不严重的损害，也有可能严重地损害眼睛，引起限制血液流动的炎症。脉络膜外壳着色很重，因此有助于减少进入眼内的外来光和眼球内反向散射光的数量。</li><li>脉络膜的最前面分为睫状肌和虹膜。虹膜的收缩和扩张控制着进入眼睛的光量。虹膜中间的开口（瞳孔）的直径是可变的，范围大约在 2-8 mm。虹膜的前面包含有眼睛的可见色素，而后面则包含有黑色色素。<br>按：这里要从三维视角来看。  </li><li>晶状体由同心的纤维细胞层组成，并由附在睫状肌上的纤维悬挂着。晶状体包含 60%~70% 的水、6% 的脂肪和比眼睛中任何其他组织都多的蛋白质。晶状体由稍黄的色素着色，其颜色随着人的年龄的增大而加深。晶状体吸收大约 8% 的可见光谱，对短波长的光有较高的吸收率。在晶状体结构中，蛋白质吸收红外光和紫外光，吸收过量时会伤害眼睛。</li><li>眼睛最里面的膜是视网膜，它布满了整个后部和内壁。当眼睛适当地聚焦时，来自眼睛外部物体的光在视网膜上成像。由视网膜表面分布的不连续的光，感受器提供了图案视觉。有两类光感受器：<strong>锥状体</strong>和<strong>杆状体</strong>。</li><li>每只眼睛中的锥状体数量在 600~700 万之间。他们主要位于视网膜的中间部分，称之为中央凹，且对颜色高度敏感。用这些锥状体，人可以充分地分辨图像细节，因为每个锥状体都连接到自身地神经末梢。肌肉控制眼球转动，直到感兴趣的物体落到中央凹上。锥状体视觉称为白昼视觉或亮视觉。</li><li>杆状体的数量更多：约有 7500~15 000 万个杆状体分布在视网膜表面。由于分布面积较大而且几个杆状体连接到一个神经末梢，因此减少了这些感受器感知细节的数量。杆状体用来给出视野内的一般的总体图像。它们没有彩色感觉，而对低照明度敏感。例如，在白天呈现鲜明色彩的物体，在月光下都没有颜色，因为此时只有杆状体收到刺激。这种现象称为暗视觉或微光视觉。</li></ul><p>下图显示了右眼中通过眼睛视神经出现区的剖面的杆状体和锥状体密度。The absence of receptors in this area results in the so-called <em>blind spot</em>. </p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211006233652.png"></p><p>疑问：这里是怎么剖开的？？？</p><ul><li>Ciliary body: 睫状体</li><li>Sclera: 巩膜</li><li>Choroid: 脉络膜</li><li>Nerve &amp; sheath: 神经和鞘</li><li>Ciliary muscle: 睫状肌</li><li>Iris: 虹膜</li><li>Cornea: 角膜</li><li>Anterior chamber: 前房</li><li>Lens: 晶状体</li><li>Ciliary fibers: 睫状小带</li><li>Visual axis: 视轴</li><li>Vitreous humor: 玻璃体</li><li>Fovea: 中央凹</li><li>Blind spot: 盲点</li><li>Retina: 视网膜</li></ul><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211006110830.jpg" alt="人眼剖面简图"></p><blockquote><p>何为马赫带效应？</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007152354.png"></p><p>视觉系统对亮度的感知不是简单的强度函数。然后，这个马赫带效应就是，每一条带上的亮度是均匀的，但是在不同带的交界处，我们会看到，亮的那一侧会出现更亮的一条线，暗的那一侧会出现更暗的一条线。简单来讲，这就是马赫带效应。</p><blockquote><p>何为同时对比现象？</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007152901.png"></p><p>和马赫带效应类似，我们人眼观察到好像第一个图中间的小方块最亮，第三个中间的小方块最暗。实际上，它们的灰度（亮度）是一样的。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211007153502.png"></p><blockquote><p>何为灰度级？</p></blockquote><p>灰度级的典型取值是 2 的整数次幂。通常假设离散灰度级是等间隔的并且是区间 $[0, L - 1]$ 内的整数。（L 即 2 的整数次幂）</p><blockquote><p>何为 k 比特图像？</p></blockquote><p>当一幅图像有 $2^k$ 灰度级时，通常称该图像是 k 比特图像。</p><blockquote><p>何为动态范围？</p></blockquote><p>有时灰度级的取值范围称为图像的动态范围。把占有灰度级全部有效段的图像叫做高动态范围图像。当相当可观数目的像素呈现这样的特征时，图像就有较高的对比度。相反，低动态范围的图像看上去似乎是冲淡了的灰暗格调。</p><blockquote><p>何为图像采样分辨率？</p></blockquote><p>单位长度上所包含的采样数。</p><blockquote><p>何为空间分辨率？</p></blockquote><p>直观上讲，空间分辨率是图像中可辨别的最小细节的度量。在数量上，空间分辨率可以有很多方法来说明，其中每单位距离线对数和每单位距离点数（像素数）是最通用的度量。</p><p>举例来说，每英寸点数（dpi）就是描述空间分辨率的一个例子。</p><blockquote><p>何为灰度分辨率？</p></blockquote><p>灰度分辨率是指在灰度级中可分辨的最小变化。</p><p>灰度分辨率指的是用于量化灰度的比特数。</p><p>例如，通常说一幅被量化为 256 级的图像有 8 比特的灰度分辨率。</p><blockquote><p>关于直方图变换的推导？</p></blockquote><p>书上的证明很精确，而且易于理解。</p><blockquote><p>直方图均衡的离散形式为？</p></blockquote><p>$$<br>s_k &#x3D; T(r_k) &#x3D; (L - 1) \sum_{j &#x3D; 0}^{k} p_r(r_j) &#x3D; \frac{L -1}{MN} \sum_{j &#x3D; 0}^{k} n_j, \quad k &#x3D; 0, 1, 2,…, L -1<br>$$</p><p>详情见教材。这一块，似乎不用非常熟练地理解，大概只要思路跟着教材或者老师走一遍就行。真的需要具体用的时候再回来看。不过，这玩意儿还挺绕的。</p><p>如果考试需要考的话，那么，就得把西电的网课上的那一道例题给看一下了。</p>]]></content>
    
    
    <categories>
      
      <category>数字图像处理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数字图像处理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 0-50 整理（Java）</title>
    <link href="/2021/10/05/LeetCode-0-50-%E6%95%B4%E7%90%86%EF%BC%88Java%EF%BC%89/"/>
    <url>/2021/10/05/LeetCode-0-50-%E6%95%B4%E7%90%86%EF%BC%88Java%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h1 id="range-0-10"><a href="#range-0-10" class="headerlink" title="range(0, 10)"></a>range(0, 10)</h1><h1 id="range-10-20"><a href="#range-10-20" class="headerlink" title="range(10, 20)"></a>range(10, 20)</h1><h2 id="15-三数之和"><a href="#15-三数之和" class="headerlink" title="15 三数之和"></a>15 三数之和</h2><ul><li>中等</li></ul><p><a href="https://leetcode-cn.com/problems/3sum/">https://leetcode-cn.com/problems/3sum/</a></p><p>给你一个包含 <code>n</code> 个整数的数组 <code>nums</code>，判断 <code>nums</code> 中是否存在三个元素 $a，b，c$ ，使得 $a + b + c &#x3D; 0$ ？请你找出所有和为 <code>0</code> 且不重复的三元组。</p><p>注意：答案中不可以包含重复的三元组。</p><p>示例 1：</p><pre><code class="hljs">输入：nums = [-1,0,1,2,-1,-4]输出：[[-1,-1,2],[-1,0,1]]</code></pre><p>示例 2：</p><pre><code class="hljs">输入：nums = []输出：[]</code></pre><p>示例 3：</p><pre><code class="hljs">输入：nums = [0]输出：[]</code></pre><p>提示：</p><ul><li>$0 &lt;&#x3D; nums.length &lt;&#x3D; 3000$</li><li>$-10^5 &lt;&#x3D; nums[i] &lt;&#x3D; 10^5$</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">threeSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums)</span> &#123;<br>        List&lt;List&lt;Integer&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">len</span> <span class="hljs-operator">=</span> nums.length;<br>        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || len &lt; <span class="hljs-number">3</span>)<br>            <span class="hljs-keyword">return</span> result;<br>        Arrays.sort(nums);<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; len; i++) &#123;<br>            <span class="hljs-keyword">if</span> (nums[i] &gt; <span class="hljs-number">0</span>)<br>                <span class="hljs-keyword">break</span>;<br>            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>]) <span class="hljs-comment">// 去重</span><br>                <span class="hljs-keyword">continue</span>;<br>            <span class="hljs-comment">// 双指针</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">L</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">R</span> <span class="hljs-operator">=</span> len - <span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span> (L &lt; R) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> nums[i] + nums[L] + nums[R];<br>                <span class="hljs-keyword">if</span> (sum == <span class="hljs-number">0</span>) &#123;<br>                    result.add(Arrays.asList(nums[i], nums[L], nums[R]));<br>                    <span class="hljs-keyword">while</span> (L &lt; R &amp;&amp; nums[L] == nums[L + <span class="hljs-number">1</span>])<br>                        L++;<br>                    <span class="hljs-keyword">while</span> (L &lt; R &amp;&amp; nums[R] == nums[R - <span class="hljs-number">1</span>])<br>                        R--;<br>                    L++;<br>                    R--;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &lt; <span class="hljs-number">0</span>) &#123;<br>                    L++;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &gt; <span class="hljs-number">0</span>) &#123;<br>                    R--;<br>                &#125;<br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="16-最接近的三数之和"><a href="#16-最接近的三数之和" class="headerlink" title="16 最接近的三数之和"></a>16 最接近的三数之和</h2><p><a href="https://leetcode-cn.com/problems/3sum-closest/">https://leetcode-cn.com/problems/3sum-closest/</a></p><ul><li>中等</li></ul><p>给定一个包括 <code>n</code> 个整数的数组 <code>nums</code> 和 一个目标值 <code>target</code>。找出 <code>nums</code> 中的三个整数，使得它们的和与 <code>target</code> 最接近。返回这三个数的和。假定每组输入只存在唯一答案。</p><p>示例：</p><pre><code class="hljs">输入：nums = [-1,2,1,-4], target = 1输出：2解释：与 target 最接近的和是 2 (-1 + 2 + 1 = 2) 。</code></pre><p>提示：</p><ul><li>$3 &lt;&#x3D; nums.length &lt;&#x3D; 10^3$</li><li>$-10^3 &lt;&#x3D; nums[i] &lt;&#x3D; 10^3$</li><li>$-10^4 &lt;&#x3D; target &lt;&#x3D; 10^4$</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">threeSumClosest</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        Arrays.sort(nums);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">ans</span> <span class="hljs-operator">=</span> nums[<span class="hljs-number">0</span>] + nums[<span class="hljs-number">1</span>] + nums[<span class="hljs-number">2</span>];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length; i++) &#123;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">start</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>;<br>            <span class="hljs-type">int</span> <span class="hljs-variable">end</span> <span class="hljs-operator">=</span> nums.length -<span class="hljs-number">1</span>;<br>            <span class="hljs-keyword">while</span> (start &lt; end) &#123;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">sum</span> <span class="hljs-operator">=</span> nums[i] + nums[start] + nums[end];<br>                <span class="hljs-keyword">if</span> (Math.abs(target - sum) &lt; Math.abs(target - ans)) &#123;<br>                    ans = sum;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (sum &gt; target) &#123;<br>                    end--;<br>                &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (sum &lt; target) &#123;<br>                    start ++;<br>                &#125; <span class="hljs-keyword">else</span> &#123;<br>                    <span class="hljs-keyword">return</span> ans;<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="17-电话号码的字母组合"><a href="#17-电话号码的字母组合" class="headerlink" title="17 电话号码的字母组合"></a>17 电话号码的字母组合</h2><p><a href="https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/">https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/</a></p><p>给定一个仅包含数字 2-9 的字符串，返回所有它能表示的字母组合。答案可以按 任意顺序 返回。</p><p>给出数字到字母的映射如下（与电话按键相同）。注意 1 不对应任何字母。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211005201903.png"></p><p>示例 1：</p><pre><code class="hljs">输入：digits = &quot;23&quot;输出：[&quot;ad&quot;,&quot;ae&quot;,&quot;af&quot;,&quot;bd&quot;,&quot;be&quot;,&quot;bf&quot;,&quot;cd&quot;,&quot;ce&quot;,&quot;cf&quot;]</code></pre><p>示例 2：</p><pre><code class="hljs">输入：digits = &quot;&quot;输出：[]</code></pre><p>示例 3：</p><pre><code class="hljs">输入：digits = &quot;2&quot;输出：[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;]</code></pre><p>提示：</p><ul><li><code>0 &lt;= digits.length &lt;= 4</code></li><li><code>digits[i]</code> 是范围 <code>[&#39;2&#39;, &#39;9&#39;]</code> 的一个数字。</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title function_">letterCombinations</span><span class="hljs-params">(String digits)</span> &#123;<br>        <span class="hljs-comment">// 定义数字键盘对应的字典字母表</span><br>        <span class="hljs-type">char</span>[][] abc = &#123;&#123;<span class="hljs-string">&#x27;a&#x27;</span>,<span class="hljs-string">&#x27;b&#x27;</span>,<span class="hljs-string">&#x27;c&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;d&#x27;</span>,<span class="hljs-string">&#x27;e&#x27;</span>,<span class="hljs-string">&#x27;f&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;g&#x27;</span>,<span class="hljs-string">&#x27;h&#x27;</span>,<span class="hljs-string">&#x27;i&#x27;</span>&#125;<br>                ,&#123;<span class="hljs-string">&#x27;j&#x27;</span>,<span class="hljs-string">&#x27;k&#x27;</span>,<span class="hljs-string">&#x27;l&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;m&#x27;</span>,<span class="hljs-string">&#x27;n&#x27;</span>,<span class="hljs-string">&#x27;o&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;p&#x27;</span>,<span class="hljs-string">&#x27;q&#x27;</span>,<span class="hljs-string">&#x27;r&#x27;</span>,<span class="hljs-string">&#x27;s&#x27;</span>&#125;<br>                ,&#123;<span class="hljs-string">&#x27;t&#x27;</span>,<span class="hljs-string">&#x27;u&#x27;</span>,<span class="hljs-string">&#x27;v&#x27;</span>&#125;,&#123;<span class="hljs-string">&#x27;w&#x27;</span>,<span class="hljs-string">&#x27;x&#x27;</span>,<span class="hljs-string">&#x27;y&#x27;</span>,<span class="hljs-string">&#x27;z&#x27;</span>&#125;&#125;;<br>        <span class="hljs-comment">// 定义队列 ，辅助拼接字母</span><br>        LinkedList&lt;String&gt; ans = <span class="hljs-keyword">new</span> <span class="hljs-title class_">LinkedList</span>&lt;&gt;();<br>        <span class="hljs-keyword">if</span> (digits.isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> ans;<br>        &#125;<br>        <span class="hljs-comment">// 初始化队列中最开始还没拼接字母的空字符串</span><br>        ans.add(<span class="hljs-string">&quot;&quot;</span>);<br>        <span class="hljs-comment">// 从源数字字符串第一个字符开始遍历</span><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; digits.length(); i++) &#123;<br>            <span class="hljs-comment">// 获取当前数值字符对应到字母表中的角标</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">num</span> <span class="hljs-operator">=</span> Character.getNumericValue(digits.charAt(i)) - <span class="hljs-number">2</span>; <span class="hljs-comment">// 将字符转换成数字，而非ASCII码</span><br>            <span class="hljs-comment">// 当队列中所有字符串的长度等于当前遍历到的数字字符个数，则本轮拼接完成</span><br>            <span class="hljs-keyword">while</span> (ans.peek().length() &lt; i + <span class="hljs-number">1</span>) &#123; <span class="hljs-comment">// peak函数：检索但不删除此列表的头</span><br>                <span class="hljs-comment">// 依次取出队列中所有的字符串</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> ans.remove(); <span class="hljs-comment">// 检索并删除此列表的头（第一个元素）</span><br>                <span class="hljs-comment">// 每个字符串循环拼接当前数字字符对应的所有字母后再加入队列</span><br>                <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : abc[num]) &#123;<br>                    ans.add(s + c);<br>                &#125;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> ans;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="18-四数之和"><a href="#18-四数之和" class="headerlink" title="18 四数之和"></a>18 四数之和</h2><ul><li>中等</li></ul><p>给你一个由 n 个整数组成的数组 nums ，和一个目标值 target 。请你找出并返回满足下述全部条件且不重复的四元组 [nums[a], nums[b], nums[c], nums[d]] ：</p><ul><li>0 &lt;&#x3D; a, b, c, d &lt; n</li><li>a、b、c 和 d 互不相同</li><li>nums[a] + nums[b] + nums[c] + nums[d] &#x3D;&#x3D; target</li></ul><p>你可以按 任意顺序 返回答案 。</p><p>示例 1：</p><pre><code class="hljs">输入：nums = [1,0,-1,0,-2,2], target = 0输出：[[-2,-1,1,2],[-2,0,0,2],[-1,0,0,1]]</code></pre><p>示例 2：</p><pre><code class="hljs">输入：nums = [2,2,2,2,2], target = 8输出：[[2,2,2,2]]</code></pre><p>提示：</p><ul><li>1 &lt;&#x3D; nums.length &lt;&#x3D; 200</li><li>$-10^9$ &lt;&#x3D; nums[i] &lt;&#x3D; $10^9$</li><li>$-10^9$ &lt;&#x3D; target &lt;&#x3D; $10^9$</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> List&lt;List&lt;Integer&gt;&gt; <span class="hljs-title function_">fourSum</span><span class="hljs-params">(<span class="hljs-type">int</span>[] nums, <span class="hljs-type">int</span> target)</span> &#123;<br>        Arrays.sort(nums);<br>        List&lt;List&lt;Integer&gt;&gt; result = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        <span class="hljs-keyword">if</span> (nums == <span class="hljs-literal">null</span> || nums.length &lt; <span class="hljs-number">4</span>) &#123;<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">minValue</span> <span class="hljs-operator">=</span> nums[<span class="hljs-number">0</span>] + nums[<span class="hljs-number">1</span>] + nums[<span class="hljs-number">2</span>] + nums[<span class="hljs-number">3</span>];<br>        <span class="hljs-type">int</span> <span class="hljs-variable">maxValue</span> <span class="hljs-operator">=</span> nums[nums.length - <span class="hljs-number">1</span>] + nums[nums.length - <span class="hljs-number">2</span>] + nums[nums.length - <span class="hljs-number">3</span>] + nums[nums.length - <span class="hljs-number">4</span>];<br>        <br>        <span class="hljs-keyword">if</span> (minValue &gt; target || maxValue &lt; target) &#123;<br>            <span class="hljs-keyword">return</span> result;<br>        &#125;<br>        <br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; nums.length - <span class="hljs-number">3</span>; i++) &#123;<br>            <span class="hljs-keyword">if</span> (i &gt; <span class="hljs-number">0</span> &amp;&amp; nums[i] == nums[i - <span class="hljs-number">1</span>]) &#123;<br>                <span class="hljs-keyword">continue</span>;<br>            &#125;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">j</span> <span class="hljs-operator">=</span> i + <span class="hljs-number">1</span>; j &lt; nums.length - <span class="hljs-number">2</span>; j++) &#123;<br>                <span class="hljs-keyword">if</span> (j &gt; i + <span class="hljs-number">1</span> &amp;&amp; nums[j] == nums[j - <span class="hljs-number">1</span>]) &#123;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">left</span> <span class="hljs-operator">=</span> j + <span class="hljs-number">1</span>;<br>                <span class="hljs-type">int</span> <span class="hljs-variable">right</span> <span class="hljs-operator">=</span> nums.length - <span class="hljs-number">1</span>;<br>                minValue = nums[i] + nums[j] + nums[left] + nums[left + <span class="hljs-number">1</span>];<br>                maxValue = nums[i] + nums[j] + nums[right] + nums[right - <span class="hljs-number">1</span>];<br>                <span class="hljs-keyword">if</span> (minValue &gt; target || maxValue &lt; target) &#123;<br>                    <span class="hljs-keyword">continue</span>;<br>                &#125;<br>                <span class="hljs-keyword">while</span> (left &lt; right) &#123;<br>                    <span class="hljs-type">int</span> <span class="hljs-variable">temp</span> <span class="hljs-operator">=</span> nums[left] + nums[right] + nums[i] + nums[j];<br>                    <span class="hljs-keyword">if</span> (temp == target) &#123;<br>                        List&lt;Integer&gt; l = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;(Arrays.asList(nums[i], nums[j], nums[left], nums[right]));<br>                        result.add(l);<br>                        <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[left] == nums[left + <span class="hljs-number">1</span>]) &#123;<br>                            left++;<br>                        &#125;<br>                        <span class="hljs-keyword">while</span> (left &lt; right &amp;&amp; nums[right] == nums[right - <span class="hljs-number">1</span>]) &#123;<br>                            right--;<br>                        &#125;<br>                        left++;<br>                        right--;<br>                    &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (temp &gt; target) &#123;<br>                        right--;<br>                    &#125; <span class="hljs-keyword">else</span> &#123;<br>                        left++;<br>                    &#125;<br>                &#125;<br>            &#125;<br>        &#125;<br><br><br>        <span class="hljs-keyword">return</span> result;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="19-删除链表的倒数第-N-个结点"><a href="#19-删除链表的倒数第-N-个结点" class="headerlink" title="19 删除链表的倒数第 N 个结点"></a>19 删除链表的倒数第 N 个结点</h2><ul><li>中等</li></ul><p>给你一个链表，删除链表的倒数第 n 个结点，并且返回链表的头结点。</p><p>进阶：你能尝试使用一趟扫描实现吗？</p><p>示例 1：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211008203304.png"></p><pre><code class="hljs">输入：head = [1,2,3,4,5], n = 2输出：[1,2,3,5]</code></pre><p>示例 2：</p><pre><code class="hljs">输入：head = [1], n = 1输出：[]</code></pre><p>示例 3：</p><pre><code class="hljs">输入：head = [1,2], n = 1输出：[1]</code></pre><p>提示：</p><ul><li>链表中结点的数目为 <code>sz</code></li><li><code>1 &lt;= sz &lt;= 30</code></li><li><code>0 &lt;= Node.val &lt;= 100</code></li><li><code>1 &lt;= n &lt;= sz</code></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Definition for singly-linked list.</span><br><span class="hljs-comment"> * public class ListNode &#123;</span><br><span class="hljs-comment"> *     int val;</span><br><span class="hljs-comment"> *     ListNode next;</span><br><span class="hljs-comment"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="hljs-comment"> * &#125;</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> ListNode <span class="hljs-title function_">removeNthFromEnd</span><span class="hljs-params">(ListNode head, <span class="hljs-type">int</span> n)</span> &#123;<br>        <span class="hljs-keyword">if</span> (head == <span class="hljs-literal">null</span> || head.next == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>        &#125;<br><br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">fast</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-type">ListNode</span> <span class="hljs-variable">slow</span> <span class="hljs-operator">=</span> head;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; n; i++) &#123;<br>            fast = fast.next;<br>        &#125;<br>        <span class="hljs-comment">// 删第一个节点的情况</span><br>        <span class="hljs-keyword">if</span> (fast == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">return</span> head.next;<br>        &#125;<br>        <br>        <span class="hljs-keyword">while</span> (fast.next != <span class="hljs-literal">null</span>) &#123;<br>            fast = fast.next;<br>            slow = slow.next;<br>        &#125;<br>        slow.next = slow.next.next;<br>        <span class="hljs-keyword">return</span> head;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure><h2 id="20-有效的括号"><a href="#20-有效的括号" class="headerlink" title="20 有效的括号"></a>20 有效的括号</h2><ul><li>简单</li></ul><p>给定一个只包括 <code>&#39;(&#39;，&#39;)&#39;，&#39;&#123;&#39;，&#39;&#125;&#39;，&#39;[&#39;，&#39;]&#39;</code> 的字符串 <code>s</code> ，判断字符串是否有效。</p><p>有效字符串需满足：</p><ol><li>左括号必须用相同类型的右括号闭合。</li><li>左括号必须以正确的顺序闭合。</li></ol><p>示例 1：</p><pre><code class="hljs">输入：s = &quot;()&quot;输出：true</code></pre><p>示例 2：</p><pre><code class="hljs">输入：s = &quot;()[]&#123;&#125;&quot;输出：true</code></pre><p>示例 3：</p><pre><code class="hljs">输入：s = &quot;(]&quot;输出：false</code></pre><p>示例 4：</p><pre><code class="hljs">输入：s = &quot;([)]&quot;输出：false</code></pre><p>示例 5：</p><p>输入：s &#x3D; “{[]}”<br>输出：true</p><p>提示：</p><ul><li>1 &lt;&#x3D; s.length &lt;&#x3D; $10^4$</li><li><code>s</code> 仅由括号 <code>&#39;()[]&#123;&#125;&#39;</code> 组成</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isValid</span><span class="hljs-params">(String s)</span> &#123;<br>        <span class="hljs-keyword">if</span> (s.isEmpty()) &#123;<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>        &#125;<br><br>        Stack&lt;Character&gt; stack = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Stack</span>&lt;&gt;(); <span class="hljs-comment">//  创建一个堆栈</span><br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">char</span> c : s.toCharArray()) &#123;<br>            <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;(&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;)&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;[&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;]&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (c == <span class="hljs-string">&#x27;&#123;&#x27;</span>) &#123;<br>                stack.push(<span class="hljs-string">&#x27;&#125;&#x27;</span>);<br>            &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (stack.empty() || c != stack.pop()) &#123;<br>                <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> stack.empty();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LaTex 小技巧收录</title>
    <link href="/2021/10/02/LaTex-%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%94%B6%E5%BD%95/"/>
    <url>/2021/10/02/LaTex-%E5%B0%8F%E6%8A%80%E5%B7%A7%E6%94%B6%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h1 id="短连字符"><a href="#短连字符" class="headerlink" title="短连字符"></a>短连字符</h1><p>在 LaTex 环境中，普通的短的连字符会被转换成比较长的减号 $-$，而如果我们想要使用短的连字符，我们可以使用 <code>\text&#123;&#125;</code> 命令。</p><p>示例：</p><figure class="highlight gams"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs gams"><span class="hljs-symbol">$</span><span class="hljs-symbol">$</span><br>\varepsilon\text&#123;-闭包&#125;<br><span class="hljs-symbol">$</span><span class="hljs-symbol">$</span><br></code></pre></td></tr></table></figure><p>效果：</p><p>$$<br>\varepsilon\text{-闭包}<br>$$</p>]]></content>
    
    
    <categories>
      
      <category>LaTex</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LaTex</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《小姐：勞動的權利》札記</title>
    <link href="/2021/10/02/%E3%80%8A%E5%B0%8F%E5%A7%90%EF%BC%9A%E5%8B%9E%E5%8B%95%E7%9A%84%E6%AC%8A%E5%88%A9%E3%80%8B%E6%9C%AD%E8%A8%98/"/>
    <url>/2021/10/02/%E3%80%8A%E5%B0%8F%E5%A7%90%EF%BC%9A%E5%8B%9E%E5%8B%95%E7%9A%84%E6%AC%8A%E5%88%A9%E3%80%8B%E6%9C%AD%E8%A8%98/</url>
    
    <content type="html"><![CDATA[<blockquote><p>“窮耍”</p></blockquote><blockquote><p>在東北，家裏夫妻雙下崗，家庭負擔重的小姐要多得多。</p></blockquote><blockquote><p>根據某場所是“髮廊”抓裏面的女孩子，不管我們是在搓麻將還是聊天，承認自己是小姐的帶走，不承認的打兩巴掌然後帶走。</p></blockquote><blockquote><p>因此，她們只能選擇“用脚投票”——逃離工廠，哪怕是進入被人所不齒的性產業。</p></blockquote><blockquote><p>與其說這是血汗工廠制度把她們逼上梁山，不如說這是因爲少數具有本能的反抗意識的打工妹，無法獲得進行反抗的思想、手段與前途，不得不以個人的道德付出來贖買自由與較好的生活。</p></blockquote><p>按：終於讀到了這裏。友人在路上給我看這段，當時沒有看仔細，現在重又遇到這句話，文字的描述可謂一針見血。</p><blockquote><p>也就是説，絕大多數的人在做小姐之前有過其他的工作經歷，至少在勞動市場中尋找過其他的工作機會。這可以説明：她們并非“天生就是這塊料”，也不是“好逸惡勞”，更不是“自甘墮落”，而是曾經在勞動力市場，朝著人們認爲是正常的工作，屢屢掙扎過。</p></blockquote><blockquote><p>于是，“山不轉水轉”，其中的一些女性就參加到性產業中來。</p></blockquote><blockquote><p>但對于女性來講，經常熬夜的代價是很大的。用小姐自己的話講，就是“很熬人”。</p></blockquote><blockquote><p>職業平移。</p></blockquote><p>按：將女人從原來的工作平移到做小姐的工作。</p><blockquote><p>我們尤其需要注意的是：在從事了性產業這個據説是最下賤的職業之後，非常多的小姐反而認爲自己的生活改善了，再也不願意回到工廠去。其中還有一些小姐，恰恰是在進入性產業之後，才意識到原來的血汗工廠制度是多麽的可惡。</p></blockquote><blockquote><p>在中國的禁娼“理論”中，有一種甚囂塵上的説法，就是小姐“好逸惡勞”論。這種説法典型地反映出富人的居高臨下的思维範式。怎么樣才算不好逸惡勞呢？就是在那種全球化的工廠裏，永生永世地、無怨無悔地、遠要“谢主隆恩“地當牛做馬！發出這種怪論的人們，你們自己爲什麽不去享受這種“生存權”呢？</p></blockquote><blockquote><p>“做小姐”就是一種勞動</p></blockquote><blockquote><p>在《資本論》第 1 卷中，馬克思把妓女視爲一種特殊的商品。他寫道：“在以虔誠著稱的十二世紀，商品行列裏常常出現一些極妙的物。當時一位法國詩人所列舉的蘭第市場上的商品中，除了衣料、鞋子、皮革、農具、毛皮等物以外，還有‘淫蕩的女人’。”</p></blockquote><blockquote><p>尤其是，如果我寧可吃糠咽菜（性工作實際上非常艱苦），而且從此再也不跟您要饅頭吃，可是您卻還要禁止我、抓我，那您就是太不講理了。</p></blockquote>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>浮点数与 IEEE754 标准浮点数</title>
    <link href="/2021/09/28/%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%8E-IEEE754-%E6%A0%87%E5%87%86%E6%B5%AE%E7%82%B9%E6%95%B0/"/>
    <url>/2021/09/28/%E6%B5%AE%E7%82%B9%E6%95%B0%E4%B8%8E-IEEE754-%E6%A0%87%E5%87%86%E6%B5%AE%E7%82%B9%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<p>浮点表示是对形如 $V &#x3D; x \times 2^y$ 的有理数进行编码。</p><h1 id="1-二进制小数"><a href="#1-二进制小数" class="headerlink" title="1. 二进制小数"></a>1. 二进制小数</h1><p>考虑一个形如</p><p>$$<br>b_mb_{m - 1} \cdots b_1b_0.b_{-1}b_{-2} \cdots b_{-n - 1}b_{-n}<br>$$</p><p>的表示法，其中每个二进制数字，或者称为位，$b_i$ 的取值是 0 或 1，如下图所示。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210928110052.png"></p><p>这种表示方法表示的数 $b$ 定义如下：</p><p>$$<br>b &#x3D; \sum_{i &#x3D; -n}^{m} 2^i \times b_i<br>$$</p><p>计算举例：</p><p>$$<br>101.11_2 &#x3D; 1 \times 2^2 + 0 \times 2^1 + 1 \times 2^0 + 1 \times 2^{-1} + 1 \times 2^{-2} &#x3D; 5 \frac{3}{4}<br>$$</p><p>注意，形如 $0.11 \cdots 1_2$ 的数表示的是刚好小于 1 的数。例如，$0.111111_2$ 表示 $\frac{63}{64}$，我们用简单的表达法 $1.0 - \varepsilon$ 来表示这样的数值。</p><p>按：$\varepsilon$ 这个是我们的老朋友了，在物理实验或者计算方法这些课程中，学习误差的表达时经常会见到。</p><p>假定我们仅考虑有限长度的编码，那么十进制表示法不能准确地表达像 $\frac{1}{3}$ 和 $\frac{5}{7}$ 这样的数。类似，小数的二进制表示法只能表示哪些能够被写成 $x \times 2^y$ 的数。其他的值只能够被近似地表示。例如，数字 $\frac{1}{5}$ 可以用十进制小数 $0.20$ 精确表示。不过，我们并不能把它准确地表示为一个二进制小数，我们只能近似地表示它，增加二进制表示的长度可以提高表示的精度。</p><h1 id="2-IEEE-浮点数表示"><a href="#2-IEEE-浮点数表示" class="headerlink" title="2. IEEE 浮点数表示"></a>2. IEEE 浮点数表示</h1><p>IEEE 浮点数即采用 IEEE754 标准来表示的浮点数。</p><p>IEEE 浮点标准用 $V &#x3D; (-1)^s \times M \times 2^E$ 的形式来表示一个数：</p><ul><li>符号（sign）$s$ 决定这个数是负数（$s &#x3D; 1$）还是正数（$s &#x3D; 0$），而对于数值 0 的符号位解释作为特殊情况处理（后面有讲，即非规格数相关）。</li><li>尾数（significand）$M$ 是一个二进制小数，它的范围是 $1 \sim 2 - \epsilon$，或者是 $0 \sim 1 - \varepsilon$。</li><li>阶码（exponent）$E$ 的作用是对浮点数加权，这个权重是 2 的 $E$ 次幂（可能是负数）。<br>  按：这里的“权重是 2 的 $E$ 次幂”并不是指 $E$ 是 2 的幂，而是指 $2^E$ 是 2 的幂。</li></ul><p>将浮点数的位表示划分成三个字段，分别对这些值进行编码：</p><ul><li>一个单独的符号位 $s$ 直接编码符号 $s$。</li><li>$k$ 位的阶码字段 $exp &#x3D; e_{k - 1} \cdots e_1e_0$ 编码阶码 $E$。</li><li>$n$ 位小数字段 $frac &#x3D; f_{n -1} \cdots f_1f_0$ 编码尾数 $M$，但是编码出来的值也依赖阶码字段的值是否等于 0（这个涉及到规格数和非规格数，具体见下面的讲解）。</li></ul><p>在单精度浮点格式（C 语言中的 float）中，$s$、$exp$ 和 $frac$ 字段分别为 1 位、$k &#x3D; 8$ 位和 $n &#x3D; 23$ 位，得到一个 32 位的表示。<br>在双精度浮点格式（C 语言中的 double）中，$s$、$exp$ 和 $frac$ 字段分别为 1 位、$k &#x3D; 11$ 位和 $n &#x3D; 52$ 位，得到一个 64 位的表示。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210928113022.png" alt="单精度"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210928113102.png" alt="双精度"></p><p>给定位的表示，根据 $exp$ 的值，被编码的值可以分成三种不同的情况（第三种情况有两个变种）。</p><p>举例，单精度格式的情况：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210928113430.png" alt="阶码的值决定了这个数是规格化的、非规格化的或特殊值"></p><p><strong>情况 1；规格化的值</strong></p><p>当 $exp$ 的所有位既不全为 0（即 $exp$ 数值为 0），也不全为 1（单精度数值为 255，双精度数值为 2047），都属于这类情况。在这种情况下，阶码字段被解释为以偏置值（biased）形式表示的有符号整数。也就是说，阶码的值是 $E &#x3D; e - Bias$（$e$ 即 $exp$），其中 $e$ 是无符号数，其位表示为 $e_{k - 1} \cdots e_1e_0$，而 $Bias$ 是一个等于 $2^{k - 1} - 1$（单精度是 127，双精度是 1023）的偏置值。由此产生指数的取值范围，对于单精度是 $-126 \sim +127$，而对于双精度是 $-1022 \sim +1023$。</p><p>按：这里说的指数范围，就拿单精度的范围 $-126 \sim +127$，因为单精度阶码一共有 8 位，所以 $e$ 的范围是 $0 \sim 255$，然后根据 $E &#x3D; e - Bias$、$Bias &#x3D; 127$ 来算，得到的指数 $E$ 的取值范围是 $-127 \sim +128$，但是，别忘了 $e$ 还要去掉 0 和 255 两个值，然后再算，就得到了 $-126 \sim +127$。</p><p>小数字段 $frac$ 被解释为描述小数值 $f$，其中 $0 \leqslant f &lt; 1$，其二进制表示为 $0.f_{n - 1} \cdots f_1f_0$，也就是二进制小数点在最高有效位的左边。尾数定义为 $M &#x3D; 1 + f$。有时，这种方式也叫做隐含的以 1 开头的（implied leading 1）表示，因为我们可以把 $M$ 看成一个二进制表达式为 $1.f_{n - 1}f_{n - 2} \cdots f_0$ 的数字。因为我们是可以通过调整阶码 $E$，使得尾数 $M$ 在范围 $1 \leqslant M &lt; 2$ 之中（假设没有溢出），所以这种表达方式的好处是可以轻松获得一个额外的精度位。因为第一位总是等于 1，那么我们就不需要显式地表示它。</p><p><strong>情况 2：非规格化的值</strong></p><p>当阶码域为全 0 时，所表示的数是非规格化形式。在这种情况下，阶码值是 $E &#x3D; 1 - Bias$，而尾数的值是 $M &#x3D; f$，也就是小数字段的值，不包含隐含的开头的 1。</p><p>按：这里要仔细注意。</p><p>非规格化数有两个用途。首先，它们提供了一种表示数值 0 的方法，因为使用规格化数，我们必须要使 $M \geqslant 1$，因此我们就不能表示 0。实际上，$+0.0$ 的浮点表示的位模式为全 0：符号位是 0，阶码字段全为 0（表明是一个非规格化值），而小数域也全为 0，这就得到了 $M &#x3D; f &#x3D; 0$。令人奇怪的是，当符号位为 1，而其他域全为 0 时，我们得到值 $-0.0$。根据 IEEE 的浮点格式，值 $+0.0$ 和 $-0.0$ 在某些方面被认为是不同的，而在其他方面是相同的。</p><p>非规格化数的另外一个功能是表示哪些非常接近于 $0.0$ 的数。它们提供了一种属性，称为逐渐溢出（gradual underflow），其中，可能的数值分布均匀地接近于 $0.0$。</p><p>按：这里的逐渐溢出表示的大概是从非规格数平滑地溢出，然后就到了规格数（可以参考之后的表格示例）。</p><p><strong>情况 3：特殊值</strong></p><p>最后一类数值是指阶码全为 1 的时候出现的值。</p><ul><li>当小数域全为 0 时，得到的值表示无穷，当 $s &#x3D; 0$ 时是 $+\infty$，或者当 $s &#x3D; 1$ 时是 $-\infty$。当我们把两个非常大的数相乘，或者除以零时，无穷能够表示溢出的结果。</li><li>当小数域为非零时，结果值被称为“$NaN$”，即“不是一个数（Not a Number）”的缩写。一些运算的结果不能是实数或无穷，就会返回这样的 $NaN$ 值，比如当计算 $\sqrt{-1}$ 或 $\infty - \infty$ 时。在某些应用中，表示未初始化的数据时，它们也很有用处。</li></ul><h1 id="3-数字示例"><a href="#3-数字示例" class="headerlink" title="3. 数字示例"></a>3. 数字示例</h1><p>下图的表格是 8 位浮点格式的非负值示例。由于阶码位 $k &#x3D; 4$，小数位 $n &#x3D; 3$，所以偏置量是 $2^{4 - 1} - 1 &#x3D; 7$。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210928164817.png"></p><p>上图被分成了三个区域，来描述三类数字。不同的列给出了阶码字段是如何编码阶码 $E$ 的，小数字段是如何编码尾数 $M$ 的，以及它们一起是如何形成要表示的值 $V &#x3D; 2^E \times M$ 的。</p><p>从 0 自身开始，最靠近 0 的是非规格数（包括 0）.这种格式的非规格化数的 $E &#x3D; 1 - 7 &#x3D; -6$，得到权 $2^E &#x3D; \frac{1}{64}$。小数 $f$ 的范围是 $0, \frac{1}{8}, \cdots, \frac{7}{8}$，从而得到数 $V$ 的范围是 $0 \sim \frac{1}{64} \times \frac{7}{8} &#x3D; \frac{7}{512}$。</p><p>然后是规格化数。</p><ul><li>首先是最小规格化数，其 $E &#x3D; 1 - 7 &#x3D; -6$，和非规格化数是一样的，并且小数的取值范围也是 $0, \frac{1}{8}, \cdots, \frac{7}{8}$。然而，其尾数却是在范围 $1 + 0 &#x3D; 1$ 和 $1 + \frac{7}{8} &#x3D; \frac{15}{8}$ 之间，得出数 $V$ 在范围 $\frac{8}{512} &#x3D; \frac{1}{64}$ 和 $\frac{15}{512}$ 之间。<br>  按：这里可以观察到最大非规格化数 $\frac{7}{512}$ 到最小规格化数 $\frac{8}{512}$ 之间的平滑转变。这种平滑性归功于我们对非规格化数的 $E$ 的定义。通过将 $E$ 定义为 $1 - Bias$，而不是 $-Bias$，我们通过补偿非规格化数的尾数没有隐含的 1 这样一种方式，达到了既可以表示数值 0 又可以实现平滑转变的目的（平滑转变对浮点数之间的比较大小很有帮助）。</li><li>当增大阶码时，我们成功地得到更大的规格化数。然后，我们可以得到最大的规格化数，这个数具有阶码 $E &#x3D; 7$，权 $2^E &#x3D; 128$，小数等于 $\frac{7}{8}$ 得到尾数 $M &#x3D; \frac{15}{8}$，因此，其数值是 $V &#x3D; 240$。超出这个值就会溢出到 $+\infty$。</li></ul><p>IEEE 的这种表示具有一个有趣的属性，我们可以发现上面 8 位浮点格式的非负值示例表格中的数据，如果把它们的位表达式看成是无符号整数，那么它们从上到下是按照升序的方式排列的，而它们所表示的浮点数也是升序排列的。IEEE 这样设计的目的其实就是为了让浮点数能够使用整数排序来进行排序。当比较负数时，同样可以使用类似的方法。</p><p>还有一点要注意的地方，就是 IEEE754 这个阶码的部分（e），它是用移码来表示的，关于移码，可以参看<a href="https://fanyfull.github.io/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%BB%E7%A0%81/">另一篇博客</a>。</p><h1 id="4-例题"><a href="#4-例题" class="headerlink" title="4. 例题"></a>4. 例题</h1><blockquote><p>例1 将十进制数 20.59375 转换成 32 位 IEEE754 格式浮点数的二进制格式来存储。</p></blockquote><p>解：先将十进制数转换成二进制数：</p><p>$$<br>20.59375 &#x3D; 10100.10011 ; (0.5 + 0.25 + 0.125 + 0.0625 + 0.03125)<br>$$</p><p>移动小数点，使其变成 $1.M$ 的形式：</p><p>$$<br>10100.10011 &#x3D; 1.010010011 \times 2^4<br>$$</p><p>得到：</p><p>$$<br>S &#x3D; 0, e &#x3D; 4, E &#x3D; 100_2 + 01111111_2 &#x3D; 10000011_2, M &#x3D; 010010011<br>$$</p><p>最后得到 32 位浮点数的二进制存储格式为：</p><p>$$<br>\begin{split}<br>&amp;0100 ; 0001 ; 1010 ; 0100 ; 1100 ; 0000 ; 0000 ; 0000 \<br>&amp;&#x3D; (41A4C000)_16<br>\end{split}<br>$$</p><blockquote><p>例2 若某浮点数 x 的二进制存储格式为 $(41360000)_16$，求与其对应的 32 位浮点表示的十进的值。</p></blockquote><p>解：</p><p>首先判断是规格数。</p><p>然后进行处理，</p><p>$$<br>\begin{split}<br>&amp;(41360000)_16 \<br>&amp;&#x3D; (0 ; 100,0001,0 ; 011,0110,0000,0000,0000,0000)_2<br>\end{split}<br>$$</p><p>由此可得：</p><p>$$<br>\begin{split}<br>&amp;s &#x3D; 0 \<br>&amp;E &#x3D; e - Bias &#x3D; 10000010 - 01111111 &#x3D; &amp;00000011 &#x3D; (3)_10 \<br>&amp;M &#x3D; 1.011011<br>\end{split}<br>$$</p><p>则上述浮点数对应的真值为</p><p>$$<br>V &#x3D; (-1)^s \times M \times 2^E &#x3D; (-1)^0 \times 2^3 &#x3D; 1011.011 &#x3D; (11.375)_10<br>$$</p><hr><p>参考：</p><p>1、《深入理解计算机系统 第三版》</p>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
      <tag>CSAPP 笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 14 Longest Common Prefix</title>
    <link href="/2021/09/27/LeetCode-14-Longest-Common-Prefix/"/>
    <url>/2021/09/27/LeetCode-14-Longest-Common-Prefix/</url>
    
    <content type="html"><![CDATA[<p>难度：easy</p><p>代码：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_14.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/9/27</span><br><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">longestCommonPrefix</span>(<span class="hljs-params">self, strs: <span class="hljs-type">List</span>[<span class="hljs-built_in">str</span>]</span>) -&gt; <span class="hljs-built_in">str</span>:<br>        result = <span class="hljs-string">&quot;&quot;</span><br>        length = <span class="hljs-built_in">len</span>(strs)<br>        <span class="hljs-keyword">if</span> (<span class="hljs-built_in">len</span> == <span class="hljs-number">0</span>):<br>            <span class="hljs-keyword">return</span> result<br><br>        <span class="hljs-keyword">if</span> (length == <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">return</span> strs[<span class="hljs-number">0</span>]<br><br>        loop_len = <span class="hljs-built_in">len</span>(strs[<span class="hljs-number">0</span>])<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, length):<br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs[i]) == <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">return</span> result<br><br>            <span class="hljs-keyword">if</span> <span class="hljs-built_in">len</span>(strs[i]) &lt; loop_len:<br>                loop_len = <span class="hljs-built_in">len</span>(strs[i])<br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, loop_len):<br>            flag = <span class="hljs-number">0</span><br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, length):<br>                <span class="hljs-keyword">if</span> strs[<span class="hljs-number">0</span>][i] != strs[j][i]:<br>                    flag = <span class="hljs-number">1</span><br>                    <span class="hljs-keyword">break</span><br><br>            <span class="hljs-keyword">if</span> flag == <span class="hljs-number">1</span>:<br>                <span class="hljs-keyword">break</span><br><br>            result += strs[<span class="hljs-number">0</span>][i]<br><br>        <span class="hljs-keyword">return</span> result<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution()<br>    <span class="hljs-built_in">input</span> = [<span class="hljs-string">&quot;flower&quot;</span>, <span class="hljs-string">&quot;flow&quot;</span>, <span class="hljs-string">&quot;flight&quot;</span>]<br>    <span class="hljs-comment"># input = [&quot;dog&quot;,&quot;racecar&quot;,&quot;car&quot;]</span><br>    output = solution.longestCommonPrefix(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p>直接暴力遍历。效率也还可以。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>读一读《报任少卿书》</title>
    <link href="/2021/09/27/%E8%AF%BB%E4%B8%80%E8%AF%BB%E3%80%8A%E6%8A%A5%E4%BB%BB%E5%B0%91%E5%8D%BF%E4%B9%A6%E3%80%8B/"/>
    <url>/2021/09/27/%E8%AF%BB%E4%B8%80%E8%AF%BB%E3%80%8A%E6%8A%A5%E4%BB%BB%E5%B0%91%E5%8D%BF%E4%B9%A6%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<h1 id="报任少卿书"><a href="#报任少卿书" class="headerlink" title="报任少卿书"></a>报任少卿书</h1><ul><li>司马子长</li></ul><p>太史公牛马走司马迁再拜言，少卿足下：曩者辱赐书，教以顺于接物，推贤进士为务。意气懃懃恳恳，若望仆不相师，而用流俗人之言。仆非敢如此也。仆虽罢驽，亦尝侧闻长者之遗风矣。顾自以为身残处秽，动而见尤，欲益反损，是以独郁悒而与谁语。谚曰：”谁为为之？孰令听之？”盖钟子期死，伯牙终身不复鼓琴。何则？士为知己者用，女为说己者容。若仆大质已亏缺矣，虽才怀随和，行若由夷，终不可以为荣，适足以见笑而自点耳。书辞宜答，会东从上来，又迫贱事，相见日浅，卒卒无须臾之间，得竭至意。今少卿抱不测之罪，涉旬月，迫季冬；仆又薄从上雍，恐卒然不可为讳。是仆终己不得舒愤懑以晓左右，则长逝者魂魄私恨无穷。请略陈固陋，阙然久不报，幸勿为过。</p><p>仆闻之：修身者，智之符也；爱施者，仁之端也；取与者，义之表也；耻辱者，勇之决也；立名者，行之极也。士有此五者，然后可以讬于世，而列于君子之林矣。故祸莫憯于欲利，悲莫痛于伤心，行莫丑于辱先，诟莫大于宫刑。刑余之人，无所比数，非一世也，所从来远矣。昔卫灵公与雍渠同载，孔子适陈；商鞅因景监见，赵良寒心；同子参乘，袁丝变色。自古而耻之。夫以中才之人，事有关于宦竖，莫不伤气，而况于慷慨之士乎！如今朝廷虽乏人，奈何令刀锯之余，荐天下豪俊哉？</p><p>仆赖先人绪业，得待罪辇毂下，二十余年矣。所以自惟，上之不能纳忠效信，有奇策才力之誉，自结明主；次之又不能拾遗补阙，招贤进能，显岩穴之士；外之又不能备行伍，攻城野战，有斩将搴旗之功；下之不能积日累劳，取尊官厚禄，以为宗族交游光宠。四者无一遂，苟合取容，无所短长之效，可见如此矣。向者，仆常厕下大夫之列，陪外廷末议。不以此时引维纲，尽思虑。今以亏形为扫除之隶，在阘茸之中，乃欲仰首伸眉，论列是非，不亦轻朝廷羞当世之士邪？嗟乎！嗟呼！如仆尚何言哉！尚何言哉！</p><p>且事本末未易明也。仆少负不羁之行，长无乡曲之誉，主上幸以先人之故，使得奏薄伎，出入周卫之中。仆以为戴盆何以望天？故绝宾客之知，亡室家之业，日夜思竭其不肖之才力，务一心营职，以求亲媚于主上。而事乃有大谬不然者夫。</p><p>仆与李陵，俱居门下，素非能相善也。趣舍异路，未尝衔杯酒，接慇懃之余欢。然仆观其为人，自守奇土，事亲孝，与士信，临财廉，取与义。分别有让，恭俭下人，常思奋不顾身，以徇国家之急。其素所蓄积也，仆以为有国士之风。夫人臣出万死不顾一生之计，赴公家之难，斯以奇矣。今举事一不当，而全驱保妻子之臣，随而媒□其短，仆诚私心痛之。且李陵提步卒不满五千，深践戎马之地，足历王庭，垂饵虎口，横挑彊胡，仰亿万之师，与单于连战十有余日，所杀过半当。虏救死扶伤不给，旃裘之君长咸震怖，乃悉征其左右贤王，举引弓之人，一国共攻而围之。转斗千里，矢尽道穷，救兵不至，士卒死伤如积然陵一呼劳，军士无不起，躬自流涕，沬血饮泣，更张空拳，冒白刃，北向争死敌者。陵未没时，使有来报，汉公卿王侯，皆奉觞上寿。后数日，陵败书闻，主上为之食不甘味，听朝不怡。大臣忧惧，不知所出。仆窃不自料其卑贱，见主上惨怆怛悼，诚欲效其款款之愚，以为李陵素与士大夫绝甘分少，能得人死力，虽古之名将，不能过也。身虽陷败，彼观其意，且欲得其当而报于汉。事已无可奈何，其所摧败，功亦足以暴于天下矣。仆怀欲陈之，而未有路，适会召问，即以此指推言陵之功，欲以广主上之意，塞睚眦之辞。未能尽明，明主不晓，以为仆沮贰师，而为李陵游说，遂下于理。拳拳之忠，终不能自列。因为诬上，卒从吏议。家贫，货赂不足以自赎，交游莫救；左右亲近，不为一言。身非木石，独与法吏为伍，深幽囹圄之中，谁可告愬者？此真少卿所亲见，仆行事岂不然乎？李陵既生降，隤其家声；而仆又佴之蚕室，重为天下观笑。悲夫！悲夫！事未易一二为俗人言也。</p><p>仆之先，非有剖符丹书之功，文史星历，近乎卜祝之间，固主上所戏弄，倡优所畜，流俗之所轻也。假令仆伏法受诛，若九牛亡一毛，与蝼蚁何以异？而世又不与能死节者，特以为智穷罪极，不能自免，卒就死耳。何也？素所自树立使然也。人固有一死，或重于太山，或轻于鸿毛，用之所趋异也。太上不辱先，其次不辱身，其次不辱理色，其次不辱辞令，其次诎体受辱，其次易服受辱，其次关木索被箠楚受辱，其次剔毛发婴金铁受辱，最下腐刑，极矣。传曰：”刑不上大夫。”此言士节不可不勉励也。猛虎在深山，百兽震恐，及在槛阱之中，摇尾而求食，积威约之渐也。故有画地为牢势不可入，削木为吏议不可对，定计于鲜也。今交手足，受木索，暴肌肤，受榜箠，幽于圜墙之中。当此之时，见狱吏则头枪地，视徒隶则正惕息，何者？积威约之势也。及以至是言不辱者，所谓强颜耳，曷足贵乎！且西伯，伯也，拘于羑里；李斯，相也，具于五刑；淮阴，王也，受械于陈；彭越张敖，南面称孤，系狱抵罪；绛侯诛诸吕，权倾五伯，囚于请室；魏其，大将也，衣赭衣，关三木；季布为朱家钳奴；灌夫受辱于居室。此人皆身至王侯将相，声闻邻国，及罪至罔加，不能引决自裁，在尘埃之中，古今一体，安在其不辱也？由此言之，勇怯，势也；强弱，形也。审矣！何足怪乎？夫人不能早自裁绳墨之外，以稍陵迟至于鞭箠之间，乃欲引节，斯不亦远乎？古人所以重施刑于大夫者，殆为此也。</p><p>夫人情莫不贪生恶死，念父母，顾妻子，至激于义理者不然，乃有所不得已也。今仆不幸，早失父母，无兄弟之亲，独身孤立，少卿视仆于妻子何如哉？且勇者不必死节，怯夫慕义，何处不勉焉！仆虽怯懦欲苟活，亦颇识去就之分矣。何至自沈溺缧绁之辱哉？且夫臧获婢妾，由能引决，况仆之不得已乎？所以隐忍苟活，幽于粪土之中而不辞者，恨私心有所不尽，鄙陋没世，而文彩不表于后世也。</p><p>古者富贵而名摩灭，不可胜记，唯倜傥非常之人称焉。盖文王拘而演周易；仲尼厄而作春秋；屈原放逐，乃赋离骚；左丘失明，厥有国语；孙子膑脚，兵法脩列；不韦迁蜀，世传吕览；韩非囚秦，说难孤愤；诗三百篇，大厎圣贤发愤之所为作也。此人皆意有郁结，不得通其道，故述往事，思来者。乃如左丘无目，孙子断足，终不可用，退而论书策，以舒其愤，思垂空文以自见。</p><p>仆窃不逊，近自讬于无能之辞，网罗天下放失旧闻，略考其行事，综其终始，稽其成败兴坏之纪，上计轩辕，下至于兹，为十表，本纪十二，书八章，世家三十，列传七十，凡百三十篇，亦欲以究天人之际，通古今之变，成一家之言。草创未就，会遭此祸，惜其不成，已就极刑而无愠色。仆诚以着此书藏诸名山，传之其人，通邑大都，则仆偿前辱之责，虽万被戮，岂有悔哉？然此可为智者道，难为俗人言也。</p><p>且负下未易居，下流多谤议，仆以口语遇此祸，重为乡党所笑，以污辱先人，亦何面目复上父母丘墓乎？虽累百世，垢弥甚耳！是以肠一日而九回，居则忽忽若有所亡，出则不知其所往。每念斯耻，汗未尝不发背沾衣也。身直为闺合之臣，宁得自引于深藏岩穴邪？故且从俗浮沈，与时俯仰，以通其狂惑。今少卿乃教以推贤进士，无乃与仆私心剌谬乎！今虽欲自雕琢，曼辞以自饰，无益于俗不信，适足取辱耳。要之死日，然后是非乃定。书不能悉意，略陈固陋，谨再拜。</p>]]></content>
    
    
    <categories>
      
      <category>古文</category>
      
    </categories>
    
    
    <tags>
      
      <tag>古文</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《编译原理第三版》（张素琴）第三章学习札记</title>
    <link href="/2021/09/26/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E4%B8%89%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/09/26/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E7%AC%AC%E4%B8%89%E7%AB%A0%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<blockquote><p>何为正规文法？</p></blockquote><p>这个概念在第二章有讲过，这里再次摘录一下。</p><p>正规文法也称为 3 型文法 $G &#x3D; (V_N, V_T, S, P)$，其 $P$ 中的每一条规则都有下述形式：$A \rightarrow aB$ 或 $A \rightarrow a$，其中 $A, B \in V_N, ; a \in V_T^*$。</p><p>正规文法所描述的是 $V_T$ 上的正规集。</p><blockquote><p>何为正规集？</p></blockquote><p>按：本书中似乎没有正规集的概念。遂从《编译原理 第二版》黑书摘录其定义如下</p><blockquote><p>可以用一个正则表达式定义的语言叫做<strong>正则集合（regular set）</strong>。</p></blockquote><p>黑书中的翻译是“正则集合”，其实和“正规集”是一个意思。</p><p>结合老师所讲，所谓正规集，可以和前面第二章的语言（$L(G)$）这一概念结合来看，它们表达的东西其实是很类似的，因此，正规集所表达的意思就是正规式（正则表达式）所产生的所有字串的集合。</p><blockquote><p>何为正规式？</p></blockquote><p>正规式也称正则表达式，是表示正规集的工具。</p><p>(1). $\varepsilon$ 和 $\varnothing$ 都是 $\Sigma$ 上的正规式，它们所表示的正规集分别为 ${ \varepsilon }$ 和 $\varnothing$。<br>(2). 任何 $a \in \Sigma$，$a$ 是 $\Sigma$ 上的一个正规式，它所表示的正规集为 ${ a }$。<br>(3). 假定 $e_1$ 和 $e_2$ 都是 $\Sigma$ 上的正规式，它们所表示的正规集分别为 $L(e_1)$ 和 $L(e_2)$，那么，$(e_1)$、$e_1|e_2$、$e_1 \cdot e_2$ 和 $e_1^*$ 也都是正规式，它们所表示的正规集分别为 $L(e_1)$、$L(e_1) \cup L(e_2)$、$L(e_1)L(e_2)$ 和 $(L(e_1))^*$。<br>(4). 仅由有限次使用上述 3 个步骤而定义的表达式才是 $\Sigma$ 上的正规式，仅由这些正规式所表示的符号串的集合才是 $\Sigma$ 上的正规集。</p><p>其中的 $|$ 读为“或”；$\cdot$ 读为“连接”；$<em>$ 读为“闭包”。在不致混淆时，括号可省去，但规定算符的优先顺序为先 $</em>$，再 $\cdot$，最后 $|$。连接符 $\cdot$ 一般可省略不写。$*$、$\cdot$、和 $|$ 都是左结合的。</p><blockquote><p>正规文法转正规式的 3 条规则？</p></blockquote><ol><li><p>正规式：$A \rightarrow xy$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow xB \<br> B &amp;\rightarrow y<br> \end{split}<br> $$</p></li><li><p>正规式：$A \rightarrow x^*y$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow xB \<br> A &amp;\rightarrow y \<br> B &amp;\rightarrow xB \<br> B &amp;\rightarrow y<br> \end{split}<br> $$</p></li><li><p>正规式：$A \rightarrow x|y$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow x \<br> A &amp;\rightarrow y<br> \end{split}<br> $$</p></li></ol><p>课堂小问：</p><p>$$<br>A \rightarrow xA \<br>A \rightarrow y<br>$$</p><p>$x$ 可能是多个 $*$ 闭包的组合。</p><p>疑问 P45？</p><p>(1). 例 3.3，表示无符号数的正规式似乎有点问题。</p><p>可以利用 $\varepsilon A &#x3D; A$ 来理解。那么，这个式子就是对的。</p><p>P45 $(a|b)^* &#x3D; (a^* b^*)^*$ 如何理解？</p><p>可以将 $(a|b)^*$ 展开成类似 $(a|b)(a|b) \cdots (a|b)$ 的形式，然后每一个括号内可以随便是 $a$ 或 $b$。</p><blockquote><p>正规式的代数规律？</p></blockquote><p>$$<br>\begin{split}<br>&amp;(1) ; r|s &#x3D; s|r \<br>&amp;(2) ; r|(s|t) &#x3D; (r|s)|t \<br>&amp;(3) ; (rs)t &#x3D; r(st) \<br>&amp;(4) ; r(s|t) &#x3D; rs|rt, ; (s|t)r &#x3D; sr|tr \<br>&amp;(5) ; \varepsilon r &#x3D; r, ; r\varepsilon &#x3D; r \<br>&amp;(6) ; r|r &#x3D; r<br>\end{split}<br>$$</p><blockquote><p>将正规文法转换成正规式的 3 条规则？</p></blockquote><ol><li><p>规则一：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow xB \quad B \rightarrow y \<br> 正规式：&amp;A &#x3D; xy<br> \end{split}<br> $$</p></li><li><p>规则二：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow xA|y \<br> 正规式：&amp;A &#x3D; x^*y<br> \end{split}<br> $$</p></li><li><p>文法产生式：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow x \quad A \rightarrow y \<br> 正规式：&amp;A &#x3D; x|y<br> \end{split}<br> $$</p></li></ol><blockquote><p>何为确定的有穷自动机（$\textrm{DFA}$）？</p></blockquote><p>一个确定的有穷自动机 $M$ 是一个五元组：</p><p>$$<br>M &#x3D; (K, \Sigma, f, S, Z)<br>$$</p><p>其中：</p><p>(1) $K$ 是一个有穷集，它的每一个元素称为一个状态。<br>(2) $\Sigma$ 是一个有穷字母表，它的每一个元素称为一个输入符号，所以也称 $\Sigma$ 为输入符号表。<br>(3) $f$ 是转换函数，是 $K \times \Sigma \rightarrow K$ 上的映像。例如，$f(k_i, a) &#x3D; k_j$ $(k_i \in K, k_j \in K, a \in \Sigma)$ 就意味着，当前状态为 $k$、输入字符为 $a$ 时，将转换到下一状态 $k_j$，把 $k_j$ 称作 $k_i$ 的一个后继状态。<br>(4) $S \in K$，是唯一的一个初态。<br>(5) $Z \subseteq K$，是一个终态集，终态也称可接受或结束状态。</p><p>一个 $DFA$ 可以表示成一个状态图（或称状态转换图）。假定 $DFA ; M$ 含有 $m$ 个状态，$n$ 个输入符号，那么这个状态图含有 $m$ 个节点，每个节点最多有 $n$ 个弧射出，整个图含有唯一一个初态节点和若干个终态节点，初态节点冠以“$\Rightarrow$”或标以“$-$”，终态节点终态节点用双圈表示或标以“$+$”，若 $f(k_i, a) &#x3D; k_j$，则从状态节点 $k_i$ 到状态节点 $k_j$ 画标记为 $a$ 的弧。</p><p>对于 $\Sigma^*$ 中的任何符号串，若存在一条从初态节点到某一终态节点的道路，且这条路上所有弧的标记连接成的符号串等于 $t$，则称 $t$ 可为 $DFA ; M$ 所接受，若 $M$ 的初态节点同时又是终态节点，则空字可为 $M$ <strong>所识别（接受）</strong>。<br>可换一种方式叙述如下：<br>若 $t \in \Sigma^*, $ $f(S, t) &#x3D; P$，其中 $S$ 为 $\textrm{DFA M}$ 的开始状态， $P \in Z$，$Z$ 为终态集。则称 $t$ 可为 $\textrm{DFA M}$ 所<strong>接受（识别）</strong>。</p><blockquote><p>何为不确定的有穷自动机（$\textrm{NFA}$）？</p></blockquote><p>一个不确定的有穷自动机 $M$ 是一个五元组：</p><p>$$<br>M &#x3D; (K, \Sigma, f, S, Z)<br>$$</p><p>其中：</p><p>(1) $K$ 是一个有穷集，它的每个元素称为一个状态。<br>(2) $\Sigma$ 是一个有穷字母表，它的每个元素称为一个输入符号。<br>(3) $f$ 是一个从 $K \times \Sigma^*$ 到 $K$ 的全体子集的映像，即 $K \times \Sigma^* \rightarrow 2^K$，其中 $2^K$ 表示 $K$ 的幂集。<br>(4) $S \subseteq K$，是一个非空初态集。<br>(5) $Z \subseteq K$，是一个终态集。</p><p>一个含有 $m$ 个状态和 $n$ 个输入符号的 $\textrm{NFA}$ 可表示成一张状态转换图，这张图含有 $m$ 个状态结点，每个结点可射出若干条箭弧与别的节点相连接，每条弧用 $\Sigma^*$ 中的一个串作标记，整个图至少含有一个初态结点以及若干个终态结点。</p><blockquote><p>何为状态集合 $I$ 的 $\varepsilon\text{-闭包}$？</p></blockquote><p>状态集合 $I$ 的 $\varepsilon\text{-闭包}$，表示为 $\varepsilon \text{-closure(I)}$，定义为一个状态集，是状态集 $I$ 中任何状态 $S$ 经任意条 $\varepsilon$ 弧能到达的状态的集合。</p><blockquote><p>何为状态集合 $I$ 的 $a$ 弧转换？</p></blockquote><p>状态集合 $I$ 的 $a$ 弧转换，表示为 $move(I, a)$，定义为状态集合 $J$，其中 $J$ 是所有哪些可从 $I$ 中的某一状态经过一条 $a$ 弧而到达的状态的全体。</p><blockquote><p>如何将一个 $\textrm{NFA}$ 转换为等价的 $\textrm{DFA}$？</p></blockquote><p>这里介绍的方法就是<strong>子集法</strong>。</p><p>假设 $\textrm{NFA N} &#x3D;$ ${K, \Sigma, f, K_0, K_t}$ 按照如下方法构造一个 $\textrm{DFA M} &#x3D;$ $(S, \Sigma, D, S_0, S_t)$ 使得 $L(M) &#x3D; L(N)$：</p><p>(1) $M$ 的状态集 $S$ 由 $K$ 的一些子集（构造 $K$ 的子集见下图）组成。用 $[S_1, S_2, …, S_j]$ 表示 $S$ 的元素，其中 $S_1, S_2, …, S_j$ 是 $K$ 的状态。并且约定，状态 $S_1, S_2, …, S_j$ 是按某种规则排列的，即对于子集 $S &#x3D; { S_2, S_1 }$ 来说，$S$ 的状态就是 $[S_1S_2]$。</p><p>疑问：P51 这里的 S 规则排列与状态究竟是什么？  </p><blockquote><p>疑问：如果 $K_0$ 中不止一个元素怎么办？</p></blockquote><p>解答：这个观察 $\varepsilon \text{-闭包}$ 的定义即可解决。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211002163758.png" alt="图 1：子集的构造算法"></p><p>按：</p><p>(2) $M$ 和 $N$ 的输入字母表是相同的，即是 $\Sigma$。<br>(3) 转换函数 $D$ 是这样定义的。</p><p>$$<br>D([S_1, S_2, …, S_j], a) &#x3D; [R_1, R_2, …, R_j]<br>$$</p><p>其中 $\varepsilon(move([S_1, S_2, $ $… S_j], a)) &#x3D; $ $[R_1, R_2, …, R_j]$。<br>(4) $S_0 &#x3D; $ $\varepsilon \text{-closure}(K_0)$ 为 $M$ 的开始状态。<br>(5) $S_t &#x3D; $ ${ [S_j, S_k,…,S_e] }$，其中 $[S_j, S_k,…,S_e]$ $\in S$ 且 ${ S_j, S_k,…,S_e }$ $\cap ; K_t \neq \varnothing }$</p><p>图 1 是构造 $\text{NFA } N$ 的状态 $K$ 的子集的算法。假定所构造的子集族为 $C$，即 $C &#x3D; (T_1, T_2,…,T_i)$，其中 $T_1, T_2,…,T_i$ 为状态 $K$ 的子集。</p><p>这个概念必须要用具体的例子辅助理解才能够最终掌握，所以，这里就举一个例子：应用上面的算法对下面的图 2 的 $\text{NFA } N$ 构造子集。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211004145119.png" alt="图 2"></p><p>步骤如下：</p><p>(1) 首先计算 $\varepsilon \text{-closure(0)}$，令 $T_0 &#x3D; \varepsilon \text{-closure(0)}$ $&#x3D;{0, 1, 2, 4, 7}$，$T_0$ 未被标记，它现在是子集族 $C$ 的唯一成员。<br>(2) 标记 $T_0$；计算 $move(T_0, a) &#x3D; $ ${ 3, 8 }$。令 $T_1 &#x3D; $ $\varepsilon \text{-closure} (move(T_0, a))$ $&#x3D; {1, 2, 3, 4, 6, 7, 8}$，将 $T_1$ 加入 $C$ 中，$T_1$ 未被标记。<br>计算 $move(T_0, b) &#x3D; $ ${ 5 }$。令 $T_2 &#x3D; \varepsilon$ $\text{-closure} (move(T_0, b))$ $&#x3D; { 1, 2, 4, 5, 6, 7 }$，将 $T_2$ 加入 $C$ 中，它未被标记。<br>(3) 标记 $T_1$；计算 $move(T_1, a) &#x3D; $ ${ 3, 8 }$。计算 $\varepsilon \text{-closure} (move(T_1, a))$，结果为 ${ 1, 2, 3, 4, 6, 7, 8 }$，即 $T_1$，$T_1$ 已在 $C$ 中。<br>计算 $move(T_1, b) &#x3D; $ ${ 5, 9 }$。 计算 $\varepsilon \text{-closure} (move(T_1, b))$，结果为 ${ 1, 2, 4, 5, 6, 7, 9 }$，令其为 $T_3$，加至 $C$ 中，它未被标记。<br>(4) （从这里开始，就不单独计算 $move$ 的结果了）标记 $T_2$，计算 $\varepsilon \text{-closure} (move(T_2, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 $T_1$，$T_1$ 已在 $C$ 中。<br>计算 $\varepsilon \text{-closure} (move(T_2, b))$，结果为 ${1, 2, 4, 5, 6, 7}$，即 $T_2$，$T_2$ 已在 $C$ 中。<br>(5) 标记 $T_3$，计算 $\varepsilon \text{-closure} (move(T_3, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 $T_1$。<br>计算 $\varepsilon \text{-closure} (move(T_3, b))$，结果为 ${1, 2, 4, 5, 6, 7, 10}$，令其为 $T_4$，加入 $C$ 中，$T_4$ 未被标记。<br>(6) 标记 $T_4$，计算 $\varepsilon \text{-closure} (move(T_4, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 T_1$$。<br>计算 $\varepsilon \text{-closure} (move(T_4, b))$，结果为 ${1, 2, 4, 5, 6, 7}$，即 $T_2$。<br>至此，算法终止，共构造了 5 个子集：</p><p>$$<br>\begin{split}<br>T_0 &amp;&#x3D; {0, 1, 2, 4, 7} \<br>T_1 &amp;&#x3D; {1, 2, 3, 4, 6, 7, 8} \<br>T_2 &amp;&#x3D; { 1, 2, 4, 5, 6, 7 } \<br>T_3 &amp;&#x3D; { 1, 2, 4, 5, 6, 7, 9 } \<br>T_4 &amp;&#x3D; {1, 2, 4, 5, 6, 7, 10}<br>\end{split}<br>$$</p><p>那么，图 2 的 $\text{NFA } N$ 构造的 $\text{DFA } M$ 如下：</p><p>$$<br>\begin{split}<br>(1); &amp;S &#x3D; {[T_0], [T_1], [T_2], [T_3], [T_4]} \<br>(2); &amp;\Sigma &#x3D; {a, b} \<br>(3); &amp;D([T_0], a) &#x3D; [T_1] \<br>   ; &amp;D([T_0], b) &#x3D; [T_2] \<br>   ; &amp;D([T_1], a) &#x3D; [T_1] \<br>   ; &amp;D([T_1], b) &#x3D; [T_3] \<br>   ; &amp;D([T_2], a) &#x3D; [T_1] \<br>   ; &amp;D([T_2], b) &#x3D; [T_2] \<br>   ; &amp;D([T_3], a) &#x3D; [T_1] \<br>   ; &amp;D([T_3], b) &#x3D; [T_4] \<br>   ; &amp;D([T_4], a) &#x3D; [T_1] \<br>   ; &amp;D([T_4], b) &#x3D; [T_2] \<br>(4); &amp;S_0 &#x3D; [T_0] \<br>(5); &amp;S_t &#x3D; [T_4]<br>\end{split}<br>$$</p><blockquote><p>何为有穷自动机的无用状态？</p></blockquote><p>所谓有穷自动机的无用状态，是指这样的状态：从该自动机的开始状态出发，任何输入串也不能到达的那个状态，或者从这个状态没有通路到达终态。</p><blockquote><p>在有穷自动机中，两个状态 $s$ 和 $t$ 等价的条件？</p></blockquote><ul><li>一致性条件——状态 $s$ 和 $t$ 必须同时为可接受状态（终态）或不可接受状态（非终态）。</li><li>蔓延性条件——对于所有输入符号，状态 $s$ 和状态 $t$ 必须转换到等价的状态里。</li></ul><blockquote><p>正规式和有穷自动机的等价性如何说明？</p></blockquote><p>可由以下两点说明：</p><ul><li>对于 $\Sigma$ 上的 $\textrm{NFA M}$，可以构造一个 $\Sigma$ 上的正规式，使得 $L(r) &#x3D; L(M)$。</li><li>对于 $\Sigma$ 上的每个正规式 $r$，可以构造一个 $\Sigma$ 上的 $\textrm{NFA M}$，使得 $L(M) &#x3D; L(r)$。</li></ul><blockquote><p>如何为 $\Sigma$ 上的 $\textrm{NFA M}$ 构造相应的正规式 $r$？</p></blockquote><p>第 1 步，在 $M$ 的状态转换图上加进两个结点，一个为 $x$ 结点，一个为 $y$ 结点。从 $x$ 结点用 $\varepsilon$ 弧连接到 $M$ 的所有初态结点，从 $M$ 的所有终态结点用 $\varepsilon$ 弧连接到 $y$ 结点。形成一个与 $M$ 等价的 $M^{‘}$，$M^{‘}$ 只有一个初态 $x$ 和一个终态 $y$。<br>第 2 步，逐步消去 $M^{‘}$ 中的所有结点，直至只剩下 $x$ 和 $y$ 结点。在消去的过程中，逐步用正规式来标记弧。其消去的规则如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/draft06.drawio.png"></p><p>最后 $x$ 和 $y$ 结点间的弧上的标记则为所求的正规式 $r$。</p><blockquote><p>如何从 $\Sigma$ 上的一个正规式 $r$ 构造一个 $\textrm{NFA M}$，使得 $L(M) &#x3D; L(r)$？</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/draft07.drawio.png"></p><blockquote><p>如何从正规文法 $G$ 直接构造一个有穷自动机 $\text{NFA } M$，使得 $L(M) &#x3D; L(G)$？</p></blockquote><p>(1) $M$ 的字母表与 $G$ 的终结符集相同。<br>(2) 为 $G$ 中的每个非终结符生成 $M$ 的一个状态（不妨取成相同的名字），$G$ 的开始符 $S$ 是 $M$ 的开始状态 $S$。<br>(3) 增加一个新状态 $Z$，作为 $M$ 的终态。<br>(4) 对 $G$ 中的形如 $A \rightarrow tB$ 的规则（其中 $t$ 为终结符或 $\varepsilon$，$A$ 和 $B$ 为非终结符的产生式），构造 $M$ 的一个转换函数 $f(A, t) &#x3D; B$。<br>(5) 对 $G$ 中形如 $A \rightarrow t$ 的产生式，构造 $M$ 的一个转换函数 $f(A, t) &#x3D; Z$。</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 13 Roman to Integer</title>
    <link href="/2021/09/25/LeetCode-13-Roman-to-Integer/"/>
    <url>/2021/09/25/LeetCode-13-Roman-to-Integer/</url>
    
    <content type="html"><![CDATA[<p>难度：easy</p><p>代码：</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_13.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/9/25</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">romanToInt</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        roman_dict = &#123;<span class="hljs-string">&#x27;I&#x27;</span>: <span class="hljs-number">1</span>, <span class="hljs-string">&#x27;V&#x27;</span>: <span class="hljs-number">5</span>, <span class="hljs-string">&#x27;X&#x27;</span>: <span class="hljs-number">10</span>, <span class="hljs-string">&#x27;L&#x27;</span>: <span class="hljs-number">50</span>, <span class="hljs-string">&#x27;C&#x27;</span>: <span class="hljs-number">100</span>, <span class="hljs-string">&#x27;D&#x27;</span>: <span class="hljs-number">500</span>, <span class="hljs-string">&#x27;M&#x27;</span>: <span class="hljs-number">1000</span>&#125;<br>        prenum = roman_dict[s[<span class="hljs-number">0</span>]]<br>        num = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(s)):<br>            single_num = roman_dict[s[i]]<br>            <span class="hljs-keyword">if</span> prenum &lt; single_num:<br>                num = num - prenum<br>            <span class="hljs-keyword">else</span>:<br>                num = num + prenum<br>            prenum = single_num<br>        num = num + prenum<br>        <span class="hljs-keyword">return</span> num<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution()<br>    <span class="hljs-built_in">input</span> = <span class="hljs-string">&#x27;MCMXCIV&#x27;</span><br>    output = solution.romanToInt(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p>这道题的思想也可以说是加减交替吧，之所以说“也”，是因为最近上计算机组成原理也提到过这个说法。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《编译原理第三版》（张素琴）学习札记</title>
    <link href="/2021/09/23/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/09/23/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%AC%E4%B8%89%E7%89%88%E3%80%8B%EF%BC%88%E5%BC%A0%E7%B4%A0%E7%90%B4%EF%BC%89%E5%AD%A6%E4%B9%A0%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>记载本书所有章节的阅读札记。</p><h1 id="第二章"><a href="#第二章" class="headerlink" title="第二章"></a>第二章</h1><blockquote><p>何为符号 $\Rightarrow$？</p></blockquote><p>符号 $\Rightarrow$ 的含义是，使用一条规则，代替左端的某个符号，产生其右端的符号串。</p><blockquote><p>何为规则？</p></blockquote><p>规则，也称重写规则、产生式或生成式，是形如 $\alpha \rightarrow \beta$ 或 $\alpha ::&#x3D; \beta$ 的有序对，其中 $\alpha$ 称为规则的左部，$\beta$ 称作规则的右部。</p><blockquote><p>设某一文法 $G$，何为文法 $G$ 的字母表？</p></blockquote><p>$$V_N \cup V_T &#x3D; \varnothing$$</p><p>通常用 $V$ 表示 $V_N \cup V_T$，$V$ 称为文法 $G$ 的字母表或词汇表。</p><p>关于符号 $\rightarrow$ 或 $::&#x3D;$？</p><p>符号 $\rightarrow$ 或 $::&#x3D;$ 读作“定义为”。</p><p>例如，$A \rightarrow a$ 读作“$A$ 定义为 $a$”。也把它说成是一条关于 $A$ 的规则（产生式）。</p><blockquote><p>何为四元组？</p></blockquote><p>文法 $G$ 定义为四元组 $\displaystyle{(V_N, V_T, P, S)}$。</p><ul><li>$V_N$：非终结符（或语法实体，或变量）集；</li><li>$V_T$：终结符集；</li><li>$P$：规则 $(\alpha \rightarrow \beta)$ 的集合<ul><li>$\alpha \in (V_N \cup V_T)^{*}$ 且至少包含一个非终止符</li><li>$\beta \in (V_N \cup V_T)^{*}$；</li></ul></li><li>$V_N, V_T, P$ 是非空有穷集；</li><li>$S$ 称作识别符或者开始符，它是一个非终结符，至少要在一条规则中作为左部出现。</li></ul><p>关于文法 $G$ 的一些规定？</p><ul><li>一般约定，第一条产生式的左部是识别符；</li><li>用尖括号括起来的是非终结符，不用尖括号括起来的是终结符；</li><li>或者用大写字母表示非终结符，小写字母表示终结符；</li><li>另外，还有一种习惯写法，将 $G$ 写成 $G[S]$，其中 $S$ 是识别符。</li></ul><blockquote><p>何为 0 型文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$，如果它的每一个产生式 $\alpha \rightarrow \beta$ 是这样一种结构：$\alpha \in (V_N \cup V_T)^*$ 且至少含有一个非终结符，而 $\beta \in (V_N \cup V_T)^*$，则 $G$ 是一个 <strong>0 型语法文法</strong>。</p><p>0 型文法也称 短语语法。</p><blockquote><p>何为 1 型文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$ 为一个文法，若 $P$ 中的每一个产生式 $\alpha \rightarrow \beta$ 均满足 $|\beta| \geqslant |\alpha|$，仅仅 $S \rightarrow \varepsilon$ 除外，则文法 $G$ 是 <strong>1 型</strong> 或 <strong>上下文有关的（context-sensitive）</strong>。</p><blockquote><p>何为 2 型文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$。若 $P$ 中的每一个产生式 $\alpha \rightarrow \beta$ 满足：$\alpha$ 是一个非终结符，$\beta \in (V_N \cup V_T)^*$，则此文法称为 <strong>2 型的</strong> 或 <strong>上下文无关的（context-free）</strong></p><blockquote><p>何为 3 型文法？</p></blockquote><p>设 $G &#x3D; (V_N, V_T, P, S)$，若 $P$ 中的每一个产生式的形式都是 $A \rightarrow aB$ 或 $A \rightarrow a$，其中 $A$ 和 $B$ 都是非终结符，$a \in V_T^*$，则 $G$ 是 <strong>3 型文法</strong> 或 <strong>正规文法</strong>。</p><p>问题：P25，上下文有关法的等价定义的理解？</p><p>似乎 $A$ 在 $V_N$ 中，是单个字符。</p><blockquote><p>何为符号 $\mathop{\Rightarrow}\limits^{+}$？</p></blockquote><p>如果存在直接推导的序列：$$v &#x3D; w_0 \Rightarrow w_1 \Rightarrow w_2 \Rightarrow \cdots \Rightarrow w_n &#x3D; w ; (n &gt; 0)$$ 则称 $v$ 推导出（产生）$w$（推导长度为 $n$），或称 $w$ 归约到 $v$，记作 $v \mathop{\Rightarrow}\limits^{+} w$。</p><p>若有 $v \mathop{\Rightarrow}\limits^{+} w$，或 $v &#x3D; w$，则记作 $v \mathop{\Rightarrow}\limits^{*} w$。</p><blockquote><p>何为句型，何为句子？</p></blockquote><p>设 $G[S]$ 是一个文法，如果符号串 $x$ 是从识别符推导出来的，即有 $S \mathop{\Rightarrow}\limits^{*} x$，则称 $x$ 是文法 $G[S]$ 的<strong>句型</strong>。</p><p>按：注意上面的 $S \mathop{\Rightarrow}\limits^{<em>} x$ 是 $</em>$ 闭包，所以 $S$ 本身也是句型。</p><p>若 $x$ 仅由终结符号组成，即 $S \mathop{\Rightarrow}\limits^{<em>} x, ; x \in V_T^</em>$，则称 $x$ 为 $G[S]$ 的<strong>句子</strong>。</p><blockquote><p>何为 $L(G)$？</p></blockquote><p>文法 $G$ 所产生的语言定义为集合</p><p>$$<br>{ x| S \mathop{\Rightarrow}\limits^* x, 其中 S 为文法识别符号，且 x \in V^*_T}<br>$$</p><p>可用 $L(G)$ 表示该集合。</p><blockquote><p>何为文法的二义性？</p></blockquote><p>如果一个文法存在某个句子对应两棵不同的语法树，则说这个语法是<strong>二义</strong>的。或者说，若一个文法中存在某个句子，它有两个不同的最左（最右）推导，则这个语法是<strong>二义</strong>的。</p><p>举例：文法 $G &#x3D; ({ E }, { +, *, i, (, ) }, P, E)$，其中 $P$ 为：</p><p>$$<br>\begin{align}<br>&amp;E \rightarrow i \<br>&amp;E \rightarrow E + E \<br>&amp;E \rightarrow E * E \<br>&amp;E \rightarrow (E)<br>\end{align}<br>$$</p><p>对于这个文法 $G$，句型 $i * i + i$ 有两个不同的最左推导 1 和 2，它们的语法树如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210925114214.png" alt="推导 1 的语法树"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210925114311.png" alt="推导 2 的语法树"></p><p>$$<br>\begin{align}<br>&amp;推导 1：E \Rightarrow E + E \Rightarrow E * E + E \Rightarrow i * E + E \Rightarrow i * i + E \Rightarrow i * i + i \<br>&amp;推导 2：E \Rightarrow E * E \Rightarrow i * E \Rightarrow i * E + E \Rightarrow i * i + E \Rightarrow i * i + i<br>\end{align}<br>$$</p><blockquote><p>何为最左推导、最右推导、规范推导、右句型、规范句型？</p></blockquote><p>如果在推导的任何一步 $\alpha \Rightarrow \beta$，其中，$\alpha$、$\beta$ 是句型，都是对 $\alpha$ 中的最左非终结符进行替换，则称这种推导为<strong>最左推导</strong>。</p><p>如果在推导的任何一步 $\alpha \Rightarrow \beta$，其中，$\alpha$、$\beta$ 是句型，都是对 $\alpha$ 中的最右非终结符进行替换，则称这种推导为<strong>最右推导</strong>。</p><p>在形式语言中，最右推导常被称为<strong>规范推导</strong>。</p><p>由规范推导所得的句型称为<strong>右句型</strong>或<strong>规范句型</strong>。</p><blockquote><p>何为短语、直接短语、和句柄？</p></blockquote><p>令 $G$ 是一个文法，$S$ 是文法的开始符号，$\alpha \beta \delta$ 是文法 $G$ 的一个句型。如果有 $S \mathop{\Rightarrow}\limits^* \alpha A \delta$ 且 $A \mathop{\Rightarrow}\limits^+ \beta$，则称 $\beta$ 是句型 $\alpha \beta \delta$ 相对于非终结符 $A$ 的<strong>短语</strong>。</p><p>特别地，如果有 $A \Rightarrow \beta$，则称 $\beta$ 是句型 $\alpha \beta \delta$ 相对于规则 $A \rightarrow \beta$ 的<strong>直接短语</strong>（也称<strong>简单短语</strong>）。</p><p>一个右句型的直接短语称为该句型的<strong>句柄</strong>。句柄的概念只适用于右句型。</p><p><em>最后两个定理要再看看。</em></p><h1 id="第三章"><a href="#第三章" class="headerlink" title="第三章"></a>第三章</h1><blockquote><p>何为正规文法？</p></blockquote><p>这个概念在第二章有讲过，这里再次摘录一下。</p><p>正规文法也称为 3 型文法 $G &#x3D; (V_N, V_T, S, P)$，其 $P$ 中的每一条规则都有下述形式：$A \rightarrow aB$ 或 $A \rightarrow a$，其中 $A, B \in V_N, ; a \in V_T^*$。</p><p>正规文法所描述的是 $V_T$ 上的正规集。</p><blockquote><p>何为正规集？</p></blockquote><p>按：本书中似乎没有正规集的概念。遂从《编译原理 第二版》黑书摘录其定义如下</p><blockquote><p>可以用一个正则表达式定义的语言叫做<strong>正则集合（regular set）</strong>。</p></blockquote><p>黑书中的翻译是“正则集合”，其实和“正规集”是一个意思。</p><p>结合老师所讲，所谓正规集，可以和前面第二章的语言（$L(G)$）这一概念结合来看，它们表达的东西其实是很类似的，因此，正规集所表达的意思就是正规式（正则表达式）所产生的所有字串的集合。</p><blockquote><p>何为正规式？</p></blockquote><p>正规式也称正则表达式，是表示正规集的工具。</p><p>(1). $\varepsilon$ 和 $\varnothing$ 都是 $\Sigma$ 上的正规式，它们所表示的正规集分别为 ${ \varepsilon }$ 和 $\varnothing$。<br>(2). 任何 $a \in \Sigma$，$a$ 是 $\Sigma$ 上的一个正规式，它所表示的正规集为 ${ a }$。<br>(3). 假定 $e_1$ 和 $e_2$ 都是 $\Sigma$ 上的正规式，它们所表示的正规集分别为 $L(e_1)$ 和 $L(e_2)$，那么，$(e_1)$、$e_1|e_2$、$e_1 \cdot e_2$ 和 $e_1^*$ 也都是正规式，它们所表示的正规集分别为 $L(e_1)$、$L(e_1) \cup L(e_2)$、$L(e_1)L(e_2)$ 和 $(L(e_1))^*$。<br>(4). 仅由有限次使用上述 3 个步骤而定义的表达式才是 $\Sigma$ 上的正规式，仅由这些正规式所表示的符号串的集合才是 $\Sigma$ 上的正规集。</p><p>其中的 $|$ 读为“或”；$\cdot$ 读为“连接”；$<em>$ 读为“闭包”。在不致混淆时，括号可省去，但规定算符的优先顺序为先 $</em>$，再 $\cdot$，最后 $|$。连接符 $\cdot$ 一般可省略不写。$*$、$\cdot$、和 $|$ 都是左结合的。</p><blockquote><p>正规文法转正规式的 3 条规则？</p></blockquote><ol><li><p>正规式：$A \rightarrow xy$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow xB \<br> B &amp;\rightarrow y<br> \end{split}<br> $$</p></li><li><p>正规式：$A \rightarrow x^*y$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow xB \<br> A &amp;\rightarrow y \<br> B &amp;\rightarrow xB \<br> B &amp;\rightarrow y<br> \end{split}<br> $$</p></li><li><p>正规式：$A \rightarrow x|y$</p><p> 正规文法：</p><p> $$<br> \begin{split}<br> A &amp;\rightarrow x \<br> A &amp;\rightarrow y<br> \end{split}<br> $$</p></li></ol><p>课堂小问：</p><p>$$<br>A \rightarrow xA \<br>A \rightarrow y<br>$$</p><p>$x$ 可能是多个 $*$ 闭包的组合。</p><p>疑问 P45？</p><p>(1). 例 3.3，表示无符号数的正规式似乎有点问题。</p><p>可以利用 $\varepsilon A &#x3D; A$ 来理解。那么，这个式子就是对的。</p><p>P45 $(a|b)^* &#x3D; (a^* b^*)^*$ 如何理解？</p><p>可以将 $(a|b)^*$ 展开成类似 $(a|b)(a|b) \cdots (a|b)$ 的形式，然后每一个括号内可以随便是 $a$ 或 $b$。</p><blockquote><p>正规式的代数规律？</p></blockquote><p>$$<br>\begin{split}<br>&amp;(1) ; r|s &#x3D; s|r \<br>&amp;(2) ; r|(s|t) &#x3D; (r|s)|t \<br>&amp;(3) ; (rs)t &#x3D; r(st) \<br>&amp;(4) ; r(s|t) &#x3D; rs|rt, ; (s|t)r &#x3D; sr|tr \<br>&amp;(5) ; \varepsilon r &#x3D; r, ; r\varepsilon &#x3D; r \<br>&amp;(6) ; r|r &#x3D; r<br>\end{split}<br>$$</p><blockquote><p>将正规文法转换成正规式的 3 条规则？</p></blockquote><ol><li><p>规则一：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow xB \quad B \rightarrow y \<br> 正规式：&amp;A &#x3D; xy<br> \end{split}<br> $$</p></li><li><p>规则二：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow xA|y \<br> 正规式：&amp;A &#x3D; x^*y<br> \end{split}<br> $$</p></li><li><p>文法产生式：</p><p> $$<br> \begin{split}<br> 文法产生式：&amp;A \rightarrow x \quad A \rightarrow y \<br> 正规式：&amp;A &#x3D; x|y<br> \end{split}<br> $$</p></li></ol><blockquote><p>何为确定的有穷自动机（$\textrm{DFA}$）？</p></blockquote><p>一个确定的有穷自动机 $M$ 是一个五元组：</p><p>$$<br>M &#x3D; (K, \Sigma, f, S, Z)<br>$$</p><p>其中：</p><p>(1) $K$ 是一个有穷集，它的每一个元素称为一个状态。<br>(2) $\Sigma$ 是一个有穷字母表，它的每一个元素称为一个输入符号，所以也称 $\Sigma$ 为输入符号表。<br>(3) $f$ 是转换函数，是 $K \times \Sigma \rightarrow K$ 上的映像。例如，$f(k_i, a) &#x3D; k_j$ $(k_i \in K, k_j \in K, a \in \Sigma)$ 就意味着，当前状态为 $k$、输入字符为 $a$ 时，将转换到下一状态 $k_j$，把 $k_j$ 称作 $k_i$ 的一个后继状态。<br>(4) $S \in K$，是唯一的一个初态。<br>(5) $Z \subseteq K$，是一个终态集，终态也称可接受或结束状态。</p><p>一个 $DFA$ 可以表示成一个状态图（或称状态转换图）。假定 $DFA ; M$ 含有 $m$ 个状态，$n$ 个输入符号，那么这个状态图含有 $m$ 个节点，每个节点最多有 $n$ 个弧射出，整个图含有唯一一个初态节点和若干个终态节点，初态节点冠以“$\Rightarrow$”或标以“$-$”，终态节点终态节点用双圈表示或标以“$+$”，若 $f(k_i, a) &#x3D; k_j$，则从状态节点 $k_i$ 到状态节点 $k_j$ 画标记为 $a$ 的弧。</p><p>对于 $\Sigma^*$ 中的任何符号串，若存在一条从初态节点到某一终态节点的道路，且这条路上所有弧的标记连接成的符号串等于 $t$，则称 $t$ 可为 $DFA ; M$ 所接受，若 $M$ 的初态节点同时又是终态节点，则空字可为 $M$ <strong>所识别（接受）</strong>。<br>可换一种方式叙述如下：<br>若 $t \in \Sigma^*, $ $f(S, t) &#x3D; P$，其中 $S$ 为 $\textrm{DFA M}$ 的开始状态， $P \in Z$，$Z$ 为终态集。则称 $t$ 可为 $\textrm{DFA M}$ 所<strong>接受（识别）</strong>。</p><blockquote><p>何为不确定的有穷自动机（$\textrm{NFA}$）？</p></blockquote><p>一个不确定的有穷自动机 $M$ 是一个五元组：</p><p>$$<br>M &#x3D; (K, \Sigma, f, S, Z)<br>$$</p><p>其中：</p><p>(1) $K$ 是一个有穷集，它的每个元素称为一个状态。<br>(2) $\Sigma$ 是一个有穷字母表，它的每个元素称为一个输入符号。<br>(3) $f$ 是一个从 $K \times \Sigma^*$ 到 $K$ 的全体子集的映像，即 $K \times \Sigma^* \rightarrow 2^K$，其中 $2^K$ 表示 $K$ 的幂集。<br>(4) $S \subseteq K$，是一个非空初态集。<br>(5) $Z \subseteq K$，是一个终态集。</p><p>一个含有 $m$ 个状态和 $n$ 个输入符号的 $\textrm{NFA}$ 可表示成一张状态转换图，这张图含有 $m$ 个状态结点，每个结点可射出若干条箭弧与别的节点相连接，每条弧用 $\Sigma^*$ 中的一个串作标记，整个图至少含有一个初态结点以及若干个终态结点。</p><blockquote><p>何为状态集合 $I$ 的 $\varepsilon\text{-闭包}$？</p></blockquote><p>状态集合 $I$ 的 $\varepsilon\text{-闭包}$，表示为 $\varepsilon \text{-closure(I)}$，定义为一个状态集，是状态集 $I$ 中任何状态 $S$ 经任意条 $\varepsilon$ 弧能到达的状态的集合。</p><blockquote><p>何为状态集合 $I$ 的 $a$ 弧转换？</p></blockquote><p>状态集合 $I$ 的 $a$ 弧转换，表示为 $move(I, a)$，定义为状态集合 $J$，其中 $J$ 是所有哪些可从 $I$ 中的某一状态经过一条 $a$ 弧而到达的状态的全体。</p><blockquote><p>如何将一个 $\textrm{NFA}$ 转换为等价的 $\textrm{DFA}$？</p></blockquote><p>这里介绍的方法就是<strong>子集法</strong>。</p><p>假设 $\textrm{NFA N} &#x3D;$ ${K, \Sigma, f, K_0, K_t}$ 按照如下方法构造一个 $\textrm{DFA M} &#x3D;$ $(S, \Sigma, D, S_0, S_t)$ 使得 $L(M) &#x3D; L(N)$：</p><p>(1) $M$ 的状态集 $S$ 由 $K$ 的一些子集（构造 $K$ 的子集见下图）组成。用 $[S_1, S_2, …, S_j]$ 表示 $S$ 的元素，其中 $S_1, S_2, …, S_j$ 是 $K$ 的状态。并且约定，状态 $S_1, S_2, …, S_j$ 是按某种规则排列的，即对于子集 $S &#x3D; { S_2, S_1 }$ 来说，$S$ 的状态就是 $[S_1S_2]$。</p><p>疑问：P51 这里的 S 规则排列与状态究竟是什么？  </p><blockquote><p>疑问：如果 $K_0$ 中不止一个元素怎么办？</p></blockquote><p>解答：这个观察 $\varepsilon \text{-闭包}$ 的定义即可解决。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211002163758.png" alt="图 1：子集的构造算法"></p><p>按：</p><p>(2) $M$ 和 $N$ 的输入字母表是相同的，即是 $\Sigma$。<br>(3) 转换函数 $D$ 是这样定义的。</p><p>$$<br>D([S_1, S_2, …, S_j], a) &#x3D; [R_1, R_2, …, R_j]<br>$$</p><p>其中 $\varepsilon(move([S_1, S_2, $ $… S_j], a)) &#x3D; $ $[R_1, R_2, …, R_j]$。<br>(4) $S_0 &#x3D; $ $\varepsilon \text{-closure}(K_0)$ 为 $M$ 的开始状态。<br>(5) $S_t &#x3D; $ ${ [S_j, S_k,…,S_e] }$，其中 $[S_j, S_k,…,S_e]$ $\in S$ 且 ${ S_j, S_k,…,S_e }$ $\cap ; K_t \neq \varnothing }$</p><p>图 1 是构造 $\text{NFA } N$ 的状态 $K$ 的子集的算法。假定所构造的子集族为 $C$，即 $C &#x3D; (T_1, T_2,…,T_i)$，其中 $T_1, T_2,…,T_i$ 为状态 $K$ 的子集。</p><p>这个概念必须要用具体的例子辅助理解才能够最终掌握，所以，这里就举一个例子：应用上面的算法对下面的图 2 的 $\text{NFA } N$ 构造子集。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20211004145119.png" alt="图 2"></p><p>步骤如下：</p><p>(1) 首先计算 $\varepsilon \text{-closure(0)}$，令 $T_0 &#x3D; \varepsilon \text{-closure(0)}$ $&#x3D;{0, 1, 2, 4, 7}$，$T_0$ 未被标记，它现在是子集族 $C$ 的唯一成员。<br>(2) 标记 $T_0$；计算 $move(T_0, a) &#x3D; $ ${ 3, 8 }$。令 $T_1 &#x3D; $ $\varepsilon \text{-closure} (move(T_0, a))$ $&#x3D; {1, 2, 3, 4, 6, 7, 8}$，将 $T_1$ 加入 $C$ 中，$T_1$ 未被标记。<br>计算 $move(T_0, b) &#x3D; $ ${ 5 }$。令 $T_2 &#x3D; \varepsilon$ $\text{-closure} (move(T_0, b))$ $&#x3D; { 1, 2, 4, 5, 6, 7 }$，将 $T_2$ 加入 $C$ 中，它未被标记。<br>(3) 标记 $T_1$；计算 $move(T_1, a) &#x3D; $ ${ 3, 8 }$。计算 $\varepsilon \text{-closure} (move(T_1, a))$，结果为 ${ 1, 2, 3, 4, 6, 7, 8 }$，即 $T_1$，$T_1$ 已在 $C$ 中。<br>计算 $move(T_1, b) &#x3D; $ ${ 5, 9 }$。 计算 $\varepsilon \text{-closure} (move(T_1, b))$，结果为 ${ 1, 2, 4, 5, 6, 7, 9 }$，令其为 $T_3$，加至 $C$ 中，它未被标记。<br>(4) （从这里开始，就不单独计算 $move$ 的结果了）标记 $T_2$，计算 $\varepsilon \text{-closure} (move(T_2, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 $T_1$，$T_1$ 已在 $C$ 中。<br>计算 $\varepsilon \text{-closure} (move(T_2, b))$，结果为 ${1, 2, 4, 5, 6, 7}$，即 $T_2$，$T_2$ 已在 $C$ 中。<br>(5) 标记 $T_3$，计算 $\varepsilon \text{-closure} (move(T_3, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 $T_1$。<br>计算 $\varepsilon \text{-closure} (move(T_3, b))$，结果为 ${1, 2, 4, 5, 6, 7, 10}$，令其为 $T_4$，加入 $C$ 中，$T_4$ 未被标记。<br>(6) 标记 $T_4$，计算 $\varepsilon \text{-closure} (move(T_4, a))$，结果为 ${1, 2, 3, 4, 6, 7, 8}$，即 T_1$$。<br>计算 $\varepsilon \text{-closure} (move(T_4, b))$，结果为 ${1, 2, 4, 5, 6, 7}$，即 $T_2$。<br>至此，算法终止，共构造了 5 个子集：</p><p>$$<br>\begin{split}<br>T_0 &amp;&#x3D; {0, 1, 2, 4, 7} \<br>T_1 &amp;&#x3D; {1, 2, 3, 4, 6, 7, 8} \<br>T_2 &amp;&#x3D; { 1, 2, 4, 5, 6, 7 } \<br>T_3 &amp;&#x3D; { 1, 2, 4, 5, 6, 7, 9 } \<br>T_4 &amp;&#x3D; {1, 2, 4, 5, 6, 7, 10}<br>\end{split}<br>$$</p><p>那么，图 2 的 $\text{NFA } N$ 构造的 $\text{DFA } M$ 如下：</p><p>$$<br>\begin{split}<br>(1); &amp;S &#x3D; {[T_0], [T_1], [T_2], [T_3], [T_4]} \<br>(2); &amp;\Sigma &#x3D; {a, b} \<br>(3); &amp;D([T_0], a) &#x3D; [T_1] \<br>   ; &amp;D([T_0], b) &#x3D; [T_2] \<br>   ; &amp;D([T_1], a) &#x3D; [T_1] \<br>   ; &amp;D([T_1], b) &#x3D; [T_3] \<br>   ; &amp;D([T_2], a) &#x3D; [T_1] \<br>   ; &amp;D([T_2], b) &#x3D; [T_2] \<br>   ; &amp;D([T_3], a) &#x3D; [T_1] \<br>   ; &amp;D([T_3], b) &#x3D; [T_4] \<br>   ; &amp;D([T_4], a) &#x3D; [T_1] \<br>   ; &amp;D([T_4], b) &#x3D; [T_2] \<br>(4); &amp;S_0 &#x3D; [T_0] \<br>(5); &amp;S_t &#x3D; [T_4]<br>\end{split}<br>$$</p><blockquote><p>何为有穷自动机的无用状态？</p></blockquote><p>所谓有穷自动机的无用状态，是指这样的状态：从该自动机的开始状态出发，任何输入串也不能到达的那个状态，或者从这个状态没有通路到达终态。</p><blockquote><p>在有穷自动机中，两个状态 $s$ 和 $t$ 等价的条件？</p></blockquote><ul><li>一致性条件——状态 $s$ 和 $t$ 必须同时为可接受状态（终态）或不可接受状态（非终态）。</li><li>蔓延性条件——对于所有输入符号，状态 $s$ 和状态 $t$ 必须转换到等价的状态里。</li></ul><blockquote><p>正规式和有穷自动机的等价性如何说明？</p></blockquote><p>可由以下两点说明：</p><ul><li>对于 $\Sigma$ 上的 $\textrm{NFA M}$，可以构造一个 $\Sigma$ 上的正规式，使得 $L(r) &#x3D; L(M)$。</li><li>对于 $\Sigma$ 上的每个正规式 $r$，可以构造一个 $\Sigma$ 上的 $\textrm{NFA M}$，使得 $L(M) &#x3D; L(r)$。</li></ul><blockquote><p>如何为 $\Sigma$ 上的 $\textrm{NFA M}$ 构造相应的正规式 $r$？</p></blockquote><p>第 1 步，在 $M$ 的状态转换图上加进两个结点，一个为 $x$ 结点，一个为 $y$ 结点。从 $x$ 结点用 $\varepsilon$ 弧连接到 $M$ 的所有初态结点，从 $M$ 的所有终态结点用 $\varepsilon$ 弧连接到 $y$ 结点。形成一个与 $M$ 等价的 $M^{‘}$，$M^{‘}$ 只有一个初态 $x$ 和一个终态 $y$。<br>第 2 步，逐步消去 $M^{‘}$ 中的所有结点，直至只剩下 $x$ 和 $y$ 结点。在消去的过程中，逐步用正规式来标记弧。其消去的规则如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/draft06.drawio.png"></p><p>最后 $x$ 和 $y$ 结点间的弧上的标记则为所求的正规式 $r$。</p><blockquote><p>如何从 $\Sigma$ 上的一个正规式 $r$ 构造一个 $\textrm{NFA M}$，使得 $L(M) &#x3D; L(r)$？</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/draft07.drawio.png"></p><blockquote><p>如何从正规文法 $G$ 直接构造一个有穷自动机 $\text{NFA } M$，使得 $L(M) &#x3D; L(G)$？</p></blockquote><p>(1) $M$ 的字母表与 $G$ 的终结符集相同。<br>(2) 为 $G$ 中的每个非终结符生成 $M$ 的一个状态（不妨取成相同的名字），$G$ 的开始符 $S$ 是 $M$ 的开始状态 $S$。<br>(3) 增加一个新状态 $Z$，作为 $M$ 的终态。<br>(4) 对 $G$ 中的形如 $A \rightarrow tB$ 的规则（其中 $t$ 为终结符或 $\varepsilon$，$A$ 和 $B$ 为非终结符的产生式），构造 $M$ 的一个转换函数 $f(A, t) &#x3D; B$。<br>(5) 对 $G$ 中形如 $A \rightarrow t$ 的产生式，构造 $M$ 的一个转换函数 $f(A, t) &#x3D; Z$。</p><h1 id="第四章"><a href="#第四章" class="headerlink" title="第四章"></a>第四章</h1><blockquote><p>何为确定的自顶向下分析方法？</p></blockquote><p>确定的自顶向下分析方法，是从文法的开始符号出发，考虑如何根据当前的输入符号（单词符号）唯一地确定选用哪个产生式替换相应非终结符以往下推导，或如何构造一棵相应的语法树。</p><blockquote><p>如何理解 $\text{FIRST()}$？</p></blockquote><p>设 $G &#x3D; (V_T, V_N, P, S)$ 是上下文无关文法。</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; {a|\alpha \stackrel{<em>}{\Rightarrow} \alpha \beta, \quad a \in V_T, \alpha, \beta \in V^</em>}<br>$$</p><p>若 $\alpha \stackrel{*}{\Rightarrow} \epsilon$，则规定 $\epsilon \in \text{FIRST}(\alpha)$。称 $\text{FIRST}(\alpha)$ 为 $\alpha$ 的<strong>开始符号集</strong>或<strong>首符号集</strong>。</p><blockquote><p>如何理解 $\text{FOLLOW()}$？</p></blockquote><p>设 $G &#x3D; (V_T, V_N, P, S)$ 是上下文无关文法，$A \in V_N$，$S$ 是开始符号。</p><p>$$<br>\text{FOLLOW}(A) &#x3D; {a|S \stackrel{<em>}{\Rightarrow} \mu A \beta ; 且 ; a \in V_T, a \in \text{FIRST}(\beta), \mu \in V_T^</em>, \beta \in V^{+}}<br>$$</p><p>若 $S \stackrel{<em>}{\Rightarrow} \mu A \beta$，且 $\beta \stackrel{</em>}{\Rightarrow} \epsilon$，则 $＃ \in \text{FOLLOW}(A)$。</p><p>$$<br>\text{FOLLOW}(A) &#x3D; {a|S \stackrel{*}{\Rightarrow} \cdots Aa \cdots, ; a \in V_T}<br>$$</p><p>若有 $S \stackrel{*}{\Rightarrow} \cdots A$，则规定 $＃ \in \text{FOLLOW}(A)$。</p><p>这里用 $＃$ 作为输入串的结束符，也称为输入串符号。</p><p>因此当文法中含有形如</p><p>$$<br>\begin{split}<br>A \rightarrow \alpha \<br>A \rightarrow \beta<br>\end{split}<br>$$</p><p>的产生式时，其中 $A \in V_N, \alpha、\beta \in V^*$，若 $\alpha$ 和 $\beta$ 不能同时推导出空，假定 $\alpha \stackrel{<em>}{\nRightarrow} \epsilon$ $, \beta \stackrel{</em>}{\Rightarrow} \epsilon$，则当 $\text{FIRST}(\alpha)$ $\cap$ $(\text{FIRST}(\beta)$ $\cup$ $\text{FOLLOW}(A)) &#x3D; \varnothing$ 时，对于非终结符 $A$ 的替换仍可唯一地确定候选。</p><blockquote><p>如何理解 $\text{SELECT()}$？</p></blockquote><p>给定上下文无关文法的产生式 $A \rightarrow \alpha$ $, $ $A \in V_N, \alpha \in V^*$，</p><ul><li>若 $\alpha \stackrel{*}{\nRightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $\text{FIRST}(\alpha)$。</li><li>若 $\alpha \stackrel{*}{\Rightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $(\text{FIRST}(\alpha) - {\varepsilon})$ $\cup$ $\text{FOLLOW}(A)$。</li></ul><blockquote><p>何为 $\text{LL}(1)$ 文法？</p></blockquote><p>一个上下文无关文法是 $\text{LL}(1)$ 的充分必要条件是,</p><p>对每个非终结符 $A$ 的两个不同产生式，$A \rightarrow \alpha$ $,$ $A \rightarrow \beta$，满足</p><p>$$<br>\text{SELECT}(A \rightarrow \alpha) \cap \text{SELECT}(A \rightarrow \beta) &#x3D; \varnothing<br>$$</p><p>其中 $\alpha、\beta$ 不同时能 $\stackrel{*}{\Rightarrow} \epsilon$。</p><p>$\text{LL}(1)$ 的含义是：第 1 个 $\text{L}$ 表明自顶向下分析是从左向右扫描输入串，第 2 个 $\text{L}$ 表明分析过程中将用最左推导，1 表明只需要向右看一个符号便可决定如何推导，即选择哪个产生式（规则）进行推导。</p><blockquote><p>如何判别某文法是否是 $\text{LL}(1)$ 文法？</p></blockquote><p>首先计算 $\text{FIRST}$、$\text{FOLLOW}$、$\text{SELECT}$ 集合，然后根据定义判别文法是否是 $\text{LL}(1)$ 文法。</p><blockquote><p>如何计算一个文法符号 $X \in V$ 的 $\text{FIRST}$ 集 $\text{FIRST}(X)$？</p></blockquote><p>① 若 $X \in V_T$，则 $\text{FIRST}(X) &#x3D; {X}$。<br>② 若 $X \in V_N$，且有产生式 $X \rightarrow a \cdots$ $,$ $a \in V_T$，则 $a \in \text{FIRST}(X)$。<br>③ 若 $X \in V_N$，$X \rightarrow \varepsilon$，则 $\varepsilon \in \text{FIRST}(X)$。<br>④ 若 $X, Y_1, Y_2,$ $\cdots$ $, Y_n \in V_N$，而有产生式 $X \rightarrow Y_1Y_2 \cdots Y_n$。当 $Y_1, Y_2, \cdots, Y_{i - 1}$ $\stackrel{*}{\Rightarrow} \varepsilon$ 时（其中 $1 \leqslant i \leqslant n$），则 $\text{FIRST}(Y_1) - {\varepsilon},$ $\text{FIRST}(Y_2) - {\varepsilon},$ $\cdots$ $, \text{FIRST}(Y_{i - 1}) - {\varepsilon},$ $\text{FIRST}(Y_i)$ 都包含在 $\text{FIRST}(X)$ 中，即</p><p>$$<br>\text{FIRST}(X) &#x3D; (\text{FIRST}(Y_1) \cup \text{FIRST}(Y_2) \cdots \cup \text{FIRST}(Y_i)) - {\varepsilon}<br>$$</p><p>⑤ 当 ④ 中所有 $Y_i \stackrel{*}{\Rightarrow} \varepsilon$ $,$ $(i &#x3D; 1, 2, \cdots, n)$，则 </p><p>$$<br>\text{FIRST}(X) &#x3D; (\text{FIRST}(Y_1) \cup \text{FIRST}(Y_2) \cdots \cup \text{FIRST}(Y_n)) \cup {\varepsilon}<br>$$</p><p>反复使用上述 ②~⑤ 步，直到每个符号的 $\text{FIRST}$ 集合不再增大为止。</p><blockquote><p>如何计算一个符号串的 $\text{FIRST}$ 集合？</p></blockquote><p>若符号串 $\alpha \in V^*$ $,$ $\alpha &#x3D; X_1 X_2 \cdots X_n$，当 $X_1$ 不能 $\stackrel{*}{\Rightarrow} \varepsilon$，则置 $\text{FIRST}(\alpha) &#x3D; \text{FIRST}(X_1)$。</p><p>若对任何 $j(1 \leqslant j \leqslant i - 1,$ $2 \leqslant i \leqslant n)$ $,$ $\varepsilon \in \text{FIRST}(X_j)$ $,$ $\varepsilon \notin \text{FIRST}(X_i)$，则</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; \bigcup_{j &#x3D; 1}^{i - 1}(\text{FIRST}(X_j) - {\varepsilon}) \cup \text{FIRST}(X_i)<br>$$</p><p>当对任何 $j(1 \leqslant j \leqslant n)$，$\text{FIRST}(X_j)$ 都含有 $\varepsilon$ 时，则</p><p>$$<br>\text{FIRST}(\alpha) &#x3D; \bigcup_{j &#x3D; 1}^{n}(\text{FIRST}(X_j) - {\varepsilon}) \cup {\varepsilon}<br>$$</p><p>按：这里最后一个公式书上的写法似乎有点问题。</p><blockquote><p>如何计算 $\text{FOLLOW}$ 集？</p></blockquote><p>对文法中的每一个 $A \in V_N$，根据定义计算 $\text{FOLLOW}(A)$。</p><p>① 设 $S$ 为文法的开始符号，把 ${＃}$ 加入 $\text{FOLLOW}(S)$ 中（这里＃为句子括号）。</p><p>按：＃似为句子结束符号。</p><p>② 若 $A \rightarrow \alpha B \beta$ 是一个产生式，则把 $\text{FIRST}(\beta)$ 的非空元素加入 $\text{FOLLOW}(B)$ 中。<br>如果 $\beta \stackrel{*}{\Rightarrow} \varepsilon$，则把 $\text{FOLLOW}(A)$ 也加入 $\text{FOLLOW}(B)$ 中，因为当有形如</p><p>$$<br>\begin{split}<br>D &amp;\rightarrow \alpha_{1} A \beta_{1} \<br>A &amp;\rightarrow \alpha B \beta<br>\end{split}<br>$$</p><p>的产生式时，$A, B, D \in V_N$，$\alpha, \alpha_{1}, \beta, \beta_{1} \in V^*$，在推导过程中可能出现如下的句型序列：</p><p>$$<br>S \stackrel{*}{\Rightarrow} \cdots \alpha_{1} A \beta_{1} \cdots \Rightarrow \alpha_{1} \alpha B \beta \beta{1} \cdots \Rightarrow \cdots \alpha_{1} \alpha B \beta_{1} \cdots<br>$$</p><p>因此，有 $\text{FOLLOW}(A)$ $\subseteq$ $\text{FOLLOW}(B)$。</p><p>③ 反复使用 ② 直到每个非终结符的 $\text{FOLLOW}$ 集不再增大为止。</p><blockquote><p>如何计算某一文法中的每一个产生式的 $\text{SELECT}$ 集？</p></blockquote><p>直接根据定义来判断：</p><p>给定上下文无关文法的产生式 $A \rightarrow \alpha$ $, $ $A \in V_N, \alpha \in V^*$，</p><ul><li>若 $\alpha \stackrel{*}{\nRightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $\text{FIRST}(\alpha)$。</li><li>若 $\alpha \stackrel{*}{\Rightarrow} \varepsilon$，则 $\text{SELECT}(A \rightarrow \alpha)$ $&#x3D;$ $(\text{FIRST}(\alpha) - {\varepsilon})$ $\cup$ $\text{FOLLOW}(A)$。</li></ul><blockquote></blockquote><hr><p>附：哈工大慕课陈鄞对于 $\text{FIRST}$、$\text{FOLLOW}$ 和 $\text{SELECT}$ 的理解。</p><blockquote><p>对 $\text{FIRST}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/s8YqiDv.png"></p><p><img src="https://i.imgur.com/VmrkYxH.png"></p><p><img src="https://i.imgur.com/hgG2AXE.png"></p><blockquote><p>对 $\text{FOLLOW}$ 的理解？</p></blockquote><p><img src="https://i.imgur.com/BWChrVU.png"></p><p><img src="https://i.imgur.com/T9YnsK5.png"></p><blockquote><p>一个 $\text{SELECT}$ 的例子。</p></blockquote><p><img src="https://i.imgur.com/OQut1Ok.png"></p><blockquote><p>一张预测分析表。</p></blockquote><p><img src="https://i.imgur.com/rqhlpyx.png"></p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>解决 Hexo 在生成博客过程中的 Accessing non-existent property xxx of module exports inside circular dependency 问题</title>
    <link href="/2021/09/22/%E8%A7%A3%E5%86%B3-Hexo-%E5%9C%A8%E7%94%9F%E6%88%90%E5%8D%9A%E5%AE%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84-Accessing-non-existent-property-xxx-of-module-exports-inside-circular-dependency-%E9%97%AE%E9%A2%98/"/>
    <url>/2021/09/22/%E8%A7%A3%E5%86%B3-Hexo-%E5%9C%A8%E7%94%9F%E6%88%90%E5%8D%9A%E5%AE%A2%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84-Accessing-non-existent-property-xxx-of-module-exports-inside-circular-dependency-%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<p>建议直接阅读这一篇博客：<a href="https://www.haoyizebo.com/posts/710984d0/">https://www.haoyizebo.com/posts/710984d0/</a></p><p>我在这里仅仅是作一个备份。</p><p>对于我来说，有用的两个步骤是：</p><p>(1) 执行以下两个命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">yarn remove hexo-renderer-stylus<br>yarn add hexo-renderer-stylus<br></code></pre></td></tr></table></figure><p>(2) 到 Hexo 博客的根目录下，找到 <code>package.json</code> 文件，添加如下部分：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-attr">&quot;resolutions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;stylus&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^0.54.8&quot;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210922230847.png" alt="图片示意"></p><p>然后重新生成部署博客即可。</p><p>注意，如果电脑中原来没有 yarn，那么，可以在命令行通过以下命令安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">npm install --global yarn<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Hexo</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Hexo</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>编译原理作业一</title>
    <link href="/2021/09/21/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%B8%80/"/>
    <url>/2021/09/21/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E4%BD%9C%E4%B8%9A%E4%B8%80/</url>
    
    <content type="html"><![CDATA[<h2 id="1、第一章课后作业"><a href="#1、第一章课后作业" class="headerlink" title="1、第一章课后作业"></a>1、第一章课后作业</h2><p>1、解释下列术语：</p><p>编译程序，源程序，目标程序，编译程序的前端、后端和遍</p><p>解：</p><p>(1) 编译程序：从功能上看，一个编译程序就是一个语言翻译程序。语言翻译程序把一种语言（称作源语言）书写的程序翻译成另一种语言（称作目标语言）的等价程序。<br>(2) 源程序：源语言编写的程序。<br>(3) 目标程序：目标语言书写的程序。<br>(4) 编译程序的前端：将与仅依赖于源程序而与目标机器（硬件）无关的阶段组合成前端。<br>(5) 后端：将与目标机器（硬件）相关的阶段组合成后端。<br>(6) 遍：“遍”也称为“趟”。所谓“一遍”，就是对源程序或等价的中间程序从头到尾扫视一次，并完成编译任务之过程。</p><p>2、编译程序有哪些主要构成成分？各自的主要功能是什么？</p><p>解：</p><p>一个典型的编译程序通常包含 8 个组成部分，它们是：词法分析程序、语法分析程序、语义分析程序、中间代码生成程序、代码优化程序、目标代码生成程序、表格管理程序和出错处理程序。</p><p>各自的功能如下：</p><ul><li>词法分析程序：从左至右扫描字符流的源程序、分解构成源程序的字符串，识别出一个个的单词。</li><li>语法分析程序：层次分析。依据源程序的语法规则把源程序的单词序列组成语法短语（表示成语法树）。</li><li>语义分析程序：审查程序有无语义错误，为代码生成阶段收集类型信息。</li><li>中间代码生成程序：按照语义规则，将语法分析程序分析的结果保存到各类语义信息表中。</li><li>代码优化程序：改进中间代码，以便生成更好的目标代码。</li><li>目标代码生成：以源程序的中间表示形式作为输入，并把它映射到目标语言。</li><li>表格管理程序：记录源程序中使用的变量的名字，并收集和每个名字的各种属性有关的信息。</li><li>出错处理程序：报告出错信息、排错和恢复编译工作。</li></ul><p>3、什么是解释程序？它与编译程序的主要不同是什么？</p><p>解释程序是解释、执行高级语言源程序的程序。</p><p>它与编译程序的主要不同是它并部通过翻译的方式生成目标程序。从用户的角度看，解释器直接利用用户提供的输入执行源程序中指定的操作。</p><p>4、对下列错误信息，请指出可能是编译的哪个阶段（词法分析、语法分析、语义分析、代码生成）报告的。</p><p>(1) else 没有匹配的 if。<br>(2) 数组下标越界。<br>(3) 使用的函数没有定义。<br>(4) 在数中出现非数字字符。  </p><p>解：</p><p>(1) 语法分析<br>(2) 语义分析<br>(3) 语法分析<br>(4) 词法分析  </p><h2 id="2、课堂作业"><a href="#2、课堂作业" class="headerlink" title="2、课堂作业"></a>2、课堂作业</h2><p>试设计一文法 $G$，使得 $L(G)$ 为能被 $3$ 整除的整数集。</p><p>解：</p><p>首先，将 0-9 这十个数字分成三组。</p><ul><li>0，3，6，9：可以被 3 整除</li><li>1，4，7：被 3 整除余 1</li><li>2，5，8：被 3 整除余 2</li></ul><p>文法表达式为：$G &#x3D; (V_N, V_T, P, S)$，其中</p><p>$$<br>\begin{split}<br>V_N &#x3D; { S, A, B } \<br>V_T &#x3D; { 0, 1, 2, 3, 4, 5, 6, 7, 8 9 }<br>\end{split}<br>$$</p><p>然后，分类讨论。</p><ol><li><p>对开始符 $S$</p><ul><li>若和 $0, 3, 6, 9$ 组合，有 $S \rightarrow (0|3|6|9)S|\varepsilon$</li><li>若和 $1, 4, 7$ 组合，有 $S \rightarrow (1, 4, 7)A$</li><li>若和 $2, 5, 8$ 组合，有 $S \rightarrow (2|5|8)B$</li></ul></li><li><p>对非终结符 $A$，其左边是 $1, 4, 7$ 三个数字。</p><ul><li>若和 $0, 3, 6, 9$ 组合，有 $A \rightarrow (0, 3, 6, 9)A$</li><li>若和 $2, 5, 8$ 组合，有 $A \rightarrow (2|5|8)S$</li><li>若和 $1, 4, 7$ 组合，有 $A \rightarrow (1|4|7)B$</li></ul></li><li><p>对非终结符 $B$，其左边是 $1, 4, 7$ 三个数字。</p><ul><li>若和 $0, 3, 6, 9$ 组合，有 $B \rightarrow (0|3|6|9)B$</li><li>若和 $1, 4, 7$ 组合，有 $B \rightarrow (1|4|7)S$</li><li>若和 $2, 5, 8$ 组合，有 $B \rightarrow (2|5|8)A$</li></ul></li></ol><p>综上，$P$ 的规则是</p><p>$$<br>\begin{align}<br>&amp;S \rightarrow (0|3|6|9)S|(1|4|7)A|(2|5|8)B|\varepsilon \<br>&amp;A \rightarrow (0|3|6|9)A|(2|5|8)S|(1|4|7)B \<br>&amp;B \rightarrow (0|3|6|9)B|(1|4|7)S|(2|5|8)A<br>\end{align}<br>$$</p><h2 id="3、第二章课后作业"><a href="#3、第二章课后作业" class="headerlink" title="3、第二章课后作业"></a>3、第二章课后作业</h2><p>1、文法 $G &#x3D; ({ A, B, S }, { a, b, c }, P, S)$，其中 $P$ 为</p><p>$$<br>\begin{align}<br>&amp; S \rightarrow Ac|aB \<br>&amp; A \rightarrow ab \<br>&amp; B \rightarrow bc<br>\end{align}<br>$$</p><p>写出 $L(G[S])$ 的全部元素。</p><p>解：</p><p>$$<br>L(G[S]) &#x3D; { abc }<br>$$</p><p>4、证明文法</p><p>$$<br>G &#x3D; ({ E, O }, { (, ), +, *, v, d }, P, E)<br>$$</p><p>是二义的，其中 $P$ 为</p><p>$$<br>\begin{align}<br>&amp;E \rightarrow EOE|(E)|v|d \<br>&amp;O \rightarrow +|*<br>\end{align}<br>$$</p><p>证明：</p><p>可为句子 $v * v + v$ 构造两个不同的最左推导：</p><p>$$<br>\begin{align}<br>E &amp;\Rightarrow EOE \<br>&amp;\Rightarrow EOEOE \<br>&amp;\Rightarrow vOEOE \<br>&amp;\Rightarrow v<em>EOE \<br>&amp;\Rightarrow v</em>vOE \<br>&amp;\Rightarrow v<em>v+E \<br>&amp;\Rightarrow v</em>v+v \<br>E &amp;\Rightarrow EOE \<br>&amp;\Rightarrow vOE \<br>&amp;\Rightarrow v<em>E \<br>&amp;\Rightarrow v</em>EOE \<br>&amp;\Rightarrow v<em>vOE \<br>&amp;\Rightarrow v</em>v+E \<br>&amp;\Rightarrow v*v+v<br>\end{align}<br>$$</p><p>故文法 $G$ 是二义的。</p><p>11、一个上下文无关语法生成句子 $abbaa$ 的唯一语法树如下：</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210926101048.png"></p><p>(1)、给出该句子相应的最左推导和最右推导。<br>(2)、该文法的产生式集合 $P$ 可能有哪些元素？<br>(3)、找出该句子的所有短语、简单短语、句柄。</p><p>解：</p><p>(1)、句子 $abbaa$ 的最左推导如下</p><p>$$<br>\begin{align}<br>S &amp;\Rightarrow ABS \<br>&amp;\Rightarrow aBS \<br>&amp;\Rightarrow aSBBS \<br>&amp;\Rightarrow a\varepsilon BBS \<br>&amp;\Rightarrow a\varepsilon bBS \<br>&amp;\Rightarrow a\varepsilon bbS \<br>&amp;\Rightarrow a\varepsilon bbAa \<br>&amp;\Rightarrow a\varepsilon bbaa \<br>\end{align}<br>$$</p><p>最右推导如下</p><p>$$<br>\begin{align}<br>S &amp;\Rightarrow ABS \<br>&amp;\Rightarrow ABAa \<br>&amp;\Rightarrow ABaa \<br>&amp;\Rightarrow ASBBaa \<br>&amp;\Rightarrow ASBbaa \<br>&amp;\Rightarrow ASbbaa \<br>&amp;\Rightarrow A\varepsilon bbaa \<br>&amp;\Rightarrow a\varepsilon bbaa \<br>\end{align}<br>$$</p><p>(2)、</p><p>产生式有：</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow ABS|Aa|\varepsilon \<br>A &amp;\rightarrow a \<br>B &amp;\rightarrow SBB|b<br>\end{split}<br>$$</p><p>可能的元素有：</p><p>$$<br>\varepsilon ; aa ; ab ; abbaa ; aaabbaa ; \cdots<br>$$</p><p>(3)、</p><p>该句子的短语有：<br>$a$ 是相对 $A$ 的短语；<br>$\varepsilon$ 是相对 $S$ 的短语；<br>$b$ 是相对 $B$ 的短语；<br>$\varepsilon bb$ 是相对 $B$ 的短语；<br>$aa$ 是相对 $S$ 的短语；<br>$a\varepsilon bbaa$ 是相对 $S$ 的短语；</p><p>直接短语有：$a ; \varepsilon ; b$；</p><p>句柄是：$a$。</p><p>12、构造产生如下语言的上下文无关文法各一个：</p><p>$$<br>\begin{align}<br>&amp;(2) ; { a^m b^n | m \geqslant n \geqslant 0 } \<br>&amp;(5) ; { a^n b^m | n \geqslant 0, m \geqslant 0, 且 3n \geqslant m \geqslant 2n } \<br>&amp;(6) ; { ww^R | w \in { a, b }^*, 其中, w^R 表示 w 的反向串，其含义是将 w 中的字母依次反转，首尾字母交换位置 } \<br>\end{align}<br>$$</p><p>解：</p><p>(2)、</p><p>$$<br>\begin{split}<br>S \rightarrow aSb|aS|\varepsilon<br>\end{split}<br>$$</p><p>(5)、</p><p>$$<br>\begin{split}<br>S \rightarrow aSbb|aSbbb|\varepsilon<br>\end{split}<br>$$</p><p>(6)、</p><p>$$<br>S \rightarrow aSa|bSb|\varepsilon<br>$$</p><p>18、给出生成下述语言的一个 3 型文法：</p><p>(2)、${ a^nb^m|n, m \geqslant 1 }$</p><p>解：</p><p>$$<br>\begin{split}<br>S &amp;\rightarrow aA \<br>A &amp;\rightarrow aA|B \<br>B &amp;\rightarrow bB|b<br>\end{split}<br>$$</p>]]></content>
    
    
    <categories>
      
      <category>编译原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编译原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 12 Integer to Roman</title>
    <link href="/2021/09/20/LeetCode-12-Integer-to-Roman/"/>
    <url>/2021/09/20/LeetCode-12-Integer-to-Roman/</url>
    
    <content type="html"><![CDATA[<figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_12.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/9/20</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">intToRoman</span>(<span class="hljs-params">self, num: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        number = [<span class="hljs-number">1000</span>, <span class="hljs-number">900</span>, <span class="hljs-number">500</span>, <span class="hljs-number">400</span>, <span class="hljs-number">100</span>, <span class="hljs-number">90</span>, <span class="hljs-number">50</span>, <span class="hljs-number">40</span>, <span class="hljs-number">10</span>, <span class="hljs-number">9</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">1</span>]<br>        s = [<span class="hljs-string">&quot;M&quot;</span>, <span class="hljs-string">&quot;CM&quot;</span>, <span class="hljs-string">&quot;D&quot;</span>, <span class="hljs-string">&quot;CD&quot;</span>, <span class="hljs-string">&quot;C&quot;</span>, <span class="hljs-string">&quot;XC&quot;</span>, <span class="hljs-string">&quot;L&quot;</span>, <span class="hljs-string">&quot;XL&quot;</span>, <span class="hljs-string">&quot;X&quot;</span>, <span class="hljs-string">&quot;IX&quot;</span>, <span class="hljs-string">&quot;V&quot;</span>, <span class="hljs-string">&quot;IV&quot;</span>, <span class="hljs-string">&quot;I&quot;</span>]<br>        res = <span class="hljs-string">&quot;&quot;</span><br><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(number)):<br>            <span class="hljs-keyword">while</span> (num &gt;= number[i]):<br>                res += s[i]<br>                num -= number[i]<br><br>            <span class="hljs-keyword">if</span> num &lt;= <span class="hljs-number">0</span>:<br>                <span class="hljs-keyword">break</span><br><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution()<br>    <span class="hljs-built_in">input</span> = <span class="hljs-number">1994</span><br>    output = solution.intToRoman(<span class="hljs-built_in">input</span>)<br>    <span class="hljs-built_in">print</span>(output)<br></code></pre></td></tr></table></figure><p>解这道题的巧妙之处就在于 <code>number</code> 和 <code>s</code> 这两个列表的使用，然后从数字的高位到低位挨个套用罗马字符即可。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《聊斋志异》札记</title>
    <link href="/2021/09/20/%E3%80%8A%E8%81%8A%E6%96%8B%E5%BF%97%E5%BC%82%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/09/20/%E3%80%8A%E8%81%8A%E6%96%8B%E5%BF%97%E5%BC%82%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>我阅读的这一版的聊斋志异是赵伯陶先生评注的人民文学出版社的版本。注释非常详细。</p><h1 id="聊斋自志"><a href="#聊斋自志" class="headerlink" title="聊斋自志"></a>聊斋自志</h1><blockquote><p>披萝带荔，三闾氏感而为骚；牛鬼蛇神，长爪郎吟而成癖。自鸣天籁，不择好音，有由然矣。松落落秋萤之火，魑魅争光；逐逐野马之尘，罔两见笑。才非干宝，雅爱搜神；情类黄州，喜人谈鬼。闻则命笔，遂以成编。久之，四方同人，又以邮筒相寄，因而物以好聚，所积益夥。甚者，人非化外，事或奇于断发之乡；睫在眼前，怪有过于飞头之国。遄飞逸兴，狂固难辞；永托旷怀，痴且不讳。展如之人，得毋向我胡卢耶？然五父衢头，或涉滥听；而三生石上，颇悟前因。放纵之言，有未可概以人废者。</p><p>松悬弧时，先大人梦一病瘠瞿昙，偏袒入室，药膏如钱，圆黏乳际。寤而松生，果符墨志。且也少羸多病，长命不犹。门庭之凄寂，则冷淡如僧；笔墨之耕耘，则萧条似钵。每搔头自念，勿亦面壁人果是吾前身耶？盖有漏根因，未结人天之果；而随风荡堕，竟成藩溷之花。茫茫六道，何可谓无其理哉！独是子夜荧荧，灯昏欲蕊；萧斋瑟瑟，案冷疑冰。集腋为裘，妄续《幽冥》之录；浮白载笔，仅成孤愤之书。寄托如此，亦足悲矣。嗟乎！惊霜寒雀，抱树无温；吊月秋虫，偎阑自热。知我者，其在青林黑塞间乎！</p><p>康熙己未春日</p></blockquote><h1 id="一、卷一"><a href="#一、卷一" class="headerlink" title="一、卷一"></a>一、卷一</h1><h2 id="娇娜"><a href="#娇娜" class="headerlink" title="娇娜"></a>娇娜</h2><blockquote><p>笑云：“仆不求进取也。”</p></blockquote><p>按：风流人物，答复刻板较真之人，大抵也是可以用这句回复，想象这句话的同时，鬓发边似乎有微风吹过。</p><blockquote><p>年约十三四，娇波流慧，细柳生姿。<br>女乃敛羞容，揄长袖。<br>而贪近娇姿，不惟不觉其苦，且恐速竣割事，偎傍不久。</p></blockquote><p>按：这几个正侧描写，以摹写娇娜的美貌，主要是娇媚，年约十三四，那想必是十分娇嫩了，况娇娜属狐类，更添其媚。孔生雪笠此人，我不甚喜欢，一个耽于美貌的读书人，与我多有类似之处（笑）。“不惟···且···”这个句式，可谓贴切之极。</p><blockquote><p>“曾经沧海难为水，除却巫山不是云。”</p></blockquote><p>按：书中的注释给的解释是：形容男子对钟情女子的专一真挚之情。可是元稹的故事在高中被读烂，恐怕这句话多少要失去一些本意了。</p><blockquote><p>画黛弯蛾，莲钩蹴凤。</p></blockquote><p>按：莲钩蹴凤，莲钩即小足，这句话意思是女子的小小的脚上穿着可爱的凤头鞋。这两句话用来白描女子有点效果。</p><blockquote><p>是夕，鼓吹阗咽，尘落漫飞，以望中仙人，忽同衾幄，遂疑广寒宫殿未必在云霄矣。</p></blockquote><p>按：阗（tián）咽（yè），喧闹。这一段好似一段梦话，所以说，洞房花烛夜，尤其是当洞房花烛的对象是美貌的女子时，人生几大喜事之一。</p><blockquote><p>得此良友，时一谈宴，则‘色授魂与’，尤胜于‘颠倒衣裳’矣。</p></blockquote><p>按：色授魂与，精神方面的相通，当然要远胜颠倒衣裳这一昙花一现的短暂享乐。得一佳人，色授魂与，此生亦别无所求也。聊斋先生算是道出了很多读书人的新生，这也算是读书人的意淫的一种吧。得承认。</p><h2 id="叶生"><a href="#叶生" class="headerlink" title="叶生"></a>叶生</h2><blockquote><p>此去离贵乡不远。先生奋迹云霄，锦还为快。</p></blockquote><p>按：奋迹云霄，青云直上之意。何时我也能够奋迹云霄，那想必定是快哉兮兮的。<br>锦还为快，语本《史记·项羽本纪》：“富贵不归故乡，如衣绣夜行，谁知之者！”</p><blockquote><p>公子闻之，涕堕垂膺。</p></blockquote><p>按：涕堕垂膺，涕泪流至胸口处，形容伤心悲恸已极。</p><blockquote><p>异史氏曰：“魂从知己，竟忘死耶？闻者疑之，余深信焉。同心倩女，至离枕上之魂；千里良朋，犹识梦中之路。而况茧丝蝇迹，呕学士之心肝；流水高山，通我曹之性命者哉！嗟乎！遇合难期，遭逢不偶。行踪落落，对影长愁；傲骨嶙嶙，搔头自爱。叹面目之酸涩，来鬼物之揶揄。频居康了之中，则须发之条条可丑；一落孙山之外，则文章之处处皆疵。古今痛哭之人，卞和惟尔；颠倒逸群之物，伯乐伊谁？抱刺于怀，三年灭字；侧身以望，四海无家。人生世上，只须合眼放步，以听造物之低昂而已。天下之昂藏沦落如叶生其人者，亦复不少，顾安得令威复来，而生死从之也哉？噫！”</p></blockquote><p>按：倩女，指张倩娘，其中有一段美丽的故事。茧丝，比喻文章的引申发挥。蝇迹，即“蝇头细节”，比喻书法训练。我曹，我们。遇合，谓相遇而彼此投合。落落，与人疏远寡合，形容孤高。粼粼，原意山石突兀，这里形容人风骨不凡。揶揄，嘲笑。康了，谓科举落第的处境。刺，即“名刺”，相当于后世的名片。侧身，倾侧其身，表示戒惧不安。低昂，沉浮，有随波逐流之意。令威，以传说人物丁令威借指淮阳令关东丁乘鹤，双关追随其人仙去，离开这贤愚不分的人世。<br>这一段写得实在是太好，第二遍读时将其完全弄懂，读来更平添萧索之意。</p><p>《娇娜》篇大概是蒲松龄对于女性的情感的真实表露，这其中多少也代表了很多知识分子心中的幻想，亦或是执念。而《叶生》此文，算是另一条时间线的蒲松龄本人？可谓凄凄惨惨戚戚。读书人沦落到这种地步，也算是社会对其的一种糟蹋。</p><h2 id="青凤"><a href="#青凤" class="headerlink" title="青凤"></a>青凤</h2><blockquote><p>久仰山斗。</p></blockquote><blockquote><p>吾辈通家，座客无庸见避，还祈招饮。</p></blockquote><p>按：庸，用，需要，用于否定句式。</p><blockquote><p>生素豪，谈议风生，孝儿亦倜傥，倾吐间，雅相爱悦。<br>倜傥：豪爽洒脱而不受世俗礼法拘束。</p></blockquote><p>按：“倜傥”这个注释极好。</p><blockquote><p>生略述涂山女佐禹之功，粉饰多词，妙绪泉涌。</p></blockquote><blockquote><p>少时，媪偕女郎出，审顾之，弱态生娇，秋波流慧，人间无其丽也。<br>弱态生娇：汉班婕妤《捣素赋》：“若乃盼睐生姿，动容多制，弱态含羞，妖风靡丽。”<br>秋波流慧：南唐李煜《菩萨蛮》词：“眼色暗相钩，秋波横欲流。”</p></blockquote><blockquote><p>生谈竟而饮，瞻顾女郎，停睇不转。</p></blockquote><p>按：这就停睇不转啦？</p><blockquote><p>女觉之，辄俯其首。生隐蹑莲钩，女急敛足，亦无愠怒。</p></blockquote><p>按：此般轻佻，实在是不可取呀。</p><blockquote><p>生神志飞扬，不能自主，拍案曰：“得妇如此，南面王不易也！”</p></blockquote><p>按：出息？！</p><blockquote><p>“家君有横难，非君莫拯。将自诣恳，恐不见纳，故以某来。”</p></blockquote><p>按：由于后面的情节可知，叟已经被莫三郎所猎，那么这里就是故意说本来是叟要来的，想要借此稍解生的怨气。</p><h2 id="画皮"><a href="#画皮" class="headerlink" title="画皮"></a>画皮</h2><blockquote><p>乃二八姝丽</p></blockquote><blockquote><p>何夙夜踽踽而独？</p></blockquote><p>按：“踽踽而独”，踽踽独行的另一说法。</p><blockquote><p>惑哉！世固有死将临而不悟者！</p></blockquote><blockquote><p>闻门外戢戢有声</p></blockquote><p>按：戢戢（jí集）：象声词，形容细小之声。这个声音在家乡的方言中也有对应。</p><blockquote><p>孽魅！偿我拂子来！</p></blockquote><blockquote><p>道士以木剑枭其首，身变作浓烟，匝地作堆。</p></blockquote><blockquote><p>人尽夫也</p></blockquote><p>按：此句适合用来骂女人，不好的女人。本篇中的女人那自然是极好的，这句本事那个疯儿故意说来刺激妇人的。</p><blockquote><p>然爱人之色而渔之<br>渔：这里谓“渔色”，即猎取美女。</p></blockquote><p>按：所谓“渔色”，终于在这里弄懂。很久以前读过一本网络小说，似乎叫做“渔色人生”，原来之前我一直没有理解它的含义，惭愧。</p><p>篇按：</p><p>这篇《画皮》与电影“画皮”出入似乎还蛮大的。这里还是就只说一说这文中的描写罢。全篇令我印象最深的莫过于妇人为了救那个哈哈迷迷、鬼迷心窍的丈夫，竟然将疯子的“盈把”的痰给强忍住吞了下去，这在我看来，比吃屎还令人难以接受，这种描写真的好吗？以前我甚至觉得唾面自干就已经很了不得了，看来，这一次，我的极限再次被打破。其他的情节，如对“画皮”的描写等等，都算是中规中矩吧。</p><h2 id="贾儿"><a href="#贾儿" class="headerlink" title="贾儿"></a>贾儿</h2><p>篇按：</p><p>这篇文章的节奏感很强，一流似水，很轻易地就把我勾到了最后。这里主要是对贾儿的智谋与胆量感到惊奇，一个虚岁十岁的小孩做事情能这样周密细致，而且此事还比较危险，实在是难得。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《编译原理 第二版》札记</title>
    <link href="/2021/09/19/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E7%AC%AC%E4%BA%8C%E7%89%88%E3%80%8B%E6%9C%AD%E8%AE%B0/"/>
    <url>/2021/09/19/%E3%80%8A%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-%E7%AC%AC%E4%BA%8C%E7%89%88%E3%80%8B%E6%9C%AD%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<p>这本编译原理的版本是机械工业出版社翻译的“龙书”第二版。</p><h1 id="第一章"><a href="#第一章" class="headerlink" title="第一章"></a>第一章</h1><blockquote><p>一个程序可以运行之前，它首先需要被翻译成一种能够被计算机执行的形式。<br>完成这项翻译工作的软件系统称为编译器（Compiler）。</p></blockquote><blockquote><p>研究编译器的编写将涉及程序设计语言、计算机体系架构、形式语言理论、算法和软件工程。</p></blockquote><blockquote><p>Java 语言处理器结合了编译和解释过程。一个 Java 程序首先被编译成一个称为字节码（bytecode）的中间表示形式，然后由一个虚拟机对得到的字节码加以解释执行。</p></blockquote><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210919192248.png" alt="一个编译器的各个步骤"></p><h2 id="1、词法分析"><a href="#1、词法分析" class="headerlink" title="1、词法分析"></a>1、词法分析</h2><p>专业术语：</p><ul><li>符号表：symbol table</li><li>词法分析：lexical analysis</li><li>词素：lexeme</li><li>词法单元：token。</li></ul><p>词法单元的形式为 <code>&lt;token-name, attribute-value&gt;</code>。第一个分量 token-name 是一个由语法分析步骤使用的抽象符号，而第二个分量 attribute-value 指向符号表中关于这个词法单元的条目。</p><p>针对词法分析进行举例说明：</p><p>假设一个源程序包含如下的赋值语句</p><p>position &#x3D; initial + rate * 60</p><p>1） position 是一个词素，被映射成词法单元 <code>&lt;id, 1&gt;</code>，其中 id 是标识符（identifier）的抽象符号，而 1 指向符号表中 position 对应的条目。一个标识符对应的符号表条目存放该标识符有关的信息，比如它的名字和类型。</p><p>2）赋值符号 &#x3D; 是一个词素，被映射成词法单元 <code>&lt;=&gt;</code>。</p><p>3）initial 是一个词素，被映射成词法单元 <code>&lt;id, 2&gt;</code>。</p><p>4）+ 是一个词素，被映射成词法单元 <code>&lt;+&gt;</code>。</p><p>5）rate 是一个词素，被映射成词法单元 <code>&lt;id, 3&gt;</code>。</p><p>6）* 是一个词素，被映射成词法单元 <code>&lt;*&gt;</code>。</p><p>7）60 是一个词素，被映射成词法单元 <code>&lt;60&gt;</code>。</p><p>最后，上面的赋值语句被表示成如下的词法单元序列：</p><p>&lt;id, 1&gt; &lt;&#x3D;&gt; &lt;id, 2&gt; &lt;+&gt; &lt;id, 3&gt; &lt;*&gt; &lt;60&gt;</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210919214057.png" alt="符号表"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210920120546.png" alt="一个赋值语句的翻译"></p><p>上面这个赋值语句的翻译，用举例的方式很好地解释了编译器编译语句的过程，让人可以对编译过程有一个初步的把握。</p><h2 id="2、语法分析"><a href="#2、语法分析" class="headerlink" title="2、语法分析"></a>2、语法分析</h2><p>专业术语：</p><ul><li>语法分析：syntax analysis</li></ul><blockquote><p>语法分析器使用由词法分析器生成的各个词法单元的第一个分量来创建树形的中间表示。</p></blockquote><blockquote><p>一个常用的语法是语法树。</p></blockquote><h2 id="3、杂记"><a href="#3、杂记" class="headerlink" title="3、杂记"></a>3、杂记</h2><blockquote><p>符号表数据结构为每个变量名字创建了一个记录条目。记录的字段就是名字的各个属性。这个数据结构应该允许编译器迅速查找到每个名字的记录，并向记录中快速存放和获取记录中的数据。（P6）</p></blockquote><blockquote><p>在一个特定的实现中，多个步骤的活动可以被组合成一趟（pass）。（P6）</p></blockquote><h2 id="1-5"><a href="#1-5" class="headerlink" title="1.5"></a>1.5</h2><p>何为类型检查？</p><p>举例，运算被作用于错误类型的对象上，或者传递给一个过程（procedure）的参数和该过程的范型（signature）不匹配。</p><p>按：这里的范型（signature）应该翻译成签名才会，这样才和函数的“签名”对得上。</p><p>何为边界检查？</p><p>举例，C 语言的数组需要进行边界检查，否则如果超出边界，可能会造成缓冲区溢出的问题。</p><p>何为内存管理工具？</p><p>举例，垃圾收集机制就是这样一个工具。内存管理需要解决诸如内存泄漏这样的内存泄露的问题。</p><h2 id="1-6"><a href="#1-6" class="headerlink" title="1.6"></a>1.6</h2><p>何为静态和动态的区别？</p><p>主要有两个方面。</p><p>一个是策略。</p><ul><li>一个语言使用的策略支持编译器静态决定某个问题，或者这个问题可以在编译时刻决定 &#x3D;&#x3D;&gt; 静态策略。</li><li>只允许在运行程序的时候做出决定，或者需要在运行时刻做出决定 &#x3D;&#x3D;&gt; 动态策略。</li></ul><p>另一个是作用域。</p><ul><li>静态作用域：仅通过阅读程序就可以确定一个声明的作用域。或者说，词法作用域。</li><li>动态作用域：上面的情况的例外。</li></ul><p>环境和状态？</p><ul><li>环境：是从一个从名字到存储位置的映射。</li><li>状态：是一个从内存位置到它们的值的映射。</li></ul><blockquote><p>局部的 i 通常被赋予一个运行时刻栈中的位置。</p></blockquote><p>按：函数中的变量一般会被放入栈中，这一点和以前的知识是吻合的。</p><blockquote><p>C 语言的声明必须先于使用。</p></blockquote><p>静态绑定和动态绑定的使用频次？</p><p>一般来说，名字到位置的绑定，位置到值的绑定都是动态的。但是，它们都有例外。</p><p>名字、标识符和变量的区分？</p><p>标识符（identifier）是一个字符串。它用来指向（标记）一个实体。</p><p>所有标识符都是名字，但并不是所有的名字都是标识符，比如，<code>x.y</code> 是名字，但不是标识符。</p><p>变量指向存储中的某个特定的位置。同一个标识符被多次声明是常见的事情，每一个这样的声明引入一个新的变量。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机原码一位乘法</title>
    <link href="/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%A0%81%E4%B8%80%E4%BD%8D%E4%B9%98%E6%B3%95/"/>
    <url>/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%8E%9F%E7%A0%81%E4%B8%80%E4%BD%8D%E4%B9%98%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>n 位原码乘法包括 n 个位积（<em>注 1</em>），也就是每次只利用乘数中的一位来计算位积，最终需要将 n 个位积全部累加起来得到乘积。这种方法称为<strong>原码一位乘法</strong>。</p><h1 id="1、运算法则"><a href="#1、运算法则" class="headerlink" title="1、运算法则"></a>1、运算法则</h1><ul><li>符号位单独参加运算，数据位取绝对值参加运算。</li><li>运算法则：<ul><li>设：$[X]<em>{原} &#x3D; X_0.X_1 X_2…X_n$，$[Y]</em>{原} &#x3D; Y_0.Y_1 Y_2…Y_n$</li><li>则：$P_0 &#x3D; X_0 \oplus Y_0$，$|P| &#x3D; |X| \cdot |Y|$</li></ul></li><li>每次循环累加的位积为 $|X|$ 或 0，没得到一次部分积，就将其右移一位，从而得到一位乘积。</li></ul><h1 id="2、举例"><a href="#2、举例" class="headerlink" title="2、举例"></a>2、举例</h1><p>设 $X &#x3D; 0.110$，$Y &#x3D; -0.101$，计算 $[X]<em>{原} \cdot [Y]</em>{原}$（<em>注 2</em>）</p><p>$$解：[X]<em>{原} &#x3D; 0.110, [Y]</em>{原} &#x3D; 1.101 \qquad \qquad \qquad \qquad$$</p><p>$$<br>\begin{equation}<br>\begin{split}<br>&amp;部分积 \qquad \quad  &amp; 乘数&#x2F;判断位 \qquad &amp; 说明 \<br>&amp;00.000  &amp; Y_0.101 &amp; Y_3 &#x3D; 1, 部分积 + |X| \<br>{+} ; &amp;00.110  &amp;  &amp;  \<br>···&amp; ········&amp; &amp; \<br>&amp;00.110  &amp;  &amp;  \<br>\rightarrow ; &amp;00.011  &amp; 0Y_0.10 &amp; 每次运算结果右移一位 \<br>{+} ; &amp;00.000  &amp;  &amp; Y_3 &#x3D; 0, 部分积 + 0 \<br>···&amp; ········ &amp; &amp; \<br>&amp;00.011  &amp;  &amp;  \<br>\rightarrow ; &amp;00.001  &amp; 10Y_0.1 &amp; 继续右移 \<br>{+} ; &amp;00.110  &amp;  &amp; Y_3 &#x3D; 1, 部分积 + |X| \<br>···&amp; ········ &amp; &amp; \<br>&amp;00.111  &amp;  &amp;  \<br>\rightarrow ; &amp;00.011  &amp; 110Y_0 &amp;  \<br>\end{split}<br>\end{equation}<br>$$</p><p>$$<br>\begin{aligned}<br>\left[X\right]<em>{原} · [Y]</em>{原} &amp;&#x3D; X_0 \oplus Y_0.011110 \<br>&amp;&#x3D; 1.011110<br>\end{aligned}<br>$$</p><p>以上运算过程可以结合下面的手工列竖式的过程来看：</p><p>$$<br>\begin{aligned}<br>\begin{split}<br>&amp;0.1 ; 1;0 \<br>\times ; &amp;0.1 ; 0 ; 1 \<br>···&amp;······ \<br>;  &amp;0 ; 1 ; 1 ; 0 \<br>0 ; &amp;0 ; 0 ; 0 \<br>0 ; 1 ; &amp;1 ; 0 \<br>{+} ; 0 ; 0 ; 0 ; &amp;0 \<br>·······&amp;······ \<br>0 ; 0 ; 1 ; &amp;1 ; 1 ; 1 ; 0<br>\end{split}<br>\end{aligned}<br>$$</p><hr><p>注解：</p><p>1、位积，表示乘法运算中被乘数与乘数中的一位所乘得到的积。</p><p>2、这里使用的 LaTex 语法来列竖式，由于我没有找到合适的方法来加上水平的横线（如果是完整版的 LaTex，多写一些语法还是可以实现的），所以就用点号代替了。</p><hr><p>参考：</p><p>1、华科软院计组第 3 章 PPT。</p><p>2、《计算机组成原理》（谭志虎）</p>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机移码</title>
    <link href="/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%BB%E7%A0%81/"/>
    <url>/2021/09/18/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%BB%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<p>移码表示浮点数的阶码，只有整数形式，如 IEEE754 中阶码用移码表示。</p><p>设定点整数 $X$ 的移码形式为 $X_0 X_1 X_2 X_3…X_n$，则移码的定义是：</p><p>$$<br>[X]_{移} &#x3D; 2^n + X \quad -2^n \leqslant X &lt; 2^n<br>$$</p><p>具体实现：数值位与 $X$ 的补码相同，符号位与补码相反。</p><p><strong>举例</strong></p><p>$$<br>\begin{matrix}<br>X &#x3D; +0101 \quad [X]<em>{补} &#x3D; 00101 \quad [X]</em>{移} &#x3D; 10101 \<br>X &#x3D; -0101 \quad [X]<em>{补} &#x3D; 11011 \quad [X]</em>{移} &#x3D; 01011<br>\end{matrix}<br>$$</p><hr><p>参考：</p><p>1、华科软院计组第二章 PPT。</p>]]></content>
    
    
    <categories>
      
      <category>计算机组成原理</category>
      
    </categories>
    
    
    <tags>
      
      <tag>计算机组成原理</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>谈谈我对《天元突破》的观感</title>
    <link href="/2021/08/09/%E3%80%8A%E5%A4%A9%E5%85%83%E7%AA%81%E7%A0%B4%E3%80%8B%E8%A7%82%E5%90%8E%E6%84%9F/"/>
    <url>/2021/08/09/%E3%80%8A%E5%A4%A9%E5%85%83%E7%AA%81%E7%A0%B4%E3%80%8B%E8%A7%82%E5%90%8E%E6%84%9F/</url>
    
    <content type="html"><![CDATA[<p>之前直接用了“…观后感”这个标题，感觉有点幼稚，虽说这个也不咋地啊哈。</p><p>接觸到這一部番的緣由，是前幾天想要找一些可看的番，就到 Youtube 上面搜索了一下，推薦的一些比如鋼煉之類都看過，那個鷄賊的 Youtuber 最後沒忍住談了一下他心中最賽高的番，什麽永遠第一，不可撼動，當時不以爲然，現在，多少也確定了它在我心中的地位——燃係最强番。</p><p>高中時候，時間看上去很緊，那時晚上偷偷在被窩看動漫卻一般都不會跳 OP 和 ED，現在看動漫沒有了高中時候的那種情懷，直接就是跳到劇情，這就導致了看完了精彩的番劇之後，會惋惜跳過了 OP 和 ED。音樂這種東西，很容易就會把記憶和情感存儲在其中，這個存儲的最終載體，是每一個不同的人的腦海中。所以，現在匆匆忙忙刷完一部動漫作品，不得不説，這是一種囫圇吞棗的行爲。以前有很多被認爲是不怎麽優秀的作品，比如熱誠傳説，高中時候看的，每一集都是完整地從頭看到尾，我對哪部動漫現在還有不壞的印象，它的 OP，叫做 Overfly，伴隨著劇情和一些零零碎碎的畫面，永遠地留存在我的腦海中。另一部相對優秀許多的作品《斬·赤紅之瞳》，現在已經不記得多少了，大概率是當時無情地跳過了 OP 和 ED。</p><p>一邊敲字，耳機裏同步著這部作品的音樂專輯，算是一種彌補吧。這是事後彌補，以前還有過一次是事前預熱的，《天氣之子》，去電影院之前事先在耳中循環了一周，後來和同學一起去電影院的當天，那個插曲響起的一瞬間，眼淚也很配合地盈滿了眼眶之中。</p><p>説回這部作品本身，前幾集屬於是鋪墊的部分，精彩性沒有後面那麽强烈，當然，這只是與它自身相比，與其身前身後的其他作品相比，它的題材可以說是很新穎的，小小的鑽頭，螺旋紋，貫穿與于整部作品中，隨著劇情的深入，還能夠不斷地在這小小的螺旋紋上做文章，不斷的湧出新意，簡直就像是從一個小小的不起眼的小泉眼，一步步變成大汪洋，這裏面的樂趣，真是令人大腦深處都在震顫呢。</p><p>raw，raw，fight the power，這是整部動漫中唯一的轉場配音，一開始，可能所有人都會覺得這比較傻，如果大家都像我一樣，在這裏就簡單地給這部作品貼上一個輕鬆歡樂的標簽的話，那麽，到後面，會很難接受的。前面遇到這個轉場，我是迫切地希望趕緊跳過，最後，隨著主角團一個接著一個地死去，我倒是期盼著多來幾個轉場來緩解一下這個悲傷的氣氛了。</p><p>卡米那。西蒙。妮婭（原諒我，我更喜歡妮婭一點，我私心是想她能夠和西蒙早一點終成眷屬的）。庸子。布塔。羅修。維拉爾。維基百科上賣弄只有這幾個主要的人物。</p><p>我不願意忘記，那些同樣讓我心懷崇敬的角色。李龍。奇坦。奇揚（剩下孩子的那位）。奇儂（輔助羅修的那位）。奇雅露（虎牙）。達雅卡。吉米。達莉。可可爺。喬剛。巴林波。麗迪。當然，還有羅傑儂。</p><p>一個作品的意義，往往可以通過人物的死亡來獲得極大的升華。最開始是卡米那之死。從第一集以來，他的光芒實在是太過耀眼，我一度以爲他才是全劇的真正的主角。然而他的命運，就像尼采一樣，像太陽一樣熱烈，最後卻也把自己給燒死了。他的每一次瘋狂，都在昭示著他最終的結局，作爲觀衆肯定是希望他能夠走到最後的。作者顯然早已給他安排好了結局。這個結局也是一個大轉折，所謂，那個男人終於發覺和找到了屬於他的命運。</p><blockquote><p>聼好了… 西蒙… 別忘記… 相信你自己… 不是相信相信著我的你，也不是相信相信著你的我，相信自己… 相信相信自己的自己吧！</p></blockquote><blockquote><p>別了，兄弟。</p></blockquote><blockquote><p>我的鑽頭… 是突破天際的鑽頭啊！！！</p></blockquote><p>一部作品的深度，其衡量標準之一是其人物的塑造成功度。所有的人，都是有血有肉，重情重義的。正派，反派，哪裏有什麽正派和反派，堅守心中的道義，然後成爲一個人，這就夠了。卡米那，相比于這個刻板的名字，西蒙稱呼的大哥，明顯更能夠刻畫這個人的形象。耍酷，吹牛，魯莽，嘻嘻哈哈，這些都算得了什麽！大哥就是大哥，是什麽人都無法替代的大哥。大哥永遠看似不顧一切地往前冲，我知道，這其中有很大一部分是要給西蒙樹立一個榜樣，他心底可能是相信著自己是不如西蒙的，當然，他絕對不會去嫉妒西蒙，他們之間的友情，已經超過了親情。所以他能夠做的，就是燃燒自己，像火山噴發一樣，每一次戰鬥，他都得拼盡全力去和敵人搏鬥，西蒙還小，大哥的身影就必須高大。這樣以來，每一次的艱難取勝，或許都是命運這個玩意兒在施捨它那少得可憐的慈悲。卡米那也知道，這樣下去自己肯定遲早會死在戰場上，最後到來的時間也不會太長。那又如何？我就是要向火山一樣，想做就做，所有的情緒，所有的衝動，所有的鬥志，才不要藏著憋著，人生，若是能夠恣情恣意地活，那有有什麽不好？卡密那此人，我衷心佩服。</p><p>西蒙桑，這個我開始差點以爲不是主角的人物，他的一生，充滿了各種各樣的色彩，難得的是，他從始至終都葆有一顆善良的心靈。你可以說他是幼稚，你可以説他是中二，你可以説他是少年意氣，你可以説他傻，那又如何？我相信，如果這是有些人眼中的所謂的不好的幼稚中二，即使這樣，這個世界上，仍然會有很多人，終其一生，都是這種中二之人。這些人士幸運的，我不知道我將來會不會有這種幸運。西蒙桑，卡米那，利坦，都是中二之輩啊。我爲什麽會喜歡妮婭呢，很重要的一個原因就是他在大哥死後西蒙低落的時候出現，安慰并且拯救了西蒙。她的聲音也很好聼啊。平心而論，卡米那的死，有一部分確實是西蒙造成的，庸子也有責任，庸子這一塊，我一開始甚至是有點埋怨她的，爲什麽她對於西蒙就不能多一點開導呢？如果在愛情這一塊，他們能夠解決得順利一點，後來也不會有波折。這是我的一廂情願。我無法做到很清晰的看到那些劇情的合理，所以我也對妮婭很有好感，對啊，如果妮婭能夠早一點出現，那麽西蒙的青春情懷… 無端的臆想，終究是沒有用的。</p><p>我現在是糾結於非理性的内容。卡米那和西蒙的熱血，維拉爾一開始作爲一個反派，忠於心中的道義，羅傑儂的反轉，這一個悲劇人物的終幕… 這些都是目前的我更感興趣的東西。從小到大，也算閲歷過了不少的文藝作品，過於追求合理性或者理性，意義已經不大。比如羅修給西蒙判處死刑，退出來頂罪，無感，至少沒有太大的感覺，現實如此，我更需要童話，我更需要美好的故事。有兩種人喜歡聼勇者戰勝惡龍的故事，一種是小孩子，另一種是在社會摸爬滾打多年的成年人。所以說，人類是很有趣的，這一點我也多次體會到，現如今，我只想讓自己溺死在美好的故事當中，悲傷有什麽用呢？</p><p>可是啊，作者偏偏最後連妮婭都帶帶走，我的妮婭。感覺心中似乎被挖走了一塊。心疼妮婭，心疼西蒙。就不能在咖啡中多加幾塊糖嗎？</p><p>萬般感覺，縈繞心中，哦，我的妮婭。</p><p>西蒙，孤此一生。庸子，孤此一生。既然如此，讓他們在戰鬥中犧牲這樣一種處理應該也是可以的吧。</p><p>是我任性的。作者呀，就是想在觀衆的心中挖一個洞嘛。</p><blockquote><p>我的鑽頭… 是突破天際的鑽頭啊！！！</p></blockquote><p>然後這鑽頭突破了次元，在我的胸口也鉆了一遭。</p><p>這一步經典的最後几話，配樂中有用到了歌劇的唱法，很贊。</p><p>李龍這個人，或許他才是一個真正的見證者。一位善良的智者。</p><p>吵吵闹闹，也是热血漫的王道之一呀。</p>]]></content>
    
    
    <categories>
      
      <category>漫评</category>
      
    </categories>
    
    
    <tags>
      
      <tag>漫评</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL 常用数据类型</title>
    <link href="/2021/08/04/MySQL-%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/"/>
    <url>/2021/08/04/MySQL-%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="一、数值类型"><a href="#一、数值类型" class="headerlink" title="一、数值类型"></a>一、数值类型</h2><ul><li><code>INT</code>（或 <code>INTEGER</code>）: 整数值，支持 -2147483648<del>2147483647（如果是 UNSIGNED，为 0</del>4294967295，边界值都可以取到）的数。</li></ul><p>一般来说，只需要用到 INT 类型，比如，存储数据的 id。</p><h2 id="二、串类型"><a href="#二、串类型" class="headerlink" title="二、串类型"></a>二、串类型</h2><p>即字符串类型。</p><ul><li><code>CHAR</code>: 定长串。大小是 0 ~ 255 个字节。注意，不是字符。而我们在定义时用的 <code>CHAR(n)</code> 中的 n 表示字符。要注意，英文字符是一个字符的大小为一个字节。而中文的一个字符的长度，要分类讨论。UTF-8 编码一个汉字等 &#x3D; 3 个字节；GBK编码一个汉字 &#x3D; 2 个字节。它的长度必须在创建时指定，否则 MySQL 假定为 <code>CHAR(1)</code>。</li><li><code>VARCHAR</code>: 变长串。大小是 0 ~ 65532 个字节。同样地，要注意字节与字符的区别。如果在创建时指定为 <code>VARCHAR(n)</code>，则可存储 0 到 n 个字符的变长串（其中 <code>$n \leq 255$</code>）。</li></ul><p>串类型中最常用的就是 <code>CHAR</code> 和 <code>VARCHAR</code> 这两个类型，关于在何种情况下使用这两个类型，我曾经在一篇国外博客看到如下总结（原文链接已经遗失）：</p><ul><li>经常变化的字段用 VARCAHR</li><li>知道固定长度的字段用 CHAR</li><li>知道固定长度的字段用 CHAR</li><li>超过 255 字符的只能用 VARCHAR 或者 TEXT</li><li>能用 VARCHAR 的地方不能用 TEXT</li></ul><h2 id="三、日期和时间数据类型"><a href="#三、日期和时间数据类型" class="headerlink" title="三、日期和时间数据类型"></a>三、日期和时间数据类型</h2><p>| 类型 | 大小（bytes） | 取值范围 | 格式 | 用途 | 零值 |<br>| :-: | :-: | :-: | :-: | :-: | :-: | :-: |<br>| DATE | 3 | 1000-01-01<del>9999-12-31 | YYYY-MM-DD | 日期值 | 0000:00:00 |<br>| TIME | 3 | -838:59:59</del>838:59:59 | HH:MM:SS | 时间值或持续时间 | 00:00:00 |<br>| DATETIME | 8 | 1000-01-01 00:00:00<del>9999-12-31 23:59:59 | YYYY-MM-HH:MM:SS | 混合日期和时间值 | 0000-00-00 00:00:00 |<br>| YEAR | 1 | 1901</del>2155 | YYYY | 年份值 | 0000 |<br>| TIMESTAMP | 4 | 1970-01-01 00:00:00~2038-01-19 03:14:07（格林尼治时间） 开始时间是 0 秒，结束时间是第 2147483647 秒 | YYYYMMDD HHMMSS | 混合日期和时间值，时间戳 | 0000-00-00 00:00:00 |</p><p>关于这里的取值范围，官方文档有这样的说法：</p><blockquote><p>For the DATE and DATETIME range descriptions, “supported” means that although earlier values might work, there is no guarantee.</p></blockquote><p>要注意，也就是说，比如 DATE 可能支持插入数据 0999-01-01，但是 MySQL 并不保证这一点。这里具有明确范围的是 TIMESTAMP。我在使用时会严格按照支持的范围进行插值。</p><h3 id="3-1、DATE"><a href="#3-1、DATE" class="headerlink" title="3.1、DATE"></a>3.1、DATE</h3><ol><li>一般来讲，我会使用严格的 <code>YYYY-MM-DD</code> 来给 DATE 类型的数据赋值。</li><li>使用 <code>current_date</code> 或 <code>current_date()</code> 或 <code>now()</code> 来插入当前的系统时间。</li></ol><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_tb (<br>`id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`<span class="hljs-type">date</span>` <span class="hljs-type">DATE</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb (`id`, `<span class="hljs-type">date</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2021-07-08&#x27;</span>);<br># 插入当前的日期<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb (`id`, `<span class="hljs-type">date</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-built_in">CURRENT_DATE</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb (`id`, `<span class="hljs-type">date</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-built_in">CURRENT_DATE</span>());<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb (`id`, `<span class="hljs-type">date</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, NOW());<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_tb;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210804232424.png"></p><h3 id="3-2、TIME"><a href="#3-2、TIME" class="headerlink" title="3.2、TIME"></a>3.2、TIME</h3><ol><li>注意到 TIME 类型的范围是 <code>-838:59:59~838:59:59</code>，838 这个表示小时的数字是为了表示某种特殊需要的时间间隔。</li><li>一般来说，只需要严格按照格式 <code>HH:MM:SS</code> 进行插值即可。</li><li>使用 <code>current_time</code> 或 <code>current_time()</code> 或 <code>now()</code> 来插入当前时间。</li></ol><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_tb02 (<br>`id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`<span class="hljs-type">time</span>` <span class="hljs-type">TIME</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb02 (`id`, `<span class="hljs-type">time</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;23:26:28&#x27;</span>);<br># 插入当前的日期<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb02 (`id`, `<span class="hljs-type">time</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">2</span>, <span class="hljs-built_in">CURRENT_TIME</span>);<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb02 (`id`, `<span class="hljs-type">time</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">3</span>, <span class="hljs-built_in">CURRENT_TIME</span>());<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb02 (`id`, `<span class="hljs-type">time</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, NOW());<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_tb02;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210804233249.png"></p><h3 id="3-3、DATETIME"><a href="#3-3、DATETIME" class="headerlink" title="3.3、DATETIME"></a>3.3、DATETIME</h3><ol><li>我在插值时会严格按照格式 <code>YYYY-MM-DD HH:MM:SS</code> 来进行插值。</li><li>使用 <code>now()</code> 来插入当前系统的日期和时间。</li></ol><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_tb03 (<br>`id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`datetime` DATETIME <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb03 (`id`, `datetime`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2021-07-26 23:26:28&#x27;</span>);<br># 插入当前的日期和时间<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb03 (`id`, `datetime`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, NOW());<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_tb03;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210804233808.png"></p><h3 id="3-4、YEAR"><a href="#3-4、YEAR" class="headerlink" title="3.4、YEAR"></a>3.4、YEAR</h3><ol><li>我会严格按照格式 <code>YYYY</code> 来进行插值。</li></ol><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_tb04 (<br>`id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`<span class="hljs-keyword">year</span>` <span class="hljs-keyword">YEAR</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb04 (`id`, `<span class="hljs-keyword">year</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2021&#x27;</span>);<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_tb04;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210804234154.png"></p><h3 id="3-5、TIMESTAMP"><a href="#3-5、TIMESTAMP" class="headerlink" title="3.5、TIMESTAMP"></a>3.5、TIMESTAMP</h3><ol><li>TIMESTAMP 类型在 MySQL 中也是以 <code>YYYY-MM-DD HH:MM:SS</code> 的形式显示的，其形式和 DATETIME 一样，它们的差异在于范围。</li><li>这里我就直接使用给 DATETIME 赋值的方式来给 TIMESTAMP 赋值。</li><li>使用 <code>now()</code> 插入当前系统的时间。</li></ol><p>示例</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test_tb05 (<br>`id` <span class="hljs-type">INT</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">PRIMARY</span> KEY,<br>`<span class="hljs-type">timestamp</span>` <span class="hljs-type">TIMESTAMP</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span><br>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb05 (`id`, `<span class="hljs-type">timestamp</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">1</span>, <span class="hljs-string">&#x27;2021-07-26 23:26:28&#x27;</span>);<br># 插入当前的日期和时间<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> test_tb05 (`id`, `<span class="hljs-type">timestamp</span>`) <span class="hljs-keyword">VALUES</span> (<span class="hljs-number">4</span>, NOW());<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> test_tb05;<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210804234926.png"></p>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>大学的四叠半种可能性</title>
    <link href="/2021/07/18/%E5%A4%A7%E5%AD%A6%E7%9A%84%E5%9B%9B%E5%8F%A0%E5%8D%8A%E7%A7%8D%E5%8F%AF%E8%83%BD%E6%80%A7/"/>
    <url>/2021/07/18/%E5%A4%A7%E5%AD%A6%E7%9A%84%E5%9B%9B%E5%8F%A0%E5%8D%8A%E7%A7%8D%E5%8F%AF%E8%83%BD%E6%80%A7/</url>
    
    <content type="html"><![CDATA[<p>系《四叠半神话大系》漫评。</p><p>之前记错了一件事情，是 ED 而非 OP 的音乐和回转企鹅罐很像。那种日本少女的声线，带有一点冷冷的气息，容易让人联想到中学时代的学校的风云少女，这种声音，不会一下子让人很喜欢，但是那种声线，声色，绝对可以被划分成一个独特的类别。我现在不是很喜欢，但面对这种声音，这种唱法，却让我有一种留恋的感觉，留恋当时看《回转企鹅罐》的感动，当时也颇觉企鹅罐的 OP 很惊艳，乃至于成瘾，就日夜循环，可是万事都怕越过那一个度，经过那一段时间的痴迷，现在反而是对其有点敬而远之的意思了。还有一点，我觉得很重要，就是不管这些歌有没有让我厌倦，之后当我再次听到这些歌曲的时候，我的心中总能够激起想要学习日语的欲望，这样看来，我的心底是没有失去对它们的最初的喜爱的。</p><p>说起来，OP 和 ED 的画面和动漫的主体一样，有一些意识流，头一次看，给人一种恍惚的感觉，我甚至觉得导演难道是给我喂了致幻药吗？有时还会有一些三次元的画面切进来，我本来是有些讨厌这样的形式的，因为这会使得二次元动画变得不那么纯粹，不过呢，就导演这个德性，我想，我也就顺着他的意，在二次元和三次元之间迷幻下去吧。刚刚暂停了一小会儿，想一部动漫，那部动漫也穿插了一点三次元的的场景，想了半天，终于想起是《意外的幸运签》，那部动漫是相当地优秀，当时我的心灵是受到很大的冲击，那个暗灰色的调调很契合我当时的心境，一时之间难以自抑。那部动漫电影的三次元插入意图是很明显的，对于日本电车的历史记忆，有一点文化输出和文化保留的意图，这种做法我一点都不排斥。反观这个四叠半，完全乱入好吧，这个导演，疯疯癫癫（非贬义）。</p><p>前九集似乎是每一集都是加入了一个不同的社团。每一集的终焉，时间倒流，在下一集的伊始，回到大学刚入学时。网球社、电影社、自行车、读书…… 没意思。幻想中的大学生活总是玫瑰色的，最后现实也总会坍塌成铅灰色。</p><p>我的大学生活呢？我现在也是正好大二结束。当然，严格意义上讲，我算不得真正的大二结束生，我中间休学过一年。这等事，在国内，好生难堪。别人难堪，非我也。没有任何事情可以使我难堪。这铅灰色的大学生活给我带来的最大的收获，就是，我不会难堪。大概。这也没有什么不好的嘛。如果能够再让我拥有樋口前辈那样豁达的生活态度，那么，可以说，我的此生算是圆满了。然而现实是，即使有了樋口前辈的豁达，在国内这个环境下，这种豁达永远也得不到圆满地地贯彻，吾辈之不幸，大抵如此。</p><p>在所有的铅灰色的颜色中，有一个清新的色彩点，这个点就是明石赋予的。这个女人，自始至终给我的感觉都是清新脱俗，以至于中间一个画面让我联想起高中时代的班长时，心中只得大呼罪过。明石，工科女，爱读书，怎么看怎么喜欢，头发蓬蓬的，软软的，轮廓很可爱。</p><p>封笔。2021.08.04. 蛇头蛇尾。</p>]]></content>
    
    
    <categories>
      
      <category>影评</category>
      
    </categories>
    
    
    <tags>
      
      <tag>漫评</tag>
      
      <tag>影评</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 6 ZigZag Conversion</title>
    <link href="/2021/07/11/LeetCode-6-ZigZag-Conversion/"/>
    <url>/2021/07/11/LeetCode-6-ZigZag-Conversion/</url>
    
    <content type="html"><![CDATA[<h2 id="一、题目链接"><a href="#一、题目链接" class="headerlink" title="一、题目链接"></a>一、题目链接</h2><p><a href="https://leetcode.com/problems/zigzag-conversion/">https://leetcode.com/problems/zigzag-conversion/</a></p><h2 id="二、解答"><a href="#二、解答" class="headerlink" title="二、解答"></a>二、解答</h2><p>这题有多个解答，我只取一种比较直观的，而且我认为，这种解法是最适合计算机的，其他如找出数学规律的解答，其数学思想是好的，但是，我认为利用直观的解法可以节约我们的时间。</p><p>先给出代码</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, numRows: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-keyword">if</span> numRows &lt; <span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">return</span> s<br>        row_strs = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numRows):<br>            row_strs.append(<span class="hljs-string">&#x27;&#x27;</span>)<br>        row = <span class="hljs-number">0</span><br>        flag = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            row_strs[row] += s[i]<br>            <span class="hljs-keyword">if</span> row == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> row == numRows - <span class="hljs-number">1</span>:<br>                flag = -flag<br>            row += flag<br>        ans = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> row_strs:<br>            ans += each<br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p>本题的解法思路很明显，我们把每一行当成一个子串单独拎出来，然后，根据 ZigZag 的规律直接一个一个往各层的子串中添加字符即可。顺着那个 ZigZag 的轨迹来，可以说是比较直观的。这里比较机智的一个点是使用 flag 标志来控制拉链形的轨迹。</p><p>时间复杂度：<code>$O(N)$</code>。<br>空间复杂度：<code>$O(N)$</code>。</p><h3 id="三、完整代码"><a href="#三、完整代码" class="headerlink" title="三、完整代码"></a>三、完整代码</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_06.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/7/11</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span>, numRows: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">str</span>:<br>        <span class="hljs-keyword">if</span> numRows &lt; <span class="hljs-number">2</span>:<br>            <span class="hljs-keyword">return</span> s<br>        row_strs = []<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(numRows):<br>            row_strs.append(<span class="hljs-string">&#x27;&#x27;</span>)<br>        row = <span class="hljs-number">0</span><br>        flag = -<span class="hljs-number">1</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(s)):<br>            row_strs[row] += s[i]<br>            <span class="hljs-keyword">if</span> row == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> row == numRows - <span class="hljs-number">1</span>:<br>                flag = -flag<br>            row += flag<br>        ans = <span class="hljs-string">&#x27;&#x27;</span><br>        <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> row_strs:<br>            ans += each<br>        <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution()<br>    s = <span class="hljs-string">&#x27;AB&#x27;</span><br>    numRows = <span class="hljs-number">1</span><br>    ans = solution.convert(s, numRows)<br>    <span class="hljs-built_in">print</span>(ans)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 3 Longest Substring Without Repeating Characters</title>
    <link href="/2021/07/10/LeetCode-3-Longest-Substring-Without-Repeating-Characters/"/>
    <url>/2021/07/10/LeetCode-3-Longest-Substring-Without-Repeating-Characters/</url>
    
    <content type="html"><![CDATA[<h2 id="一、题目链接"><a href="#一、题目链接" class="headerlink" title="一、题目链接"></a>一、题目链接</h2><p><a href="https://leetcode.com/problems/longest-substring-without-repeating-characters/">https://leetcode.com/problems/longest-substring-without-repeating-characters/</a></p><h2 id="二、解答"><a href="#二、解答" class="headerlink" title="二、解答"></a>二、解答</h2><h3 id="2-1-解法一，暴力求解"><a href="#2-1-解法一，暴力求解" class="headerlink" title="2.1 解法一，暴力求解"></a>2.1 解法一，暴力求解</h3><p>直接使用暴力方法，遍历所有可能的子串，并判断是否有重复的字符，当没有重复的字符时，计算其长度，然后取最长的字符串的长度即为最后的结果。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">start, end</span>):<br>            chars = [<span class="hljs-number">0</span>] * <span class="hljs-number">128</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, end + <span class="hljs-number">1</span>):<br>                c = s[i]<br>                chars[<span class="hljs-built_in">ord</span>(c)] += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> chars[<span class="hljs-built_in">ord</span>(c)] &gt; <span class="hljs-number">1</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>        n = <span class="hljs-built_in">len</span>(s)<br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, n):<br>                <span class="hljs-keyword">if</span> check(i, j):<br>                    res = <span class="hljs-built_in">max</span>(res, j - i + <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p>时间复杂度：<code>$O(N^3)$</code>，N 为字符串的长度。<br>空间复杂度：我认为是 <code>$O(1)$</code>，因为每一次 check，需要 128 个空间，这是一个常数单位。但是官方教程说是 <code>O(min(m, n))</code>，其中 m 是 128，n 是字符串的长度，我认为应该是错误的。</p><h3 id="2-2-滑动窗口"><a href="#2-2-滑动窗口" class="headerlink" title="2.2 滑动窗口"></a>2.2 滑动窗口</h3><p>直接看代码</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        chars = [<span class="hljs-number">0</span>] * <span class="hljs-number">128</span><br>        left = right = <span class="hljs-number">0</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> right &lt; <span class="hljs-built_in">len</span>(s):<br>            r = s[right]<br>            chars[<span class="hljs-built_in">ord</span>(r)] += <span class="hljs-number">1</span><br>            <span class="hljs-comment"># chars[r] &gt; 1 表明从 left 到 right 之间出现重复的字符了</span><br>            <span class="hljs-keyword">while</span> chars[<span class="hljs-built_in">ord</span>(r)] &gt; <span class="hljs-number">1</span>:<br>                l = s[left]<br>                chars[<span class="hljs-built_in">ord</span>(l)] -= <span class="hljs-number">1</span><br>                left += <span class="hljs-number">1</span><br>            res = <span class="hljs-built_in">max</span>(res, right - left + <span class="hljs-number">1</span>)<br>            right += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p>这里主要的思想是利用 left 和 right 这两个指针，</p><ul><li>先固定 left 指针，然后滑动 right 指针，</li><li>如果在 left 到 right 之间的子串中出现了重复的字符，那么，这时就固定 right 指针，</li><li>然后移动左指针，直到 left 到 right 之间的子串中没有重复的字符。</li></ul><p>这里有一个 Python 函数要说明一下，</p><ul><li><code>ord()</code>: Return the Unicode code(ASCII code) point for a one-character string.</li></ul><p>时间复杂度：<code>$O(N)$</code>，left 指针和 right 指针在最坏情况下，总计会遍历字符数组两遍。<br>空间复杂度：同解法一的空间复杂度。</p><h3 id="2-3-解法三-滑动窗口优化"><a href="#2-3-解法三-滑动窗口优化" class="headerlink" title="2.3 解法三 滑动窗口优化"></a>2.3 解法三 滑动窗口优化</h3><p>直接看代码</p><p>使用字典的版本</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n = <span class="hljs-built_in">len</span>(s)<br>        ans = <span class="hljs-number">0</span><br>        <span class="hljs-comment"># 存储字符最后一次出现的索引，然后加一</span><br>        mp = &#123;&#125;<br>        i = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> s[j] <span class="hljs-keyword">in</span> mp:<br>                i = <span class="hljs-built_in">max</span>(mp[s[j]], i)<br>            ans = <span class="hljs-built_in">max</span>(j - i + <span class="hljs-number">1</span>, ans)<br>            mp[s[j]] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br></code></pre></td></tr></table></figure><p>说一下 line8 和 line9 代码的含义，这里是判断 j 指向的字符是否在 mp 字典中，如果在，说明之前出现过了这个字符，但是，出现过的字符有两种情况</p><ul><li>第一种，重复的字符在索引 i 到 j（不含 j）之间，那么 line9 这行代码就会把 i 指针移动到 <code>mp[s[j]]</code> 位置处（注意 line11 这行代码），</li><li>第二种，重复的字符在索引 i 之前出现，这个对索引 i 到索引 j 之间的子串没有影响，因而，line9 执行完之后 i 的值不变。</li></ul><p>使用列表的版本</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3_2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        chars = [<span class="hljs-literal">None</span>] * <span class="hljs-number">128</span><br>        left = right = <span class="hljs-number">0</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> right &lt; <span class="hljs-built_in">len</span>(s):<br>            r = s[right]<br>            index = chars[<span class="hljs-built_in">ord</span>(r)]<br>            <span class="hljs-comment"># 出现重复的字符了</span><br>            <span class="hljs-keyword">if</span> index != <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> index &gt;= left <span class="hljs-keyword">and</span> index &lt; right:<br>                left = index + <span class="hljs-number">1</span><br>            res = <span class="hljs-built_in">max</span>(res, right - left + <span class="hljs-number">1</span>)<br>            chars[<span class="hljs-built_in">ord</span>(r)] = right<br>            right += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br></code></pre></td></tr></table></figure><p>这里的 line10 和 line11 两行代码和上面的使用字典的代码的 line8 和 line9 两行代码的作用相同。</p><p>时间复杂度：<code>$O(N)$</code>。<br>空间复杂度：我认为还是 <code>$O(1)$</code>。其实争执这个没什么意义。</p><h2 id="三、完整代码"><a href="#三、完整代码" class="headerlink" title="三、完整代码"></a>三、完整代码</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_03.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/7/10</span><br><br><span class="hljs-comment"># 暴力解法</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        <span class="hljs-keyword">def</span> <span class="hljs-title function_">check</span>(<span class="hljs-params">start, end</span>):<br>            chars = [<span class="hljs-number">0</span>] * <span class="hljs-number">128</span><br>            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(start, end + <span class="hljs-number">1</span>):<br>                c = s[i]<br>                chars[<span class="hljs-built_in">ord</span>(c)] += <span class="hljs-number">1</span><br>                <span class="hljs-keyword">if</span> chars[<span class="hljs-built_in">ord</span>(c)] &gt; <span class="hljs-number">1</span>:<br>                    <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br><br>        n = <span class="hljs-built_in">len</span>(s)<br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i, n):<br>                <span class="hljs-keyword">if</span> check(i, j):<br>                    res = <span class="hljs-built_in">max</span>(res, j - i + <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-comment"># 滑动窗口</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        chars = [<span class="hljs-number">0</span>] * <span class="hljs-number">128</span><br>        left = right = <span class="hljs-number">0</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> right &lt; <span class="hljs-built_in">len</span>(s):<br>            r = s[right]<br>            chars[<span class="hljs-built_in">ord</span>(r)] += <span class="hljs-number">1</span><br>            <span class="hljs-comment"># chars[r] &gt; 1 表明从 left 到 right 之间出现重复的字符了</span><br>            <span class="hljs-keyword">while</span> chars[<span class="hljs-built_in">ord</span>(r)] &gt; <span class="hljs-number">1</span>:<br>                l = s[left]<br>                chars[<span class="hljs-built_in">ord</span>(l)] -= <span class="hljs-number">1</span><br>                left += <span class="hljs-number">1</span><br>            res = <span class="hljs-built_in">max</span>(res, right - left + <span class="hljs-number">1</span>)<br>            right += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-comment"># 滑动窗口优化</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        n = <span class="hljs-built_in">len</span>(s)<br>        ans = <span class="hljs-number">0</span><br>        mp = &#123;&#125;<br>        i = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n):<br>            <span class="hljs-keyword">if</span> s[j] <span class="hljs-keyword">in</span> mp:<br>                i = <span class="hljs-built_in">max</span>(mp[s[j]], i)<br>            ans = <span class="hljs-built_in">max</span>(j - i + <span class="hljs-number">1</span>, ans)<br>            mp[s[j]] = j + <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> ans<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3_2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">lengthOfLongestSubstring</span>(<span class="hljs-params">self, s: <span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">int</span>:<br>        chars = [<span class="hljs-literal">None</span>] * <span class="hljs-number">128</span><br>        left = right = <span class="hljs-number">0</span><br>        res = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> right &lt; <span class="hljs-built_in">len</span>(s):<br>            r = s[right]<br>            index = chars[<span class="hljs-built_in">ord</span>(r)]<br>            <span class="hljs-comment"># 出现重复的字符了</span><br>            <span class="hljs-keyword">if</span> index != <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> index &gt;= left <span class="hljs-keyword">and</span> index &lt; right:<br>                left = index + <span class="hljs-number">1</span><br>            res = <span class="hljs-built_in">max</span>(res, right - left + <span class="hljs-number">1</span>)<br>            chars[<span class="hljs-built_in">ord</span>(r)] = right<br>            right += <span class="hljs-number">1</span><br>        <span class="hljs-keyword">return</span> res<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution3_2()<br>    s = <span class="hljs-string">&#x27;abcdeabcd&#x27;</span><br>    <span class="hljs-built_in">print</span>(solution.lengthOfLongestSubstring(s))<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
      <tag>滑动窗口</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>谈一谈《繁花》</title>
    <link href="/2021/07/09/%E8%B0%88%E4%B8%80%E8%B0%88%E3%80%8A%E7%B9%81%E8%8A%B1%E3%80%8B/"/>
    <url>/2021/07/09/%E8%B0%88%E4%B8%80%E8%B0%88%E3%80%8A%E7%B9%81%E8%8A%B1%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<p>在中学时代，我是读过几本矛盾文学奖的作品的，怎么说呢，好坏参差，大体上，是好作品要多一些，那时我也知道，茅盾文学奖是中国文学的最高奖项，其含金量是很高的，因此，我也翻阅了一些茅奖的作品目录，一部作品，《繁花》，书名很打动我，再看作者，金宇澄，这名字，有点小气，不像是老一辈的名字，再一看题材，旧上海，上个世纪，革命，文革，变革，时代变迁，心里臆断，可能没有啥意思的一部小说。于是，就此错过，转而去读我的金庸古龙去了。</p><p>还好是错过。那时我读，大抵应是欣赏不来的。当然，不是大家戏谑的书中使用的大量的“不响”，而是书中各式各样的女人，男人，让我不响。中学时读着读着肯定就直接放弃了，而不是像如今这样，越读越有滋味儿。</p><p>为什么会这样说呢？我现在的性格，正在一步步往那种极端的方向发展，谈不上善恶。有一个明显的迹象就是，以前在看日本动漫时，有一些人物，是似东京喰种里面的美食家这样的看上去很疯癫，邪魅的人物，我并不会对其产生什么特别的感想，而如今，则会多出来很多共鸣。这个变化，我认为是相当重大的。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
      <tag>文学</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 2 Add Two Numbers</title>
    <link href="/2021/07/09/LeetCode-2-Add-Two-Numbers/"/>
    <url>/2021/07/09/LeetCode-2-Add-Two-Numbers/</url>
    
    <content type="html"><![CDATA[<h2 id="一、题目链接"><a href="#一、题目链接" class="headerlink" title="一、题目链接"></a>一、题目链接</h2><p><a href="https://leetcode.com/problems/add-two-numbers/">https://leetcode.com/problems/add-two-numbers/</a></p><h2 id="二、解答"><a href="#二、解答" class="headerlink" title="二、解答"></a>二、解答</h2><p>这道题基本上只有一个解答，即每个节点顺次加过去，然后需要处理的就是进位，加一个变量 carry 即可。</p><p>代码</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_02.py</span><br><span class="hljs-comment"># @Author: FanyFull</span><br><span class="hljs-comment"># @Date  : 2021/7/9</span><br><br><span class="hljs-comment"># Definition for singly-linked list.</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ListNode</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, val=<span class="hljs-number">0</span>, <span class="hljs-built_in">next</span>=<span class="hljs-literal">None</span></span>):<br>        self.val = val<br>        self.<span class="hljs-built_in">next</span> = <span class="hljs-built_in">next</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">addTwoNumbers</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:<br>        res = ListNode()<br>        tmp = res<br>        carry = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> l1 != <span class="hljs-literal">None</span> <span class="hljs-keyword">and</span> l2 != <span class="hljs-literal">None</span>:<br>            tmp.<span class="hljs-built_in">next</span> = ListNode()<br>            tmp = tmp.<span class="hljs-built_in">next</span><br>            tmp.val = (l1.val + l2.val + carry) % <span class="hljs-number">10</span><br>            carry = (l1.val + l2.val + carry) // <span class="hljs-number">10</span><br>            l1 = l1.<span class="hljs-built_in">next</span><br>            l2 = l2.<span class="hljs-built_in">next</span><br>        l3 = l1 <span class="hljs-keyword">if</span> l1 != <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> l2<br>        <span class="hljs-keyword">while</span> l3 != <span class="hljs-literal">None</span>:<br>            tmp.<span class="hljs-built_in">next</span> = ListNode()<br>            tmp = tmp.<span class="hljs-built_in">next</span><br>            tmp.val = (l3.val + carry) % <span class="hljs-number">10</span><br>            carry = (l3.val + carry) // <span class="hljs-number">10</span><br>            l3 = l3.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">if</span> carry != <span class="hljs-number">0</span>:<br>            tmp.<span class="hljs-built_in">next</span> = ListNode()<br>            tmp = tmp.<span class="hljs-built_in">next</span><br>            tmp.val = carry<br>        <span class="hljs-keyword">return</span> res.<span class="hljs-built_in">next</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">addTwoNumbers</span>(<span class="hljs-params">self, l1: ListNode, l2: ListNode</span>) -&gt; ListNode:<br>        dummy_head = ListNode()<br>        <span class="hljs-comment"># 用 p 和 q 以将 l1 和 l2 保护起来</span><br>        p = l1<br>        q = l2<br>        curr = dummy_head<br>        carry = <span class="hljs-number">0</span><br>        <span class="hljs-keyword">while</span> p != <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> q != <span class="hljs-literal">None</span>:<br>            x = p.val <span class="hljs-keyword">if</span> p != <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            y = q.val <span class="hljs-keyword">if</span> q != <span class="hljs-literal">None</span> <span class="hljs-keyword">else</span> <span class="hljs-number">0</span><br>            <span class="hljs-built_in">sum</span> = carry + x + y<br>            carry = <span class="hljs-built_in">sum</span> // <span class="hljs-number">10</span><br>            curr.<span class="hljs-built_in">next</span> = ListNode(<span class="hljs-built_in">sum</span> % <span class="hljs-number">10</span>, <span class="hljs-literal">None</span>)<br>            curr = curr.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">if</span> p != <span class="hljs-literal">None</span>:<br>                p = p.<span class="hljs-built_in">next</span><br>            <span class="hljs-keyword">if</span> q != <span class="hljs-literal">None</span>:<br>                q = q.<span class="hljs-built_in">next</span><br>        <span class="hljs-keyword">if</span> carry &gt; <span class="hljs-number">0</span>:<br>            curr.<span class="hljs-built_in">next</span> = ListNode(carry, <span class="hljs-literal">None</span>)<br>        <span class="hljs-keyword">return</span> dummy_head.<span class="hljs-built_in">next</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># solution = Solution()</span><br>    solution = Solution2()<br>    l1 = ListNode(<span class="hljs-number">2</span>, ListNode(<span class="hljs-number">4</span>, ListNode(<span class="hljs-number">3</span>, <span class="hljs-literal">None</span>)))<br>    l2 = ListNode(<span class="hljs-number">5</span>, ListNode(<span class="hljs-number">6</span>, ListNode(<span class="hljs-number">4</span>, <span class="hljs-literal">None</span>)))<br>    res = solution.addTwoNumbers(l1, l2)<br>    <span class="hljs-keyword">while</span> res != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(res.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        res = res.<span class="hljs-built_in">next</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n-------&#x27;</span>)<br>    l1 = ListNode(<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>    l2 = ListNode(<span class="hljs-number">0</span>, <span class="hljs-literal">None</span>)<br>    res = solution.addTwoNumbers(l1, l2)<br>    <span class="hljs-keyword">while</span> res != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(res.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        res = res.<span class="hljs-built_in">next</span><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n------&#x27;</span>)<br>    l1 = ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span> ,<span class="hljs-literal">None</span>)))))))<br>    l2 = ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, ListNode(<span class="hljs-number">9</span>, <span class="hljs-literal">None</span>))))<br>    res = solution.addTwoNumbers(l1, l2)<br>    <span class="hljs-keyword">while</span> res != <span class="hljs-literal">None</span>:<br>        <span class="hljs-built_in">print</span>(res.val, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>        res = res.<span class="hljs-built_in">next</span><br><br></code></pre></td></tr></table></figure><p>说明一下，这里的 Solution1 和 Solution2 的思想是一样的，第一个解法是我手撸的，第二个是根据官方 Java 解答改写的，相比之下，第二个要优雅一点。</p><p>时间复杂度：<code>$O(max(m, n))$</code>，m、n 分别是 <code>$l_1$</code> 和 <code>$l_2$</code> 的长度。<br>空间复杂度：<code>$O(max(m, n))$</code>。</p>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>LeetCode 1 Two Sum</title>
    <link href="/2021/07/09/LeetCode-1-Two-Sum/"/>
    <url>/2021/07/09/LeetCode-1-Two-Sum/</url>
    
    <content type="html"><![CDATA[<h2 id="一、题目链接"><a href="#一、题目链接" class="headerlink" title="一、题目链接"></a>一、题目链接</h2><p><a href="https://leetcode.com/problems/two-sum/">https://leetcode.com/problems/two-sum/</a></p><h2 id="二、解答"><a href="#二、解答" class="headerlink" title="二、解答"></a>二、解答</h2><h3 id="2-1-解法一，暴力求解"><a href="#2-1-解法一，暴力求解" class="headerlink" title="2.1 解法一，暴力求解"></a>2.1 解法一，暴力求解</h3><p>直接使用暴力求解方法。这个不需要思考，直接就可以写出来。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>                <span class="hljs-keyword">if</span> nums[i] + nums[j] == target:<br>                    <span class="hljs-keyword">return</span> [i, j]<br></code></pre></td></tr></table></figure><p>采用的思想就是直接遍历，没啥好说的。</p><p>时间复杂度：<code>$O(N^2)$</code><br>空间复杂度：<code>$O(1)$</code></p><h3 id="2-2-解法二，两次遍历"><a href="#2-2-解法二，两次遍历" class="headerlink" title="2.2 解法二，两次遍历"></a>2.2 解法二，两次遍历</h3><p>利用 Python 中的字典这一数据结构。其中，key 存的是 <code>nums[i]</code>，value 存的是 <code>i</code>，这里的 i 是给定数组的索引值。</p><p>代码如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        dic = &#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            dic[nums[i]] = i<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            complement = target - nums[i]<br>            <span class="hljs-keyword">if</span> complement <span class="hljs-keyword">in</span> dic.keys() <span class="hljs-keyword">and</span> dic[complement] != i:<br>                <span class="hljs-keyword">return</span> [i, dic[complement]]<br></code></pre></td></tr></table></figure><p>这个解法采用了两次遍历的方法</p><ul><li>第一次遍历时，如果 nums 列表中有重复的元素，那么最后 <code>dic[nums[i]]</code> 存储的值将是最后一次的 i；</li><li>第二个遍历中，if 语句要考虑两种情况<ul><li>一是最后的两个 two nums 的值是不同的，那么，很显然，<code>dic[target - nums[i]]</code> 就是与当前的 i 对应的另一个索引值；</li><li>二是最后的两个 two nums 的值是重复的，而且，根据题目给定的条件，题目一定有解，且是唯一解，那么，当前的 i 一定是索引值较小的那一个，<code>dic[target - nums[i]]</code> 则是另一个。</li></ul></li></ul><p>时间复杂度：<code>$O(N)$</code><br>空间复杂度：<code>$O(N)$</code></p><h3 id="2-3-解法三，一次遍历"><a href="#2-3-解法三，一次遍历" class="headerlink" title="2.3 解法三，一次遍历"></a>2.3 解法三，一次遍历</h3><p>思想和解法二基本是一样的。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        dic = &#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            complement = target - nums[i]<br>            <span class="hljs-keyword">if</span> complement <span class="hljs-keyword">in</span> dic.keys():<br>                <span class="hljs-keyword">return</span> [dic[complement], i]<br>            dic[nums[i]] = i<br></code></pre></td></tr></table></figure><p>我们只需要理解一点，找到相应的解时，分两种情况</p><ul><li>一，最后的两个 two nums 的值是不同的，那么，i 的值是大于 <code>dic[target - nums[i]]</code> 的；</li><li>二，最后的两个 two nums 的值是重复的，那么，i 的值还是大于 <code>dic[target - nums[i]]</code> 的，和第一种情况没什么不同，之所以分两种情况，是为了捋得更清楚一些。</li></ul><p>时间复杂度：<code>$O(N)$</code><br>空间复杂度：<code>$O(N)$</code></p><h2 id="三、完整代码"><a href="#三、完整代码" class="headerlink" title="三、完整代码"></a>三、完整代码</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># @File  : leet_01.py</span><br><span class="hljs-comment"># @Author: FanLu</span><br><span class="hljs-comment"># @Date  : 2021/7/9</span><br><br><span class="hljs-keyword">from</span> typing <span class="hljs-keyword">import</span> <span class="hljs-type">List</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-built_in">len</span>(nums)):<br>            <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(i + <span class="hljs-number">1</span>, <span class="hljs-built_in">len</span>(nums)):<br>                <span class="hljs-keyword">if</span> nums[i] + nums[j] == target:<br>                    <span class="hljs-keyword">return</span> [i, j]<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution2</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        dic = &#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            dic[nums[i]] = i<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            complement = target - nums[i]<br>            <span class="hljs-keyword">if</span> complement <span class="hljs-keyword">in</span> dic.keys() <span class="hljs-keyword">and</span> dic[complement] != i:<br>                <span class="hljs-keyword">return</span> [i, dic[complement]]<br>        <span class="hljs-keyword">return</span> [] <span class="hljs-comment"># 不存在的情况</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Solution3</span>:<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">twoSum</span>(<span class="hljs-params">self, nums: <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>], target: <span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-type">List</span>[<span class="hljs-built_in">int</span>]:<br>        dic = &#123;&#125;<br>        <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-built_in">len</span>(nums)):<br>            complement = target - nums[i]<br>            <span class="hljs-keyword">if</span> complement <span class="hljs-keyword">in</span> dic.keys():<br>                <span class="hljs-keyword">return</span> [dic[complement], i]<br>            dic[nums[i]] = i<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    solution = Solution()<br>    nums = [<span class="hljs-number">3</span>, <span class="hljs-number">2</span>, <span class="hljs-number">4</span>]<br>    target = <span class="hljs-number">6</span><br>    res = solution.twoSum(nums, target)<br>    <span class="hljs-built_in">print</span>(res)<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>LeetCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>LeetCode</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一份调校好的 VSCode 的配置文件</title>
    <link href="/2021/07/07/%E4%B8%80%E4%BB%BD%E8%B0%83%E6%A0%A1%E5%A5%BD%E7%9A%84-VSCode-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/"/>
    <url>/2021/07/07/%E4%B8%80%E4%BB%BD%E8%B0%83%E6%A0%A1%E5%A5%BD%E7%9A%84-VSCode-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/</url>
    
    <content type="html"><![CDATA[<p>我个人对于编辑器有特殊的偏好，中文是宋体，英文是 Consola，并且，对于英文，字体一般需要跳到 16 的大小，这样看上去字体比较圆润。</p><p>但是调校字体这个工作在 VSCode 里面有点麻烦，所以直接保存一份文件在这里，方便以后需要时备查。</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;workbench.startupEditor&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;newUntitledFile&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;explorer.confirmDelete&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;markdown-preview-enhanced.mathRenderingOption&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;MathJax&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;markdown-preview-enhanced.previewTheme&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;one-dark.css&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.fontFamily&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot; ‘宋体’, Consolas, monospace&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.fontSize&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-number">16</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.current&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;github&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.branch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;master&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.customUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;blogs/pictures/&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.repo&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;fanlumaster/BlogMaps&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.picBed.github.token&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// 这里不方便显示，要注意</span><br>    <span class="hljs-attr">&quot;editor.minimap.enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;explorer.confirmDragAndDrop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;picgo.customOutputFormat&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;![]($&#123;url&#125;)&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.mouseWheelZoom&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;security.workspace.trust.untrustedFiles&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;open&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;security.workspace.trust.enabled&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;editor.wordWrap&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;on&quot;</span><span class="hljs-punctuation">,</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>VSCode</category>
      
    </categories>
    
    
    <tags>
      
      <tag>VSCode</tag>
      
      <tag>个人用</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一份简单的 MyBatis Maven 工程</title>
    <link href="/2021/06/23/%E4%B8%80%E4%BB%BD%E7%AE%80%E5%8D%95%E7%9A%84-MyBatis-Maven-%E5%B7%A5%E7%A8%8B/"/>
    <url>/2021/06/23/%E4%B8%80%E4%BB%BD%E7%AE%80%E5%8D%95%E7%9A%84-MyBatis-Maven-%E5%B7%A5%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>借着工程实训的机会，将 MyBatis 框架回忆了一遍，在这里就整理一份基础的 MyBatis 文件，也算是一个记录吧，同时留待将来再用时备查。</p><p>这里的环境是：</p><ul><li>IDEA 2021.1.2</li><li>jdk 1.8.0_291</li><li>MyBatis 3.5.7</li><li>MySQL 8.0.25</li></ul><h2 id="工程文件"><a href="#工程文件" class="headerlink" title="工程文件"></a>工程文件</h2><h3 id="1、文件结构"><a href="#1、文件结构" class="headerlink" title="1、文件结构"></a>1、文件结构</h3><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210623235047.png"></p><h3 id="2、pom-配置文件"><a href="#2、pom-配置文件" class="headerlink" title="2、pom 配置文件"></a>2、pom 配置文件</h3><p>pom.xml 文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">  <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.hust<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatisdemo<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>mybatisdemo<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>  <span class="hljs-comment">&lt;!-- FIXME change it to the project&#x27;s website --&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://www.example.com<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>1.7<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>junit<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>4.11<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">scope</span>&gt;</span>test<span class="hljs-tag">&lt;/<span class="hljs-name">scope</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/mysql/mysql-connector-java --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>mysql<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mysql-connector-java<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>8.0.25<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.mybatis/mybatis --&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mybatis<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.5.7<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>  <span class="hljs-tag">&lt;<span class="hljs-name">build</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">pluginManagement</span>&gt;</span><span class="hljs-comment">&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">plugins</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-clean-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-resources-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-surefire-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.22.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-jar-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-install-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.5.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-deploy-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.8.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-comment">&lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-site-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.7.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">plugin</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>maven-project-info-reports-plugin<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">plugin</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">plugins</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">pluginManagement</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resources</span>&gt;</span><br>      <span class="hljs-tag">&lt;<span class="hljs-name">resource</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">directory</span>&gt;</span>src/main/java<span class="hljs-tag">&lt;/<span class="hljs-name">directory</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">includes</span>&gt;</span><br>          <span class="hljs-tag">&lt;<span class="hljs-name">include</span>&gt;</span>**/*.xml<span class="hljs-tag">&lt;/<span class="hljs-name">include</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">includes</span>&gt;</span><br>      <span class="hljs-tag">&lt;/<span class="hljs-name">resource</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resources</span>&gt;</span><br>  <span class="hljs-tag">&lt;/<span class="hljs-name">build</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure><p>这里要注意最后将 <code>src/main/java</code> 下的子包和孙子包等等这些包中的 xml 文件 <code>include</code> 一下。</p><h3 id="3、resources-目录下的配置文件"><a href="#3、resources-目录下的配置文件" class="headerlink" title="3、resources 目录下的配置文件"></a>3、resources 目录下的配置文件</h3><p>db.properties 文件</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs ini"><span class="hljs-attr">driverName</span>=com.mysql.cj.jdbc.Driver<br><span class="hljs-attr">url</span>=jdbc:mysql://localhost:<span class="hljs-number">3306</span>/empdb?useSSL=<span class="hljs-literal">true</span>&amp;useUnicode=<span class="hljs-literal">true</span>&amp;autoReconnect=<span class="hljs-literal">true</span>&amp;characterEncoding=utf-<span class="hljs-number">8</span>&amp;serverTimezone=GMT<br><span class="hljs-attr">userName</span>=root<br><span class="hljs-attr">password</span>=lf123456<br></code></pre></td></tr></table></figure><p>这里要注意连接 MySQL 8 的数据库驱动的 JDBC 的包是 <code>driverName=com.mysql.cj.jdbc.Driver</code>。</p><p>sqlmapconfig.xml 文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">configuration</span></span><br><span class="hljs-meta">        <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">configuration</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span> <span class="hljs-attr">resource</span>=<span class="hljs-string">&quot;db.properties&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--类的别名--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">typeAliases</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;typeAlias type=&quot;com.hust.pojo.Dept&quot; alias=&quot;Dept&quot;&gt;&lt;/typeAlias&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--按照包名批量加载类--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.hust.pojo&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">typeAliases</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">environments</span> <span class="hljs-attr">default</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">environment</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;development&quot;</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">transactionManager</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;JDBC&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">transactionManager</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">dataSource</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;POOLED&quot;</span>&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;driver&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;driverName&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;url&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;url&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;username&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;userName&#125;&quot;</span>/&gt;</span><br>                <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;password&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;$&#123;password&#125;&quot;</span>/&gt;</span><br>            <span class="hljs-tag">&lt;/<span class="hljs-name">dataSource</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">environment</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">environments</span>&gt;</span><br>    <span class="hljs-comment">&lt;!--加载 mapper 文件--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mappers</span>&gt;</span><br>        <span class="hljs-comment">&lt;!--&lt;mapper resource=&quot;xxx/xxx.xml&quot;&gt;&lt;/mapper&gt;--&gt;</span><br>        <span class="hljs-comment">&lt;!--按照包名批量加载 mapper 文件--&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">package</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;com.hust.dao&quot;</span>/&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">mappers</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">configuration</span>&gt;</span><br></code></pre></td></tr></table></figure><h3 id="4、main-目录下的所有文件"><a href="#4、main-目录下的所有文件" class="headerlink" title="4、main 目录下的所有文件"></a>4、main 目录下的所有文件</h3><p>DeptMapper.java 文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hust.dao;<br><br><span class="hljs-keyword">import</span> com.hust.pojo.Dept;<br><span class="hljs-keyword">import</span> org.apache.ibatis.annotations.Param;<br><br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">DeptMapper</span> &#123;<br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 获取所有部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    List&lt;Dept&gt;  <span class="hljs-title function_">getDeptList</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 根据部门编号获取部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    Dept <span class="hljs-title function_">getDeptById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br><br><span class="hljs-comment">//    /**</span><br><span class="hljs-comment">//     * 增加部门</span><br><span class="hljs-comment">//     * 当参数超过 1 个的时候，需要添加注解</span><br><span class="hljs-comment">//     * @param dname</span><br><span class="hljs-comment">//     * @param loc</span><br><span class="hljs-comment">//     * @return</span><br><span class="hljs-comment">//     */</span><br><span class="hljs-comment">//    int addDept(@Param(&quot;dname&quot;) String dname, @Param(&quot;loc&quot;) String loc);</span><br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 增加部门</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> dept</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">addDept</span><span class="hljs-params">(Dept dept)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 修改部门所在的城市</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> loc</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">editDept</span><span class="hljs-params">(<span class="hljs-meta">@Param(&quot;id&quot;)</span> <span class="hljs-type">int</span> id, <span class="hljs-meta">@Param(&quot;loc&quot;)</span> String loc)</span>;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 通过部门 id 删除部门信息</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> id</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@return</span></span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-type">int</span> <span class="hljs-title function_">delDeptById</span><span class="hljs-params">(<span class="hljs-type">int</span> id)</span>;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>DeptMapper.xml 文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span> ?&gt;</span><br><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">mapper</span> <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span><br><span class="hljs-meta">        <span class="hljs-string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">mapper</span> <span class="hljs-attr">namespace</span>=<span class="hljs-string">&quot;com.hust.dao.DeptMapper&quot;</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">resultMap</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;deptMap&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;Dept&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">id</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;deptno&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;deptno&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;dname&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">result</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;loc&quot;</span> <span class="hljs-attr">column</span>=<span class="hljs-string">&quot;loc&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">result</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">resultMap</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--获取所有部门信息，id 要和接口中的方法名一致--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getDeptList&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;deptMap&quot;</span>&gt;</span><br>        SELECT * FROM dept;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--根据部门编号获取部门信息--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;getDeptById&quot;</span> <span class="hljs-attr">resultMap</span>=<span class="hljs-string">&quot;deptMap&quot;</span>&gt;</span><br>        SELECT * FROM dept WHERE deptno=#&#123;id&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--增加部门--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;addDept&quot;</span>&gt;</span><br>        INSERT INTO dept VALUES(null,#&#123;name &#125;,#&#123;loc&#125;);<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--修改部门所在的城市--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;editDept&quot;</span>&gt;</span><br>        UPDATE dept SET loc=#&#123;loc&#125; WHERE deptno=#&#123;id&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span><br><br>    <span class="hljs-comment">&lt;!--通过部门 id 删除部门信息--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">delete</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;delDeptById&quot;</span>&gt;</span><br>        DELETE FROM dept WHERE deptno=#&#123;id&#125;;<br>    <span class="hljs-tag">&lt;/<span class="hljs-name">delete</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mapper</span>&gt;</span><br></code></pre></td></tr></table></figure><p>Dept.java 文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hust.pojo;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 部门实体类</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Dept</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> deptno;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> String loc;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dept</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Dept</span><span class="hljs-params">(<span class="hljs-type">int</span> deptno, String name, String loc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.deptno = deptno;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.loc = loc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getDeptno</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> deptno;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setDeptno</span><span class="hljs-params">(<span class="hljs-type">int</span> deptno)</span> &#123;<br>        <span class="hljs-built_in">this</span>.deptno = deptno;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getLoc</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> loc;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setLoc</span><span class="hljs-params">(String loc)</span> &#123;<br>        <span class="hljs-built_in">this</span>.loc = loc;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>App.java 文件</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hust;<br><br><span class="hljs-keyword">import</span> com.hust.dao.DeptMapper;<br><span class="hljs-keyword">import</span> com.hust.pojo.Dept;<br><span class="hljs-keyword">import</span> org.apache.ibatis.io.Resources;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;<br><span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;<br><br><span class="hljs-keyword">import</span> java.io.IOException;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> IOException &#123;<br>        <span class="hljs-comment">// mybatis 的配置文件</span><br>        <span class="hljs-type">InputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> Resources.getResourceAsStream(<span class="hljs-string">&quot;sqlmapconfig.xml&quot;</span>);<br>        <span class="hljs-comment">// 创建 sqlSessionFactory 工厂</span><br>        <span class="hljs-type">SqlSessionFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SqlSessionFactoryBuilder</span>().build(in);<br>        <span class="hljs-comment">// 获取 sqlSession 对象，相当于在 JDBC 中封装好的 getConnection()</span><br>        <span class="hljs-type">SqlSession</span> <span class="hljs-variable">sqlSession</span> <span class="hljs-operator">=</span> factory.openSession();<br>        <span class="hljs-type">DeptMapper</span> <span class="hljs-variable">deptMapper</span> <span class="hljs-operator">=</span> sqlSession.getMapper(DeptMapper.class);<br><br>        <span class="hljs-comment">/*List&lt;Dept&gt; list = deptMapper.getDeptList();</span><br><span class="hljs-comment">        for (Dept dept : list) &#123;</span><br><span class="hljs-comment">            System.out.println(dept.getDname()); // 注意，后面为了演示，将 dname 属性名更改成了 name</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-comment">/*Dept dept = deptMapper.getDeptById(10);</span><br><span class="hljs-comment">        if (dept != null) &#123;</span><br><span class="hljs-comment">            System.out.println(dept.getDeptno() + &quot;:&quot; + dept.getName() + &quot;:&quot; + dept.getLoc());</span><br><span class="hljs-comment">        &#125; else &#123;</span><br><span class="hljs-comment">            System.out.println(&quot;无此部门&quot;);</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-comment">/*Dept dept = new Dept();</span><br><span class="hljs-comment">        dept.setName(&quot;财务部&quot;);</span><br><span class="hljs-comment">        dept.setLoc(&quot;北京&quot;);</span><br><span class="hljs-comment">        int res = deptMapper.addDept(dept);</span><br><span class="hljs-comment">        if (res &gt; 0) &#123;</span><br><span class="hljs-comment">            System.out.println(&quot;部门添加成功&quot;);</span><br><span class="hljs-comment">        &#125; else &#123;</span><br><span class="hljs-comment">            System.out.println(&quot;添加失败&quot;);</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-comment">/*int res = deptMapper.editDept(73, &quot;宜昌&quot;);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        if (res == 1) &#123;</span><br><span class="hljs-comment">            System.out.println(&quot;部门修改成功&quot;);</span><br><span class="hljs-comment">        &#125; else &#123;</span><br><span class="hljs-comment">            System.out.println(&quot;修改失败&quot;);</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-type">int</span> <span class="hljs-variable">res</span> <span class="hljs-operator">=</span> deptMapper.delDeptById(<span class="hljs-number">73</span>);<br><br>        <span class="hljs-keyword">if</span> (res &gt; <span class="hljs-number">0</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;部门删除成功&quot;</span>);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;删除失败&quot;</span>);<br>        &#125;<br><br>        sqlSession.commit(); <span class="hljs-comment">// 修改数据库中的内容需要提交</span><br>        sqlSession.close(); <span class="hljs-comment">// 关闭资源</span><br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>MyBatis</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>MySQL 常用语句整理</title>
    <link href="/2021/06/22/MySQL-%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E6%95%B4%E7%90%86/"/>
    <url>/2021/06/22/MySQL-%E5%B8%B8%E7%94%A8%E8%AF%AD%E5%8F%A5%E6%95%B4%E7%90%86/</url>
    
    <content type="html"><![CDATA[<h2 id="一、数据库"><a href="#一、数据库" class="headerlink" title="一、数据库"></a>一、数据库</h2><h3 id="1-1、创建数据库"><a href="#1-1、创建数据库" class="headerlink" title="1.1、创建数据库"></a>1.1、创建数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> DATABASE 数据库名称;<br></code></pre></td></tr></table></figure><h3 id="1-2、删除数据库"><a href="#1-2、删除数据库" class="headerlink" title="1.2、删除数据库"></a>1.2、删除数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> DATABASE 数据库名;<br></code></pre></td></tr></table></figure><h3 id="1-3、选择数据库"><a href="#1-3、选择数据库" class="headerlink" title="1.3、选择数据库"></a>1.3、选择数据库</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql">USE 数据库名;<br></code></pre></td></tr></table></figure><h2 id="二、数据表"><a href="#二、数据表" class="headerlink" title="二、数据表"></a>二、数据表</h2><h3 id="2-1、创建数据表"><a href="#2-1、创建数据表" class="headerlink" title="2.1、创建数据表"></a>2.1、创建数据表</h3><p>格式一：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">create</span> <span class="hljs-keyword">table</span> 表名(<br>    列名, 数据类型<br>);<br></code></pre></td></tr></table></figure><p>格式二：</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> 表名 (<br>    属性名 数据类型 [完整约束条件],<br>    属性名 数据类型 [完整约束条件],<br>    ...<br>    ...<br>    属性名 数据类型 [完整约束条件]<br>);<br></code></pre></td></tr></table></figure><p>示例 01</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> test01 (<br>post_id <span class="hljs-type">INT</span> AUTO_INCREMENT,<br>title <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;标题&#x27;</span>,<br>author <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">40</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;用户名&#x27;</span>,<br><span class="hljs-keyword">PRIMARY</span> KEY (post_id)<br>)ENGINE<span class="hljs-operator">=</span>INNODB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></table></figure><p>示例 02（<em>注一</em>）</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> `test01` (<br>  `post_id` <span class="hljs-type">int</span> <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,<br>  `title` <span class="hljs-type">varchar</span>(<span class="hljs-number">100</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;标题&#x27;</span>,<br>  `author` <span class="hljs-type">varchar</span>(<span class="hljs-number">40</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">&#x27;用户名&#x27;</span>,<br>  <span class="hljs-keyword">PRIMARY</span> KEY (`post_id`)<br>) ENGINE<span class="hljs-operator">=</span>InnoDB <span class="hljs-keyword">DEFAULT</span> CHARSET<span class="hljs-operator">=</span>utf8;<br></code></pre></td></tr></table></figure><p>这里的主键都是最后才指定的，另一种写法是在定义字段的时候指定，示例见文末的大示例。</p><p>关于建表所需的完整约束条件可以参考下面的表</p><table><thead><tr><th>约束条件</th><th>说明</th></tr></thead><tbody><tr><td>PRIMARY KEY</td><td>标识该属性为该表的主键，可以是唯一的标识对应的元组</td></tr><tr><td>FOREIGN KEY</td><td>标识该属性为该表的外键，是与之联系某表的主键</td></tr><tr><td>NOT NULL（<em>注二</em>）</td><td>标识该属性不能为空</td></tr><tr><td>UNIQUE</td><td>标识该属性的值是唯一的</td></tr><tr><td>AUTO_INCREMENT</td><td>标识该属性的值是自动增加，这是 MySQL 的 SQL 语句的特色</td></tr><tr><td>DEFAULT</td><td>为该属性设置默认值</td></tr></tbody></table><h3 id="2-2、删除表"><a href="#2-2、删除表" class="headerlink" title="2.2、删除表"></a>2.2、删除表</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DROP</span> <span class="hljs-keyword">TABLE</span> 表名;<br></code></pre></td></tr></table></figure><h3 id="2-3、插入数据"><a href="#2-3、插入数据" class="headerlink" title="2.3、插入数据"></a>2.3、插入数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> table_name<br>( field1, field2,...fieldN )<br><span class="hljs-keyword">VALUES</span><br>( value1, value2,...valueN );<br></code></pre></td></tr></table></figure><p>这里要注意反引号和单引号的使用（双引号的用法和单引号类似，官方建议使用单引号），</p><ul><li>一般表名和列名要使用反引号。</li><li>一般字符串类型要使用单引号。</li><li>DATE 和 DATATIME 等时间日期类型也建议使用单引号。</li><li>其他数据，如 INT 类型不使用引号。</li></ul><h3 id="2-4、删除数据"><a href="#2-4、删除数据" class="headerlink" title="2.4、删除数据"></a>2.4、删除数据</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> table_name [<span class="hljs-keyword">WHERE</span> Clause];<br></code></pre></td></tr></table></figure><h2 id="三、注释的写法"><a href="#三、注释的写法" class="headerlink" title="三、注释的写法"></a>三、注释的写法</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs sql"># 注释样例<span class="hljs-number">1</span><br><span class="hljs-comment">/* 注释样例2 */</span><br><span class="hljs-comment">-- 注释样例3。注意，这种形式的注释，&#x27;--&#x27; 后面一定要加一个空格</span><br></code></pre></td></tr></table></figure><h2 id="四、一份示例"><a href="#四、一份示例" class="headerlink" title="四、一份示例"></a>四、一份示例</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs sql"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> tb_stu(<br>id <span class="hljs-type">INT</span> <span class="hljs-keyword">PRIMARY</span> KEY AUTO_INCREMENT,<br>name <span class="hljs-type">VARCHAR</span>(<span class="hljs-number">16</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span>,<br>age <span class="hljs-type">INT</span>,<br>stuno <span class="hljs-type">CHAR</span>(<span class="hljs-number">12</span>),<br>tel <span class="hljs-type">CHAR</span>(<span class="hljs-number">11</span>)<br>);<br><br># 插入语句第一种写法<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_stu(name, age, stuno) <span class="hljs-keyword">VALUES</span>(<span class="hljs-string">&#x27;张醒言&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;20190001&#x27;</span>);<br><br># 插入语句第二种写法<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_stu(id, name, age, stuno, tel) <span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;琼彤&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;20190002&#x27;</span>, <span class="hljs-string">&#x27;12841283428&#x27;</span>); # <span class="hljs-keyword">sql</span> 语句插入为 <span class="hljs-keyword">null</span>，如果属性是自增的，那么，数据库在插入时会自动插入上一个属性值的增一的值<br><br># 插入语句第三种写法<br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_stu <span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;雪宜&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;20190003&#x27;</span>, <span class="hljs-string">&#x27;12841283428&#x27;</span>);<br><br><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> tb_stu <br><span class="hljs-keyword">VALUES</span><br>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;盈掬&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;20190003&#x27;</span>, <span class="hljs-string">&#x27;12841283428&#x27;</span>),<br>(<span class="hljs-keyword">null</span>, <span class="hljs-string">&#x27;伯玉&#x27;</span>, <span class="hljs-number">20</span>, <span class="hljs-string">&#x27;20190003&#x27;</span>, <span class="hljs-string">&#x27;12841283428&#x27;</span>);<br><br><br># 删除语句<br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">5</span>;<br><br># 删除 tel 为空的条目<br><span class="hljs-keyword">DELETE</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> tel <span class="hljs-keyword">IS</span> <span class="hljs-keyword">NULL</span>;<br><br><br># 更新语句<br><span class="hljs-keyword">UPDATE</span> tb_stu <span class="hljs-keyword">SET</span> age <span class="hljs-operator">=</span> <span class="hljs-number">28</span>;<br><br><span class="hljs-keyword">UPDATE</span> tb_stu <span class="hljs-keyword">SET</span> age <span class="hljs-operator">=</span> <span class="hljs-number">26</span>, stuno <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;201912206&#x27;</span><br><span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">4</span>;<br><br><span class="hljs-keyword">UPDATE</span> tb_stu <span class="hljs-keyword">SET</span> name <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;琼肜&#x27;</span><br><span class="hljs-keyword">WHERE</span> id <span class="hljs-operator">=</span> <span class="hljs-number">2</span>;<br><br><br># 查询语句<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> tb_stu;<br><br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> age <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">26</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">28</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> age <span class="hljs-keyword">BETWEEN</span> <span class="hljs-number">26</span> <span class="hljs-keyword">AND</span> <span class="hljs-number">27</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">28</span> <span class="hljs-keyword">AND</span> tel <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;12841283428&#x27;</span>;<br><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> tb_stu <span class="hljs-keyword">WHERE</span> age <span class="hljs-operator">=</span> <span class="hljs-number">28</span> <span class="hljs-keyword">OR</span> tel <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;12841283428&#x27;</span>;<br><br># 表示别名的 <span class="hljs-keyword">AS</span> 可以省略，一般使用空格即可<br><span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;主键&#x27;</span>, name <span class="hljs-string">&#x27;姓名&#x27;</span>, stuno <span class="hljs-string">&#x27;学号&#x27;</span> <span class="hljs-keyword">FROM</span> tb_stu;<br><span class="hljs-keyword">SELECT</span> id <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;主键&#x27;</span>, name <span class="hljs-string">&#x27;姓名&#x27;</span>, stuno <span class="hljs-string">&#x27;学号&#x27;</span>, (age <span class="hljs-operator">-</span> <span class="hljs-number">10</span>) <span class="hljs-keyword">AS</span> <span class="hljs-string">&#x27;年龄&#x27;</span> <span class="hljs-keyword">FROM</span> tb_stu;<br><br># <span class="hljs-keyword">distinct</span> 关键字，表示消除重复的行<br><span class="hljs-keyword">SELECT</span> <span class="hljs-keyword">DISTINCT</span> age <span class="hljs-keyword">FROM</span> tb_stu;<br><br></code></pre></td></tr></table></figure><hr><p>注释</p><p>注一：这个是用 <code>show create table test01;</code> 的运行结果中的创建 MySQL 自己生成的表创建语句，感觉应该会比较官方。所以，表名和属性名字段也是还是用反引号给包裹起来的。</p><p>注二：关于 NOT NULL，有些人认为 MySQL 字段属性应该尽量设置为 NOT NULL。</p>]]></content>
    
    
    <categories>
      
      <category>MySQL</category>
      
    </categories>
    
    
    <tags>
      
      <tag>MySQL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于对 Spring IoC 和 DI 的理解</title>
    <link href="/2021/06/21/%E5%85%B3%E4%BA%8E%E5%AF%B9-Spring-IoC-%E5%92%8C-DI-%E7%9A%84%E7%90%86%E8%A7%A3/"/>
    <url>/2021/06/21/%E5%85%B3%E4%BA%8E%E5%AF%B9-Spring-IoC-%E5%92%8C-DI-%E7%9A%84%E7%90%86%E8%A7%A3/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本文基本是转载的博客，转载自：<a href="https://www.cnblogs.com/xdp-gacl/p/4249939.html">https://www.cnblogs.com/xdp-gacl/p/4249939.html</a></p><p>一直以来对 Spring 的控制反转（IoC，Inversion of Control）和依赖注入（DI，Dependency Injection）感到很迷惑，也零零散散看过一些资料，但还是云里雾里，而且一直苦于没有时间整理，今天终于有机会，趁着软工大二工程实训，就把这个知识点整理一下。也是因为看到了一篇非常清晰明了的讲述 IoC 和 DI 的博客，遂记录和转载一下。</p><h2 id="一、分享-Iteye-的开涛对-IoC-的精彩讲解"><a href="#一、分享-Iteye-的开涛对-IoC-的精彩讲解" class="headerlink" title="一、分享 Iteye 的开涛对 IoC 的精彩讲解"></a>一、分享 Iteye 的开涛对 IoC 的精彩讲解</h2><h3 id="1-1、IoC-是什么"><a href="#1-1、IoC-是什么" class="headerlink" title="1.1、IoC 是什么"></a>1.1、IoC 是什么</h3><p>Ioc—Inversion of Control，即“控制反转”，不是什么技术，而是一种设计思想。在 Java 开发中，IoC 意味着将你设计好的对象交给容器控制，而不是传统的在你的对象内部直接控制。如何理解好 IoC 呢？理解好 IoC 的关键是要明确“谁控制谁，控制什么，为何是反转（有反转就应该有正转了），哪些方面反转了”，那我们来深入分析一下：</p><ul><li><p>谁控制谁，控制什么：传统 Java SE 程序设计，我们直接在对象内部通过 new 进行创建对象，是程序主动去创建依赖对象；而 IoC 是有专门一个容器来创建这些对象，即由 IoC 容器来控制对 象的创建；谁控制谁？当然是 IoC 容器控制了对象；控制什么？那就是主要控制了外部资源获取（不只是对象包括比如文件等）。</p></li><li><p>为何是反转，哪些方面反转了：有反转就有正转，传统应用程序是由我们自己在对象中主动控制去直接获取依赖对象，也就是正转；而反转则是由容器来帮忙创建及注入依赖对象；为何是反转？因为由容器帮我们查找及注入依赖对象，对象只是被动的接受依赖对象，所以是反转；哪些方面反转了？依赖对象的获取被反转了。<br>  用图例说明一下，传统程序设计如图 1-1，都是主动去创建相关对象然后再组合起来：</p><p>  <img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621201122.png" alt="图 1-1 传统应用程序示意图"></p><p>  当有了 IoC&#x2F;DI 的容器后，在客户端类中不再主动去创建这些对象了，如图 1-2 所示:</p><p>  <img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621201804.png" alt="图 1-2 有 IoC/DI 容器后程序结构示意图"></p></li></ul><h3 id="1-2、IoC-能做什么"><a href="#1-2、IoC-能做什么" class="headerlink" title="1.2、IoC 能做什么"></a>1.2、IoC 能做什么</h3><p>IoC 不是一种技术，只是一种思想，一个重要的面向对象编程的法则，它能指导我们如何设计出松耦合、更优良的程序。传统应用程序都是由我们在类内部主动创建依赖对象，从而导致类与类之间高耦合，难于测试；有了 IoC 容器后，把创建和查找依赖对象的控制权交给了容器，由容器进行注入组合对象，所以对象与对象之间是松散耦合，这样也方便测试，利于功能复用，更重要的是使得程序的整个体系结构变得非常灵活。</p><p>其实 IoC 对编程带来的最大改变不是从代码上，而是从思想上，发生了“主从换位”的变化。应用程序原本是老大，要获取什么资源都是主动出击，但是在 IoC&#x2F;DI 思想中，应用程序就变成被动的了，被动的等待 IoC 容器来创建并注入它所需要的资源了。</p><p>IoC 很好的体现了面向对象设计法则之一—— 好莱坞法则：“别找我们，我们找你”；即由 IoC 容器帮对象找相应的依赖对象并注入，而不是由对象主动去找。</p><h3 id="1-3、IoC-和-DI"><a href="#1-3、IoC-和-DI" class="headerlink" title="1.3、IoC 和 DI"></a>1.3、IoC 和 DI</h3><p>DI—Dependency Injection，即“依赖注入”：组件之间依赖关系由容器在运行期决定，形象的说，即由容器动态的将某个依赖关系注入到组件之中。依赖注入的目的并非为软件系统带来更多功能，而是为了提升组件重用的频率，并为系统搭建一个灵活、可扩展的平台。通过依赖注入机制，我们只需要通过简单的配置，而无需任何代码就可指定目标需要的资源，完成自身的业务逻辑，而不需要关心具体的资源来自何处，由谁实现。</p><p>理解 DI 的关键是：“谁依赖谁，为什么需要依赖，谁注入谁，注入了什么”，那我们来深入分析一下：</p><ul><li>谁依赖谁：当然是应用程序依赖 IoC 容器；</li><li>为什么需要依赖：应用程序需要 IoC 容器来提供对象需要的外部资源；</li><li>谁注入谁：很明显是 IoC 容器注入应用程序某个对象，应用程序依赖的对象</li><li>注入了什么：就是注入了某个对象所需要的外部资源（包括对象、资源、常量数据）。</li></ul><p>IoC 和 DI 由什么关系呢？其实它们是同一个概念的不同角度描述，由于控制反转概念比较含糊（可能只是理解为容器控制对象这一个层面，很难让人想到谁来维护对象关系），所以 2004 年大师级人物 Martin Fowler 又给出了一个新的名字：“依赖注入”，相对 IoC 而言，“依赖注入”明确描述了“被注入对象依赖 IoC 容器配置依赖对象”。</p><h2 id="二、分享-Bromon-的-blog-上对-IoC-与-DI-浅显易懂的讲解"><a href="#二、分享-Bromon-的-blog-上对-IoC-与-DI-浅显易懂的讲解" class="headerlink" title="二、分享 Bromon 的 blog 上对 IoC 与 DI 浅显易懂的讲解"></a>二、分享 Bromon 的 blog 上对 IoC 与 DI 浅显易懂的讲解</h2><h3 id="2-1、IoC（控制反转）"><a href="#2-1、IoC（控制反转）" class="headerlink" title="2.1、IoC（控制反转）"></a>2.1、IoC（控制反转）</h3><p>首先想说说 IoC（Inversion of Control，控制反转）。这是 Spring 的核心，贯穿始终。所谓 IoC，对于 Spring 框架来说，就是由 Spring 来负责控制对象的生命周期和对象间的关系。这是什么意思呢，举个简单的例子，我们是如何找女朋友的？常见的情况是，我们到处去看哪里有长得漂亮身材又好的 mm，然后打听她们的兴趣爱好、qq号、电话号、ip号、iq号………，想办法认识她们，投其所好送其所要，然后嘿嘿……这个过程是复杂深奥的，我们必须自己设计和面对每个环节。传统的程序开发也是如此，在一个对象中，如果要使用另外的对象，就必须得到它（自己 new 一个，或者从 JNDI （<em>注一</em>）中查询一个），使用完之后还要将对象销毁（比如 Connection 等），对象始终会和其他的接口或类藕合起来。</p><p>那么 IoC 是如何做的呢？有点像通过婚介找女朋友，在我和女朋友之间引入了一个第三者：婚姻介绍所。婚介管理了很多男男女女的资料，我可以向婚介提出一个列表，告诉它我想找个什么样的女朋友，比如长得像李嘉欣，身材像林熙雷，唱歌像周杰伦，速度像卡洛斯，技术像齐达内之类的，然后婚介就会按照我们的要求，提供一个 mm，我们只需要去和她谈恋爱、结婚就行了。简单明了，如果婚介给我们的人选不符合要求，我们就会抛出异常。整个过程不再由我自己控制，而是有婚介这样一个类似容器的机构来控制。Spring 所倡导的开发方式就是如此，所有的类都会在 Spring 容器中登记，告诉 Spring 你是个什么东西，你需要什么东西，然后 Spring 会在系统运行到适当的时候，把你要的东西主动给你，同时也把你交给其他需要你的东西。所有的类的创建、销毁都由 Spring 来控制，也就是说控制对象生存周期的不再是引用它的对象，而是 Spring。对于某个具体的对象而言，以前是它控制其他对象，现在是所有对象都被Spring控制，所以这叫控制反转。</p><h3 id="2-3、DI（依赖注入）"><a href="#2-3、DI（依赖注入）" class="headerlink" title="2.3、DI（依赖注入）"></a>2.3、DI（依赖注入）</h3><p>IoC 的一个重点是在系统运行中，动态的向某个对象提供它所需要的其他对象。这一点是通过 DI（Dependency Injection，依赖注入）来实现的。比如对象 A 需要操作数据库，以前我们总是要在A中自己编写代码来获得一个 Connection 对象，有了 Spring 我们就只需要告诉 Spring，A 中需要一个 Connection，至于这个 Connection 怎么构造，何时构造，A 不需要知道。在系统运行时，Spring 会在适当的时候制造一个 Connection，然后像打针一样，注射到 A 当中，这样就完成了对各个对象之间关系的控制。A 需要依赖 Connection 才能正常运行，而这个 Connection 是由 Spring 注入到 A 中的，依赖注入的名字就这么来的。那么 DI 是如何实现的呢？ Java 1.3 之后一个重要特征是反射（reflection），它允许程序在运行的时候动态的生成对象、执行对象的方法、改变对象的属性，Spring 就是通过反射来实现注入的。</p><p>理解了 IoC 和 DI 的概念后，一切都将变得简单明了，剩下的工作只是在 Spring 的框架中堆积木而已。</p><h2 id="三、个人理解"><a href="#三、个人理解" class="headerlink" title="三、个人理解"></a>三、个人理解</h2><p>最后补充一下我个人的理解。关于这个 IoC，中文翻译过来时控制反转，这个“反转”二字，我觉得翻译得不好，我认为应该是翻译成转移会更好一点，因为它这个关于对象的创建并不是把控制权直接进行反转，而是转移给了 IoC 容器。</p><hr><p>注释</p><p>注一：JNDI，即 Java Naming and Directory Interface。</p>]]></content>
    
    
    <categories>
      
      <category>转载</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Spring</tag>
      
      <tag>转载</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>IDEA 使用内置 Maven 创建一个 Spring 项目</title>
    <link href="/2021/06/21/IDEA-%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%AE-Maven-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-Spring-%E9%A1%B9%E7%9B%AE/"/>
    <url>/2021/06/21/IDEA-%E4%BD%BF%E7%94%A8%E5%86%85%E7%BD%AE-Maven-%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA-Spring-%E9%A1%B9%E7%9B%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="创建-Maven-项目"><a href="#创建-Maven-项目" class="headerlink" title="创建 Maven 项目"></a>创建 Maven 项目</h2><p>首先，New Project</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621153555.png"></p><p>next，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621155045.png"></p><p>这里的 Name 是项目的名称，然后修改包名，这里的 ArtifactId 默认和项目的 Name 保持一致。</p><p>next，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621155230.png"></p><p>我这里的 3 个选项全部保持默认，这里要注意一点，这个 <code>C:\Users\用户名\.m2\setting.xml</code> 文件默认是不存在的，然后这时 IDEA 在项目中就会自动去其内置的 Maven 中寻找配置文件，其在文件中的路径默认为 <code>C:\Program Files\JetBrains\IntelliJ IDEA 2021.1.2\plugins\maven\lib\maven3\conf</code>，如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621155617.png"></p><p>然后我们添加 Maven 的阿里云镜像也是直接修改这个文件，如下，在 <code>setting.xml</code> 中添加如下代码</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">mirror</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">id</span>&gt;</span>nexus-aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">id</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">mirrorOf</span>&gt;</span>central<span class="hljs-tag">&lt;/<span class="hljs-name">mirrorOf</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">name</span>&gt;</span>Nexus aliyun<span class="hljs-tag">&lt;/<span class="hljs-name">name</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public<span class="hljs-tag">&lt;/<span class="hljs-name">url</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">mirror</span>&gt;</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621155909.png"></p><p>由于我这里的 repository 使用的默认的位置，所以我就没有配置本地的 repository。需要配置时再到网上搜索相关配置进行配置即可。</p><p>然后 finish。</p><p>这里可能会出现 <code>No archetype found in remote catalog. Defaulting to internal catalog.</code> 这样的警告，这个问题是由阿里云的仓库导致的，我在使用官方默认的仓库（需要科学上网）就不会出现这样的问题。不过，这个警告不会对项目产生什么大的影响。</p><p>我们运行一下默认的项目，得到如下的结果</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621162034.png"></p><h2 id="Spring-相关配置"><a href="#Spring-相关配置" class="headerlink" title="Spring 相关配置"></a>Spring 相关配置</h2><p>首先，去 Maven 的中央仓库（<a href="https://mvnrepository.com/">https://mvnrepository.com/</a>）</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171445.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171610.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171542.png"></p><p>然后将上面的代码框中的代码复制下来，并粘贴到 IDEA 的 pom 文件下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171739.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171838.png"></p><p>右键 main 目录，在下面新建一个 resources 目录，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621172029.png"></p><p>IDEA 有自动提示的 resources 目录，点击创建即可</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621171947.png"></p><p>然后在 resources 目录下创建一个 <code>beans.xml</code> 配置文件</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621172241.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621172402.png"></p><p>接下来我们就简单写个类测试一下。</p><p>首先写一个 Student 类</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210621172716.png"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hust.bean;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> &#123;<br><br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String tel;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(String name, <span class="hljs-type">int</span> age, String tel)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.age = age;<br>        <span class="hljs-built_in">this</span>.tel = tel;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getAge</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setAge</span><span class="hljs-params">(<span class="hljs-type">int</span> age)</span> &#123;<br>        <span class="hljs-built_in">this</span>.age = age;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getTel</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> tel;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setTel</span><span class="hljs-params">(String tel)</span> &#123;<br>        <span class="hljs-built_in">this</span>.tel = tel;<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>然后在 <code>bean.xml</code> 中增加一个 bean，如下</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=<span class="hljs-string">&quot;1.0&quot;</span> encoding=<span class="hljs-string">&quot;UTF-8&quot;</span>?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">beans</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">       <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span>&gt;</span><br>    <br>    <span class="hljs-comment">&lt;!--属性注入--&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">bean</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;zhangsan&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;com.hust.bean.Student&quot;</span> <span class="hljs-attr">scope</span>=<span class="hljs-string">&quot;prototype&quot;</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;张三&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">property</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;tel&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;18627158203&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">property</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">bean</span>&gt;</span><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">beans</span>&gt;</span><br></code></pre></td></tr></table></figure><p>最后在 App 类中进行测试</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.hust;<br><br><span class="hljs-keyword">import</span> com.hust.bean.Student;<br><span class="hljs-keyword">import</span> org.springframework.beans.factory.BeanFactory;<br><span class="hljs-keyword">import</span> org.springframework.context.support.ClassPathXmlApplicationContext;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * Hello world!</span><br><span class="hljs-comment"> *</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">App</span> <br>&#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">( String[] args )</span><br>    &#123;<br>        <span class="hljs-type">BeanFactory</span> <span class="hljs-variable">factory</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ClassPathXmlApplicationContext</span>(<span class="hljs-string">&quot;beans.xml&quot;</span>);<br>        <span class="hljs-type">Student</span> <span class="hljs-variable">student</span> <span class="hljs-operator">=</span> (Student) factory.getBean(<span class="hljs-string">&quot;zhangsan&quot;</span>);<br>        System.out.println(student.getName() + <span class="hljs-string">&quot;:&quot;</span> + student.getAge() + <span class="hljs-string">&quot;:&quot;</span> + student.getTel());<br>    &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">张三:20:18627158203</code></pre><p>到此，基本就完成了。</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
      <tag>Maven</tag>
      
      <tag>Spring</tag>
      
      <tag>大二工程实训</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>计算机相关的缩写词汇积累</title>
    <link href="/2021/06/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3%E7%9A%84%E7%BC%A9%E5%86%99%E8%AF%8D%E6%B1%87%E7%A7%AF%E7%B4%AF/"/>
    <url>/2021/06/14/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%9B%B8%E5%85%B3%E7%9A%84%E7%BC%A9%E5%86%99%E8%AF%8D%E6%B1%87%E7%A7%AF%E7%B4%AF/</url>
    
    <content type="html"><![CDATA[<h2 id="汇编相关"><a href="#汇编相关" class="headerlink" title="汇编相关"></a>汇编相关</h2><ol><li>GDT：Global Descriptor Table，全局描述符表</li><li>IDT：Interrupt Descriptor Table，中断描述符表</li><li>LDT：Local Descriptor Table，局部描述符表</li><li>TI：Table Indicator</li><li>RPL：Request Privilege Level</li></ol><h2 id="前端相关"><a href="#前端相关" class="headerlink" title="前端相关"></a>前端相关</h2><ol><li>Ajax: Asynchronous JavaScript and XML</li></ol>]]></content>
    
    
    <categories>
      
      <category>计算机</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>计算机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>8086CPU 中的物理地址</title>
    <link href="/2021/06/14/8086CPU-%E4%B8%AD%E7%9A%84%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80/"/>
    <url>/2021/06/14/8086CPU-%E4%B8%AD%E7%9A%84%E7%89%A9%E7%90%86%E5%9C%B0%E5%9D%80/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>关于 8086CPU 的物理地址，其实在上汇编语言这门课的时候，我对于这个概念是十分理解的，但是隔了一段时间之后，就忘掉了。所以，好记性不如烂键盘，还是记录一下比较好，这样一来，以后复习的时候比较方便。</p><h2 id="8086CPU-的物理地址让人感到有点奇怪的原因"><a href="#8086CPU-的物理地址让人感到有点奇怪的原因" class="headerlink" title="8086CPU 的物理地址让人感到有点奇怪的原因"></a>8086CPU 的物理地址让人感到有点奇怪的原因</h2><p>8086CPU 有 20 位地址总线，可以传送 20 位地址，达到 1MB 寻址能力（<em>注一</em>）。而 8086CPU 又是 16 位结构（<em>注二</em>），在内部一次性处理、传输、暂时存储的地址为 16 位。</p><p>而为了有效利用 20 位地址总线，8086CPU 采用了一种在内部用两个 16 位地址合成的方法来形成一个 20 位的物理地址。</p><p>物理地址的计算方法如下：</p><p><strong>物理地址 &#x3D; 段地址 × 16 + 偏移地址</strong>（<em>注三</em>）</p><h2 id="“段地址×16-偏移地址-物理地址”的本质含义"><a href="#“段地址×16-偏移地址-物理地址”的本质含义" class="headerlink" title="“段地址×16+偏移地址&#x3D;物理地址”的本质含义"></a>“段地址×16+偏移地址&#x3D;物理地址”的本质含义</h2><p>“段地址×16+偏移地址&#x3D;物理地址”的本质含义是：CPU 在访问内存时，用一个基础地址（段地址×16）和一个相对于基础地址的偏移地址相加，给出内存单元的物理地址。</p><p>更一般地说，8086CPU 的这种寻址功能是“基础地质+偏移地址&#x3D;物理地址”寻址模式的一种具体实现方案。8086CPU 中，段地址×16可看作是基础地址。</p><p>下面用两个比喻来进一步说明。</p><p>第一个比喻说明“基础地址+偏移地址&#x3D;物理地址”的思想。</p><p>比如说，学校、体育馆、图书馆同在一条笔直的单行路上，如下图，学校位于路的起点（从路的起点到学校的距离是 0 米）。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210614151821.png" alt="学校、体育馆、图书馆的位置关系"></p><p>我们可以用两种方式来描述图书馆的地址：</p><ol><li>从学校走 2826m 到图书馆。这 2826m 可以认为是图书馆的物理地址。</li><li>从学校走 2000m 到体育馆，从体育馆再走 826m 到图书馆。第一个距离 2000m，是相对于起点的基础地址，第二个距离 826m 是相对于基础地地址的偏移地址。</li></ol><p>第一种方式是直接给出物理地址 2826m，而第二种方式是用基础地址和偏移地址相加来得到物理地址的。</p><p>第二个比喻进一步说明“段地址×16+偏移地址&#x3D;物理地址”的思想。</p><p>比如有一个 4 位数</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210614152608.png"></p><p>假设有某种限制，我们只能使用 3 位数，那么，我们可以用下面这两个 3 位数来表示上面的 4 位数，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210614152621.png"></p><p>表示方法为：200（段地址）×10+826（偏移地址）&#x3D;2826（物理地址）。这和 8086CPU 表示物理地址的方法是类似的。</p><h2 id="段的概念"><a href="#段的概念" class="headerlink" title="段的概念"></a>段的概念</h2><p>我们注意到，“段地址”这个名称包含着“段”的概念。这种说法可能对一些学习者产生了误导，使人误以为内存被划分成了一个个的段，每一个段有一个段地址，实际上不是这样。</p><p>其实，内存并没有分段，段的划分来自于 CPU，由于 8086CPU 用“基础地址（段地址×16）+偏移地址&#x3D;物理地址”的方式给出内存单元的物理地址，使得我们可以用分段的方式来管理内存。如下图所示，我们可以认为：地址10000H<del>100FFH 的内存单元组成了一个段，该段的起始地址（基础地址）为 10000H，段地址为 1000H，段大小为 100H；我们也可以认为地址 10000H</del>1007FH、10080H~100FFH 的内存单元组成两个段，它们的起始地址（基础地址）分别为：10000H 和 10080H，段地址分别为：1000H 和 1008H，大小都为 80H。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210614153310.png" alt="分段"></p><p>在编程中，我们可以根据需要，将若干地址连续的内存单元看作一个段，用段地址×16定位段的起始地址（基础地址），用偏移地址定位段中的内存单元。</p><p>有两点需要注意：段地址×16必然是 16 的倍数，所以一个段的起始地址也一定是 16 的倍数；偏移地址为 16 位，16 位地址的寻址能力为 64KB，所以一个段的长度最大为 64KB。</p><hr><p>注释：</p><p>注一：这里的寻址能力是 1MB，因为 <code>$2^&#123;20&#125; = 1024 \times 1024$</code>，它可以表示 <code>$1024 \times 1024$</code> 个不同的 8 位二进制数，即一个字节（Byte），所以 20 位地址总线的寻址能力是 1MB。<br>注二：16 位结构描述了一个 CPU 具有下面几方面的结构特性</p><ul><li>运算器一次最多可以处理 16 位的数据；</li><li>寄存器的最大宽度为 16 位；</li><li>寄存器和运算器之间的通路为 16 位。<br>注三：段地址×16相当于向左移动了一位，因为这里是 16 进制。</li></ul><p>参考：《汇编语言》（王爽）</p>]]></content>
    
    
    <categories>
      
      <category>汇编语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>汇编语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>汇编中的存储单元（存储单位）</title>
    <link href="/2021/06/14/%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83%EF%BC%88%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%EF%BC%89/"/>
    <url>/2021/06/14/%E6%B1%87%E7%BC%96%E4%B8%AD%E7%9A%84%E5%AD%98%E5%82%A8%E5%8D%95%E5%85%83%EF%BC%88%E5%AD%98%E5%82%A8%E5%8D%95%E4%BD%8D%EF%BC%89/</url>
    
    <content type="html"><![CDATA[<h2 id="汇编中的单位"><a href="#汇编中的单位" class="headerlink" title="汇编中的单位"></a>汇编中的单位</h2><p>计算机的最小信息单位是 bit（比特，即一个位），也就是一个二进制位。然后，由此可以得出一下换算单位</p><ul><li>1B &#x3D; 8b，即 1 Byte &#x3D; 8 bit</li><li>1K &#x3D; 1024B</li><li>1MB &#x3D; 1024KB</li><li>1GB &#x3D; 1024MB</li><li>1TB &#x3D; 1024GB</li></ul><p>磁盘的容量单位同这里的存储单位一样，实际上以上单位是微机中常用的计量单位。</p><h2 id="其他的换算方法"><a href="#其他的换算方法" class="headerlink" title="其他的换算方法"></a>其他的换算方法</h2><p>我们有时候可以看到，1GB 会被换算成 1000 MB，这是怎么回事呢？</p><p>这就要提到另一个标准了，据知乎上用户回答，这是一个历史遗留问题，在这里表现在 G 和 M 作为国际单位制词头其规定的换算关系是 1G &#x3D; 1000M。因为早期很多设备的存储容量比较小，所以用 1000 代替 1024 的误差并不大，当时就使用 1K &#x3D; 1000B 这个换算方式了。</p><p>但是微软坚持使用 2 的整数次幂来标示存储容量，而厂家报的容量是按照 1000 这种方式来算的，所以这就造成了我们看到的容量和厂家报的容量不一致的情况（当然，格式化也会损失一些内存）。而苹果和 Linux 则是采用国际标准的 1000 这种方式来计量单位。</p><p>为了解决这种混乱的局面，1999 年 1 月，国际电工委员会（IEC）引入了“kibi-”、“mebi-”、“gibi-”等词头以及缩写符号“Ki”、“Mi”、“Gi”等来明确说明二进制乘数计数。就是说正确的写法应该是 1GiB &#x3D; 1024MiB。这个单位我们平时也应该多有见到过。</p><p>然而，由于缺少官方支持，二进制乘数词头还没有广泛被制造业者和个人采用，很多人继续在二进制领域使用国际单位制词头。</p><hr><p>参考：</p><p>1、《汇编语言》（王爽）<br>2、<a href="https://www.zhihu.com/question/20255371">https://www.zhihu.com/question/20255371</a></p>]]></content>
    
    
    <categories>
      
      <category>汇编语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>汇编语言</tag>
      
      <tag>计算机</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>PyCharm设置文件头注释和光标位置</title>
    <link href="/2021/06/12/PyCharm%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B4%E6%B3%A8%E9%87%8A%E5%92%8C%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE/"/>
    <url>/2021/06/12/PyCharm%E8%AE%BE%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B4%E6%B3%A8%E9%87%8A%E5%92%8C%E5%85%89%E6%A0%87%E4%BD%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20201127231721.png"></p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs ruby"><span class="hljs-comment"># -*- coding: utf-8 -*-</span><br><span class="hljs-comment"># <span class="hljs-doctag">@File</span>  : $&#123;NAME&#125;.py</span><br><span class="hljs-comment"># <span class="hljs-doctag">@Author</span>: FanLu</span><br><span class="hljs-comment"># <span class="hljs-doctag">@Date</span>  : $&#123;DATE&#125;</span><br><br><span class="hljs-comment">#[[$END$]]#</span><br></code></pre></td></tr></table></figure><p>上面的 <code>@Author</code> 的后面可以换上自己的名字.</p><p>注意, 一定要勾选那个 Enable Live Templates, 否则这句 <code>#[[$END$]]#</code> 设置光标的内容就无法生效.</p>]]></content>
    
    
    <categories>
      
      <category>工具</category>
      
    </categories>
    
    
    <tags>
      
      <tag>PyCharm</tag>
      
      <tag>博客园迁移</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>CMake 学习记录</title>
    <link href="/2021/06/11/CMake-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    <url>/2021/06/11/CMake-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="一份最简单的-CMakeLists"><a href="#一份最简单的-CMakeLists" class="headerlink" title="一份最简单的 CMakeLists"></a>一份最简单的 CMakeLists</h2><p>这是我在 CLion 中最长用的一种配置，其实也就是原始配置。在现阶段，顶天了也就是多 add 几个 executable，所以目前先给我这个 CMakeLists 加上注释，因为今天我我 <code>add_executable()</code> 都不会用了，我淦。</p><p>这里补充一下，<code>#</code> 及后面的内容代表注释。</p><figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs scss"># CMake 最低版本号要求<br><span class="hljs-built_in">cmake_minimum_required</span>(VERSION <span class="hljs-number">3.19</span>)<br><br># 项目信息<br><span class="hljs-built_in">project</span>(LinuxCLearning C)<br><br># 设定 C 的标准<br><span class="hljs-built_in">set</span>(CMAKE_C_STANDARD <span class="hljs-number">99</span>)<br><br># 执行生成目标<br><span class="hljs-built_in">add_executable</span>(LinuxCLearning main.c)<br><span class="hljs-built_in">add_executable</span>(draft01 draft01.c)<br></code></pre></td></tr></table></figure><p>下面对上面的几个命令作具体说明。</p><ol><li><code>cmake_minimum_required</code>: 指定运行此配置文件所需的 CMake 的最低版本；</li><li><code>project</code>: 参数值是 <code>LinuxCLearning C</code>，表明该项目的名称是 <code>LinuxCLearning</code>，并且明确了项目的语言是 C 语言；</li><li><code>set</code>: 第一个参数是 CMake 的自带的用来指定 C 标准的变量，第二个参数就是具体的 C 标准；</li><li><code>add_executable</code>: 第一个参数的作用是指定生成的可执行文件的名称，第二个参数是待编译的源文件。</li></ol><p>我这里主要的需求其实还是将当前目录下的多个 C 源文件编译成可执行文件，所以 <code>add_executable</code> 用得比较多一点。</p><h2 id="命令指南"><a href="#命令指南" class="headerlink" title="命令指南"></a>命令指南</h2><p>这里秉持即用即查的理念，用到时再查，再记录，点到为止。</p><hr><p>参考：</p><p>1、<a href="https://zhuanlan.zhihu.com/p/267803605">https://zhuanlan.zhihu.com/p/267803605</a><br>2、官方帮助手册：<a href="https://cmake.org/cmake/help/v3.19/">https://cmake.org/cmake/help/v3.19/</a></p>]]></content>
    
    
    <categories>
      
      <category>C 语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>C 语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>GCC 常用命令行选项</title>
    <link href="/2021/06/10/GCC-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9/"/>
    <url>/2021/06/10/GCC-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E9%80%89%E9%A1%B9/</url>
    
    <content type="html"><![CDATA[<p><code>-E</code>: 在预处理操作(<em>注一</em>)之后停止之后的操作；不会运行接下来的正确编译阶段。输出的格式是预处理之后的源码，它们将会被输出到标准输出（这里是控制台）中。输入不需要预处理的文件将会被忽视。</p><p><code>-Wall</code>: 这将会开启关于用户认为有问题的一些结构的所有警告，并且它们是很容易避免的（或者去修改以便阻止警告），即使与宏相结合。</p><hr><p>参考：《gcc.pdf》，即 GCC 官方文档（这里是 GCC 11.1 版本的手册）。</p><p>注释：</p><p>注一：编译最多可涉及四个阶段：预处理、正确编译、汇编和链接。</p>]]></content>
    
    
    <categories>
      
      <category>C 语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>C 语言</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows 安装 MinGW-w64</title>
    <link href="/2021/06/10/Windows-%E5%AE%89%E8%A3%85-MinGW-w64/"/>
    <url>/2021/06/10/Windows-%E5%AE%89%E8%A3%85-MinGW-w64/</url>
    
    <content type="html"><![CDATA[<h2 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h2><p>下载网址为：<a href="http://mingw-w64.org/doku.php/download/mingw-builds">http://mingw-w64.org/doku.php/download/mingw-builds</a></p><p>然后点击 Sourceforge 进行下载</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610200242.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610200400.png"></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>双击刚刚的文件进行安装</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610200504.png"></p><p>然后 Next</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610200922.png"></p><p>这里 Version 选择最新版本即可。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610201008.png"></p><p>这里因为我的电脑是 64 位，所以选择 <code>x86_64</code>，而 <code>i686</code> 是 32 位的。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610202214.png"></p><p>这里的 Threads 我选择了 posix 接口，即可移植的类 Unix 接口。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610201843.png"></p><p>这里的异常处理机制我选择的是 seh，它的性能是比较好的。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610202133.png"></p><p>最后一个下拉框只有一个选项，所以我们直接下一步即可。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610202320.png"></p><p>安装路径这里我直接选择默认。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610202634.png"></p><p>由于网速的原因，我这里实在是下不动，所以就选择了另外一种下载方式，直接到 <a href="https://sourceforge.net/projects/mingw-w64/files/">https://sourceforge.net/projects/mingw-w64/files/</a> 下载离线文件</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610202919.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610203318.png"></p><p>这个和刚刚在线安装时选择的版本是一样的。</p><p>将刚刚下载的文件解压到 Program Files 文件夹下，解压后的文件夹是 mingw64，这个也可以放在其他目录下。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610203227.png"></p><p>然后将该文件夹下的 bin 目录的路径添加到系统环境变量中的 Path 中去，如下图</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610203549.png"></p><p>然后输入以下命令，检验是否安装成功</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">gcc -v<br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210610203804.png"></p><p>到这里就安装成功了。</p><p>2021.11.30 更新：</p><p>建议 mingw 版本换成如下的版本：</p><p><a href="https://winlibs.com/">下载网址</a></p><p><img src="https://i.imgur.com/JCHDxRf.png"></p><p><img src="https://i.imgur.com/fdgYOO1.png"></p><p><strong>因为</strong>原来的的在 sourceforge 上下载的 mingw 版本中的 gdb 的版本是 gdb 8.1.0，<strong>此版本有bug！</strong> 目前是因为 <code>finish</code> 命令会直接退出 gdb。</p><hr><p>参考：</p><p>1、<a href="https://www.jianshu.com/p/d66c2f2e3537">https://www.jianshu.com/p/d66c2f2e3537</a><br>2、<a href="https://stackoverflow.com/questions/67574925/update-gdb-version-on-windows-10">https://stackoverflow.com/questions/67574925/update-gdb-version-on-windows-10</a><br>3、<a href="https://stackoverflow.com/questions/50654681/gdb-quits-when-running-the-finish-command">https://stackoverflow.com/questions/50654681/gdb-quits-when-running-the-finish-command</a></p>]]></content>
    
    
    <categories>
      
      <category>C 语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>C 语言</tag>
      
      <tag>软件安装</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>《一站式学习C编程》读书笔记</title>
    <link href="/2021/06/09/%E3%80%8A%E4%B8%80%E7%AB%99%E5%BC%8F%E5%AD%A6%E4%B9%A0C%E7%BC%96%E7%A8%8B%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/"/>
    <url>/2021/06/09/%E3%80%8A%E4%B8%80%E7%AB%99%E5%BC%8F%E5%AD%A6%E4%B9%A0C%E7%BC%96%E7%A8%8B%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="16-2-CPU"><a href="#16-2-CPU" class="headerlink" title="16.2 CPU"></a>16.2 CPU</h3><p>原书内容摘录如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210609211227.png"></p><blockquote><p>3.执行指令，读内存，取上来的数是3，保存到eax寄存器。注意，地址0x804a01c～0x804a01f里存储的四个字节不能按地址从低到高的顺序看成0x03000000，而要按地址从高到低的顺序看成0x00000003。也就是说，对于多字节的整数类型，低地址保存的是整数的低位，这称为小端（Little Endian）字节序（ByteOrder）。x86平台是小端字节序的，而另外一些平台规定低地址保存整数的高位，称为大端（Big Endian）字节序。注意上图只画了前三步，剩下的步骤读者可以自己画图理解。</p></blockquote><p>我这里主要是想学习大端序和小端序这个知识点，然后在这里发现此知识点，但是，这里原书说的地址 0x804a01c～0x804a01f 里存储的四个字节按小端序取出来是 0x00000003，我一开始没有理解，然后，想了一段时间，发现它这每一个地址（比如 0x804a01c）中存储的都是一个<strong>字节</strong>，也就是一个<strong>两位 16 进制的数</strong>，对于图中 0x804a01c～0x804a01f 地址存储的数，我们要很自然地想到它省略了高位的 0！也即 0x804a01c～0x804a01f 地址存储的数依次为 03、00、00、00。这样以来，才合理嘛。</p><h3 id="20-1-预处理的步骤"><a href="#20-1-预处理的步骤" class="headerlink" title="20.1 预处理的步骤"></a>20.1 预处理的步骤</h3><p>这里有一个语句</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> STR <span class="hljs-string">&quot;hello, &quot;</span>\</span><br><span class="hljs-meta">                <span class="hljs-string">&quot;world&quot;</span></span><br></code></pre></td></tr></table></figure><p>这条语句经过预处理之后为</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> STR <span class="hljs-string">&quot;hello, &quot;</span>    <span class="hljs-string">&quot;world&quot;</span></span><br></code></pre></td></tr></table></figure><p>然后我疑惑的点在于之后它有一个语句</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(STR);<br></code></pre></td></tr></table></figure><p>这条语句是和下面的语句等价的</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello, &quot;</span>    <span class="hljs-string">&quot;world&quot;</span>);<br></code></pre></td></tr></table></figure><p>而上面这条语句经过测试，又是和下面这条语句是等价的</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;hello, world&quot;</span>);<br></code></pre></td></tr></table></figure><p>然后我又测试了一下 Python，发现它也是如此，就是当两个字符串连接在一起（中间有若干个空格），程序在执行时会自动把它们拼接称一个字符串。有点神奇。</p><p>然后我再继续往下读，发现，原来这是预处理做的事情。这一下子就豁然开朗了。同时，我认为，除了 C 和 Python，可能很多其他的语言也是有这个特性的。</p><p>关于 Python 这个字符串的特性，更多的还可以参考知乎这篇博客：<a href="https://zhuanlan.zhihu.com/p/43760216">https://zhuanlan.zhihu.com/p/43760216</a>。</p><h3 id="20-2-宏定义"><a href="#20-2-宏定义" class="headerlink" title="20.2 宏定义"></a>20.2 宏定义</h3><p>这一节作者提了一个问题，就是示例代码 20.1 中函数的时间复杂度是多少。</p><p>代码如下</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-meta">#<span class="hljs-keyword">define</span> MAX(a, b) ((a) &gt; (b) ? (a) : (b))</span><br><br><span class="hljs-type">int</span> a[] = &#123;<span class="hljs-number">15</span>, <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">8</span>, <span class="hljs-number">7</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>&#125;;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">max</span><span class="hljs-params">(<span class="hljs-type">int</span> n)</span><br>&#123;<br>    <span class="hljs-keyword">return</span> n == <span class="hljs-number">0</span> ? a[<span class="hljs-number">0</span>] : MAX(a[n], max(n - <span class="hljs-number">1</span>));<br>&#125;<br><br><span class="hljs-type">int</span> <span class="hljs-title function_">main</span><span class="hljs-params">(<span class="hljs-type">void</span> )</span><br>&#123;<br>    max(<span class="hljs-number">9</span>);<br>    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure><p>这里涉及到宏展开，我们可以先展开然后再分析，经分析，可得如下递推式</p><p>$$<br>T(n) &#x3D; 2T(n - 1) + O(1)<br>$$</p><p>如此，根据此式即可求得时间复杂度了。</p>]]></content>
    
    
    <categories>
      
      <category>读书笔记</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>读书笔记</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我的幡然醒悟的编程知识误区</title>
    <link href="/2021/06/09/%E6%88%91%E7%9A%84%E5%B9%A1%E7%84%B6%E9%86%92%E6%82%9F%E7%9A%84%E7%BC%96%E7%A8%8B%E7%9F%A5%E8%AF%86%E8%AF%AF%E5%8C%BA/"/>
    <url>/2021/06/09/%E6%88%91%E7%9A%84%E5%B9%A1%E7%84%B6%E9%86%92%E6%82%9F%E7%9A%84%E7%BC%96%E7%A8%8B%E7%9F%A5%E8%AF%86%E8%AF%AF%E5%8C%BA/</url>
    
    <content type="html"><![CDATA[<h2 id="汇编"><a href="#汇编" class="headerlink" title="汇编"></a>汇编</h2><h3 id="关于-16-进制"><a href="#关于-16-进制" class="headerlink" title="关于 16 进制"></a>关于 16 进制</h3><p>16 进制的一个数字位（digit）对应的是半个字节，因为 16 进制的一个位相当于 2 进制的 4 个位，而一个字节是 8 位。</p>]]></content>
    
    
    <categories>
      
      <category>小知识</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>小知识</tag>
      
      <tag>反省</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>80X86 汇编语言之地址表达式中的一些特殊算符</title>
    <link href="/2021/06/09/80X86-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%9C%B0%E5%9D%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%AE%8A%E7%AE%97%E7%AC%A6/"/>
    <url>/2021/06/09/80X86-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B9%8B%E5%9C%B0%E5%9D%80%E8%A1%A8%E8%BE%BE%E5%BC%8F%E4%B8%AD%E7%9A%84%E4%B8%80%E4%BA%9B%E7%89%B9%E6%AE%8A%E7%AE%97%E7%AC%A6/</url>
    
    <content type="html"><![CDATA[<h2 id="1、属性定义运算符"><a href="#1、属性定义运算符" class="headerlink" title="1、属性定义运算符"></a>1、属性定义运算符</h2><h3 id="1-1、类型运算符-PTR"><a href="#1-1、类型运算符-PTR" class="headerlink" title="1.1、类型运算符 PTR"></a>1.1、类型运算符 PTR</h3><p>PTR 即 PoinTeR。</p><p>使用格式：<code>类型  PTR  地址表达式</code></p><p>功能：指明紧跟其后的地址表达式的类型属性，但保持它原来的段属性和偏移地址属性不变。</p><p>根据地址表达式的不同值，类型可以是 BYTE、WORD、DWORD、FWORD、NEAR、FAR 等。</p><p>为了能将源程序中的机器指令语句正确翻译成目标代码，汇编程序要求操作数地址的类型非常明确。对大多数双操作数指令，还要求源、目的地址的类型一致，即同时为字节类型、字类型或双字类型， 否则， 在汇编时就会因为类型不明确或类型不一致而出错。为了避免这些语法错误， 就必须分清何谓类型明确， 何谓不明确（或说模糊）， 怎样使模糊的类型变为明确， 怎样使类型不一致的变为一致， 下面分别进行说明。</p><p>由于寄存器明显地分为 8 位、16 位和 32 位，如果操作数在寄存器中，说明操作数的类型是相当明确的。例如：<code>MOV AL, BL</code> 为正确语句，因为语句中的源、目的地址类型明确且一致。用数据定义语句定义的变量，可根据所使用的伪指令 DB，DW，DD… 确定出变量的类型。因此，当采用直接寻址方式时，类型也是相当明确的。但是，语句 <code>MOV [SI], 100</code> 是错误语句，因为源操作数是立即操作数，没有类型，而 OPD 的类型是模糊的。它采用的寄存器间接方式只指出了数据存储单元的偏移地址，却无法指出它的类型， 汇编程序也就无法确定是将立即操作数 100 送入 SI 所指的字节单元、字单元，还是双字单元。除此以外，还有以变址、基址加变址等方式寻找操作数时，若表达式中没有变量或标号，则其地<br>址类型也是模糊的。</p><p>汇编程序规定：由于单操作数指令只指定一个操作数地址，它的类型必须非常明确。而对双操作数指令，如果 OPS、OPD 的类型均明确，那么它们的类型必须一致；如果一个地址类型明确，一个地址类型模糊（或没有类型），汇编程序则取明确的那一个作为源和目的两操作数地址共同的类型。</p><p>类型运算符 PTR 主要用于以下情况。</p><p>① 使语句中类型模糊的操作数地址变得明确。例如 <code>MOV [SI], 100</code> 可改正为</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asm">MOV WORD PTR [SI], 100<br></code></pre></td></tr></table></figure><p>② 可用来临时改变某一操作数地址的类型，使得类型不一致的两地址变为一致。</p><p>举例：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asm">.386<br>DATA  SEGMENT  USE16<br>NUM   DB    11H,22H,33H,44H<br>LEN   EQU   LEN-NUM<br><br>DATA  ENDS<br>...<br>      MOV   EAX, DWORD PTR NUM  ; 临时改变 NUM 为双字类型，(NUM) = 44332211H<br></code></pre></td></tr></table></figure><p>说明：<br>a. PTR 临时赋予地址表达式的新类型只能在本语句有效。<br>b. 不带方括号的寄存器符号不是地址表达式，因此，不能用 PTR 改变寄存器的类型，例如，以下语句为错误语句：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs asm">MOV  AL, BYTE  PTR  SI<br></code></pre></td></tr></table></figure><p>③ PTR 运算符还可以与 EQU 或等号“&#x3D;”等伪指令连用，用来将同一存储区地址用不同类型的变量或标号来表示。</p><h3 id="1-2、定义类型运算符-THIS"><a href="#1-2、定义类型运算符-THIS" class="headerlink" title="1.2、定义类型运算符 THIS"></a>1.2、定义类型运算符 THIS</h3><p>运算符 THIS 与 PTR 有类似功能，即指定某个变量、标号或地址表达式类型，但在具体用法上又有区别。</p><p>使用格式：<code>THIS  类型</code></p><p>功能：指定下一个能分配的存储单元（也称当前存储单元）的类型。往往与伪指令 EQU 或“&#x3D;”等连用，为当前存储单元定义一个指定类型的变量与标号。</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs asm">DATA    SEGMENT     USE16<br>B       EQU     THIS    WORD<br>A       DD      44332211H<br>BB      EQU     THIS    BYTE<br>        DW      0FFFFH<br>CC      EQU     BYTE    PTR     A   ; 这里 (CC) 应该为 11H<br>DATA    ENDS<br></code></pre></td></tr></table></figure><p>在该例中，第一个语句是使用运算符 THIS 将紧跟它下面的一个双字类型变量 A 重新定义为字类型，命名为 B，而第五个语句是使用运算符 PTR 将双字类型的变量 A 重新定义为字节类型，并命名为 C。变量 B、C 与变量 A 具有相同的段属性和偏移地址属性。第三个语句是使用 THIS 将紧跟它下面的一个字存储单元重新定义为字节类型，命名为 BB。</p><p>通过此例可看出 THIS 与 PTR 用法上的区别：带 THIS 的语句一定要放在定义存储单元语句的前面且不要求该语句一定有变量名（或标号）；带 PTR 的语句可放在任意位置，因此，它只能将指定名字的存储区重新定义为新类型。</p><p>另外，THIS 不能像 PTR 那样临时改变地址表达式的类型。</p><p>THIS 运算符常常用来定义远标号，这在模块化程序设计中是经常要用到的。</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asm">BEGIN   EQU    THIS    FAR     ; 定义远标号 BEGIN<br>        MOV    CH, BL          ; BEGIN 实际上为该语句的标号<br>NEXT:   MOV    AL, [SI]        ; 定义近标号 NEXT<br></code></pre></td></tr></table></figure><hr><p>参考：《80X86汇编程序设计》（王元珍）</p>]]></content>
    
    
    <categories>
      
      <category>汇编语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>汇编语言</tag>
      
      <tag>masm</tag>
      
      <tag>未竟</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>80X86 汇编语言之伪指令语句</title>
    <link href="/2021/06/09/80X86-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BC%AA%E6%8C%87%E4%BB%A4%E8%AF%AD%E5%8F%A5/"/>
    <url>/2021/06/09/80X86-%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E4%B9%8B%E4%BC%AA%E6%8C%87%E4%BB%A4%E8%AF%AD%E5%8F%A5/</url>
    
    <content type="html"><![CDATA[<h2 id="1、处理器选择伪指令"><a href="#1、处理器选择伪指令" class="headerlink" title="1、处理器选择伪指令"></a>1、处理器选择伪指令</h2><h2 id="2、数据定义伪指令"><a href="#2、数据定义伪指令" class="headerlink" title="2、数据定义伪指令"></a>2、数据定义伪指令</h2><h2 id="3、符号定义伪指令"><a href="#3、符号定义伪指令" class="headerlink" title="3、符号定义伪指令"></a>3、符号定义伪指令</h2><h3 id="3-1、等价伪指令"><a href="#3-1、等价伪指令" class="headerlink" title="3.1、等价伪指令"></a>3.1、等价伪指令</h3><p>语句格式：<code>符号名  EQU  表达式</code></p><p>功能：为常量、表达式及其他各种符号定义一个等价的符号名，但不申请分配存储单元（在该语句中，符号名一定不可省）。</p><p><code>EQU</code> 伪指令用法较广泛，下面分别进行说明。</p><p>① 为常量定义一个符号名，以便在程序中使用符号来表示常量，这就是符号常量。</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs asm">A  EQU  5<br>B  EQU  A * 3 + 2       ; 即 B = 17<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs asm">AA  EQU  50<br>...<br>MOV AX,  AA     ; AA 为立即数。该语句执行后，(AX) = 50<br></code></pre></td></tr></table></figure><p>使用符号常量可使程序简单明了，可读性强。如果将符号常量作为程序的参数，可方便地实现参数的修改，增强程序的通用性。</p><p>② EQU 与特殊运算符 PTR 或 THIS 连用，可以给变量或标号定义新的类型属性并重新命名，但其段属性和偏移地址属性不变。</p><p>③ 利用 EQU 命令可以为较复杂的表达式及源程序中的任何符号，如指令助记符、寄存器名、变量名、标号、段名、组名、宏定义名等定义一个替换名。在程序中，使用新替换名的作用与使用原来的表达式或符号名的作用完全等价。</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs asm">...<br>SUBC    EQU     SBB<br>COUNT   EQU     DEC<br>ARR     EQU     BYTE PTR    [SI]<br>...<br>        SUBC    DX, CX      ; 该语句与“SBB DX, CX”等价<br>        CMP     ARR, 0      ; 该语句与“CMP BYTE PTR [SI], 0”等价<br>        COUNT   CX          ; 该语句与“DEC CX” 等价<br></code></pre></td></tr></table></figure><p>注意：使用 EQU 语句定义的符号不得与本程序中的其他符号名同名。另外，EQU 语句不能重新定义，即在同一个源程序中用 EQU　语句定义的符号不能再赋不同的值。<strong>这里要注意与下面的“&#x3D;”区分</strong>。</p><h3 id="3-2、等号伪指令"><a href="#3-2、等号伪指令" class="headerlink" title="3.2、等号伪指令"></a>3.2、等号伪指令</h3><p>语句格式：<code>符号名 = 表达式</code></p><p>功能：与 EQU 语句类似，不同的是等号语句能对所定义的符号名再重新定义。当使用等号语句连续地定义同一符号名时，以最后一次定义的值为准。</p><p>例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs asm">...<br>A = 5<br>    MOV   AX, A     ; 5 赋给 AX<br>    ...<br>A = A - 10<br>    MOV   BX, A     ; 0FFFBH 赋给 BX<br>A = 10H<br>A = 20H<br>    MOV   CX, A     ; 20H 赋给 CX<br></code></pre></td></tr></table></figure><hr><p>参考：《80X86汇编程序设计》（王元珍）</p>]]></content>
    
    
    <categories>
      
      <category>汇编语言</category>
      
    </categories>
    
    
    <tags>
      
      <tag>汇编语言</tag>
      
      <tag>masm</tag>
      
      <tag>未竟</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>设计模式之迭代器模式</title>
    <link href="/2021/06/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/"/>
    <url>/2021/06/07/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B9%8B%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<h2 id="迭代器模式的定义"><a href="#迭代器模式的定义" class="headerlink" title="迭代器模式的定义"></a>迭代器模式的定义</h2><blockquote><p>Provide a way to access the elements of an aggregate object sequentially without exposing its underlying representation.</p></blockquote><p>提供一种方法顺序地访问一组组合对象（一个容器）中的各个元素，而又不需要暴露该对象的内部细节。</p><h2 id="迭代器模式的设计思想"><a href="#迭代器模式的设计思想" class="headerlink" title="迭代器模式的设计思想"></a>迭代器模式的设计思想</h2><p>迭代器模式也称为迭代模式。迭代器其实就是一个指向容器中当前元素的指针，这个指针可以返回当前所指向的元素，可以移到下一个元素的位置，通过这个指针可以遍历容器中的所有元素。迭代器一般至少有以下两种方法</p><ul><li><code>current()</code>: 获取当前所指向的元素</li><li><code>next()</code>: 将指针移至下一个元素</li></ul><p>这是最基本的两个方法，有了这两个方法，就可以从前往后地遍历各个元素。我们可以增加一些方法，比如实现从后往前遍历。一些更为丰富的迭代器功能如下</p><ul><li><code>toBegin()</code>: 将指针移至起始的位置</li><li><code>toEnd()</code>: 将指针移至结尾的位置</li><li><code>current()</code>: 获取当前所指向的元素</li><li><code>next()</code>: 将指针移至下一个元素</li><li><code>previous()</code>: 将指针移至上一个元素</li></ul><h2 id="迭代器模式的抽象模型"><a href="#迭代器模式的抽象模型" class="headerlink" title="迭代器模式的抽象模型"></a>迭代器模式的抽象模型</h2><h3 id="代码框架"><a href="#代码框架" class="headerlink" title="代码框架"></a>代码框架</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">BaseIterator</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;迭代器&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, data</span>):<br>        self.__data = data<br>        self.toBegin()<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">toBegin</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;将指针移至起始位置&quot;&quot;&quot;</span><br>        self.__curIdx = -<span class="hljs-number">1</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">toEnd</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;将指针移至结尾位置&quot;&quot;&quot;</span><br>        self.__curIdx = <span class="hljs-built_in">len</span>(self.__data)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">next</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;移动至下一个元素&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> (self.__curIdx &lt; <span class="hljs-built_in">len</span>(self.__data) - <span class="hljs-number">1</span>):<br>            self.__curIdx += <span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">previous</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;移动至上一个元素&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">if</span> (self.__curIdx &gt; <span class="hljs-number">0</span>):<br>            self.__curIdx -= <span class="hljs-number">1</span><br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">current</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-string">&quot;&quot;&quot;获取当前的元素&quot;&quot;&quot;</span><br>        <span class="hljs-keyword">return</span> self.__data[self.__curIdx] <span class="hljs-keyword">if</span> (self.__curIdx &lt; <span class="hljs-built_in">len</span>(self.__data) <span class="hljs-keyword">and</span> self.__curIdx &gt;= <span class="hljs-number">0</span>) <span class="hljs-keyword">else</span> <span class="hljs-literal">None</span><br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">testBaseIterator</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;从前往后遍历:&quot;</span>)<br>    iterator = BaseIterator(<span class="hljs-built_in">range</span>(<span class="hljs-number">0</span>, <span class="hljs-number">10</span>))<br>    <span class="hljs-keyword">while</span> (iterator.<span class="hljs-built_in">next</span>()):<br>        customer = iterator.current()<br>        <span class="hljs-built_in">print</span>(customer, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;从后往前遍历:&quot;</span>)<br>    iterator.toEnd()<br>    <span class="hljs-keyword">while</span> (iterator.previous()):<br>        customer = iterator.current()<br>        <span class="hljs-built_in">print</span>(customer, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    testBaseIterator()<br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">从前往后遍历:0123456789从后往前遍历:9876543210</code></pre><h3 id="Python-中的迭代器"><a href="#Python-中的迭代器" class="headerlink" title="Python 中的迭代器"></a>Python 中的迭代器</h3><h4 id="Iterable"><a href="#Iterable" class="headerlink" title="Iterable"></a>Iterable</h4><p>可以直接作用于 for 循环的对象统称为可迭代对象(Iterable)，它们有如下两种类型</p><ol><li>集合数据类型，如 list、tuple、dict、set、str 等</li><li>生成器(Generator)，包括 () 语法定义的生成器和带 yield 的 generator 函数</li></ol><p>Iterable 对象的代码示例如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 方法一：使用 () 定义生成器</span><br>gen = (x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br><br><span class="hljs-comment"># 方法二：使用 yield 定义 generator 函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">maxNum</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;斐波那契数列的生成器&quot;&quot;&quot;</span><br>    a = b = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(maxNum):<br>        <span class="hljs-keyword">yield</span> a<br>        a, b = b, a + b<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">testIterable</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;方法一，0~9 的平方数：&quot;</span>)<br>    <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> gen:<br>        <span class="hljs-built_in">print</span>(e, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;方法二，斐波那契数列：&quot;</span>)<br>    fib = fibonacci(<span class="hljs-number">10</span>)<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> fib:<br>        <span class="hljs-built_in">print</span>(n, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;内置容器的 for 循环：&quot;</span>)<br>    arr = [x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>)]<br>    <span class="hljs-keyword">for</span> e <span class="hljs-keyword">in</span> arr:<br>        <span class="hljs-built_in">print</span>(e, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br>    <span class="hljs-built_in">print</span>()<br><br>    <span class="hljs-built_in">print</span>()<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(gen))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(fib))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">type</span>(arr))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    testIterable()<br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">内置容器的 for 循环：0149162536496481&lt;class &#39;generator&#39;&gt;&lt;class &#39;generator&#39;&gt;&lt;class &#39;list&#39;&gt;</code></pre><p>关于生成器，在《流畅的 Python》中有这样的描述</p><blockquote><p>Python 2.2（2001年）加入了 yield 关建字。这个关建字用于构建生成器(generator)，其作用与迭代器一样。<br>所有生成器都是迭代器，因为生成器完全实现了迭代器接口。不过，根据《设计模式：可复用面向对象软件的基础》一书的定义，迭代器用于从集合中取出元素；而生成器用于“凭空”生成元素。通过斐波纳契数列能很好地说明二者之间的区别：斐波纳契数列中的数有无穷个，在一个集合中放不下。不过要知道，在 Python 社区中，大多数时候都把<strong>迭代器</strong>和<strong>生成器</strong>视作同一概念。</p></blockquote><h4 id="Iterator"><a href="#Iterator" class="headerlink" title="Iterator"></a>Iterator</h4><p>生成器(Generator)不但可以作用于 for 循环，还可以被 next() 函数不断调用并返回下一个值，直到最后抛出 StopIteration 错误，表示无法继续返回下一个值。</p><p>可以被 next() 函数调用并不断返回下一个值的对象称为**迭代器(Iterator)**。</p><p>我们可以使用 <code>isinstance()</code> 来判断一个对象是否为 Iterable 对象或 Iterator 对象，示例代码如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 方法一：使用 () 定义生成器</span><br>gen = (x * x <span class="hljs-keyword">for</span> x <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">10</span>))<br><br><span class="hljs-comment"># 方法二：使用 yield 定义 generator 函数</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fibonacci</span>(<span class="hljs-params">maxNum</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;斐波那契数列的生成器&quot;&quot;&quot;</span><br>    a = b = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(maxNum):<br>        <span class="hljs-keyword">yield</span> a<br>        a, b = b, a + b<br><br><span class="hljs-keyword">from</span> collections.abc <span class="hljs-keyword">import</span> Iterable, Iterator<br><span class="hljs-comment"># 引入 Iterable 和 Iterator</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">testIsIterator</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;是否为 Iterable 对象：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>([], Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(&#123;&#125;, Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-string">&quot;string&quot;</span>, Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(gen, Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(fibonacci(<span class="hljs-number">10</span>), Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;是否为 Iterator 对象：&quot;</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>([], Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(&#123;&#125;, Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>((<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>), Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-built_in">set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]), Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(<span class="hljs-string">&quot;string&quot;</span>, Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(gen, Iterator))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(fibonacci(<span class="hljs-number">10</span>), Iterator))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    testIsIterator()<br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">是否为 Iterable 对象：TrueTrueTrueTrueTrueTrueTrue是否为 Iterator 对象：FalseFalseFalseFalseFalseTrueTrue</code></pre><h4 id="Iterator-和-Iterable-的区别"><a href="#Iterator-和-Iterable-的区别" class="headerlink" title="Iterator 和 Iterable 的区别"></a>Iterator 和 Iterable 的区别</h4><p>Iterator 对象可以被 next() 函数不断调用并返回下一个值，直到最后抛出 StopIteration 错误，表示无法继续返回下一个值。</p><p>Iterable 对象不能被 next() 函数调用，可以用 <code>iter()</code> 函数将 Iterable 对象转成 Iterator 对象，示例代码如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">def</span> <span class="hljs-title function_">testNextItem</span>():<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;将 Iterable 对象转成 Iterator 对象：&quot;</span>)<br>    l = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>    iterL = <span class="hljs-built_in">iter</span>(l)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterL))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterL))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(iterL))<br><br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&quot;next() 函数遍历迭代器元素：&quot;</span>)<br>    fib = fibonacci(<span class="hljs-number">4</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(fib))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(fib))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(fib))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(fib))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">next</span>(fib))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    testNextItem()<br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">将 Iterable 对象转成 Iterator 对象：123next() 函数遍历迭代器元素：1123Traceback (most recent call last):File &quot;C:/Users/17309/PycharmProjects/DesignPatterns/iterator/iterable.py&quot;, line 98, in &lt;module&gt;    testNextItem()File &quot;C:/Users/17309/PycharmProjects/DesignPatterns/iterator/iterable.py&quot;, line 68, in testNextItem    print(next(fib))StopIteration</code></pre><h4 id="使自定义的类具有-Iterable-或-Iterator-属性"><a href="#使自定义的类具有-Iterable-或-Iterator-属性" class="headerlink" title="使自定义的类具有 Iterable 或 Iterator 属性"></a>使自定义的类具有 Iterable 或 Iterator 属性</h4><p>要使自定义的类具有 Iterable 属性，需要实现 <code>__iter__</code> 方法。</p><p>要使自定义的类具有 Iterator 属性，需要实现 <code>__iter__</code> 和 <code>__next__</code> 方法，示例代码如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberSequence</span>:<br>    <span class="hljs-string">&quot;&quot;&quot;生成一个间隔为 step 的数字序列&quot;&quot;&quot;</span><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__init__</span>(<span class="hljs-params">self, init, step, <span class="hljs-built_in">max</span> = <span class="hljs-number">100</span></span>):<br>        self.__data = init<br>        self.__step = step<br>        self.__<span class="hljs-built_in">max</span> = <span class="hljs-built_in">max</span><br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__iter__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">return</span> self<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">__next__</span>(<span class="hljs-params">self</span>):<br>        <span class="hljs-keyword">if</span> (self.__data &lt; self.__<span class="hljs-built_in">max</span>):<br>            tmp = self.__data<br>            self.__data += self.__step<br>            <span class="hljs-keyword">return</span> tmp<br>        <span class="hljs-keyword">else</span>:<br>            <span class="hljs-keyword">raise</span> StopIteration<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">testNumberSequence</span>():<br>    numSeq = NumberSequence(<span class="hljs-number">0</span>, <span class="hljs-number">5</span>, <span class="hljs-number">20</span>)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(numSeq, Iterable))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-built_in">isinstance</span>(numSeq, Iterator))<br>    <span class="hljs-keyword">for</span> n <span class="hljs-keyword">in</span> numSeq:<br>        <span class="hljs-built_in">print</span>(n, end=<span class="hljs-string">&#x27;\t&#x27;</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    testNumberSequence()<br></code></pre></td></tr></table></figure><p>输出结果</p><pre><code class="hljs">TrueTrue051015</code></pre><h3 id="迭代器的类图"><a href="#迭代器的类图" class="headerlink" title="迭代器的类图"></a>迭代器的类图</h3><p>一个迭代器一般对应着一个容器类，而一个容器会包含多个元素，这些元素可能会有不同的子类。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210607115855.png" alt="迭代器模式的类图"></p><p>在实际的项目开发中有可能会遇到一些更复杂的逻辑。例如，具有层级关系的组织架构：一个公司有 A、B、C 三个部门，每个部门有自己的成员，这时要遍历一个公司的所有成员，就有如下的类图关系</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210607120605.png" alt="具有层级结构的容器的迭代器实现"></p><hr><p>参考：</p><p>1、《人人都懂设计模式》（罗伟富）<br>2、《流畅的 Python》</p>]]></content>
    
    
    <categories>
      
      <category>设计模式</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>设计模式</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows10 安装 jdk1.8</title>
    <link href="/2021/06/06/Windows10-%E5%AE%89%E8%A3%85-jdk1-8/"/>
    <url>/2021/06/06/Windows10-%E5%AE%89%E8%A3%85-jdk1-8/</url>
    
    <content type="html"><![CDATA[<h2 id="下载及安装"><a href="#下载及安装" class="headerlink" title="下载及安装"></a>下载及安装</h2><p>首先，到官网(<a href="https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html">https://www.oracle.com/java/technologies/javase/javase-jdk8-downloads.html</a>)下载 jdk1.8，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210606112728.png"></p><p>然后双击 exe 文件进行安装</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210606112930.png"></p><p>我这里是直接安装在默认路径，然后直接下一步，安装即可。</p><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><p>1、新建系统变量 JAVA_HOME</p><figure class="highlight livescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs livescript">变量名: JAVA_HOME<br>变量值: C:<span class="hljs-string">\Program</span> Files<span class="hljs-string">\Java\jdk1.8.0_291</span><br></code></pre></td></tr></table></figure><p>这里的变量值是 bin 所在的目录</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210606121844.png"></p><p>2、新建系统变量 CLASSPATH</p><figure class="highlight gcode"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs gcode">变量名: CLASSPATH<br>变量值: .;<span class="hljs-meta">%</span>JAVA_HOME<span class="hljs-meta">%</span>\lib\dt.jar;<span class="hljs-meta">%</span>JAVA_HOME<span class="hljs-meta">%</span>\lib\tools.jar;<br></code></pre></td></tr></table></figure><p>3、在 Path 变量中新加一个变量值</p><figure class="highlight mel"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mel">变量值: ;%JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;<br></code></pre></td></tr></table></figure><h2 id="验证"><a href="#验证" class="headerlink" title="验证"></a>验证</h2><p>在 cmd 中输入如下命令</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs applescript">java -<span class="hljs-built_in">version</span><br></code></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210606113656.png"></p><p>到这里 jdk 1.8 的安装就完成了。</p>]]></content>
    
    
    <categories>
      
      <category>Java</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Java</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 将文件从 GBK 编码转为 utf8 编码</title>
    <link href="/2021/06/05/Python-%E5%B0%86%E6%96%87%E4%BB%B6%E4%BB%8E-GBK-%E7%BC%96%E7%A0%81%E8%BD%AC%E4%B8%BA-utf8-%E7%BC%96%E7%A0%81/"/>
    <url>/2021/06/05/Python-%E5%B0%86%E6%96%87%E4%BB%B6%E4%BB%8E-GBK-%E7%BC%96%E7%A0%81%E8%BD%AC%E4%B8%BA-utf8-%E7%BC%96%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>今天找到一本 txt 格式的书，想用 VSCode 打开看一下，结果已打开发现是乱码，究其原因，是 GBK 编码的锅，所以我需要将其转换为 utf-8 编码。所以就使用 Python 将其转换了一下，这里记录一下过程。</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><h3 id="初始版"><a href="#初始版" class="headerlink" title="初始版"></a>初始版</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> chardet<br><br><span class="hljs-comment"># des.txt 是待转换的文件</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;des.txt&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    data = f.read()<br>res = chardet.detect(data) <span class="hljs-comment"># 探测数据的信息，比如编码信息</span><br><span class="hljs-comment"># 打开 res.txt 文件，如果没有，程序会自动新建(res.txt 是转换之后的文件)</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;res.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    line = <span class="hljs-built_in">str</span>(data, encoding=res[<span class="hljs-string">&#x27;encoding&#x27;</span>])<br>    file.write(line)<br></code></pre></td></tr></table></figure><p>这里有一个问题，运行这个程序之后会出现如下错误</p><figure class="highlight 1c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs 1c">UnicodeDecodeError: &#x27;gb<span class="hljs-number">2312</span>&#x27; codec can&#x27;t decode byte 0xd0 in position <span class="hljs-number">2848</span>: illegal multibyte sequence<br></code></pre></td></tr></table></figure><h3 id="改进版"><a href="#改进版" class="headerlink" title="改进版"></a>改进版</h3><p>上面的问题是由部分字符的编码问题引起的，所以我们手动把 <code>gb2312</code> 改为 <code>gbk</code>，因为 <code>gbk</code> 是 <code>gb2312</code> 的父集，所以这样做不会引起问题。</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> chardet<br><br><span class="hljs-comment"># des.txt 是待转换的文件</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;des.txt&#x27;</span>, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>    data = f.read()<br>res = chardet.detect(data) <span class="hljs-comment"># 探测数据的信息，比如编码信息</span><br><span class="hljs-keyword">if</span> res[<span class="hljs-string">&#x27;encoding&#x27;</span>] == <span class="hljs-string">&#x27;GB2312&#x27;</span>:<br>    res[<span class="hljs-string">&#x27;encoding&#x27;</span>] = <span class="hljs-string">&#x27;GBK&#x27;</span> <span class="hljs-comment"># 手动改编码</span><br><span class="hljs-comment"># 打开 res.txt 文件，如果没有，程序会自动新建(res.txt 是转换之后的文件)</span><br><span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(<span class="hljs-string">&#x27;res.txt&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>    line = <span class="hljs-built_in">str</span>(data, encoding=res[<span class="hljs-string">&#x27;encoding&#x27;</span>])<br>    file.write(line)<br></code></pre></td></tr></table></figure><p>这样一来就能够成功转换了。</p><p>注：des.txt 和 res.txt 都是在当前程序所在的文件夹。</p><h3 id="封装成函数的版本"><a href="#封装成函数的版本" class="headerlink" title="封装成函数的版本"></a>封装成函数的版本</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> chardet<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">transform</span>(<span class="hljs-params">des_file, res_file</span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    将文件编码从 GBK 转换成 utf8</span><br><span class="hljs-string">    :param des_file: 待转换的编码为 GBK 的源文件</span><br><span class="hljs-string">    :param res_file: 转换之后的 utf8 编码的文件</span><br><span class="hljs-string">    :return: </span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(des_file, <span class="hljs-string">&#x27;rb&#x27;</span>) <span class="hljs-keyword">as</span> f:<br>        data = f.read()<br>    res = chardet.detect(data)<br>    <span class="hljs-keyword">if</span> res[<span class="hljs-string">&#x27;encoding&#x27;</span>] == <span class="hljs-string">&#x27;GB2312&#x27;</span>:<br>        res[<span class="hljs-string">&#x27;encoding&#x27;</span>] = <span class="hljs-string">&#x27;GBK&#x27;</span><br>    <span class="hljs-keyword">with</span> <span class="hljs-built_in">open</span>(res_file, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>) <span class="hljs-keyword">as</span> file:<br>        line = <span class="hljs-built_in">str</span>(data, encoding=res[<span class="hljs-string">&#x27;encoding&#x27;</span>])<br>        file.write(line)<br>    <span class="hljs-built_in">print</span>(line)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    transform(<span class="hljs-string">&#x27;des.txt&#x27;</span>, <span class="hljs-string">&#x27;res.txt&#x27;</span>)<br></code></pre></td></tr></table></figure><p>这样一来我们就可以很方便地在别的地方调用这个函数了。</p><hr><p>参考：</p><p><a href="https://blog.csdn.net/coreych/article/details/101270551">https://blog.csdn.net/coreych/article/details/101270551</a></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>小玩意</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows10 关机后自动重启解决方法</title>
    <link href="/2021/06/05/Windows10-%E5%85%B3%E6%9C%BA%E5%90%8E%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2021/06/05/Windows10-%E5%85%B3%E6%9C%BA%E5%90%8E%E8%87%AA%E5%8A%A8%E9%87%8D%E5%90%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>不知为何，我的这台 ThinkPad X13 锐龙版经常会出现关机之后自动重启的症状，现在总结一下我目前了解的解决方法。</p><h2 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h2><p>打开高级系统设置，</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210605232018.png"></p><p>然后将自动重新启动取消勾选。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210605232115.png"></p><p>这个解决了我一段时间的问题，但是，后来又失效了。遂进入方案二。</p><p>按：这个方法在大部分时间是有效的。根据我个人的经验，我发现它失效的那几次是我没有正确关闭 cmd 窗口的 Python 控制台，我应该使用 exit() 函数退出，而不是直接关闭 cmd 窗口。</p><h2 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h2><p>笔计本电脑拔掉电源。</p>]]></content>
    
    
    <categories>
      
      <category>Windows10</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows10</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 的上下文管理器和 with 块(未竟)</title>
    <link href="/2021/06/05/Python-%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8%E5%92%8C-with-%E5%9D%97/"/>
    <url>/2021/06/05/Python-%E7%9A%84%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8%E5%92%8C-with-%E5%9D%97/</url>
    
    <content type="html"><![CDATA[<figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs cmd">&gt;&gt;&gt; with open(&#x27;tranformGBKToUTF8.py&#x27;) as fp:<br>...     src = fp.read(<span class="hljs-number">60</span>)<br>...<br>&gt;&gt;&gt; len(src)<br><span class="hljs-number">60</span><br>&gt;&gt;&gt; fp<br>&lt;_io.TextIOWrapper name=&#x27;tranformGBKToUTF8.py&#x27; <span class="hljs-built_in">mode</span>=&#x27;r&#x27; encoding=&#x27;cp936&#x27;&gt;<br>&gt;&gt;&gt; fp.closed, fp.encoding<br>(True, &#x27;cp936&#x27;)<br>&gt;&gt;&gt; fp.read(<span class="hljs-number">60</span>)<br>Traceback (most recent <span class="hljs-keyword">call</span> last):<br>  File &quot;&lt;stdin&gt;&quot;, line <span class="hljs-number">1</span>, <span class="hljs-keyword">in</span> &lt;module&gt;<br><span class="hljs-function">ValueError: <span class="hljs-title">I</span>/<span class="hljs-title">O</span> <span class="hljs-title">operation</span> <span class="hljs-title">on</span> <span class="hljs-title">closed</span> <span class="hljs-title">file</span>.</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 测试框架 unittest 初体验</title>
    <link href="/2021/06/04/Python-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6-unittest-%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <url>/2021/06/04/Python-%E6%B5%8B%E8%AF%95%E6%A1%86%E6%9E%B6-unittest-%E5%88%9D%E4%BD%93%E9%AA%8C/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>这是我的软件工程课程的第二次上机实验。实验的基本内容是使用一门 OO(Object Oriented) 语言的测试框架。遂记录如下。</p><h2 id="简单使用说明"><a href="#简单使用说明" class="headerlink" title="简单使用说明"></a>简单使用说明</h2><p>官网示例如下</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 测试三种字符串方法</span><br><span class="hljs-keyword">import</span> unittest<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestStringMethods</span>(unittest.TestCase):<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_upper</span>(<span class="hljs-params">self</span>):<br>        self.assertEqual(<span class="hljs-string">&#x27;foo&#x27;</span>.upper(), <span class="hljs-string">&#x27;FOO&#x27;</span>)<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_isupper</span>(<span class="hljs-params">self</span>):<br>        self.assertTrue(<span class="hljs-string">&#x27;FOO&#x27;</span>.isupper())<br>        self.assertFalse(<span class="hljs-string">&#x27;Foo&#x27;</span>.isupper())<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_split</span>(<span class="hljs-params">self</span>):<br>        s = <span class="hljs-string">&#x27;hello world&#x27;</span><br>        self.assertEqual(s.split(), [<span class="hljs-string">&#x27;hello&#x27;</span>, <span class="hljs-string">&#x27;world&#x27;</span>])<br>        <span class="hljs-comment"># check that s.split fails when the separator is not a string</span><br>        <span class="hljs-keyword">with</span> self.assertRaises(TypeError):<br>            s.split(<span class="hljs-number">2</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs py">Testing started at <span class="hljs-number">21</span>:<span class="hljs-number">11</span> ...<br>Launching unittests <span class="hljs-keyword">with</span> arguments python -m unittest C:/Users/<span class="hljs-number">17309</span>/PycharmProjects/TDDExperiment/draft01.py <span class="hljs-keyword">in</span> C:\Users\<span class="hljs-number">17309</span>\PycharmProjects\TDDExperiment<br><br><br>Process finished <span class="hljs-keyword">with</span> exit code <span class="hljs-number">0</span><br><br><br>Ran <span class="hljs-number">3</span> tests <span class="hljs-keyword">in</span> <span class="hljs-number">0.010</span>s<br><br>OK<br><br></code></pre></td></tr></table></figure><p>所谓测试，就是定义一个类，只是，这个类必须要继承 <code>unittest.TestCase</code> 这个父类。</p><p>另外，上述的类中的三个独立的方法，就是三个独立的测试，这些方法的命名都以 <code>test</code> 开头。这个命名约定告诉测试运行类哪些方法表示测试。</p><p>在 PyCharm 中，可以看出，以 <code>test</code> 开头的方法前面有一个绿色的可执行按钮。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210605005810.png"></p><p>根据 Python 文档</p><blockquote><p>调用 <code>assertEqual()</code> 来检查预期的输出；调用 <code>assertTrue()</code> 或 <code>assertFalse()</code> 来验证一个条件；调用 <code>assertRaises()</code> 来验证抛出了一个特定的异常。使用这些方法而不是 <code>assert</code> 语句是为了让测试运行者能聚合所有的测试结果并产生结果报告。</p></blockquote><p>这里简单选取几个函数记录它们的用法</p><ul><li><p><code>assertEqual(first, second, msg=None)</code>: 测试第一个参数和第二个参数是否是相等的。如果它们的值不等，那么这个 test 将会失败。</p></li><li><p><code>assertTrue(expr, msg=None)</code>: 测试 expr 是否正确。</p></li><li><p><code>assertRaises(exception, *, msg=None)</code>: 测试是否抛出了指定的异常。</p></li></ul><h2 id="依葫芦画瓢"><a href="#依葫芦画瓢" class="headerlink" title="依葫芦画瓢"></a>依葫芦画瓢</h2><p>待测试的函数</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> re<br><br><span class="hljs-comment"># 判断一个字符串是否是一个合法的 IP4 地址</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">judgeIP4</span>(<span class="hljs-params">string:<span class="hljs-built_in">str</span></span>) -&gt; <span class="hljs-built_in">bool</span>:<br>    ret = re.<span class="hljs-keyword">match</span>(<span class="hljs-string">r&quot;(([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\.)&#123;3&#125;&quot;</span><br>                   <span class="hljs-string">r&quot;([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])$&quot;</span>, string)<br>    <span class="hljs-keyword">if</span> ret:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">True</span><br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">False</span><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    string = <span class="hljs-string">&quot;10.16.82.108&quot;</span><br>    <span class="hljs-built_in">print</span>(judgeIP4(string))<br></code></pre></td></tr></table></figure><p>测试代码</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> unittest<br><span class="hljs-keyword">from</span> IP4Test <span class="hljs-keyword">import</span> judgeIP4<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">TestJudgeIP4</span>(unittest.TestCase):<br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">test_judgeIP4</span>(<span class="hljs-params">self</span>):<br>        string = <span class="hljs-string">&#x27;10.16.82.108&#x27;</span><br>        self.assertTrue(judgeIP4(string))<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    unittest.main()<br></code></pre></td></tr></table></figure><p>测试输出</p><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs awk">Testing started at <span class="hljs-number">1</span>:<span class="hljs-number">27</span> ...<br><br>Launching unittests with arguments python -m unittest C:<span class="hljs-regexp">/Users/</span><span class="hljs-number">17309</span><span class="hljs-regexp">/PycharmProjects/</span>TDDExperiment/TestUnit.py <span class="hljs-keyword">in</span> C:\Users\<span class="hljs-number">17309</span>\PycharmProjects\TDDExperiment<br><br><br>Ran <span class="hljs-number">1</span> test <span class="hljs-keyword">in</span> <span class="hljs-number">0.003</span>s<br><br>OK<br><br>Process finished with <span class="hljs-keyword">exit</span> code <span class="hljs-number">0</span><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>unittest</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 3.8 虚拟环境相关(Windows10)</title>
    <link href="/2021/06/02/Python-3-8-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3(Windows10)/"/>
    <url>/2021/06/02/Python-3-8-%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%E7%9B%B8%E5%85%B3(Windows10)/</url>
    
    <content type="html"><![CDATA[<h2 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h2><p>首先，在一个目录中打开终端命令行，执行以下命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">python -m venv my_env<br></code></pre></td></tr></table></figure><p>这个命令的作用是在当前目录下创建一个虚拟环境目录</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210602151102.png"></p><p>查看其中的内容</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210602151144.png"></p><p>venv 有些参数，这里简单介绍几个：</p><ul><li><code>--without-pip</code>: 不需要安装 pip，默认为安装</li><li><code>--clear</code>: 如果创建虚拟环境的目录已经有了其他虚拟环境，则清除重建</li></ul><h2 id="激活"><a href="#激活" class="headerlink" title="激活"></a>激活</h2><p>因为这里是 Windows10 系统，所以这里只介绍 Windows10 cmd 命令行环境下的激活方法，即在命令行执行如下命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">&lt;myvenv&gt;\Scripts\activate.bat<br></code></pre></td></tr></table></figure><p>实际操作时，这里的 <code>&lt;myvenv&gt;</code> 要换成我们自己的虚拟环境的名称。</p><p>执行后，进入虚拟环境如下，可以发现命令行提示最前面有一个 <code>(my_env)</code>，即我们虚拟环境的名称。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210602152035.png"></p><h2 id="退出虚拟环境"><a href="#退出虚拟环境" class="headerlink" title="退出虚拟环境"></a>退出虚拟环境</h2><p>直接执行如下命令即可</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">deactivate<br></code></pre></td></tr></table></figure><p>因为这个命令就在虚拟环境下，所以我们不需要像激活时那样在前面加上脚本的路径。</p><hr><p>参考：</p><p><a href="https://zhuanlan.zhihu.com/p/216157886">https://zhuanlan.zhihu.com/p/216157886</a></p><p><a href="https://docs.python.org/zh-cn/3/library/venv.html">https://docs.python.org/zh-cn/3/library/venv.html</a></p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>动态规划之最长公共子序列问题(未竟)</title>
    <link href="/2021/06/01/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B9%8B%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97%E9%97%AE%E9%A2%98/"/>
    <url>/2021/06/01/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E4%B9%8B%E6%9C%80%E9%95%BF%E5%85%AC%E5%85%B1%E5%AD%90%E5%BA%8F%E5%88%97%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="算法描述"><a href="#算法描述" class="headerlink" title="算法描述"></a>算法描述</h2><h3 id="递归式"><a href="#递归式" class="headerlink" title="递归式"></a>递归式</h3><p>$$<br>c[i, j] &#x3D;<br>\left{<br>\begin{matrix}<br>\begin{align}<br>&amp; {0} &amp;&amp; {if \quad i &#x3D; 0 ; or ; j &#x3D; 0,} \<br>&amp; {c[i - 1, j - 1] + 1} &amp;&amp; {if \quad i, j &gt; 0 ; and ; x_i &#x3D; y_j,} \<br>&amp; {max(c[i, j - 1], c[i - 1, j])} &amp;&amp; {if \quad i, j &gt; 0 ; and ; x_i \neq y_j.} \<br>\end{align}<br>\end{matrix}<br>\right.<br>$$</p><h3 id="伪码"><a href="#伪码" class="headerlink" title="伪码"></a>伪码</h3><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601155106.png"></p><h3 id="一个示例"><a href="#一个示例" class="headerlink" title="一个示例"></a>一个示例</h3><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601155445.png"></p><h2 id="算法的-Python-实现"><a href="#算法的-Python-实现" class="headerlink" title="算法的 Python 实现"></a>算法的 Python 实现</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 最长共同子序列动态规划算法</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">lcs_length</span>(<span class="hljs-params">X:<span class="hljs-built_in">str</span>, Y:<span class="hljs-built_in">str</span></span>):<br>    m = <span class="hljs-built_in">len</span>(X)<br>    n = <span class="hljs-built_in">len</span>(Y)<br>    b = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)] <span class="hljs-comment"># b 只使用 1..m</span><br>    c = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n + <span class="hljs-number">1</span>)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(m + <span class="hljs-number">1</span>)] <span class="hljs-comment"># c 只使用 1..m</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, m + <span class="hljs-number">1</span>):<br>        <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n + <span class="hljs-number">1</span>):<br>            <span class="hljs-keyword">if</span> X[i - <span class="hljs-number">1</span>] == Y[j - <span class="hljs-number">1</span>]:<br>                c[i][j] = c[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>] + <span class="hljs-number">1</span><br>                b[i][j] = [i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>] <span class="hljs-comment"># 存入路径</span><br>            <span class="hljs-keyword">elif</span> c[i - <span class="hljs-number">1</span>][j] &gt;= c[i][j - <span class="hljs-number">1</span>]:<br>                c[i][j] = c[i - <span class="hljs-number">1</span>][j]<br>                b[i][j] = [i - <span class="hljs-number">1</span>, j]<br>            <span class="hljs-keyword">else</span>:<br>                c[i][j] = c[i][j - <span class="hljs-number">1</span>]<br>                b[i][j] = [i, j - <span class="hljs-number">1</span>]<br>    <span class="hljs-keyword">return</span> [c, b]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_lcs</span>(<span class="hljs-params">b:<span class="hljs-built_in">list</span>, X:<span class="hljs-built_in">str</span>, i:<span class="hljs-built_in">int</span>, j:<span class="hljs-built_in">int</span></span>):<br>    <span class="hljs-keyword">if</span> i == <span class="hljs-number">0</span> <span class="hljs-keyword">or</span> j == <span class="hljs-number">0</span>:<br>        <span class="hljs-keyword">return</span><br>    <span class="hljs-keyword">if</span> b[i][j] == [i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>]:<br>        print_lcs(b, X, i - <span class="hljs-number">1</span>, j - <span class="hljs-number">1</span>)<br>        <span class="hljs-built_in">print</span>(X[i - <span class="hljs-number">1</span>], end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <span class="hljs-keyword">elif</span> b[i][j] == [i - <span class="hljs-number">1</span>, j]:<br>        print_lcs(b, X, i - <span class="hljs-number">1</span>, j)<br>    <span class="hljs-keyword">else</span>:<br>        print_lcs(b, X, i, j - <span class="hljs-number">1</span>)<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    <span class="hljs-comment"># S2 = &#x27;BDCABA&#x27;</span><br>    <span class="hljs-comment"># S1 = &#x27;ABCBDAB&#x27;</span><br>    S1 = <span class="hljs-string">&#x27;ACCGGTCGAGATGCAG&#x27;</span><br>    <span class="hljs-comment"># S2 = &#x27;ACCGGTCGAGATGCAG&#x27;</span><br>    S2 = <span class="hljs-string">&#x27;GTCGTTCGGAATGCAT&#x27;</span><br>    res = lcs_length(S1, S2)<br>    <span class="hljs-built_in">print</span>(res)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;----------&#x27;</span>)<br>    <span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> res[<span class="hljs-number">0</span>]:<br>        <span class="hljs-built_in">print</span>(each)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;----------&#x27;</span>)<br>    print_lcs(res[<span class="hljs-number">1</span>], S1, <span class="hljs-built_in">len</span>(S1), <span class="hljs-built_in">len</span>(S2))<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;\n----------&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(res[<span class="hljs-number">0</span>][<span class="hljs-built_in">len</span>(S1)][<span class="hljs-built_in">len</span>(S2)])<br><br></code></pre></td></tr></table></figure><p>运行结果</p><figure class="highlight inform7"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs inform7"><span class="hljs-comment">[<span class="hljs-comment">[<span class="hljs-comment">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span>, <span class="hljs-comment">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1]</span>, <span class="hljs-comment">[0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2]</span>, <span class="hljs-comment">[0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]</span>, <span class="hljs-comment">[0, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3]</span>, <span class="hljs-comment">[0, 1, 1, 1, 2, 2, 2, 2, 3, 4, 4, 4, 4, 4, 4, 4, 4]</span>, <span class="hljs-comment">[0, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 5, 5, 5]</span>, <span class="hljs-comment">[0, 1, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 6, 6, 6]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 7, 7]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 6, 6, 6, 6, 7, 7, 7, 7]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 6, 7, 7, 7, 7, 7, 8, 8]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 7, 8, 8, 8, 8, 9]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 5, 6, 6, 7, 7, 8, 9, 9, 9, 9]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 6, 6, 7, 7, 8, 9, 10, 10, 10]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 6, 6, 7, 8, 8, 9, 10, 11, 11]</span>, <span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 7, 7, 7, 8, 8, 9, 10, 11, 11]</span>]</span>, <span class="hljs-comment">[<span class="hljs-comment">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[0, 1]</span>, <span class="hljs-comment">[0, 2]</span>, <span class="hljs-comment">[0, 3]</span>, <span class="hljs-comment">[0, 4]</span>, <span class="hljs-comment">[0, 5]</span>, <span class="hljs-comment">[0, 6]</span>, <span class="hljs-comment">[0, 7]</span>, <span class="hljs-comment">[0, 8]</span>, <span class="hljs-comment">[0, 9]</span>, <span class="hljs-comment">[0, 9]</span>, <span class="hljs-comment">[0, 10]</span>, <span class="hljs-comment">[1, 11]</span>, <span class="hljs-comment">[1, 12]</span>, <span class="hljs-comment">[1, 13]</span>, <span class="hljs-comment">[0, 14]</span>, <span class="hljs-comment">[1, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[1, 1]</span>, <span class="hljs-comment">[1, 2]</span>, <span class="hljs-comment">[1, 2]</span>, <span class="hljs-comment">[2, 3]</span>, <span class="hljs-comment">[2, 4]</span>, <span class="hljs-comment">[2, 5]</span>, <span class="hljs-comment">[1, 6]</span>, <span class="hljs-comment">[2, 7]</span>, <span class="hljs-comment">[2, 8]</span>, <span class="hljs-comment">[1, 10]</span>, <span class="hljs-comment">[1, 11]</span>, <span class="hljs-comment">[1, 12]</span>, <span class="hljs-comment">[1, 13]</span>, <span class="hljs-comment">[1, 13]</span>, <span class="hljs-comment">[2, 14]</span>, <span class="hljs-comment">[2, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[2, 1]</span>, <span class="hljs-comment">[2, 2]</span>, <span class="hljs-comment">[2, 2]</span>, <span class="hljs-comment">[2, 4]</span>, <span class="hljs-comment">[2, 5]</span>, <span class="hljs-comment">[2, 6]</span>, <span class="hljs-comment">[2, 6]</span>, <span class="hljs-comment">[3, 7]</span>, <span class="hljs-comment">[3, 8]</span>, <span class="hljs-comment">[3, 9]</span>, <span class="hljs-comment">[3, 10]</span>, <span class="hljs-comment">[3, 11]</span>, <span class="hljs-comment">[3, 12]</span>, <span class="hljs-comment">[2, 13]</span>, <span class="hljs-comment">[2, 15]</span>, <span class="hljs-comment">[2, 16]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[3, 0]</span>, <span class="hljs-comment">[4, 1]</span>, <span class="hljs-comment">[3, 3]</span>, <span class="hljs-comment">[3, 3]</span>, <span class="hljs-comment">[4, 4]</span>, <span class="hljs-comment">[4, 5]</span>, <span class="hljs-comment">[3, 7]</span>, <span class="hljs-comment">[3, 7]</span>, <span class="hljs-comment">[3, 8]</span>, <span class="hljs-comment">[4, 9]</span>, <span class="hljs-comment">[4, 10]</span>, <span class="hljs-comment">[4, 11]</span>, <span class="hljs-comment">[3, 12]</span>, <span class="hljs-comment">[4, 13]</span>, <span class="hljs-comment">[4, 14]</span>, <span class="hljs-comment">[4, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[4, 0]</span>, <span class="hljs-comment">[4, 2]</span>, <span class="hljs-comment">[4, 3]</span>, <span class="hljs-comment">[4, 3]</span>, <span class="hljs-comment">[4, 5]</span>, <span class="hljs-comment">[4, 6]</span>, <span class="hljs-comment">[4, 7]</span>, <span class="hljs-comment">[4, 7]</span>, <span class="hljs-comment">[4, 8]</span>, <span class="hljs-comment">[5, 9]</span>, <span class="hljs-comment">[5, 10]</span>, <span class="hljs-comment">[5, 11]</span>, <span class="hljs-comment">[4, 12]</span>, <span class="hljs-comment">[5, 13]</span>, <span class="hljs-comment">[5, 14]</span>, <span class="hljs-comment">[5, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[5, 1]</span>, <span class="hljs-comment">[5, 1]</span>, <span class="hljs-comment">[6, 2]</span>, <span class="hljs-comment">[5, 4]</span>, <span class="hljs-comment">[5, 4]</span>, <span class="hljs-comment">[5, 5]</span>, <span class="hljs-comment">[6, 6]</span>, <span class="hljs-comment">[5, 8]</span>, <span class="hljs-comment">[5, 9]</span>, <span class="hljs-comment">[5, 10]</span>, <span class="hljs-comment">[5, 11]</span>, <span class="hljs-comment">[5, 11]</span>, <span class="hljs-comment">[6, 12]</span>, <span class="hljs-comment">[6, 13]</span>, <span class="hljs-comment">[6, 14]</span>, <span class="hljs-comment">[5, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[6, 1]</span>, <span class="hljs-comment">[6, 2]</span>, <span class="hljs-comment">[6, 2]</span>, <span class="hljs-comment">[7, 3]</span>, <span class="hljs-comment">[6, 5]</span>, <span class="hljs-comment">[6, 6]</span>, <span class="hljs-comment">[6, 6]</span>, <span class="hljs-comment">[7, 7]</span>, <span class="hljs-comment">[6, 9]</span>, <span class="hljs-comment">[6, 10]</span>, <span class="hljs-comment">[6, 11]</span>, <span class="hljs-comment">[6, 12]</span>, <span class="hljs-comment">[6, 13]</span>, <span class="hljs-comment">[6, 13]</span>, <span class="hljs-comment">[7, 14]</span>, <span class="hljs-comment">[7, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[7, 0]</span>, <span class="hljs-comment">[7, 2]</span>, <span class="hljs-comment">[7, 3]</span>, <span class="hljs-comment">[7, 3]</span>, <span class="hljs-comment">[8, 4]</span>, <span class="hljs-comment">[8, 5]</span>, <span class="hljs-comment">[7, 7]</span>, <span class="hljs-comment">[7, 7]</span>, <span class="hljs-comment">[7, 8]</span>, <span class="hljs-comment">[8, 9]</span>, <span class="hljs-comment">[8, 10]</span>, <span class="hljs-comment">[7, 12]</span>, <span class="hljs-comment">[7, 12]</span>, <span class="hljs-comment">[7, 14]</span>, <span class="hljs-comment">[7, 15]</span>, <span class="hljs-comment">[7, 16]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[8, 1]</span>, <span class="hljs-comment">[8, 2]</span>, <span class="hljs-comment">[8, 3]</span>, <span class="hljs-comment">[8, 4]</span>, <span class="hljs-comment">[8, 5]</span>, <span class="hljs-comment">[8, 6]</span>, <span class="hljs-comment">[8, 7]</span>, <span class="hljs-comment">[8, 8]</span>, <span class="hljs-comment">[8, 9]</span>, <span class="hljs-comment">[8, 9]</span>, <span class="hljs-comment">[8, 10]</span>, <span class="hljs-comment">[9, 11]</span>, <span class="hljs-comment">[8, 13]</span>, <span class="hljs-comment">[8, 14]</span>, <span class="hljs-comment">[8, 14]</span>, <span class="hljs-comment">[9, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[9, 0]</span>, <span class="hljs-comment">[9, 2]</span>, <span class="hljs-comment">[9, 3]</span>, <span class="hljs-comment">[9, 3]</span>, <span class="hljs-comment">[9, 5]</span>, <span class="hljs-comment">[9, 6]</span>, <span class="hljs-comment">[9, 7]</span>, <span class="hljs-comment">[9, 7]</span>, <span class="hljs-comment">[9, 8]</span>, <span class="hljs-comment">[9, 10]</span>, <span class="hljs-comment">[9, 11]</span>, <span class="hljs-comment">[9, 12]</span>, <span class="hljs-comment">[9, 12]</span>, <span class="hljs-comment">[10, 13]</span>, <span class="hljs-comment">[9, 15]</span>, <span class="hljs-comment">[9, 16]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[10, 1]</span>, <span class="hljs-comment">[10, 2]</span>, <span class="hljs-comment">[10, 3]</span>, <span class="hljs-comment">[10, 4]</span>, <span class="hljs-comment">[10, 5]</span>, <span class="hljs-comment">[10, 6]</span>, <span class="hljs-comment">[10, 7]</span>, <span class="hljs-comment">[10, 8]</span>, <span class="hljs-comment">[10, 9]</span>, <span class="hljs-comment">[10, 9]</span>, <span class="hljs-comment">[10, 10]</span>, <span class="hljs-comment">[11, 11]</span>, <span class="hljs-comment">[10, 13]</span>, <span class="hljs-comment">[10, 14]</span>, <span class="hljs-comment">[10, 14]</span>, <span class="hljs-comment">[11, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[11, 1]</span>, <span class="hljs-comment">[11, 1]</span>, <span class="hljs-comment">[11, 3]</span>, <span class="hljs-comment">[11, 4]</span>, <span class="hljs-comment">[11, 4]</span>, <span class="hljs-comment">[11, 5]</span>, <span class="hljs-comment">[12, 6]</span>, <span class="hljs-comment">[11, 8]</span>, <span class="hljs-comment">[11, 9]</span>, <span class="hljs-comment">[11, 10]</span>, <span class="hljs-comment">[11, 11]</span>, <span class="hljs-comment">[11, 11]</span>, <span class="hljs-comment">[12, 12]</span>, <span class="hljs-comment">[12, 13]</span>, <span class="hljs-comment">[11, 15]</span>, <span class="hljs-comment">[11, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[12, 0]</span>, <span class="hljs-comment">[12, 2]</span>, <span class="hljs-comment">[12, 3]</span>, <span class="hljs-comment">[12, 3]</span>, <span class="hljs-comment">[12, 5]</span>, <span class="hljs-comment">[12, 6]</span>, <span class="hljs-comment">[12, 7]</span>, <span class="hljs-comment">[12, 7]</span>, <span class="hljs-comment">[12, 8]</span>, <span class="hljs-comment">[12, 10]</span>, <span class="hljs-comment">[12, 11]</span>, <span class="hljs-comment">[12, 12]</span>, <span class="hljs-comment">[12, 12]</span>, <span class="hljs-comment">[13, 13]</span>, <span class="hljs-comment">[13, 14]</span>, <span class="hljs-comment">[12, 16]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[13, 1]</span>, <span class="hljs-comment">[13, 2]</span>, <span class="hljs-comment">[13, 2]</span>, <span class="hljs-comment">[13, 4]</span>, <span class="hljs-comment">[13, 5]</span>, <span class="hljs-comment">[13, 6]</span>, <span class="hljs-comment">[13, 6]</span>, <span class="hljs-comment">[13, 8]</span>, <span class="hljs-comment">[13, 9]</span>, <span class="hljs-comment">[13, 10]</span>, <span class="hljs-comment">[13, 11]</span>, <span class="hljs-comment">[13, 12]</span>, <span class="hljs-comment">[13, 13]</span>, <span class="hljs-comment">[13, 13]</span>, <span class="hljs-comment">[14, 14]</span>, <span class="hljs-comment">[14, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[14, 1]</span>, <span class="hljs-comment">[14, 2]</span>, <span class="hljs-comment">[14, 3]</span>, <span class="hljs-comment">[14, 4]</span>, <span class="hljs-comment">[14, 5]</span>, <span class="hljs-comment">[14, 6]</span>, <span class="hljs-comment">[14, 7]</span>, <span class="hljs-comment">[14, 8]</span>, <span class="hljs-comment">[14, 9]</span>, <span class="hljs-comment">[14, 9]</span>, <span class="hljs-comment">[14, 10]</span>, <span class="hljs-comment">[14, 12]</span>, <span class="hljs-comment">[14, 13]</span>, <span class="hljs-comment">[14, 14]</span>, <span class="hljs-comment">[14, 14]</span>, <span class="hljs-comment">[15, 15]</span>]</span>, <span class="hljs-comment">[0, <span class="hljs-comment">[15, 0]</span>, <span class="hljs-comment">[15, 2]</span>, <span class="hljs-comment">[15, 3]</span>, <span class="hljs-comment">[15, 3]</span>, <span class="hljs-comment">[15, 5]</span>, <span class="hljs-comment">[15, 6]</span>, <span class="hljs-comment">[15, 7]</span>, <span class="hljs-comment">[15, 7]</span>, <span class="hljs-comment">[15, 8]</span>, <span class="hljs-comment">[15, 10]</span>, <span class="hljs-comment">[15, 11]</span>, <span class="hljs-comment">[15, 12]</span>, <span class="hljs-comment">[15, 12]</span>, <span class="hljs-comment">[15, 14]</span>, <span class="hljs-comment">[15, 15]</span>, <span class="hljs-comment">[15, 16]</span>]</span>]</span>]</span><br>----------<br><span class="hljs-comment">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]</span><br><span class="hljs-comment">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1]</span><br><span class="hljs-comment">[0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2]</span><br><span class="hljs-comment">[0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2]</span><br><span class="hljs-comment">[0, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3]</span><br><span class="hljs-comment">[0, 1, 1, 1, 2, 2, 2, 2, 3, 4, 4, 4, 4, 4, 4, 4, 4]</span><br><span class="hljs-comment">[0, 1, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5, 5, 5, 5]</span><br><span class="hljs-comment">[0, 1, 2, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 6, 6, 6]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 5, 5, 5, 5, 6, 6, 6, 6]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 5, 6, 6, 6, 6, 6, 7, 7]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 6, 6, 6, 6, 7, 7, 7, 7]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 4, 4, 4, 5, 6, 7, 7, 7, 7, 7, 8, 8]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 5, 5, 6, 7, 7, 8, 8, 8, 8, 9]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 5, 6, 6, 7, 7, 8, 9, 9, 9, 9]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 6, 6, 7, 7, 8, 9, 10, 10, 10]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 6, 6, 7, 8, 8, 9, 10, 11, 11]</span><br><span class="hljs-comment">[0, 1, 2, 3, 4, 5, 5, 6, 7, 7, 7, 8, 8, 9, 10, 11, 11]</span><br>----------<br>C G T C G A A T G C A <br>----------<br>11<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法设计与分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>Python</tag>
      
      <tag>《算法导论》</tag>
      
      <tag>算法设计与分析</tag>
      
      <tag>动态规划</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最小生成树的 Prim 算法(未竟)</title>
    <link href="/2021/06/01/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84-Prim-%E7%AE%97%E6%B3%95/"/>
    <url>/2021/06/01/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84-Prim-%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h2><p>以图1来说明</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601114808.png" alt="图1"></p><p>上图演示了执行 Prim 算法的过程。初始的根结点为 a。加阴影的边和黑色的结点都属于树 A。在算法每一步，树中的结点就决定了图的一个切割，横跨该切割的一条轻量级边被加入到树中。例如，在图中的第 2 步，该算法可以选择将边(b, c)加入到树中，也可以选择将边(a, h)加入到树中，因为这两条比那都是横跨该切割的轻量级边。</p><h2 id="伪码"><a href="#伪码" class="headerlink" title="伪码"></a>伪码</h2><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601120453.png" alt="20210601120453"></p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><p>这里对一些定义作补充。</p><p>无向图 <code>$G = (V, E)$</code> 的一个<strong>切割</strong> <code>$(S, V - S)$</code> 是集合 <code>$V$</code> 的一个划分，如图3所示。如果一条边 <code>$(u, v) \in E$</code> 的一个端点位于集合 <code>$S$</code>，另一个端点位于集合 <code>$V - S$</code>，则称该条边<strong>横跨</strong>切割 <code>$(S, V - S)$</code>。如果集合 <code>$A$</code> 中不存在横跨该切割的边，则称该切割<strong>尊重</strong>集合 <code>$A$</code>。在横跨一个切割的所有边中，权重最小的边称为<strong>轻量级边</strong>。注意，轻量级边可能不是唯一的。一般，如果一条边是满足某个性质的所有边中权重最小的，则称该条边是满足给定性质的一条<strong>轻量级边</strong>。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601120351.png" alt="图3"></p>]]></content>
    
    
    <categories>
      
      <category>算法设计与分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>《算法导论》</tag>
      
      <tag>算法设计与分析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>最小生成树的 Kruskal 算法(未竟)</title>
    <link href="/2021/06/01/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84-Kruskal-%E7%AE%97%E6%B3%95/"/>
    <url>/2021/06/01/%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91%E7%9A%84-Kruskal-%E7%AE%97%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h2><p>以图来说明。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601112937.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601112955.png"></p><p>上图演示了执行 Kruskal 算法的过程。加了阴影的边属于不断增长的森林 A。该算法按照边的权重的大小依次进行考虑。箭头指向的边是算法每一步所考察的边。如果该边将<strong>两棵不同的树</strong>(注一)连接起来，它就被加入到森林里，从而完成对两棵树的合并。</p><h2 id="伪码"><a href="#伪码" class="headerlink" title="伪码"></a>伪码</h2><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601113816.png"></p><hr><p>注一：按照这里的描述，我认为一个结点的图似乎也是一棵树。</p>]]></content>
    
    
    <categories>
      
      <category>算法设计与分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>《算法导论》</tag>
      
      <tag>算法设计与分析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>利用深度优先搜索来寻找图的强连通分量(未竟)</title>
    <link href="/2021/06/01/%E5%88%A9%E7%94%A8%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E6%9D%A5%E5%AF%BB%E6%89%BE%E5%9B%BE%E7%9A%84%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/"/>
    <url>/2021/06/01/%E5%88%A9%E7%94%A8%E6%B7%B1%E5%BA%A6%E4%BC%98%E5%85%88%E6%90%9C%E7%B4%A2%E6%9D%A5%E5%AF%BB%E6%89%BE%E5%9B%BE%E7%9A%84%E5%BC%BA%E8%BF%9E%E9%80%9A%E5%88%86%E9%87%8F/</url>
    
    <content type="html"><![CDATA[<h3 id="算法思路"><a href="#算法思路" class="headerlink" title="算法思路"></a>算法思路</h3><p>以图来说明</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601111013.png"></p><p>(a) 为有向图 G。每个加了阴影的区域是 G 的一个强连通分量。每个结点上注明了在深度优先搜索中的发现时间和完成时间，所有的树边都加了额外的阴影。</p><p>(b) 是图 G 的转置图 <code>$G^&#123;T&#125;$</code>，图中注明了由算法 STRONGLY-CONNECTED-COMPONENTS 第 3 行所计算出来的深度优先森林，所有树边上都加了额外的阴影。每个强连通分量对应一棵深度优先树。加了阴影的结点 b、c、g 和 h 全部是深度优先树的根节点。这些深度优先树是在转置图 <code>$G^T$</code> 上运行深度优先搜索算法所获得的。</p><p>(c) 无环分量图 <code>$G^&#123;SCC&#125;$</code>，由对图 G 的强连通分量进行收缩而成，这种收缩将每个强连通分量收缩为一个结点，即由一个结点来替换整个连通分量。</p><h3 id="伪码描述"><a href="#伪码描述" class="headerlink" title="伪码描述"></a>伪码描述</h3><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210601111801.png"></p><p>这里针对第 3 行进行简单说明，<code>$u.f$</code> 即 G 中的结点 u 在深度优先搜索过程中的完成时间。这行代码所做的事情是按照 <code>$u.f$</code> 递减的顺序进行循环，然后找出每一棵深度优先数，这每一棵深度优先树就对应一个强连通分量。</p>]]></content>
    
    
    <categories>
      
      <category>算法设计与分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>《算法导论》</tag>
      
      <tag>算法设计与分析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 安装过程中的 Add Python 3.x to PATH 勾选之后发生了什么</title>
    <link href="/2021/05/29/Python-%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84-Add-Python-3-x-to-PATH-%E5%8B%BE%E9%80%89%E4%B9%8B%E5%90%8E%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/"/>
    <url>/2021/05/29/Python-%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84-Add-Python-3-x-to-PATH-%E5%8B%BE%E9%80%89%E4%B9%8B%E5%90%8E%E5%8F%91%E7%94%9F%E4%BA%86%E4%BB%80%E4%B9%88/</url>
    
    <content type="html"><![CDATA[<p>如下图, 我们在安装 Python 过程中一般都要勾选这个选项, 我们也知道它的作用是把 Python 添加到我们系统的环境变量中, 以方便我们在命令行中直接使用 Python,</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529222344.png"></p><p>可是, 它究竟自动为我们添加了什么路径到系统的环境变量中了呢, 经查看, 如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529222934.png"></p><p>然后我们查看这两个文件夹下的具体内容,</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529223013.png"></p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529223036.png"></p><p>发现, 有 python.exe 和 pip.exe 等, 所以, 如果我们在安装 Python 的过程中勾选了 Add Python 3.x to PATH 的话, 那么, 我们就可以直接在命令行使用 Python 和 pip 命令了.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
      <tag>小知识</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>读《三言二拍》(未竟)</title>
    <link href="/2021/05/29/%E8%AF%BB%E3%80%8A%E4%B8%89%E8%A8%80%E4%BA%8C%E6%8B%8D%E3%80%8B/"/>
    <url>/2021/05/29/%E8%AF%BB%E3%80%8A%E4%B8%89%E8%A8%80%E4%BA%8C%E6%8B%8D%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<p>缇骑：tí jì，缇，橘红色。缇骑，这里指的是锦衣卫。</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>读书</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>单源最短路径之 Bellman-Ford 算法详解及其 Python 实现</title>
    <link href="/2021/05/28/%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%B9%8B-Bellman-Ford-%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%B6-Python-%E5%AE%9E%E7%8E%B0/"/>
    <url>/2021/05/28/%E5%8D%95%E6%BA%90%E6%9C%80%E7%9F%AD%E8%B7%AF%E5%BE%84%E4%B9%8B-Bellman-Ford-%E7%AE%97%E6%B3%95%E8%AF%A6%E8%A7%A3%E5%8F%8A%E5%85%B6-Python-%E5%AE%9E%E7%8E%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>本博客的内容基本来自《算法导论》。</p><h2 id="算法描述"><a href="#算法描述" class="headerlink" title="算法描述"></a>算法描述</h2><p>Bellman-Ford 算法解决的是一般情况下的单源最短路径问题，在这里，边的权重可以为负值。给定带权重的有向图 <code>$G = (V, E)$</code> 和权重函数 <code>$\omega : E \rightarrow \mathbf&#123;R&#125;$</code>，Bellman-Ford 算法返回一个布尔值，以表明是否存在一个从源结点可以到达的权重为负值的环路。如果存在这样一个环路，算法将告诉我们不存在解决方案。如果没有这种环路存在，算法将给出最短路径和它们的权重。</p><p>Bellman-Ford 算法通过对边进行松弛操作来渐近地降低从源结点 <code>$s$</code> 到每个结点 <code>$v$</code> 的最短路径的估计值 <code>$v.d$</code>，直到该估计值与实际的最短路径权重 <code>$\delta(s, v)$</code> （注二）相同时为止。该算法返回 TRUE 值当且仅当输入图中不包含可以从源结点到达的权重为负值的环路。</p><p>伪码描述如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210528220823.png"></p><p>算法运行的一个示例图</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210528221302.png" alt="Bellman-Ford 算法的执行过程"></p><p>对上图的说明：源结点为 <code>$s$</code>，结点中的数值为该结点的 <code>$d$</code>（注一）值，加了阴影的边比奥氏前驱值：如果 <code>$(u, v)$</code> 加了阴影，则 <code>$v.\pi = u$</code>。在本图的例子中，每一次的松弛操作对边的处理次序都是：<code>$(t, x)$</code>，<code>$(t, y)$</code>，<code>$(t, z)$</code>，<code>$(x, t)$</code>，<code>$(y, x)$</code>，<code>$(y, z)$</code>，<code>$(z, x)$</code>，<code>$(z, s)$</code>，<code>$(s, t)$</code>，<code>$(x, y)$</code>，(a) 在第 1 次松弛操作前的场景。(b) ~ (e) 在对边进行每次松弛操作后的场景。图 (e) 中的 <code>$d$</code> 值和 <code>$\pi$</code> 值为最终取值。在本例中，Bellman-Ford 算法返回的值为 TRUE。</p><h2 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h2><h3 id="对边的松弛操作（Relax）"><a href="#对边的松弛操作（Relax）" class="headerlink" title="对边的松弛操作（Relax）"></a>对边的松弛操作（Relax）</h3><hr><p>注一：<code>$d$</code> 是结点的一个属性，比如，<code>$v.d$</code> 记录的是从源结点 <code>$s$</code> 到结点 <code>$v$</code> 之间的距离。同理， <code>$\pi$</code> 也是结点的一个属性，比如，<code>$v.\pi$</code> 记录的是 <code>$v$</code> 的前驱结点。（见《算法导论》中文版 p344）</p><p>注二：定义从结点 <code>$u$</code> 到结点 <code>$v$</code> 的<strong>最短路径权重</strong> <code>$\delta(u, v)$</code> 如下</p><p>$$</p><p>$$</p>]]></content>
    
    
    <categories>
      
      <category>《算法导论》</category>
      
    </categories>
    
    
    <tags>
      
      <tag>《算法导论》</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>数据结构之图的定义和术语(未竟)</title>
    <link href="/2021/05/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E5%9B%BE%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E6%9C%AF%E8%AF%AD/"/>
    <url>/2021/05/28/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8B%E5%9B%BE%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E6%9C%AF%E8%AF%AD/</url>
    
    <content type="html"><![CDATA[<h2 id="1、图的定义"><a href="#1、图的定义" class="headerlink" title="1、图的定义"></a>1、图的定义</h2><p>图（Graph）是由两个集合构成，一个是非空但有限的顶点集合 $V$，另一个是描述顶点之间关系——边的集合 $E$（可以是 $<br>arnothing$）。因此，图可以表示为 $G &#x3D; (V, E)$。每条边是一顶点对 $(v, w)$ 且 $v, w \in V$。</p><p>通常用 $|V|$ 表示顶点的数量，用 $|E|$ 表示边的数量。</p><h2 id="2、图的术语"><a href="#2、图的术语" class="headerlink" title="2、图的术语"></a>2、图的术语</h2><p>(1)、无向图（Underected Graphs）：无向图中顶点之间的边（Edge）没有方向，即边 $(v, w)$ 等同于 $(w, v)$。用圆括号“()”表示无向边。边的起点 $w$ 和终点 $v$ 次序并不重要。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608212819.png" alt="图一　　无向图"></p><p>(2)、有向图（Directed Graphs）：有向图中顶点之间的所有边都有方向，即 $&lt;v, w&gt;$ 不同于 $&lt;w, v&gt;$。用尖括号“&lt;&gt;”表示有向边。有向边也称弧（Are）。弧的“起点（弧头）”和“终点（弧尾）”的次序不能随意颠倒。在不会混淆的场合，有向边和无向边都简称为“边”。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608213830.png" alt="图二　　有向图"></p><p>(3)、简单图（Simple Graph）：如果图中出现重边（即边的集合 $E$ 中有相同的重复元素）或者自回路边（即边的起点和终点是同一个顶点），就叫做非简单图。</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210608220507.png" alt="图三　　两种非简单图"></p><p>(4)、邻接点（Adjacent Vertices）：如果 $(v, w)$ 是无向图中任意一条边，那么称 $v$ 和 $w$ 互为邻接点；如果 $&lt;v, w&gt;$ 是有向图中任意一条边，那么称起点 $v$ “邻接到”（Adjacent to）终点 $w$，也称终点 $w$ “邻接自”（Adjacent from）起点 $v$。比如，考察图二这个有向图 $G_2$，顶点 2  邻接到顶点 1，或者说顶点 1 邻接自顶点 2。</p><p>(5)、路径（Path）、简单路径（Simple Path）、回路（Cycle，也叫做“环”）、无环图（Acyclic Graph）：图中的一条路径是一顶点序列 $v_1, v_2, …, v_N$，序列中任何相邻的两顶点都能在图中找到对应的边，即 $(v_i, v_{i + 1}) \in E (1 \leqslant i &lt; N)$。一条路径的长度是这条路径所包含的边数。</p><p>一条<strong>简单路径</strong>是指除了路径的首尾顶点外，其余顶点都是不同的。</p><p>有向图中的一条回路是指 $v_1 &#x3D; v_N$ 的一条路径。路径长度为 1 的回路是一个自回路（属于非简单图）。简单路径形成的回路称为简单回路（Simple Cycle）。</p><p>如果在一个有向图中不存在回路，那么这个有向图称为无环图。</p><p>对于无向图，由于顶点是无序的，环路的长度要大于等于 3。</p><p>按：本文所有术语和定义皆摘自浙江大学《数据结构 第二版》（陈越、何钦铭），且省略了部分我认为不重要的内容。</p><p>(12)、连通图（Connected Graph）、连通分量（Connected Component）：在无向图中，如果从一个顶点 $v_i$ 到另一个顶点 $v_j(i \leq j)$ 有路径，则称顶点 $v_i$ 和 $v_j$ 是连通的（Connected）。如果图中任意两顶点都是连通的，则称该图是连通图。无向图的极大连通子图称为连通分量。连通分 量的概念包含以下 4 个要点：</p><ul><li>子图：连通分量应该是原图的子图；</li><li>连通：连通分量本身应该是连通的；</li><li>极大顶点数：连通子图含有极大顶点数，即再加入其他顶点将会导致子图不连通；</li><li>极大边数：具有极大顶点数的连通子图包含依附于这些顶点的所有边。</li></ul><p>因此，连通的无向图只有一个连通分量，这个连通分量就是本图。不连通的无向图有多于一个的连通分量。</p><p>(13)、强连通图（Strongly Connected Graph）、强连通分量（Strongly Connected Component）；对于有向图来说，若图中任意一对顶点 $v_i$ 和 $v_j(i \leq j)$ 均既有从 $v_i$ 到 $v_j$ 的路径，也有从 $v_j$ 到 $v_i$ 的路径，则称该有向图是强连通图。有向图的极大强连通子图称为强连通分量。</p><p>强连通分量的概念与连通分量类似，也包含 4 个要点。强连通图本身就是一个强连通分量。不是强连通的有向图有多于一个的强连通分量。</p>]]></content>
    
    
    <categories>
      
      <category>数据结构</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>数据结构</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>浙江大学《数据结构 第二版》pdf 分享</title>
    <link href="/2021/05/28/%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6%E3%80%8A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AC%AC%E4%BA%8C%E7%89%88%E3%80%8Bpdf-%E5%88%86%E4%BA%AB/"/>
    <url>/2021/05/28/%E6%B5%99%E6%B1%9F%E5%A4%A7%E5%AD%A6%E3%80%8A%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84-%E7%AC%AC%E4%BA%8C%E7%89%88%E3%80%8Bpdf-%E5%88%86%E4%BA%AB/</url>
    
    <content type="html"><![CDATA[<p>本资源收集自三叶资源网, 没有想到这个资源是真的, 在 Google 上搜索, 很多链接都是虚假的, 点击之后会跳转到这本书的购物网站页面, 气极. 遂再次分享之. </p><p>下面是我重新生成的百度网盘的链接</p><p>链接：<a href="https://pan.baidu.com/s/1gk3VKo1N-N6Wr7C4T37TqQ">https://pan.baidu.com/s/1gk3VKo1N-N6Wr7C4T37TqQ</a><br>提取码：kkds </p><p>需要注意的是, 本书的 pdf 质量并不怎么好, 因为虽然这本书的质量在我看来是十分好的, 而且配合浙江大学数据结构的慕课一起学习效果是非常好的, 但是了解这本书的人似乎并不是很多, 致使珠玉蒙尘, 只能徒呼奈何.</p>]]></content>
    
    
    <categories>
      
      <category>资源</category>
      
    </categories>
    
    
    <tags>
      
      <tag>数据结构</tag>
      
      <tag>资源</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>微软输入法导入 600 万短语词库</title>
    <link href="/2021/05/28/%E5%BE%AE%E8%BD%AF%E8%BE%93%E5%85%A5%E6%B3%95%E5%AF%BC%E5%85%A5-600-%E4%B8%87%E7%9F%AD%E8%AF%AD%E8%AF%8D%E5%BA%93/"/>
    <url>/2021/05/28/%E5%BE%AE%E8%BD%AF%E8%BE%93%E5%85%A5%E6%B3%95%E5%AF%BC%E5%85%A5-600-%E4%B8%87%E7%9F%AD%E8%AF%AD%E8%AF%8D%E5%BA%93/</url>
    
    <content type="html"><![CDATA[<p>今天用着这个微软拼音输入法, 突然觉得有点不顺手, 所以看网上有没有有相关的词库让我给导入, 以此来优化这个微软拼音的体验, 结果在吾爱破解找到了这个 600 万的词库(原帖地址:<a href="https://www.52pojie.cn/thread-1227015-1-1.html">https://www.52pojie.cn/thread-1227015-1-1.html</a>), 试用之后, 发现效果还可以, 遂分享之.</p><p>原帖给的是蓝奏云和天翼云的链接, 下面给出的百度网盘的链接</p><p>链接：<a href="https://pan.baidu.com/s/1JUQTMOa5ynkAG7mSCshLmQ">https://pan.baidu.com/s/1JUQTMOa5ynkAG7mSCshLmQ</a><br>提取码：jcv2 </p>]]></content>
    
    
    <categories>
      
      <category>Windows</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 命令行的 -m 参数</title>
    <link href="/2021/05/27/Python-%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84-m-%E5%8F%82%E6%95%B0/"/>
    <url>/2021/05/27/Python-%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84-m-%E5%8F%82%E6%95%B0/</url>
    
    <content type="html"><![CDATA[<h3 id="1-命令格式"><a href="#1-命令格式" class="headerlink" title="1. 命令格式"></a>1. 命令格式</h3><figure class="highlight fortran"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs fortran">python -m &lt;<span class="hljs-keyword">module</span>-<span class="hljs-keyword">name</span>&gt;<br></code></pre></td></tr></table></figure><h3 id="2-参数解释"><a href="#2-参数解释" class="headerlink" title="2. 参数解释"></a>2. 参数解释</h3><p>在 <code>sys.path</code> 中搜索指定模块, 并以 <code>__main__</code> 模块执行其内容.</p><p>该参数是 <em>模块名</em>(注一), 不能输入文件扩展名(.py). 模块名应该是有效的绝对的 Python 模块名, 但是 Python 不对此作强制要求(例如, 允许使用含连字符 <code>-</code> 的名称).</p><p>包名称(包括命名空间包(注二))也允许使用. 使用包名称而不是普通模块名时, 解释器把 <code>&lt;pkg&gt;.__main__</code> 作为主模块执行.</p><h3 id="3-使用范例"><a href="#3-使用范例" class="headerlink" title="3. 使用范例"></a>3. 使用范例</h3><p>创建一个名为 <code>my_env</code> 的 Python 虚拟环境</p><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs ebnf"><span class="hljs-attribute">python -m venv my_env</span><br></code></pre></td></tr></table></figure><p>使用 pip 安装 Django</p><figure class="highlight cmake"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmake">python -m pip <span class="hljs-keyword">install</span> django<br></code></pre></td></tr></table></figure><p>如果我们已经将 pip 添加到系统环境变量中去的话, 是可以直接使用 pip 命令的, 上面这个命令可以在系统中有多种版本的 Python 时给我们提供便利.</p><h3 id="4-补充"><a href="#4-补充" class="headerlink" title="4. 补充"></a>4. 补充</h3><p>关于 <code>sys.path</code> 的说明.</p><p>所谓 <code>sys.path</code>, 其实就是一个指明模块搜索路径的字符串列表(list). 详细内容可以参考文档 <a href="https://docs.python.org/3/library/sys.html#sys.path">https://docs.python.org/3/library/sys.html#sys.path</a>.</p><p>我们可以通过一个 Python 程序(我这里程序名为 draft04.py)来看一下这个 <code>sys.path</code> 是什么</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-keyword">import</span> sys<br><br><span class="hljs-keyword">for</span> each <span class="hljs-keyword">in</span> sys.path:<br>    <span class="hljs-built_in">print</span>(each)<br><br><span class="hljs-built_in">print</span>(<span class="hljs-built_in">len</span>(sys.path))<br></code></pre></td></tr></table></figure><p>然后在命令行执行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs cmd">py draft04.py<br></code></pre></td></tr></table></figure><p>得到结果</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529220848.png"></p><p>我们可以看到, 这里输出了很多文件路径, 这些路径下就有很多 Python 的包, 我们上面执行的 <code>python -m &lt;module-name&gt;</code>, 这里的的参数 <code>&lt;module-name&gt;</code> 就是从这些路径中搜寻而得, 比如, <code>python -m pip install django</code> 中的 pip, 就是从 <code>C:\Users\17309\AppData\Local\Programs\Python\Python38\lib\site-packages</code> 路径中搜寻而得,</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529221411.png"></p><p>再比如, <code>python -m venv my_env</code> 命令中的 <code>venv</code> 命令是从 <code>C:\Users\17309\AppData\Local\Programs\Python\Python38\lib</code> 中搜寻而得,</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210529221542.png"></p><h3 id="5-参考"><a href="#5-参考" class="headerlink" title="5. 参考"></a>5. 参考</h3><p><a href="https://docs.python.org/3/using/cmdline.html">https://docs.python.org/3/using/cmdline.html</a></p><hr><p>注一: 所谓模块名, 就是我们平时写的带 <code>.py</code> 文件扩展名的 Python 脚本文件, 把 <code>.py</code> 去掉就是模块名.</p><p>注二: 命名空间包, 就是包内不含有 <code>__init__.py</code> 的包.</p>]]></content>
    
    
    <categories>
      
      <category>Python</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python 实现作业排程问题</title>
    <link href="/2021/05/26/Python-%E5%AE%9E%E7%8E%B0%E4%BD%9C%E4%B8%9A%E6%8E%92%E7%A8%8B%E9%97%AE%E9%A2%98/"/>
    <url>/2021/05/26/Python-%E5%AE%9E%E7%8E%B0%E4%BD%9C%E4%B8%9A%E6%8E%92%E7%A8%8B%E9%97%AE%E9%A2%98/</url>
    
    <content type="html"><![CDATA[<h2 id="1-问题描述"><a href="#1-问题描述" class="headerlink" title="1. 问题描述"></a>1. 问题描述</h2><ul><li>Automobile factory with two assembly lines<ul><li>Each line has n stations: <code>$S_&#123;1, 1&#125;,...,S_&#123;1, n&#125;$</code> and <code>$S_&#123;2, 1&#125;,...,S_&#123;2, n&#125;$</code></li><li>Corresponding stations <code>$S_&#123;1, j&#125;$</code> and <code>$S_&#123;2, j&#125;$</code> perform the same function but can take different amounts of time <code>$a_&#123;1, j&#125;$</code> and <code>$a_&#123;2, j&#125;$</code></li><li>Entry times <code>$e_1$</code> and <code>$e_2$</code> and exit times <code>$x_1$</code> and <code>$x_2$</code></li></ul></li></ul><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210526133002.png" alt="装配线问题示意图"></p><p>给出一个示例的装配线，要求输出最优的排程方案</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210526133309.png"></p><h2 id="2-思路分析"><a href="#2-思路分析" class="headerlink" title="2. 思路分析"></a>2. 思路分析</h2><p>首先, 利用动态规划思想找出递归关系, 这个是<strong>最重要</strong>的一步</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210526134353.png" alt="递归式"></p><p>这里的 <code>$f_1[j]$</code> 表示在第一条装配线的第 j 个站台处理完之后所花费的最少的时间. <code>$f_2[j]$</code> 也是同理.</p><p>然后, 根据这个关系, 我们就可以自底向上构建 <code>$f_1$</code> 和 <code>$f_2$</code> 这两个数组了.</p><p>伪码描述如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210526135533.png" alt="伪码"></p><h2 id="3-代码实现"><a href="#3-代码实现" class="headerlink" title="3. 代码实现"></a>3. 代码实现</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><code class="hljs py"><span class="hljs-comment"># 最优排程问题</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">fastest_way</span>(<span class="hljs-params">a:<span class="hljs-built_in">list</span>, t:<span class="hljs-built_in">list</span>, e:<span class="hljs-built_in">list</span>, x:<span class="hljs-built_in">list</span>, n:<span class="hljs-built_in">int</span></span>) -&gt; <span class="hljs-built_in">list</span>:<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    解决最优排程问题</span><br><span class="hljs-string">    :param a: 两条线上各自的每个站点的各自处理时间</span><br><span class="hljs-string">    :param t: 两条线上各自的每个前 n - 1 个站点的切换时间</span><br><span class="hljs-string">    :param e: 两条线的各自的 entry 时间</span><br><span class="hljs-string">    :param x: 两条线的各自的 exit 时间</span><br><span class="hljs-string">    :param n: 每条线的工作站的数目</span><br><span class="hljs-string">    :return: 最优时间, 路径和最后一个走过的工作站点</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-comment"># 两条线上每个站的处理时间</span><br>    a1, a2 = a <span class="hljs-comment"># 自动解包</span><br>    <span class="hljs-comment"># 两条线在第 i 个站换线需要的时间</span><br>    t1, t2 = t<br>    <span class="hljs-comment"># 两条线上 e 和 x 的数值</span><br>    e1, e2 = e<br>    x1, x2 = x<br>    <span class="hljs-comment"># 两条线在每个装配点所花费的最小时间表（动态规划）</span><br>    f1 = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    f2 = [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]<br>    route = [[<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)], [<span class="hljs-number">0</span> <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(n)]]  <span class="hljs-comment"># 存储路径</span><br>    time = <span class="hljs-built_in">float</span>(<span class="hljs-string">&#x27;inf&#x27;</span>) <span class="hljs-comment"># 最优时间</span><br>    final_line = <span class="hljs-number">0</span> <span class="hljs-comment"># 最后一个节点所在的线路</span><br>    <span class="hljs-comment"># 初始化</span><br>    f1[<span class="hljs-number">0</span>] = e1 + a1[<span class="hljs-number">0</span>]<br>    route[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">1</span> <span class="hljs-comment"># 1 表示走第一条线路</span><br>    f2[<span class="hljs-number">0</span>] = e2 + a2[<span class="hljs-number">0</span>]<br>    route[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] = <span class="hljs-number">2</span> <span class="hljs-comment"># 2 表示走第二条线路</span><br>    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> <span class="hljs-built_in">range</span>(<span class="hljs-number">1</span>, n):<br>        <span class="hljs-keyword">if</span> f1[i - <span class="hljs-number">1</span>] + a1[i] &lt; f2[i - <span class="hljs-number">1</span>] + t2[i - <span class="hljs-number">1</span>] + a1[i]:<br>            f1[i] = f1[i - <span class="hljs-number">1</span>] + a1[i]<br>            route[<span class="hljs-number">0</span>][i] = <span class="hljs-number">1</span><br>        <span class="hljs-keyword">else</span>:<br>            f1[i] = f2[i - <span class="hljs-number">1</span>] + t2[i - <span class="hljs-number">1</span>] + a1[i]<br>            route[<span class="hljs-number">0</span>][i] = <span class="hljs-number">2</span><br>        <span class="hljs-keyword">if</span> f2[i - <span class="hljs-number">1</span>] + a2[i] &lt; f1[i - <span class="hljs-number">1</span>] + t1[i - <span class="hljs-number">1</span>] + a2[i]:<br>            f2[i] = f2[i - <span class="hljs-number">1</span>] + a2[i]<br>            route[<span class="hljs-number">1</span>][i] = <span class="hljs-number">2</span><br>        <span class="hljs-keyword">else</span>:<br>            f2[i] = f1[i - <span class="hljs-number">1</span>] + t1[i - <span class="hljs-number">1</span>] + a2[i]<br>            route[<span class="hljs-number">1</span>][i] = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">if</span> (f1[n - <span class="hljs-number">1</span>] + x1 &lt; f2[n - <span class="hljs-number">1</span>] + x2):<br>        time = f1[n - <span class="hljs-number">1</span>] + x1<br>        final_line = <span class="hljs-number">1</span><br>    <span class="hljs-keyword">else</span>:<br>        time = f2[n - <span class="hljs-number">1</span>] + x2<br>        final_line = <span class="hljs-number">2</span><br>    <span class="hljs-keyword">return</span> [time, route, final_line]<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">print_route</span>(<span class="hljs-params">i:<span class="hljs-built_in">int</span>, j:<span class="hljs-built_in">int</span>, route:<span class="hljs-built_in">list</span>, n:<span class="hljs-built_in">int</span></span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    递归打印装配的线路图</span><br><span class="hljs-string">    :param i: 装配线, 0 represents the first assembly line, 1 represents the second line</span><br><span class="hljs-string">    :param j: 当前节点</span><br><span class="hljs-string">    :param route: 存储两条线路的节点的父节点的 list</span><br><span class="hljs-string">    :param n: 装配线的节点数</span><br><span class="hljs-string">    :return: None</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    <span class="hljs-keyword">if</span> j == <span class="hljs-number">1</span>:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;[Line: &#x27;</span> + <span class="hljs-built_in">str</span>(i) + <span class="hljs-string">&#x27; Station: &#x27;</span> + <span class="hljs-built_in">str</span>(j) + <span class="hljs-string">&#x27;]&#x27;</span>, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        print_route(route[i - <span class="hljs-number">1</span>][j - <span class="hljs-number">1</span>], j - <span class="hljs-number">1</span>, route, n)<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;[Line: &#x27;</span> + <span class="hljs-built_in">str</span>(i) + <span class="hljs-string">&#x27; Station: &#x27;</span> + <span class="hljs-built_in">str</span>(j) + <span class="hljs-string">&#x27;]&#x27;</span>, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <span class="hljs-keyword">if</span> j != n:<br>        <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;=&gt;&#x27;</span>, end=<span class="hljs-string">&#x27; &#x27;</span>)<br>    <span class="hljs-keyword">else</span>:<br>        <span class="hljs-built_in">print</span>()<br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&#x27;__main__&#x27;</span>:<br>    n = <span class="hljs-number">5</span>  <span class="hljs-comment"># 每条线工作站的数目</span><br>    <span class="hljs-comment"># 两条线上每个站的处理时间</span><br>    a1 = [<span class="hljs-number">7</span>, <span class="hljs-number">9</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">8</span>]<br>    a2 = [<span class="hljs-number">8</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>    <span class="hljs-comment"># 两条线在第 i 个站换线需要的时间</span><br>    t1 = [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">3</span>]<br>    t2 = [<span class="hljs-number">2</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>]<br>    <span class="hljs-comment"># 两条线上 e 和 x 的数值</span><br>    e1 = <span class="hljs-number">2</span><br>    e2 = <span class="hljs-number">4</span><br>    x1 = <span class="hljs-number">3</span><br>    x2 = <span class="hljs-number">6</span><br>    a = [a1, a2]<br>    t = [t1, t2]<br>    e = [e1, e2]<br>    x = [x1, x2]<br>    res = fastest_way(a, t, e, x, n)<br>    time, route, final_line = res<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The shortest time:&#x27;</span>, time)<br>    <span class="hljs-built_in">print</span>(<span class="hljs-string">&#x27;The best assembly line is: &#x27;</span>, end=<span class="hljs-string">&#x27;&#x27;</span>)<br>    print_route(final_line, <span class="hljs-number">5</span>, route, n)<br><br></code></pre></td></tr></table></figure><p>输出</p><figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs pgsql">The shortest <span class="hljs-type">time</span>: <span class="hljs-number">35</span><br>The best assembly <span class="hljs-type">line</span> <span class="hljs-keyword">is</span>: [<span class="hljs-type">Line</span>: <span class="hljs-number">1</span> Station: <span class="hljs-number">1</span>] =&gt; [<span class="hljs-type">Line</span>: <span class="hljs-number">2</span> Station: <span class="hljs-number">2</span>] =&gt; [<span class="hljs-type">Line</span>: <span class="hljs-number">1</span> Station: <span class="hljs-number">3</span>] =&gt; [<span class="hljs-type">Line</span>: <span class="hljs-number">1</span> Station: <span class="hljs-number">4</span>] =&gt; [<span class="hljs-type">Line</span>: <span class="hljs-number">1</span> Station: <span class="hljs-number">5</span>] <br><br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>算法设计与分析</category>
      
    </categories>
    
    
    <tags>
      
      <tag>《算法导论》</tag>
      
      <tag>算法设计与分析</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>一些偏僻但有用的数学知识点</title>
    <link href="/2021/05/24/%E4%B8%80%E4%BA%9B%E5%81%8F%E5%83%BB%E4%BD%86%E6%9C%89%E7%94%A8%E7%9A%84%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%E7%82%B9/"/>
    <url>/2021/05/24/%E4%B8%80%E4%BA%9B%E5%81%8F%E5%83%BB%E4%BD%86%E6%9C%89%E7%94%A8%E7%9A%84%E6%95%B0%E5%AD%A6%E7%9F%A5%E8%AF%86%E7%82%B9/</url>
    
    <content type="html"><![CDATA[<p>知识点 1: 0 的阶乘是 1.</p><p>知识点 2: 在集合记号中, 冒号意指”使得”.</p>]]></content>
    
    
    <categories>
      
      <category>数学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>数学</tag>
      
      <tag>杂识</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Markdown 中空格的几种写法</title>
    <link href="/2021/05/23/Markdown-%E4%B8%AD%E7%A9%BA%E6%A0%BC%E7%9A%84%E5%87%A0%E7%A7%8D%E5%86%99%E6%B3%95/"/>
    <url>/2021/05/23/Markdown-%E4%B8%AD%E7%A9%BA%E6%A0%BC%E7%9A%84%E5%87%A0%E7%A7%8D%E5%86%99%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<p>感觉有种孔乙己在写茴香豆的茴的感觉……</p><p>哈哈, 回到正题, 就是在 Markdown 中书写空格的几种方法.</p><h3 id="1-使用-nbsp"><a href="#1-使用-nbsp" class="headerlink" title="1. 使用 &amp;nbsp;"></a>1. 使用 <code>&amp;nbsp;</code></h3><p>一共有四种(注1)表示空格的方法</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs md">&amp;emsp;<br>&amp;ensp;<br>&amp;nbsp;<br>&amp;thinsp;<br></code></pre></td></tr></table></figure><p>它们的间隙大小顺序是 <code>&amp;emsp;</code> &gt; <code>&amp;ensp;</code> &gt; <code>&amp;nbsp;</code> &gt; <code>&amp;thinsp;</code>.</p><h3 id="2-使用全角的空格"><a href="#2-使用全角的空格" class="headerlink" title="2. 使用全角的空格"></a>2. 使用全角的空格</h3><p>首先将输入法切换到全角模式, 然后输入空格即可.</p><p>不同的输入法, 比如微软输入法和搜狗输入法的切换全角和半角的方式, 自行搜索即可.</p><hr><p>注1：本来我是只知道一种表示方法的, 即 <code>&amp;nbsp;</code>, (lll￢ω￢).</p>]]></content>
    
    
    <categories>
      
      <category>markdown</category>
      
    </categories>
    
    
    <tags>
      
      <tag>博客</tag>
      
      <tag>markdown</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我读《别闹了，费曼先生》(未竟)</title>
    <link href="/2021/05/23/%E6%88%91%E8%AF%BB%E3%80%8A%E5%88%AB%E9%97%B9%E4%BA%86%EF%BC%8C%E8%B4%B9%E6%9B%BC%E5%85%88%E7%94%9F%E3%80%8B/"/>
    <url>/2021/05/23/%E6%88%91%E8%AF%BB%E3%80%8A%E5%88%AB%E9%97%B9%E4%BA%86%EF%BC%8C%E8%B4%B9%E6%9B%BC%E5%85%88%E7%94%9F%E3%80%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="读书笔记"><a href="#读书笔记" class="headerlink" title="读书笔记"></a>读书笔记</h2><p>１、阿琳生病期间，一直把那只钟放在床边，它却刚好在她去世的那一刻停顿。我明白，那些对这类事情疑信参半的人，在这种情况之下，不会立刻去研究事情的真相；他们会认定没人碰过那时钟，事情无法解释；而钟确实停了，确实可以算是一件惊人的超自然案例。</p><p>按：对于超自然现象，很小时候的我是嗤之以鼻的。现在呢，在经过了所谓的唯物主义的熏陶之后，我变了，至少，我不再排斥唯心主义了。这样一来，反而使我的心态在很多方面得到了纾解，譬如，我对于一些曾经被强行认为是糟粕的中华民族的传统文化，开始重新思考，而并不仅仅是一味地持排斥的态度。</p><p>２、冯诺曼教会了我一个很有趣的想法：你不需要为身处的世界负任何责任。因此我就形成了强烈的“社会不负责任感”，从此成为一个快活逍遥的人。</p><p>按 1：我在读《清明上河图密码》时，读到张用这个人物时，大为惊讶，书中的陆青给他的评价似乎是第一等的玩世者（具体是第几等忘了，反正是评价最高的一等），而这种玩世者，正是我最最羡慕的一种人，费曼当然也是这种人，尤其是在他领悟了“社会不负责任感”之后。不过，在这本书的描述中，他从小到大似乎一直都是一个彻头彻尾的高级玩世者。</p><p>按 2：这里的冯诺曼似乎是一个错误，我觉得应该是冯·诺伊曼才对，而且，费曼和冯·诺伊曼也是认识的。</p><p>３、上次他们来访后，老波耳跟他儿子说：“记得坐在后面那小伙子的名字吗？他是唯一不怕我的人，只有他会指出我的荒谬想法。</p><p>–分割–</p><p>在这方面我总是笨笨的。我总是忘记在跟谁说话，而一味担心物理上的问题。如果对方的想法差劲，我就告诉他那很差劲。如果他的想法很好，我就说很好。就那么简单，这就是我的处事方式。</p><p>按：直率也是费曼的一大性格特点，咱搞科学的，就要讲究效率嘛，而讲究效率的一个表现就是直来直去。看上去似乎有点傻，却非常有效。类似于躺平和逃避虽然有点可耻，但是确实是有用的。</p><p>４、除了 <code>$\pi$</code> 之外，第二重要的常数就是自然对数的底了，即 <code>$e = 2.71828 \cdots \cdots$</code>。</p><p>５、“你觉得你的生命有多少价值？”<br>　　“64。”<br>　　“为什么你说 64？”<br>　　“生命的价值能用数量的吗？”<br>　　“不！我是说，你为什么说‘64’，而不是——比如说——‘73’？”<br>　　“如果我刚才说‘73’，你也会问我同样的问题呀！”</p><p>按：机锋处见其直率。</p><p>５、20 世纪40 年代，我待在普林斯顿的期间，亲眼看到高等研究院内那些卓越心灵的下场。</p><p>按：联系上下文，发现，似乎思考是不能脱离实际的。与这种情况类似的，有一些不切实际的哲学家，或者说中科大的部分的少年班。</p><p>６、；但他们问我这个问题，却往往提醒了我相关的问题。单单靠自己，是不容易获得这种启示的。</p><p>按：这里是费曼在学生问他问题之后的思考。我以后在问老师问题时，也要联系一下这样的情况。反正错的不可能是我就对了。</p><p>７、绮色佳（Ithaca）</p><p>按：一个很好听的地名翻译。</p><p>８、我说：“嘿！我们可以躺在叶堆上睡呀！”我试了试，感觉软软的。。我厌倦了那样逛来逛去，在落叶上睡觉简直是十全十美！但我又害怕会因此惹上麻烦。早在罗沙拉摩斯时大家都取笑我——我又打鼓，又怎么的——说康奈尔不知道请来的是什么样子的教授，还说我一定会做些傻事而大大出名了；因此我得庄重点，最后很不情愿地放弃在那堆树叶上睡觉的念头。</p><p>按：童心未泯却又有所约束。</p><p>９、我脑筋没动那么快、想到那么多；我的反应很直接，想到就说。</p><p>按：每一次费曼这么说时，我都想给他一个大大的白眼。你这脑筋转得要是没那么快，那我们又算什么呢？</p><p>１０、“你大概还研究过原子弹呢！<br>　　　“是呀，战时我都待在罗沙拉摩斯。”<br>　　　她说：“你真是个该死的骗子！”就走开了。</p><p>–分割–</p><p>　　之后我便回避所有问题，效果便迥然不同了：<br>　　“你是个新生吗？<br>　　“噢，才不呢。”<br>　　“研究生？<br>　　“不。”<br>　　“你是干什么的？<br>　　“我不要说。”<br>　　“为什么不肯告诉我？<br>　　“我不想说……”——她们就一直跟我谈下去！</p><p>按：呵呵，拈花惹草。</p><p>１１、但那时候，除了准备课程之外，我经常跑到图书馆去，读《天方夜谭》，偷看身边的女孩；而到了做研时，我便无法专心工作。我觉得有点累，提不起兴趣，我无法做研究了。</p><p>–分割–</p><p>于是我就坐在那里读《天方夜谭》，觉得自己油尽灯枯，不断地自怜自艾。</p><p>按：大科学家也是有很困扰的时候的。可以以此为镜。</p><p>１２、高等研究院！特别安排！职位甚至比爱因斯坦的还要好！太理想、太完美了；也太荒谬了！</p><p>按：不宜妄自菲薄哈哈。</p><p>１３、接着我又有一个想法：目前我有点厌烦物理，但从前我很能够享受物理的乐趣。为什么会这样呢？因为从前我都在跟它玩游戏。从前我随兴之所至——我不会忧虑这究竟对核子物理的发展是否重要，只会想这是否有趣，好不好玩。。还在念高中时，看到水龙头流出来的水流逐渐变少，我很好奇能不能研究出它的曲线，而我发现那并不难。事实上，我根本没必要去研究它，它对科学发展也无关重要，何况那问题早有人研究过了。但对我来说毫无分别：我还是会发明些什么，为了觉得好玩而做物理。</p><p>　　这就是我的新人生观。好吧，我筋疲力尽，我永远不会有多么伟大的成就。</p><p>１４、我反正闲着，于是着手计算碟子的运动。结果发现当角度很小时，校徽转动的速度是摆动速度的两倍，刚巧是 2 比 1，而这是从一个很复杂的方程式推算出来的。我想：“有没有更基本的方法来处理这现象，例如从力或动力的角度来了解为什么刚好是 2 比 1？</p><p>１５、我已经下定决心，我要享受物理，随兴之所至。</p><p>１６、我做的毫无意义，可是结果呢，却恰好相反：后来我获颁诺贝尔奖的原因——费曼图以及其他的研究——全都来自那天我把时光“浪费”在一个转动的餐碟上！</p><p>１７、那位酒保总是不会让我身旁的椅子空着，每次都介绍我认识一些漂亮女人。</p><p>１８、他往后退，继而离开。如果他跟我一样笨，也许我们真会把对方打死的！</p><p>按：我曾经也有过想和别人打架的念头。奈何最终没有实施。</p><p>１９、我拿了一块钱，想到个好主意。我跑到杂货店，买了一块钱的饼干糖果（那时候一块钱可买很多东西），跑回理论组请大家吃，我说：“我发大财啦，各位！请你们吃片饼干！我的专利卖了一块钱！专利卖了一块钱！</p><p>按：哈哈有趣！</p><p>２０、我才明白我点那16 元一瓶的香槟，以及那么夸张和令人误会的“没关系啦！”居然是项很不错的投资。看来我早已声名在外，成了一个穿得并不怎么体面，但永远愿意花大把钞票在女孩身上的人。</p><p>按：恍惚间有一种楚香帅的感觉。</p><p>２１、“因此，”他继续说，“无论在什么情况之下，都不要充绅士！不要太尊重她们。而且，守则第一条是，不要买东西给她们——连一包烟也不要买——一直到你已问过她要不要跟你睡，而你已确定她会，不是在骗你。”</p><p>–分割–</p><p>我采取的心态是：酒吧那些女孩全都是一文不值的，她们只不过想骗你买酒请她喝而已，她们不会给你任何回报；我不要对这些一文不值的女人表示绅士风度……等等，反复练习，直到变成直觉反应一样。</p><p>–分割–</p><p>毕竟，酒吧里的女郎都在哄你请她喝酒而已，对她们不尊敬，心里不会太难过、不安——但眼前这个很好、一般的南方女孩呢？</p><p>我们走进酒吧，还没坐下来，我说：“在我请你喝杯酒之前，我想知道一件事：今晚你愿意跟我睡吗？</p><p>“愿意。”</p><p>因此这手法在一般女孩身上也用得着！但无论有多灵验，以后我再也没那样做了——我不喜欢那样尔虞我诈。但整个经验最有趣的，是发现世界上有许多事情的运作方式，跟我从小被教导的一套，居然会有这样大的差异！</p><p>按：其实，我很好奇的是，那里的性是这么自由的吗？</p><p>２２、跟贝特一起应用各种诀窍做快速心算，真是好玩极了。通常我想到的，他都想到，我很少能算得比他快。而如果我算出一题的话，他就开怀大笑起来。无论什么题目，他总是能算出来，误差差不多都在1%以内。对他而言，这简直是轻而易举——任何数字总是接近一些他早已熟悉的数字。</p><p>２３、“谁说不痛？我也痛啊！”<br>　　　我觉得自己真的有够笨，竟让他骗我拿着尺打自己打了两个札拜！</p><p>按：经典费曼别骗。</p><p>２４、这个顾客是如何打赢算盘的？题目是1729.03。我刚巧知道一立方英尺有1728 立方英寸，因此答案必定是12 多一点点。多出来的1.03呢，大约是二千分之一，而我在微积分课里学过，就小分数而言，立方根超出的部分是数字超出部分的三分之一，因此我只需要算1&#x2F;1728是多少，再乘以4（即除3 再乘12）。这是为什么我一下就能算出那么多小数位。</p><p>２５、此外，他根本无法理解求近似值方法所包含的道理，他不明白在很多情况下，任何方法都求不出完整的立方根，但可以求近似值。因此我永远无法教会他我求立方根的方法，甚至让他明白那天我有多幸运，因为他刚好挑了个像1729.03 这样的数字！</p><p>２６、但当他们很辛苦地用英语说话时，就算他们发音不准、文法又错乱，我还是可以分辨他们要说些什么。因此我明白到，如果我要教他们东西，比较好的方法是我说葡语，虽然我说不好，但这样他们还是比较听得懂。</p><p>按：费曼作为老师来说，其品格也是很好的。就这一点，我联想到了我们用英文 PPT 教学的老师，呵呵，自顾自呢。</p><p>２７、要知道，我一向从思考过程中获得许多的乐趣，以致很不愿意破坏这部生命中最好玩的机器——换句话说，自己的身体。这也是为什么，虽然我对幻觉现象充满了好奇，我还是不愿意尝试迷幻药。</p><p>按：这种态度非常值得学习！</p><p>２８、我无法推动他们做到的另一件事，是问问题。终于，一个学生告诉我其中的原因：“如果我在课堂上问你问题，之后大家都会跑来说：‘你为什么浪费大家的时间？我们的目的是学东西。但你却打断他，问他问题。”<br>　　　这是一种打压别人的坏风气。事实上大家全都不懂，但他们表现出一副很懂的样子，以把别人比下去。他们全在假装明白课程内容，如果有学生偶然承认有些事情不够清楚，问问题，其他人便立刻摆出高高在上的样子，表现出一切都很清楚明白，并告诉他：“你在浪费其他人的时间。”<br>　　　我跟他们说，大家一起做功课、讨论问题都是多么有用的方法；但他们也不要那样做，因为他们认为，开口问别人是很丢脸的事——真是可怜可悲！他们努力学习了不少，人也很聪明，但他们让自己陷入这种可笑的心理状态。这真是种奇怪的、完全没有意义的“教育”！</p><p>按：这种现象非常值得让人深思。我发现在大学里，很多人的知识是学得一知半解的，而这些人，却根本没想过去问问题，有些老师对于问题的解答的态度，也有点耐人寻味，这不是一个好现象。</p><p>２９、“你们答应过我想讲什么，就讲什么！”<br>演讲厅里全坐满了。首先我把科学定义为“对大自然现象的理解”，然后我问：“教学生科学有什么好处呢？当然，如果不注重科学，这个国家就还不够文明……。”他们全坐在那里点头赞同，我很清楚这正是他们的想法。<br>　　　然后我话锋一转：“当然，这是十分荒谬的，因为，我们为什么一定非要追上另一个国家不可？我们应该是为了一个好理由、充分的理由才教授科学，而不是只因为其他国家也研究科学。”我谈到科学的应用、科学对于改进人类生活的贡献——我着实挖苦了他们一顿。<br>　　　然后我说：“我这次演讲的主题，是要向各位证明，巴西根本没有在教科学！”<br>　　　他们明显地激动起来了，全都在想：“什么？没有在教科学？这话太疯狂了！我们开了一大堆科学课呢！”<br>　　　我告诉他们，刚到巴西时，令我最震惊的是，看到小学生在书店里购买物理书。这么多巴西小孩在学物理，全都比美国小孩更早起步，结果整个巴西却没有几个物理学家，这真是令人惊讶极了——为什么会这样？这么多小孩那样的用功，结果却一点成效也没有！<br>　　　我举例说，这好比一个深爱希腊文的希腊学者，他知道在他自己的国家里，小孩都不大爱念希腊文。但当他跑到别的国家，却发现那里的人都在研究希腊文，甚至小学生也在读，他高兴极了，但在一个主修希腊文学生的学位考试上，他问学生：“苏格拉底谈到真理和美之间的关系时，提出过什么主张？”——学生答不出来。然后学者又问：“苏格拉底在第三次对话录中跟柏拉图说过些什么？”学生立刻眉飞色舞，以极优美的希腊文，一字不漏的把苏格拉底说过的话背出来。<br>　　　可是，苏格拉底在第三次对话录里所说的，正是真理和美之间的关系呢！<br>　　　这位希腊学者发现的是，那个国家的学生学习希腊文的方式，是首先学会字母的发音，然后是字的读法，再后来是一句及一段地学下去。他们可以把苏格拉底说过的话倒背如流，却完全不知道那些希腊字是有其意义的。对学生来说，一切都只不过是些很人工化的声音罢了。从来没有人把这些声音翻译成学生看得懂的东西。<br>　　　我说：“当我看到你们教小孩‘科学’的方式时，我的感觉就跟那希腊学者一模一样。”（很够震撼是不是？）</p><p>按：振聋发聩啊！陛下，不可不察啊！！</p><p>３０、知道吗？我总喜欢弄明白这个世界到底是怎么一回事！</p><p>按：我猜，原文肯定是，you know… 然后巴拉巴拉。</p><p>３１、我必须拒绝这么高的薪水，原因是如果我真的拿那种高薪，我就可以实现一切从前想做的事了——找一个很漂亮的情妇，替她找个公寓，买漂亮东西给她……用你们给我的薪水，我真的可以那样做，但我也知道我会变成怎么样。</p><p>按：这个做法我不能理解呀。差点让我怀疑这个事情的真是性了都。</p><p>３２、战前日本出过几位大有名气的物理学家，例如诺贝尔奖得主汤川秀树（1907～1981）、朝永振一郎（1906～1979）以及仁科芳雄（1890～1951）等。</p><p>按：我记得汤川秀树和朝永振一郎曾经是同班同学。</p><p>３３、我抬头往花园的方向看去，看到一个很美丽的年轻日本女人，穿着很可爱的衣服，坐在玄关上。<br>　　　我读了很多关于日本风俗的资料，晓得为什么她被派来我的房间。我想：“这可能很有趣！<br>　　　她会讲一点英文。“你喜欢逛花园吗？”她问。<br>　　　我穿上鞋子，披上和服就走出去。她勾着我的手臂，指点花园的景色给我看。<br>　　　后来我发现，原来只因为她懂一点英文，旅馆经理觉得我大概会喜欢她带我去逛逛花园，就这么简单而已。当然，我有点失望，但我知道东西文化交流时，很容易发生误会。</p><p>按：呵呵，你这个 lsp。</p><p>３４、那是我第一次到日本。我很想再回去，我告诉他们，只要有大学想要我，我都肯去。因此日本人就安排了一连串的地点，让我到每个地方待上几天。</p><p>按：中国，可惜了。</p><p>３５、“等一下，”我说，“你讲的问题有没有什么例子？<br>　　　“当然有。”<br>　　　“很好，那么就举一个例子。”这是我的作风：除非我脑袋里能出现一个具体的例子，然后根据这个特例来演算下去，否则我无法理解他们说的东西。所以很多人一开始时会觉得我反应有点慢，不了解问题所在，因为我问一大堆笨问题，像“阴极是正的还是负的？阴离子是这样的还是那样的？”</p><p>按：下次可以拿费曼的例子来怼别人。</p><p>３６、由于我总是要求别人给我实际例子，而不是要他们写数学方程式，所以有一份在科学家之间流传的油印刊物（这是他们在战后设计出来的一种简单有效的传播信息方式），用“费曼的轰炸及我们的回应”的标题，来总结我在日本各地的访问。</p><p>３７、因为物理学里有个定律叫“宇称规则”——那是建立在“所有的物理定律，其镜中影像都是对称的”的假定上。</p><p>按：杨振宁和李振道发现的定律。</p><p>３８、李政道站起来，回答了一些很复杂的东西，而按例我又是不太听得懂。会议快结束时，布洛克问我李政道说了些什么，我说不知道，但就我所知，这问题还没有答案——还是有可能发生的。我不认为可能性会很高，但我觉得那是有可能的。</p><p>按：不可思议！</p><p>３９、总之，后来吴健雄以实验证明了宇称也有不守恒的时候，而这替贝塔衰变理论带来了许多新的可能性，也启发了一大堆其他实验。有些证明了从核子出来的电子，有一部分飞向左边、一部分飞向右边；更有其他形形式式的实验，全都是跟宇称有关的有趣发现。然而数据是那么的混乱，根本没有人能够把东西拼凑在一起。</p><p>４０、画其他模特儿时，画得大一点或小一点<br>都没什么差别，反正他们的身材都不怎么样。但当你要画一个外貌、身材都这么匀称的女孩时，你骗不了自己——每一笔都必须恰到好处才行！</p><p>４１、我从她身上学到的是，不管长得多美，每个女人都在担心自己的外貌。</p><p>４２、会议中有很多笨蛋——经过伪装的笨蛋——把我逼疯了。一般的笨蛋还好，你可以跟他们谈、解释，帮助他们走出迷惘。但经过伪装的笨蛋——明明是笨蛋却假装不是，拼命想叫别人佩服他们，希望别人觉得他们聪明、伟大——这，我受不了！</p><p>４３、这是我经常玩的游戏之一。他们想要收据？我一张收据也不要给他们。那么你就拿不到钱了。好，那么我就不拿这笔钱。他们不相信我？见他的鬼吧，他们不必付我钱。当然这是很荒谬的！我也知道这是政府作风，那么去他的政府吧！我觉得人应该把人当人看待。而直到我被当人看待之前，我不要跟他们有任何瓜葛！他们觉得难受吗？我也觉得难受呀！就那样算了吧。我知道他们在“保护纳税人”，但请看看在下面的例子中，纳税人到底受到怎么样的保护。</p><p>按：执拗的一面。</p><p>４４、我的开场白是：对我而言，从科学研究的发现中所得到的乐趣，以及从别人可以利用我的研究成果等等，我已经得到了我的奖赏。我试图说明，我已经得到了我所期望的一切，因此，其余的事物相形之下，也就无足轻重，我真的已经得到了我的奖。</p><p>按：诺奖开场白。</p><p>４５、我告诉这位日本大使，我一直对一件很不寻常的事情感兴趣：日本如何能这么快速地发展成这样现代化的世界强国呢？“日本人能够做到这地步，跟日本人性格或作<br>风中的哪一面有关？”我问。<br>　　　大使的回答深得我心。他说：“我不知道。我只能假设，但我不知道那正不正确。日本人相信他们只有一种出头的方式，就是让子女受更多的教育，比自己受的教育更多。对他们而言，脱离农夫的地位，成为知识分子是很重要的事。</p><p>按：下次如果有人说日本战后发展那么快都是靠美国之类的混话时，我就拿这个例子来和他说道说道。</p><p>４６、我的鼓打得愈来愈好了，有时候在一些聚会里我也会表演一下。其实我也不晓得自己在打些什么，只不过随意弄些有节奏感的声音出来而已，但我因此就有点名气了。罗沙拉摩斯的每个人都知道我喜欢打鼓。</p><p>按：除了绘画的另一项才艺。不过，这可不是像今天中国的一些鸡娃被鸡出来的技能，而纯粹是由于我想学，我觉得有趣而融汇贯通的一个爱好。</p><h2 id="几个有趣的数学知识"><a href="#几个有趣的数学知识" class="headerlink" title="几个有趣的数学知识"></a>几个有趣的数学知识</h2><hr><p>重要的待整理的内容：</p><p>1、费曼关于和女孩睡觉经验（虽然他也是跟师傅学来的）。</p><p>2、p179 求级数的一些技巧，另外还有一些其他书中提到的关于心算方面的技巧的整理。</p><p>3、p184 关于求立方根的整理。</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>读书</tag>
      
      <tag>传记</tag>
      
      <tag>思考</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>我读《古趣图》(一集)(未竟)</title>
    <link href="/2021/05/23/%E6%88%91%E8%AF%BB%E3%80%8A%E5%8F%A4%E8%B6%A3%E5%9B%BE%E3%80%8B-%E4%B8%80%E9%9B%86/"/>
    <url>/2021/05/23/%E6%88%91%E8%AF%BB%E3%80%8A%E5%8F%A4%E8%B6%A3%E5%9B%BE%E3%80%8B-%E4%B8%80%E9%9B%86/</url>
    
    <content type="html"><![CDATA[<h2 id="读书笔记"><a href="#读书笔记" class="headerlink" title="读书笔记"></a>读书笔记</h2><p>按：微信读书上有一个白话文版本的，我觉得没有这个原版，也就是文言版的够味儿，故这个笔记仅摘录文言版。</p><h3 id="孔融早慧"><a href="#孔融早慧" class="headerlink" title="孔融早慧"></a>孔融早慧</h3><p>（孔）融幼有异才。年十岁，随父诣京师。时河南尹李膺以简重自居，不妄接士宾客，敕外自非当世名人及与通家，皆不得白。融欲观其人，故造膺门。语门者曰：“我是李君通家弟子。”门者言之。膺请融，问曰：“高明祖父尝与仆有恩旧乎？”融曰：“然。先君孔子与君先人李老君同德比义，而相师友，则融与君累世通家。”众坐莫不叹息。太中大夫陈炜后至，坐中以告炜。炜曰：“夫人小而聪了，大未必奇。”融应声曰：“观君所言，将不早慧乎？”膺大笑曰：“高明必为伟器。”　　–《后汉书》</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210523165431.png" alt="孔融早慧"></p><h3 id="我不见了"><a href="#我不见了" class="headerlink" title="我不见了"></a>我不见了</h3><p>一呆役解罪僧赴府，临行恐忘记事物，细加查点，又自己编成两句曰：“包裹雨伞枷，文书和尚我。”</p><p>途中步步熟记此二句。僧知其呆，用酒灌醉，剃其发以枷套之，潜逃而去。</p><p>役酒醒曰：“且待我查一查看，包裹雨伞有。”摸须上曰：“枷，有。”文书，曰：“有。”忽惊曰：“哎呀，和尚不见了！”</p><p>顷之，摸自光头曰：“喜得和尚还在，我却不见了。”　　–《传家宝》</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210528172817.png" alt="我不见了"></p><h3 id="如意"><a href="#如意" class="headerlink" title="如意"></a>如意</h3><p>齐人有女，二家同往求之，东家子丑而富，西家子好而贫，父母不能决，使其女偏袒（注1）示意。女便两袒，母问其故，答曰：“欲东家食而西家宿。”　　–《古今谭概》</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210523165528.png" alt="如意"></p><p>按：来一个性转版又有何不可呢？人心都是一样的。呵呵。呵呵呵。</p><p>注1：偏袒：袒露出手臂的意思. 在这里表达的是, 你喜欢哪一个男人, 就袒露出相对应的那一边的手臂.</p><h2 id="有感而发"><a href="#有感而发" class="headerlink" title="有感而发"></a>有感而发</h2><p>本书在介绍语中有写，“除供读者茶余饭后的消遣外，还可鉴古知今，发挥匡正时弊的效力”。联系小丁，也就是丁聪这个可爱的老头，在豆瓣上看过一些他的针砭时弊的漫画，那可真是威力巨大。那么，小丁为人的形象，就呼之欲出了。我国能有这样的漫画家，多少还是能给一些明理之士增加一些信心的。</p>]]></content>
    
    
    <categories>
      
      <category>读书</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>读书</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>关于我这一个博客窝的README</title>
    <link href="/2021/05/22/%E5%85%B3%E4%BA%8E%E6%88%91%E8%BF%99%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E7%AA%9D%E7%9A%84README/"/>
    <url>/2021/05/22/%E5%85%B3%E4%BA%8E%E6%88%91%E8%BF%99%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E7%AA%9D%E7%9A%84README/</url>
    
    <content type="html"><![CDATA[<p>由于最近新买了一台 ThinkPad, 所以笔记本现在是可以随时带到想要带的地方. 现在写博客对我来说, 可谓是相当容易的一件事情, 所以, 为何不时时而为之呢?</p><p>另外, 这里要说一下我对于这个博客的总体期望, 即: 只要在桌面端能够保持完美的适配我就心满意足了. 原因除了现阶段没有太多时间搞这些东西, 还有我本身对于我自己不要太过拥有强迫症的期望.</p><h2 id="1-关于我的图片"><a href="#1-关于我的图片" class="headerlink" title="1. 关于我的图片"></a>1. 关于我的图片</h2><h3 id="1-1-图片的来源"><a href="#1-1-图片的来源" class="headerlink" title="1.1 图片的来源"></a>1.1 图片的来源</h3><p>因为这个主题对于图片的要求是必须的, 所以, 我打算每一篇博客都使用不同的图片, 然后, 图片的来源有吉卜力的官网和 pivix 站的一些图片.</p><p>存储的方式是将其全部存储在 Github 上面(我的所有博客都是拿 Github 当作图床的), 然后定期在我的电脑上给这些图片备份. 这样一来就可以防止图片丢失了.</p><p>另外, 我搜集的图片会事先上传到 Github, 然后写博客的时候一张一张取出来就好, 所有图片的链接我是准备保存在图片的同一个文件夹下的一个 <code>md</code> 文件中. 不过, 似乎这样一来就没有单独在这个文件夹下保存图片的必要了呢. </p><h3 id="1-2-图片的格式问题"><a href="#1-2-图片的格式问题" class="headerlink" title="1.2 图片的格式问题"></a>1.2 图片的格式问题</h3><p>这个主题渲染的图片, 在书写时, 直接写原生的 markdown 语法即可. 但是有一点要注意的是, 如果我们在格式 <code>![]()</code> 的方括号中写入内容的话, 那么, 这些内容是会被渲染到图片的正下方作为描述性的内容的, 如果为空的话, 那么, 图片的呈现就会是纯粹的图片.</p><h2 id="2-关于我在记录博客的过程中遇到的问题"><a href="#2-关于我在记录博客的过程中遇到的问题" class="headerlink" title="2. 关于我在记录博客的过程中遇到的问题"></a>2. 关于我在记录博客的过程中遇到的问题</h2><p>这里的问题主要是针对我目前正在使用的 Hexo 引擎和 Fluid 主题.</p><h3 id="2-1-数学公式渲染问题"><a href="#2-1-数学公式渲染问题" class="headerlink" title="2.1 数学公式渲染问题"></a>2.1 数学公式渲染问题</h3><p>现在我是用的渲染引擎是 <code>kramed</code>, 它有一个问题, 就是对于行内数学公式的渲染是有问题的, 不过, 它也有自己的解决办法, 就是要按照它的格式来, 即将已经使用一对美元符号包裹的数学公式外面再加上一个行内代码的标识, 比如</p><figure class="highlight md"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs md"><span class="hljs-code">`$a^2 + b^2 = c^2$`</span><br></code></pre></td></tr></table></figure><p>这样, 就可以正常渲染了.</p><p>对了, 其实还有一个问题, 就是在书写行内数学公式时, 如果公式的内容太长, 最好在有标点的地方截断一下, 否则在移动端就会出现公式溢出的情况. 当然, 我也不是那种有很强烈的强迫症的那种人, 只是, 在尽可能范围内使我输出内容维持一个相对完美的状态. 因为这个溢出问题刚好可以这样解决, 我就顺手这样做了. 我现阶段的总体理念还是只要维持好桌面端的网页呈现内容就 ok 了.</p><h2 id="3-关于我写博客的特殊偏好"><a href="#3-关于我写博客的特殊偏好" class="headerlink" title="3. 关于我写博客的特殊偏好"></a>3. 关于我写博客的特殊偏好</h2><h3 id="3-1-标点问题"><a href="#3-1-标点问题" class="headerlink" title="3.1 标点问题"></a>3.1 标点问题</h3><p>现阶段我是更加偏向于使用英文的半角标点的, 因为在写和计算机, 工科和数学相关的一些博客时, 使用英文的半角标点对于排版要更加友好一点. </p><p>但是, 如果我写一篇非技术类的博客, 并且, 同时使用的是纯中文的话, 我可能会全篇使用中文的全角标点.</p><p>当然, 在使用半角标点的过程中, 有时遇到书名号这种必须使用全角标点的情况, 那肯定还是要使用全角的. 我的目前对于博客的哲学是, 尽量在整体上保持一种 “圆润” 的感觉, 因此, 我现在的专注点是在内容上.</p><p>关于标点，还有一个问题，就是全角和半角的问题，因为我在作摘抄的时候是必须要用到顿号这个纯中文标点的，然后，它和半角的数字在一起之后，如果我要摘抄对话类型的文字，那么，下一行的对齐问题就会冒出来了。所以，为了解决这个问题，我决定这个数字和顿号都使用全角。然后，下一行的行首空格就用中文的全角空格代替，一个全角空格正好是两个字符，也就是一个汉字的宽度。</p><p>还有一个注意点，注释里面的标点符号，第一个标点不能够使用中文标点，否则会导致移动端适配问题。我淦。所以我基本上就使用英文的半角标点了。（呵呵，最后适配还是除了问题，应该是我手机的问题，它就是不适配这个尺寸的。管它呢。现在只要做好桌面端的排版就 ok 了。移动端排版终于崩了。呵呵。）（呵呵，最后还是把注释改成了手动的格式，因为本来的脚注格式其实也不好看）</p><h2 id="4-关于我的博客的标签和分类"><a href="#4-关于我的博客的标签和分类" class="headerlink" title="4. 关于我的博客的标签和分类"></a>4. 关于我的博客的标签和分类</h2><p>分类有的，标签都有。标签有的，分类是不一定有的。</p><h3 id="4-2-标签"><a href="#4-2-标签" class="headerlink" title="4.2 标签"></a>4.2 标签</h3><h4 id="读书"><a href="#读书" class="headerlink" title="读书"></a>读书</h4><p>这个标签主要是记录我的读书笔记的。一般来说，这个读书笔记博文它会分成两个部分，一个部分是摘抄和我当时的感想，感想的标记用一个“按”字来标注，仿照的是张中晓的“无梦楼楼主按”。而另一个部分则是我看完整本书之后的有感而发。</p><h4 id="未竟"><a href="#未竟" class="headerlink" title="未竟"></a>未竟</h4><p>这个标签下的文章都是暂时没有写完的。</p><h3 id="4-1-分类"><a href="#4-1-分类" class="headerlink" title="4.1 分类"></a>4.1 分类</h3><p>分类中的所有条目在标签里面都可以找到，所以这里就不再赘述。</p><p><strong>我宣布，以上怪癖处作废。</strong></p>]]></content>
    
    
    <categories>
      
      <category>杂项</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>杂项</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>华科计算方法习题一解答</title>
    <link href="/2021/05/22/%E5%8D%8E%E7%A7%91%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E4%B9%A0%E9%A2%98%E4%B8%80%E8%A7%A3%E7%AD%94/"/>
    <url>/2021/05/22/%E5%8D%8E%E7%A7%91%E8%AE%A1%E7%AE%97%E6%96%B9%E6%B3%95%E4%B9%A0%E9%A2%98%E4%B8%80%E8%A7%A3%E7%AD%94/</url>
    
    <content type="html"><![CDATA[<h2 id="习题解答"><a href="#习题解答" class="headerlink" title="习题解答"></a>习题解答</h2><p>1.1 试证明:</p><p>(1) <code>$||\mathbf&#123;x&#125;||_&#123;\infty&#125; = \mathop&#123;max&#125;\limits_&#123;1 \leqslant i \leqslant n&#125; |x_i|, $</code> <code>$\quad \mathbf&#123;x&#125; = (x_1, x_2, ..., x_n)^T \in \mathbf&#123;R&#125;^&#123;n&#125;;$</code></p><p>(2) <code>$\displaystyle ||\mathbf&#123;A&#125;||_&#123;\infty&#125; = \mathop&#123;max&#125;_&#123;1 \leqslant i \leqslant n&#125; \sum_&#123;j = 1&#125;^&#123;n&#125;|a_&#123;ij&#125;|,$</code> <code>$\quad \mathbf&#123;A&#125; = (a_&#123;ij&#125;) \in \mathbf&#123;R&#125;^&#123;n \times n&#125;.$</code></p><p>证明: </p><p>(1) 令 <code>$|x_r| = \mathop&#123;max&#125;\limits_&#123;1 \leqslant i \leqslant n&#125;|x_i|$</code>, 则有:</p><p>$$|x_r| \leqslant (\sum_{i &#x3D; 1}^{n} |x_i|^{p})^{\frac{1}{p}} \leqslant (n|x_r|^p)^{\frac{1}{p}} &#x3D; n^{\frac{1}{p}} \cdot |x_r|, $$</p><p>令 <code>$p \to \infty$</code>, 由夹逼定理得:</p><p>$$||\mathbf{x}||<em>{\infty} &#x3D; \lim</em>{p \to \infty} (\sum_{i &#x3D; 1}^{n}|x_i|^p)^{\frac{1}{p}} &#x3D; |x_r|.$$</p><p>(2) 令 <code>$\mathbf&#123;x&#125; = (x_1, x_2, ..., x_n)^T \neq 0$</code>, 不妨设 <code>$\mathbf&#123;A&#125; \neq \mathbf&#123;0&#125;$</code>,</p><p>令 <code>$\displaystyle \mu = \mathop&#123;max&#125;_&#123;1 \leqslant i \leqslant n&#125; \sum_&#123;j = 1&#125;^&#123;n&#125; |a_&#123;ij&#125;|$</code>, 则有</p><p>$$||\mathbf{Ax}||<em>{\infty} &#x3D; \mathop{max}</em>{1 \leqslant i \leqslant n} \sum_{j &#x3D; 1}^{n}|a_{ij} x_{j}| \leqslant \mathop{max}<em>{1 \leqslant i \leqslant n} \sum</em>{j &#x3D; 1}^{n}|a_{ij}| \cdot \mathop{max}<em>{1 \leqslant i \leqslant n}|x_i|  &#x3D; \mu||\mathbf{x}||</em>{\infty},$$</p><p>即对任意非零 <code>$\mathbf&#123;x&#125; \in \mathbf&#123;R&#125;^n$</code>, 有</p><p>$$\frac{||\mathbf{Ax}||<em>{\infty}}{||\mathbf{x}||</em>{\infty}} \leqslant \mu$$</p><p>下面证明存在向量 <code>$\mathbf&#123;x_0&#125; \neq \mathbf&#123;0&#125;$</code>, 使得 <code>$\displaystyle \frac&#123;||\mathbf&#123;Ax_0&#125;||_&#123;\infty&#125;&#125;&#123;||\mathbf&#123;x_0&#125;||_&#123;\infty&#125;&#125; = \mu$</code>.</p><p>设 <code>$\displaystyle \mu = \sum_&#123;j = 1&#125;^&#123;n&#125;|a_&#123;i_0j&#125;| = \mathop&#123;max&#125;_i\sum_&#123;j = 1&#125;^&#123;n&#125;\left|a_&#123;ij&#125;x_j\right|$</code>, 取向量 <code>$\mathbf&#123;x_0&#125; = (x_1, x_2, ..., x_n)^T$</code>, 其中 <code>$x_j = sign(a_&#123;i_0j&#125;) \: (j = 1, 2, ..., n)$</code>. 显然, <code>$||\mathbf&#123;x_0&#125;||_&#123;\infty&#125; = 1$</code>, 且 <code>$\mathbf&#123;Ax_0&#125;$</code> 任意分量为 <code>$\displaystyle \sum_&#123;i = 1&#125;^&#123;n&#125;|a_&#123;i_0j&#125;x_j| = \sum_&#123;i = 1&#125;^&#123;n&#125;|a_&#123;i_0j&#125;|$</code>, </p><p>故有 <code>$||\displaystyle \mathbf&#123;Ax_0&#125;||_&#123;\infty&#125; = \mathop&#123;max&#125;_i\sum_&#123;j = 1&#125;^&#123;n&#125;\left|a_&#123;ij&#125;x_j\right| = \sum_&#123;j = 1&#125;^&#123;n&#125;\left| a_&#123;i_0j&#125; \right| = \mu$</code>.</p><p>注: <code>$sign(x)$</code> 或者 <code>$Sign(x)$</code> 叫做符号函数, 在数学和计算机运算中, 其功能是取某个数的符号(正或负),</p><p>当 <code>$x &gt; 0, sign(x) = 1$</code>;</p><p>当 <code>$x = 0, sign(x) = 0$</code>;</p><p>当 <code>$x &lt; 0, sign(x) = -1$</code>.</p><p>1.3 设矩阵 <code>$\mathbf&#123;A, B&#125; \in \mathbf&#123;R&#125;^&#123;n \times n&#125;$</code>, 其中 <code>$\mathbf&#123;A&#125;$</code> 可逆, 且存在矩阵范数 $||\cdot||$ 使得</p><p>$$||\mathbf{A}^{-1}|| \leqslant \alpha, \quad ||\mathbf{A} - \mathbf{B} \leqslant \beta||, \quad \alpha \beta &lt; 1.$$</p><p>试证明矩阵 <code>$\mathbf&#123;B&#125;$</code> 也可逆, 且其逆矩阵满足估计</p><p>$$||\mathbf{B}^{-1}|| \leqslant \frac{\alpha}{1 - \alpha \beta}.$$</p><p>证明:</p><p>由已知条件有:</p><p>$$||\mathbf{I} - \mathbf{A}^{-1}\mathbf{B}|| &#x3D; ||\mathbf{A}^{-1}(\mathbf{A} - \mathbf{B]})|| \leqslant \alpha \beta &lt; 1.$$</p><p>又 <code>$\mathbf&#123;A&#125;^&#123;-1&#125;\mathbf&#123;B&#125; = \mathbf&#123;I&#125; - (\mathbf&#123;I&#125; - \mathbf&#123;A&#125;^&#123;-1&#125;\mathbf&#123;B&#125;)$</code>. 因此, 根据定理 1.8 <code>$\mathbf&#123;A&#125;^&#123;-1&#125;\mathbf&#123;B&#125;$</code> 可逆, 从而 <code>$\mathbf&#123;B&#125;$</code> 也可逆, 且有</p><p>$$||\mathbf{B}^{-1}|| &#x3D; ||[\mathbf{I} - (\mathbf{I} - \mathbf{A}^{-1}\mathbf{B})]^{-1} \mathbf{A}^{-1}|| \leqslant ||[\mathbf{I} - (\mathbf{I} - \mathbf{A}^{-1} \mathbf{B})]^{-1}|| : ||\mathbf{A}^{-1}|| \leqslant \frac{\alpha}{1 - \alpha \beta}.$$</p><p>注: 这里的定理 1.8 如下</p><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210521100526.png"></p><p>复习一下, 这里的非奇异指的是 $det(\mathbf{I} - \mathbf{A}) \neq 0$.</p><h2 id="考试知识点整理"><a href="#考试知识点整理" class="headerlink" title="考试知识点整理"></a>考试知识点整理</h2><h3 id="范数"><a href="#范数" class="headerlink" title="范数"></a>范数</h3><p><img src="https://cdn.jsdelivr.net/gh/fanlumaster/BlogMaps@master/blogs/pictures/20210520202427.png"></p>]]></content>
    
    
    <categories>
      
      <category>计算方法</category>
      
    </categories>
    
    
    <tags>
      
      <tag>未竟</tag>
      
      <tag>计算方法</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>测试数学公式</title>
    <link href="/2021/05/21/%E6%B5%8B%E8%AF%95%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/"/>
    <url>/2021/05/21/%E6%B5%8B%E8%AF%95%E6%95%B0%E5%AD%A6%E5%85%AC%E5%BC%8F/</url>
    
    <content type="html"><![CDATA[<p>测试一下数学公式的渲染哈</p><p>测试行内公式 $||\mathbf{A}||_{\infty} &#x3D; ?$.</p><p>测试段公式</p><p>$$A^2 + B^2 &#x3D; C^2$$</p>]]></content>
    
    
    <categories>
      
      <category>草稿</category>
      
    </categories>
    
    
    <tags>
      
      <tag>草稿</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Hello World</title>
    <link href="/2021/05/20/hello-world/"/>
    <url>/2021/05/20/hello-world/</url>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo new <span class="hljs-string">&quot;My New Post&quot;</span><br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo server<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo generate<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo deploy<br></code></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
    
  </entry>
  
  
  
  
</search>
